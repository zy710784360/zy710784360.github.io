window.__require=function e(t,i,n){function o(c,s){if(!i[c]){if(!t[c]){var l=c.split("/");if(l=l[l.length-1],!t[l]){var r="function"==typeof __require&&__require;if(!s&&r)return r(l,!0);if(a)return a(l,!0);throw new Error("Cannot find module '"+c+"'")}}var g=i[c]={exports:{}};t[c][0].call(g.exports,function(e){return o(t[c][1][e]||e)},g,g.exports,e,t,i,n)}return i[c].exports}for(var a="function"==typeof __require&&__require,c=0;c<n.length;c++)o(n[c]);return o}({1:[function(e,t,i){var n=e("util/"),o=Array.prototype.slice,a=Object.prototype.hasOwnProperty,c=t.exports=h;function s(e,t){return n.isUndefined(t)?""+t:n.isNumber(t)&&!isFinite(t)?t.toString():n.isFunction(t)||n.isRegExp(t)?t.toString():t}function l(e,t){return n.isString(e)?e.length<t?e:e.slice(0,t):e}function r(e){return l(JSON.stringify(e.actual,s),128)+" "+e.operator+" "+l(JSON.stringify(e.expected,s),128)}function g(e,t,i,n,o){throw new c.AssertionError({message:i,actual:e,expected:t,operator:n,stackStartFunction:o})}function h(e,t){e||g(e,!0,t,"==",c.ok)}function d(e,t){if(e===t)return!0;if(n.isBuffer(e)&&n.isBuffer(t)){if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}return n.isDate(e)&&n.isDate(t)?e.getTime()===t.getTime():n.isRegExp(e)&&n.isRegExp(t)?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:n.isObject(e)||n.isObject(t)?m(e,t):e==t}function u(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function m(e,t){if(n.isNullOrUndefined(e)||n.isNullOrUndefined(t))return!1;if(e.prototype!==t.prototype)return!1;if(n.isPrimitive(e)||n.isPrimitive(t))return e===t;var i=u(e),a=u(t);if(i&&!a||!i&&a)return!1;if(i)return d(e=o.call(e),t=o.call(t));var c,s,l=b(e),r=b(t);if(l.length!=r.length)return!1;for(l.sort(),r.sort(),s=l.length-1;s>=0;s--)if(l[s]!=r[s])return!1;for(s=l.length-1;s>=0;s--)if(!d(e[c=l[s]],t[c]))return!1;return!0}function p(e,t){return!(!e||!t)&&("[object RegExp]"==Object.prototype.toString.call(t)?t.test(e):e instanceof t||!0===t.call({},e))}function f(e,t,i,o){var a;n.isString(i)&&(o=i,i=null);try{t()}catch(e){a=e}if(o=(i&&i.name?" ("+i.name+").":".")+(o?" "+o:"."),e&&!a&&g(a,i,"Missing expected exception"+o),!e&&p(a,i)&&g(a,i,"Got unwanted exception"+o),e&&a&&i&&!p(a,i)||!e&&a)throw a}c.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=r(this),this.generatedMessage=!0);var t=e.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var i=new Error;if(i.stack){var n=i.stack,o=t.name,a=n.indexOf("\n"+o);if(a>=0){var c=n.indexOf("\n",a+1);n=n.substring(c+1)}this.stack=n}}},n.inherits(c.AssertionError,Error),c.fail=g,c.ok=h,c.equal=function(e,t,i){e!=t&&g(e,t,i,"==",c.equal)},c.notEqual=function(e,t,i){e==t&&g(e,t,i,"!=",c.notEqual)},c.deepEqual=function(e,t,i){d(e,t)||g(e,t,i,"deepEqual",c.deepEqual)},c.notDeepEqual=function(e,t,i){d(e,t)&&g(e,t,i,"notDeepEqual",c.notDeepEqual)},c.strictEqual=function(e,t,i){e!==t&&g(e,t,i,"===",c.strictEqual)},c.notStrictEqual=function(e,t,i){e===t&&g(e,t,i,"!==",c.notStrictEqual)},c.throws=function(e,t,i){f.apply(this,[!0].concat(o.call(arguments)))},c.doesNotThrow=function(e,t){f.apply(this,[!1].concat(o.call(arguments)))},c.ifError=function(e){if(e)throw e};var b=Object.keys||function(e){var t=[];for(var i in e)a.call(e,i)&&t.push(i);return t}},{"util/":4}],2:[function(e,t,i){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}},{}],3:[function(e,t,i){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],4:[function(e,t,i){(function(t,n){var o=/%[sdj%]/g;i.format=function(e){if(!C(e)){for(var t=[],i=0;i<arguments.length;i++)t.push(s(arguments[i]));return t.join(" ")}i=1;for(var n=arguments,a=n.length,c=String(e).replace(o,function(e){if("%%"===e)return"%";if(i>=a)return e;switch(e){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(e){return"[Circular]"}default:return e}}),l=n[i];i<a;l=n[++i])y(l)||!B(l)?c+=" "+l:c+=" "+s(l);return c},i.deprecate=function(e,o){if(N(n.process))return function(){return i.deprecate(e,o).apply(this,arguments)};if(!0===t.noDeprecation)return e;var a=!1;return function(){if(!a){if(t.throwDeprecation)throw new Error(o);t.traceDeprecation?console.trace(o):console.error(o),a=!0}return e.apply(this,arguments)}};var a,c={};function s(e,t){var n={seen:[],stylize:r};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),_(t)?n.showHidden=t:t&&i._extend(n,t),N(n.showHidden)&&(n.showHidden=!1),N(n.depth)&&(n.depth=2),N(n.colors)&&(n.colors=!1),N(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=l),h(n,e,n.depth)}function l(e,t){var i=s.styles[t];return i?"\x1b["+s.colors[i][0]+"m"+e+"\x1b["+s.colors[i][1]+"m":e}function r(e,t){return e}function g(e){var t={};return e.forEach(function(e,i){t[e]=!0}),t}function h(e,t,n){if(e.customInspect&&t&&x(t.inspect)&&t.inspect!==i.inspect&&(!t.constructor||t.constructor.prototype!==t)){var o=t.inspect(n,e);return C(o)||(o=h(e,o,n)),o}var a=d(e,t);if(a)return a;var c=Object.keys(t),s=g(c);if(e.showHidden&&(c=Object.getOwnPropertyNames(t)),T(t)&&(c.indexOf("message")>=0||c.indexOf("description")>=0))return u(t);if(0===c.length){if(x(t)){var l=t.name?": "+t.name:"";return e.stylize("[Function"+l+"]","special")}if(S(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(E(t))return e.stylize(Date.prototype.toString.call(t),"date");if(T(t))return u(t)}var r,_="",y=!1,v=["{","}"];(b(t)&&(y=!0,v=["[","]"]),x(t))&&(_=" [Function"+(t.name?": "+t.name:"")+"]");return S(t)&&(_=" "+RegExp.prototype.toString.call(t)),E(t)&&(_=" "+Date.prototype.toUTCString.call(t)),T(t)&&(_=" "+u(t)),0!==c.length||y&&0!=t.length?n<0?S(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),r=y?m(e,t,n,s,c):c.map(function(i){return p(e,t,n,s,i,y)}),e.seen.pop(),f(r,_,v)):v[0]+_+v[1]}function d(e,t){if(N(t))return e.stylize("undefined","undefined");if(C(t)){var i="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(i,"string")}return v(t)?e.stylize(""+t,"number"):_(t)?e.stylize(""+t,"boolean"):y(t)?e.stylize("null","null"):void 0}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function m(e,t,i,n,o){for(var a=[],c=0,s=t.length;c<s;++c)P(t,String(c))?a.push(p(e,t,i,n,String(c),!0)):a.push("");return o.forEach(function(o){o.match(/^\d+$/)||a.push(p(e,t,i,n,o,!0))}),a}function p(e,t,i,n,o,a){var c,s,l;if((l=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),P(n,o)||(c="["+o+"]"),s||(e.seen.indexOf(l.value)<0?(s=y(i)?h(e,l.value,null):h(e,l.value,i-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),N(c)){if(a&&o.match(/^\d+$/))return s;(c=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(c=c.substr(1,c.length-2),c=e.stylize(c,"name")):(c=c.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),c=e.stylize(c,"string"))}return c+": "+s}function f(e,t,i){return e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?i[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+i[1]:i[0]+t+" "+e.join(", ")+" "+i[1]}function b(e){return Array.isArray(e)}function _(e){return"boolean"==typeof e}function y(e){return null===e}function v(e){return"number"==typeof e}function C(e){return"string"==typeof e}function N(e){return void 0===e}function S(e){return B(e)&&"[object RegExp]"===I(e)}function B(e){return"object"==typeof e&&null!==e}function E(e){return B(e)&&"[object Date]"===I(e)}function T(e){return B(e)&&("[object Error]"===I(e)||e instanceof Error)}function x(e){return"function"==typeof e}function I(e){return Object.prototype.toString.call(e)}function k(e){return e<10?"0"+e.toString(10):e.toString(10)}i.debuglog=function(e){if(N(a)&&(a=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!c[e])if(new RegExp("\\b"+e+"\\b","i").test(a)){var n=t.pid;c[e]=function(){var t=i.format.apply(i,arguments);console.error("%s %d: %s",e,n,t)}}else c[e]=function(){};return c[e]},i.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},i.isArray=b,i.isBoolean=_,i.isNull=y,i.isNullOrUndefined=function(e){return null==e},i.isNumber=v,i.isString=C,i.isSymbol=function(e){return"symbol"==typeof e},i.isUndefined=N,i.isRegExp=S,i.isObject=B,i.isDate=E,i.isError=T,i.isFunction=x,i.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},i.isBuffer=e("./support/isBuffer");var w=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function D(){var e=new Date,t=[k(e.getHours()),k(e.getMinutes()),k(e.getSeconds())].join(":");return[e.getDate(),w[e.getMonth()],t].join(" ")}function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}i.log=function(){console.log("%s - %s",D(),i.format.apply(i,arguments))},i.inherits=e("inherits"),i._extend=function(e,t){if(!t||!B(t))return e;for(var i=Object.keys(t),n=i.length;n--;)e[i[n]]=t[i[n]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":3,_process:5,inherits:2}],5:[function(e,t,i){var n,o,a=t.exports={};function c(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(e){if(n===setTimeout)return setTimeout(e,0);if((n===c||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}function r(e){if(o===clearTimeout)return clearTimeout(e);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{return o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(function(){try{n="function"==typeof setTimeout?setTimeout:c}catch(e){n=c}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(e){o=s}})();var g,h=[],d=!1,u=-1;function m(){d&&g&&(d=!1,g.length?h=g.concat(h):u=-1,h.length&&p())}function p(){if(!d){var e=l(m);d=!0;for(var t=h.length;t;){for(g=h,h=[];++u<t;)g&&g[u].run();u=-1,t=h.length}g=null,d=!1,r(e)}}function f(e,t){this.fun=e,this.array=t}function b(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];h.push(new f(e,t)),1!==h.length||d||l(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=b,a.addListener=b,a.once=b,a.off=b,a.removeListener=b,a.removeAllListeners=b,a.emit=b,a.prependListener=b,a.prependOnceListener=b,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],CircleJoinRoomUserItem:[function(e,t,i){"use strict";cc._RF.push(t,"1f686u4PghCmo5866iDTojN","CircleJoinRoomUserItem"),cc.Class({extends:cc.Component,properties:{whenEmptyBgNode:cc.Node,nameLabel:cc.Label,scoreLabel:cc.Label,avatarSP:cc.Sprite},init:function(e){this.user=e,this.user?(this.nameLabel.string=this.user.name,this.scoreLabel.string=this.user.score+this.user.sourceScore,cc.global.util.setHeadimg(this.avatarSP.node,this.user.realHeadimg),parseInt(this.user.score+this.user.sourceScore)>=0?this.scoreLabel.node.color=new cc.Color(26,193,80):this.scoreLabel.node.color=new cc.Color(248,20,36),this.whenEmptyBgNode.opacity=0,this.nameLabel.node.opacity=255,this.scoreLabel.node.opacity=255,this.avatarSP.node.opacity=255):(this.whenEmptyBgNode.opacity=255,this.nameLabel.node.opacity=0,this.scoreLabel.node.opacity=0,this.avatarSP.node.opacity=0)},start:function(){}}),cc._RF.pop()},{}],CircleRoleBtn:[function(e,t,i){"use strict";cc._RF.push(t,"fa983V7StdO7Jftu03JgJ/Y","CircleRoleBtn");var n=["Creator","Admin","Partner","Common","CreateRoomRole","FundPrepaidRole","FundBillRole"],o={needCreateRoomRole:"create_room_role",needFundPrepaidRole:"fund_prepaid_role",needFundBillRole:"fund_bill_role"};cc.Class({extends:cc.Component,properties:{needCreator:!1,needAdmin:!1,needPartner:!1,needCommon:!1,needCreateRoomRole:!1,needFundPrepaidRole:!1,needFundBillRole:!1},onLoad:function(){var e=this;n.some(function(t){if(e["need"+t])return e.hasLimit=!0,!0})},start:function(){this._timer=setInterval(this.check.bind(this),0)},onDestroy:function(){clearInterval(this._timer)},check:function(){if(cc.global.util.circleUserinfo&&cc.global.util.circleUserinfo!=this._circleUserInfo){if(!this.hasLimit)return void(this.node.active=!0);this._circleUserInfo=cc.global.util.circleUserinfo;var e=parseInt(this._circleUserInfo.is_admin);for(var t in o){var i=o[t];if(this[t])if(1==this._circleUserInfo[i]){if(e)return void(this.node.active=!0)}else if(2==this._circleUserInfo[i]){if(2==this._circleUserInfo.user_role)return void(this.node.active=!0)}else if(3==this._circleUserInfo[i])return void(this.node.active=!0)}if(this.needAdmin&&e)return void(this.node.active=!0);if(this.needCreator&&1==this._circleUserInfo.user_role)return void(this.node.active=!0);if(this.needPartner&&2==this._circleUserInfo.user_role)return void(this.node.active=!0);if(this.needCommon&&3==this._circleUserInfo.user_role)return void(this.node.active=!0);this.node.active=!1}}}),cc._RF.pop()},{}],CircleRoleTag:[function(e,t,i){"use strict";cc._RF.push(t,"08854+EON1Fo4uKGK7qY0j2","CircleRoleTag"),cc.Class({extends:cc.Component,properties:{partnerSF:cc.SpriteFrame,creatorSF:cc.SpriteFrame,roleNode:cc.Node,adminNode:cc.Node},setCircleUserInfo:function(e){this.circleUserInfo=e},getDefaultCircleUserInfo:function(){return cc.global.util.circleUserinfo},getCircleUserInfo:function(){return this.circleUserInfo?this.circleUserInfo:this.getDefaultCircleUserInfo()},updateTag:function(e){parseInt(e.is_admin)?this.adminNode&&(this.adminNode.active=!0):this.adminNode&&(this.adminNode.active=!1),1==e.user_role?(this.roleNode.active=!0,this.roleNode.getComponent(cc.Sprite).spriteFrame=this.creatorSF):2==e.user_role?(this.roleNode.active=!0,this.roleNode.getComponent(cc.Sprite).spriteFrame=this.partnerSF):this.roleNode.active=!1},update:function(){var e=this.getCircleUserInfo();e&&this._circleUserInfo!=e&&(this._circleUserInfo=e,this.updateTag(e))}}),cc._RF.pop()},{}],CircleRoomType:[function(e,t,i){"use strict";cc._RF.push(t,"dd6f3gSBHBLy6awmemoGUqC","CircleRoomType"),cc.Class({extends:cc.Component,properties:{label:cc.Label},init:function(e,t){this.filterRoomTypeEvent=t;var i=e.split("-");if("sss"==i[0]){var n="";switch(i[2]){case"0":n="\u4e0d\u52a0\u8272";break;case"1":n="\u52a0\u4e00\u8272";break;case"2":n="\u52a0\u4e24\u8272"}var o="";switch(i[3]){case"0":o="\u4e0d\u52a0\u9a6c";break;case"1":o="\u968f\u673a\u9a6c";break;case"2":o="\u9ed1\u6843A\u9a6c";break;case"3":o="\u9ed1\u68433\u9a6c";break;case"4":o="\u9ed1\u68435\u9a6c"}this.label.string=n+o+i[1]+"\u5e95"}else"qzmj"==i[0]?this.label.string="\u6cc9\u5dde\u9ebb\u5c06"+i[1]+"\u5e95":"pdk"==i[0]&&(this.label.string="\u8dd1\u5f97\u5feb"+i[1]+"\u5e95")},filterRoomTypeEvent:function(e){this.filterRoomTypeEvent(e)},start:function(){}}),cc._RF.pop()},{}],CircleRoom:[function(e,t,i){"use strict";cc._RF.push(t,"560e1TmRc5IhpiYQDKLAzxF","CircleRoom");var n=e("../global/item_generator");cc.Class({extends:cc.Component,properties:{desktopSprite:cc.Sprite,avatarListSSS6:cc.Node,avatarListSSS8:cc.Node,avatarListQZMJ2:cc.Node,avatarListQZMJ4:cc.Node,avatarListPDK2:cc.Node,avatarListPDK3:cc.Node,titleLabel:cc.Label,typeLabel:cc.Label,desktopSF:[cc.SpriteFrame],roomNumInfoLabel:cc.Label,playTypeLabel:cc.Label},init:function(e){this.room=e,10==e.base_info.roomType&&(e.roomType=e.base_info.roomType,e.room_no=e.roomNo,e.base_info.yuanbao=1);var t=e.base_info.yuanbao;this.titleLabel.string="\u5e95\uff1a"+t;var i=e.gameIndex>0?"\u5df2\u5f00\u5c40":"\u672a\u5f00\u5c40";3==e.gid&&e.base_info.keScore?this.typeLabel.string="1\u8bfe-"+e.base_info.keScore+"\u5206":8==e.roomType?this.typeLabel.string=i:this.typeLabel.string=i+e.gameIndex+"/"+e.gameCount,10==e.roomType?this.roomNumInfoLabel.string="\u7b2c"+e.room_num_info+"\u684c("+e.room_no+")":this.roomNumInfoLabel.string="";var n="";switch(parseInt(e.base_info.color)){case 0:n="\u4e0d\u52a0\u8272";break;case 1:n="\u52a0\u4e00\u8272";break;case 2:n="\u52a0\u4e24\u8272"}var o="";switch(parseInt(e.base_info.jiama)){case 0:o="\u4e0d\u52a0\u9a6c";break;case 1:o="\u968f\u673a\u9a6c";break;case 2:o="\u9ed1\u6843A\u9a6c";break;case 3:o="\u9ed1\u68433\u9a6c";break;case 4:o="\u9ed1\u68435\u9a6c"}this.playTypeLabel.string=n+" "+o;var a=null;switch(this.avatarListSSS8.active=!1,this.avatarListQZMJ2.active=!1,this.avatarListQZMJ4.active=!1,this.avatarListPDK2.active=!1,this.avatarListPDK3.active=!1,e.gid){case 3:2==e.base_info.player?(this.desktopSprite.spriteFrame=this.desktopSF[0],a=this.avatarListQZMJ2):(this.desktopSprite.spriteFrame=this.desktopSF[8],a=this.avatarListQZMJ4);break;case 4:this.desktopSprite.spriteFrame=this.desktopSF[1],a=this.avatarListSSS8;break;case 1:this.desktopSprite.spriteFrame=this.desktopSF[2];break;case 6:this.desktopSprite.spriteFrame=this.desktopSF[3];break;case 15:this.desktopSprite.spriteFrame=this.desktopSF[4];break;case 19:this.desktopSprite.spriteFrame=this.desktopSF[5];break;case 18:this.desktopSprite.spriteFrame=this.desktopSF[6];break;case 20:this.desktopSprite.spriteFrame=this.desktopSF[7];break;case 21:2==e.base_info.player?(this.desktopSprite.spriteFrame=this.desktopSF[4],a=this.avatarListPDK2):(this.desktopSprite.spriteFrame=this.desktopSF[9],a=this.avatarListPDK3)}a&&(a.active=!0,this.displayUsers(Object.values(e.userList),a))},displayUsers:function(e,t){n.item_generator.getInstance().executePreFrame(n.item_generator.getInstance()._getItemGenerator(t,e,null,function(t,i){cc.global.util.setHeadimg(t.children[0].children[0],e[i].realHeadimg)}),2,this)},start:function(){},showFrm:function(e,t){var i=null;switch(t){case"frm_circleJoinRoom":t="frm_circleJoinRoom",i={roomInfo:this.room},console.log(e)}console.log("\u6253\u5f00\u5f39\u7a97:"+t),cc.global.pop_mgr.showFrm({name:t,customData:i})}}),cc._RF.pop()},{"../global/item_generator":"item_generator"}],CircleUserLabel:[function(e,t,i){"use strict";cc._RF.push(t,"adeeaR9ERZPl50Pm2CuAvNE","CircleUserLabel"),cc.Class({extends:cc.Component,properties:{key:"",parseFloat:!1},setCircleUserInfo:function(e){this.circleUserInfo=e,this.updateLabel()},getDefaultCircleUserInfo:function(){return cc.global.util.circleUserinfo},getCircleUserInfo:function(){return this.circleUserInfo?this.circleUserInfo:this.getDefaultCircleUserInfo()},updateLabel:function(){var e=this.getValue();this._lastValue=e,this.parseFloat&&(e=parseFloat(e)),this.getComponent(cc.Label).string=e},getValue:function(){var e=this.getCircleUserInfo();return e?this["get"+this.key]?this["get"+this.key]():e[this.key]?e[this.key]:"":""},getInviteCode:function(){var e=this.getCircleUserInfo();return 3==e.user_role?e.superior_user_code:e.user_code},getInviteCodeName:function(){return 3==this.getCircleUserInfo().user_role?"\u4e0a\u7ea7\u9080\u8bf7\u7801":"\u6211\u7684\u9080\u8bf7\u7801"},update:function(){var e=this.getValue();this._lastValue!=e&&this.updateLabel()}}),cc._RF.pop()},{}],"HotUpdate-game":[function(e,t,i){"use strict";cc._RF.push(t,"6285fgINGtCtpYd5f7YzEOO","HotUpdate-game"),cc.Class({extends:cc.Component,properties:{manifestUrl:{type:cc.Asset,default:[]},_updating:!1,_canRetry:!1,_sta:0,_storagePath:"",_progressFun:null,_updateMsgFun:null},checkCb:function(e){cc.log("Code: "+e.getEventCode());var t="";switch(e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:t="\u672a\u627e\u5230\u672c\u5730\u7248\u672c\u6587\u4ef6\uff0c\u8bf7\u91cd\u8bd5",this._sta=-1;break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:t="\u83b7\u53d6\u8fdc\u7a0b\u7248\u672c\u6587\u4ef6\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5",this._sta=-1;break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:t="\u5df2\u662f\u6700\u65b0\u7248\u672c\uff0c\u4e0d\u9700\u8981\u66f4\u65b0",this._sta=1;break;case jsb.EventAssetsManager.NEW_VERSION_FOUND:t="\u68c0\u6d4b\u5230\u65b0\u7248\u672c\uff0c\u51c6\u5907\u5f00\u59cb\u66f4\u65b0....",this._sta=2;break;default:return}this._am.setEventCallback(null),this._checkListener=null,this._updating=!1,cc.log(t),this._updateMsgFun(t,this._sta,e.getTotalBytes())},updateCb:function(e){var t="",i=!1;switch(e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:t="\u672a\u627e\u5230\u672c\u5730\u7248\u672c\u6587\u4ef6\uff0c\u8bf7\u91cd\u8bd5",cc.log("No local manifest file found, hot update skipped."),this._sta=-1;break;case jsb.EventAssetsManager.UPDATE_PROGRESSION:if(null!=this._progressFun){var n=new Object;n.percent=e.getPercent(),n.filePercent=e.getPercentByFile(),n.fileMsg=e.getDownloadedFiles()+" / "+e.getTotalFiles(),this._progressFun(n)}if(e.getAssetId()){t="Updated file:"+e.getAssetId();var o=e.getAssetId(),a=o.substring(o.lastIndexOf("."));".jsc"!=a&&".js"!=a||(this.updateJs=!0)}2==this._sta&&(this._sta=0);break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:t="\u83b7\u53d6\u8fdc\u7a0b\u7248\u672c\u6587\u4ef6\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5",this._sta=-1;break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:t="\u5df2\u662f\u6700\u65b0\u7248\u672c\uff0c\u4e0d\u9700\u8981\u66f4\u65b0",this._sta=1;break;case jsb.EventAssetsManager.UPDATE_FINISHED:t="\u66f4\u65b0\u7ed3\u675f",cc.log("Update finished. "+e.getMessage()+" event is "+JSON.stringify(e)),this._sta=3,i=!0;break;case jsb.EventAssetsManager.UPDATE_FAILED:t="\u66f4\u65b0\u5931\u8d25",this._updating=!1,this._canRetry=!0;break;case jsb.EventAssetsManager.ERROR_UPDATING:t="Asset update error:"+e.getAssetId()+", "+e.getMessage();break;case jsb.EventAssetsManager.ERROR_DECOMPRESS:t=e.getMessage()}if(this._updateMsgFun(t,this._sta),!this._updating&&this._canRetry&&(this._canRetry=!1,cc.log("Retry failed Assets..."),this._am.downloadFailedAssets()),this._sta&&(this._am.setEventCallback(null),this._updateListener=null,this._updating=!1),i&&this.updateJs){this._am.setEventCallback(null),this._updateListener=null;var c=jsb.fileUtils.getSearchPaths(),s=this._am.getLocalManifest().getSearchPaths();Array.prototype.unshift.apply(c,s),cc.sys.localStorage.setItem("HotUpdateSearchPaths",JSON.stringify(c)),jsb.fileUtils.setSearchPaths(c);var l={};l.ip=cc.global.net.ip,l.setting=cc.global.util.setting,l.userinfo=cc.global.util.userinfo,l.time=Date.now(),cc.sys.localStorage.setItem("restartData",JSON.stringify(l)),cc.audioEngine.stopAll(),cc.game.restart()}},retry:function(){!this._updating&&this._canRetry&&(this._canRetry=!1,cc.log("Retry failed Assets..."),this._am.downloadFailedAssets())},checkUpdate:function(){var e=new Object;if(this._updating)return cc.log("Checking or updating ..."),e={sta:2,msg:"\u6b63\u5728\u68c0\u67e5\u6e38\u620f\u7248\u672c"};if(!this._am.getLocalManifest()||!this._am.getLocalManifest().isLoaded())return cc.log("Failed to load local manifest ..."),e={sta:-1,msg:"\u52a0\u8f7d\u672c\u5730\u7248\u672c\u9a8c\u8bc1\u6587\u4ef6\u5931\u8d25"};var t=this._am.getLocalManifest();return cc.log("local mainfest url is "+t.getPackageUrl()),this._am.setEventCallback(this.checkCb.bind(this)),this._am.checkUpdate(),this._updating=!0,e},hotUpdate:function(){this._am&&!this._updating&&(this._am.setEventCallback(this.updateCb.bind(this)),this._failCount=0,this._am.update(),this._updating=!0)},startHotUpdate:function(e,t){if(this._progressFun=e,this._updateMsgFun=t,this._am){var i=this.checkUpdate();i.hasOwnProperty("sta")&&this._updateMsgFun(i.msg,i.sta)}else{var n=this;setTimeout(function(){n.startHotUpdate(e,t)},1e3)}},getVersion:function(){if(this._am)return this._am.getLocalManifest().getVersion()},onLoad:function(){},initComponent:function(){if(cc.sys.isNative){this._storagePath=(jsb.fileUtils?jsb.fileUtils.getWritablePath():"/")+cc.global.util.childGame.storagePath,cc.log("Storage path for remote asset : "+this._storagePath),this.updateJs=!1;try{this._am=new jsb.AssetsManager(this.manifestUrl[cc.global.util.childGame.index].nativeUrl,this._storagePath,function(e,t){cc.log("JS Custom Version Compare: version A is "+e+", version B is "+t);for(var i=e.split("."),n=t.split("."),o=0;o<i.length;++o){var a=parseInt(i[o]),c=parseInt(n[o]||0);if(a!==c)return a-c}return n.length>i.length?-1:0})}catch(e){cc.log("error msg is "+JSON.stringify(e))}this._am.setVerifyCallback(function(e,t){t.compressed,t.md5,t.path,t.size;return!0}),cc.log("Hot update is ready, please check or directly update."),cc.sys.os===cc.sys.OS_ANDROID&&(this._am.setMaxConcurrentTask(10),cc.log("Max concurrent tasks count have been limited to 2"))}},checkVersion:function(e,t){if(cc.sys.isNative&&cc.global.util.isChildMode){var i=!0;if(this.gameVersion&&this.gameVersion["time_"+e]&&Date.now()-this.gameVersion["time_"+e]<3e5&&(i=!1),i){this.updateBackFun=t;var n=new Object;n.gid=e,n.storagePath=cc.global.util.getSceneNameFromGid(e),n.index=parseInt(e)-1,n.gid=e,cc.global.util.childGame=n,this.initComponent(),this.startHotUpdate(this.progressFun,this.msgFun)}else console.log("\u68c0\u6d4b\u72b6\u6001\u672a\u8fc7\u671f"),t&&t()}else t&&t()},msgFun:function(e,t){var i=this;if(2==t){var n=cc.instantiate(cc.global.util.frm_tip);n.getComponent("frm_tip").initView({name:"frm_hotUpdateTip",msg:"\u68c0\u6d4b\u5230\u65b0\u7248\u672c\uff0c\u8bf7\u7acb\u5373\u66f4\u65b0",hasClose:!0,btns:[{name:"\u7acb\u5373\u66f4\u65b0",onClick:function(){i.node.getChildByName("hotUpdate").active=!0,i.hotUpdate(),n.getComponent("frm_tip").onCloseClick()}}]}),this.node.addChild(n),cc.global.util.closeAlert()}else if(-1==t){var o=cc.instantiate(cc.global.util.frm_tip);o.getComponent("frm_tip").initView({msg:"\u66f4\u65b0\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5",hasClose:!0,btns:[{name:"\u786e\u5b9a",onClick:function(){i.node.getChildByName("hotUpdate").active=!0,i.hotUpdate(),o.getComponent("frm_tip").onCloseClick()}}]}),this.node.addChild(o)}else 1==t?(this.node.getChildByName("hotUpdate").active=!1,console.log("\u5df2\u7ecf\u662f\u6700\u65b0\u7248\u672c!"),this.node.getComponent("dating").updateBackFun()):3==t&&(this.node.getChildByName("hotUpdate").active=!1,console.log("\u66f4\u65b0\u5b8c\u6bd5!"))},progressFun:function(e){if(e.filePercent>=0){var t=this.node.getChildByName("hotUpdate").getChildByName("progress");t.active=!0,t.getComponent(cc.ProgressBar).progress=e.filePercent,this.node.getChildByName("hotUpdate").getChildByName("value").getComponent(cc.Label).string=Math.floor(100*parseFloat(e.filePercent).toFixed(2))+"%("+e.fileMsg+")"}},onDestroy:function(){this._updateListener&&(this._am.setEventCallback(null),this._updateListener=null)}}),cc._RF.pop()},{}],HotUpdate:[function(e,t,i){"use strict";cc._RF.push(t,"878b52fpSpP/Ko7ex4Hji0W","HotUpdate"),cc.Class({extends:cc.Component,properties:{manifestUrl:{type:cc.Asset,default:null},_updating:!1,_canRetry:!1,_sta:0,_storagePath:"",_progressFun:null,_updateMsgFun:null},checkCb:function(e){cc.log("Code: "+e.getEventCode());var t="";switch(e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:t="\u672a\u627e\u5230\u672c\u5730\u7248\u672c\u6587\u4ef6\uff0c\u66f4\u65b0\u88ab\u8df3\u8fc7",this._sta=-1;break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:t="\u83b7\u53d6\u8fdc\u7a0b\u7248\u672c\u6587\u4ef6\u5931\u8d25\uff0c\u66f4\u65b0\u88ab\u8df3\u8fc7",this._sta=-1;break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:t="\u5df2\u662f\u6700\u65b0\u7248\u672c\uff0c\u4e0d\u9700\u8981\u66f4\u65b0",this._sta=1;break;case jsb.EventAssetsManager.NEW_VERSION_FOUND:t="\u68c0\u6d4b\u5230\u65b0\u7248\u672c\uff0c\u51c6\u5907\u5f00\u59cb\u66f4\u65b0....",this._sta=2;break;default:return}this._am.setEventCallback(null),this._checkListener=null,this._updating=!1,cc.log(t),cc.log(e.getTotalBytes()+";"+e.getTotalFiles()+";"+e.getDownloadedBytes()),this._updateMsgFun(t,this._sta,e.getTotalBytes())},updateCb:function(e){var t="",i=!1;switch(e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:t="\u672a\u627e\u5230\u672c\u5730\u7248\u672c\u6587\u4ef6\uff0c\u66f4\u65b0\u88ab\u8df3\u8fc7",cc.log("No local manifest file found, hot update skipped."),this._sta=-1;break;case jsb.EventAssetsManager.UPDATE_PROGRESSION:if(null!=this._progressFun){var n=new Object;n.percent=e.getPercent(),n.filePercent=e.getPercentByFile(),n.fileMsg=e.getDownloadedFiles()+" / "+e.getTotalFiles(),this._progressFun(n)}t="\u6b63\u5728\u66f4\u65b0",2==this._sta&&(this._sta=0);break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:t="\u83b7\u53d6\u8fdc\u7a0b\u7248\u672c\u6587\u4ef6\u5931\u8d25\uff0c\u66f4\u65b0\u88ab\u8df3\u8fc7",this._sta=-1;break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:t="\u5df2\u662f\u6700\u65b0\u7248\u672c\uff0c\u4e0d\u9700\u8981\u66f4\u65b0",this._sta=1;break;case jsb.EventAssetsManager.UPDATE_FINISHED:t="\u66f4\u65b0\u7ed3\u675f",cc.log("Update finished. "+e.getMessage()+" event is "+JSON.stringify(e)),i=!0;break;case jsb.EventAssetsManager.UPDATE_FAILED:t="\u66f4\u65b0\u5931\u8d25",this._updating=!1,this._canRetry=!0;break;case jsb.EventAssetsManager.ERROR_UPDATING:t="Asset update error:"+e.getAssetId()+", "+e.getMessage();break;case jsb.EventAssetsManager.ERROR_DECOMPRESS:t=e.getMessage()}if(this._updateMsgFun(t,this._sta),!this._updating&&this._canRetry&&(this._canRetry=!1,cc.log("Retry failed Assets..."),this._am.downloadFailedAssets()),this._sta&&(this._am.setEventCallback(null),this._updateListener=null,this._updating=!1),i){this._am.setEventCallback(null),this._updateListener=null;var o=jsb.fileUtils.getSearchPaths(),a=this._am.getLocalManifest().getSearchPaths();cc.log(JSON.stringify(a)),Array.prototype.unshift.apply(o,a),cc.sys.localStorage.setItem("HotUpdateSearchPaths",JSON.stringify(o)),jsb.fileUtils.setSearchPaths(o),cc.audioEngine.stopAll(),cc.game.restart()}},retry:function(){!this._updating&&this._canRetry&&(this._canRetry=!1,cc.log("Retry failed Assets..."),this._am.downloadFailedAssets())},checkUpdate:function(){var e=new Object;if(this._updating)return cc.log("Checking or updating ..."),e={sta:2,msg:"\u6b63\u5728\u68c0\u67e5\u6e38\u620f\u7248\u672c"};if(!this._am.getLocalManifest()||!this._am.getLocalManifest().isLoaded())return cc.log("Failed to load local manifest ..."),e={sta:-1,msg:"\u52a0\u8f7d\u672c\u5730\u7248\u672c\u9a8c\u8bc1\u6587\u4ef6\u5931\u8d25"};var t=this._am.getLocalManifest();return cc.log("local mainfest url is "+t.getPackageUrl()),this._am.setEventCallback(this.checkCb.bind(this)),this._am.checkUpdate(),this._updating=!0,e},hotUpdate:function(){this._am&&!this._updating&&(this._am.setEventCallback(this.updateCb.bind(this)),this._failCount=0,this._am.update(),this._updating=!0)},startHotUpdate:function(e,t){if(this._progressFun=e,this._updateMsgFun=t,this._am){var i=this.checkUpdate();i.hasOwnProperty("sta")&&this._updateMsgFun(i.msg,i.sta)}else{var n=this;setTimeout(function(){n.startHotUpdate(e,t)},1e3)}},getVersion:function(){if(this._am)return this._am.getLocalManifest().getVersion()},onLoad:function(){if(cc.sys.isNative){this._storagePath=(jsb.fileUtils?jsb.fileUtils.getWritablePath():"/")+"dating-remote-asset";this._am=new jsb.AssetsManager(this.manifestUrl.nativeUrl,this._storagePath,function(e,t){cc.log("JS Custom Version Compare: version A is "+e+", version B is "+t);for(var i=e.split("."),n=t.split("."),o=0;o<i.length;++o){var a=parseInt(i[o]),c=parseInt(n[o]||0);if(a!==c)return a-c}return n.length>i.length?-1:0}),this._am.setVerifyCallback(function(e,t){t.compressed,t.md5,t.path,t.size;return!0}),cc.log("Hot update is ready, please check or directly update."),cc.sys.os===cc.sys.OS_ANDROID&&(this._am.setMaxConcurrentTask(2),cc.log("Max concurrent tasks count have been limited to 2"))}},onDestroy:function(){this._updateListener&&(this._am.setEventCallback(null),this._updateListener=null)}}),cc._RF.pop()},{}],Http:[function(e,t,i){"use strict";cc._RF.push(t,"7241cdWKbdAWpoo8X2PSPPl","Http");var n=cc.Class({extends:cc.Component,statics:{url:"http://192.168.124.8:8080",sendRequest:function(e,t,i,o,a){var c=cc.loader.getXMLHttpRequest();c.timeout=5e3;var s="?";for(var l in t)"?"!=s&&(s+="&"),s+=l+"="+t[l];null==o&&(o=n.url);var r=o+e+encodeURI(s);return console.log("RequestURL:"+r),a?c.open("POST",r,!0):c.open("GET",r,!0),cc.sys.isNative&&c.setRequestHeader("Accept-Encoding","gzip,deflate","text/html;charset=UTF-8","Content-Type","Authorization"),c.onreadystatechange=function(){if(4===c.readyState)if(c.status>=200&&c.status<300){console.log(c.responseText);var e=null;c.responseText&&(e=JSON.parse(c.responseText)),null!==i&&i(e)}else console.log("\u65e0\u6cd5\u8fde\u63a5,status="+c.status),i(null)},c.send(),c}}});cc._RF.pop()},{}],MenuList:[function(e,t,i){"use strict";cc._RF.push(t,"c8259137nlOiJBF4fjbAO4F","MenuList"),cc.Class({extends:cc.Component,properties:{overlay:cc.Node,btn_show:cc.Node,btn_hide:cc.Node,menuList:cc.Node},start:function(){this.btn_show.active=!0,this.btn_hide.active=!1,this.menuList.active=!1,this.overlay&&(this.overlay.active=!1)},showMoreMenu:function(){this._moreMenuIsShowed?this.hideMoreMenu():(this._moreMenuIsShowed=!0,this.overlay&&(this.overlay.active=!0),this.btn_show.active=!1,this.btn_hide.active=!0,this.menuList.active=!0,this.menuList.opacity=0,this.menuList.scaleY=0,this.menuList.runAction(cc.spawn(cc.fadeIn(.2),cc.scaleTo(.2,1,1))))},hideMoreMenu:function(){this._moreMenuIsShowed=!1,this.overlay&&(this.overlay.active=!1),this.btn_show.active=!0,this.btn_hide.active=!1,this.menuList.runAction(cc.spawn(cc.fadeOut(.2),cc.scaleTo(.2,1,0)))}}),cc._RF.pop()},{}],Net:[function(e,t,i){"use strict";cc._RF.push(t,"fdfac4g+6VBj5waMI6EpBE3","Net");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};null==window.io&&(window.io=e("socket-io")),cc.Class({extends:cc.Component,statics:{ip:"",sio:null,isPinging:!1,fnDisconnect:null,handlers:{},fnRecon:null,addHandler:function(e,t){if(!this.handlers[e]){var i=function(i){"disconnect"!=e&&"string"==typeof i&&(i=JSON.parse(i)),t(i)};this.handlers[e]=i,this.sio&&this.sio.on(e,i)}},connect:function(e,t,i){var n=this;n.fnRecon=i;for(var o in this.sio=window.io.connect(this.ip,{reconnection:!1,"force new connection":!0,transports:["websocket","polling"]}),this.sio.on("reconnect",function(){console.log("reconnection")}),this.sio.on("connect",function(t){n.sio.connected=!0,e(t)}),this.sio.on("disconnect",function(e){console.log("disconnect"),n.lastRecieveTime=Date.now(),cc.global.util.showAlert("\u65ad\u7ebf\u91cd\u8fde\u4e2d"),cc.find("Canvas").emit("disconnectPush",null),n.reconnection()}),this.sio.on("connect_failed",function(){console.log("connect_failed")}),this.sio.on("error",function(){console.log("connect_error"),t()}),this.handlers){var a=this.handlers[o];"function"==typeof a&&("disconnect"==o?this.fnDisconnect=a:this.sio.on(o,a))}this.startHearbeat()},startHearbeat:function(){var e=this;this.sio.on("game_pong",function(){console.log("game_pong"),e.lastRecieveTime=Date.now()}),this.lastRecieveTime=Date.now(),e.isPinging||(e.isPinging=!0,setInterval(function(){e.sio&&(Date.now()-e.lastRecieveTime>1e4?(console.log("timeout!"),e.close()):e.ping())},1e3))},send:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.sio.connected&&(null!=t&&"object"==(void 0===t?"undefined":n(t))&&(i&&cc.global.util.userinfo&&(t.uid=cc.global.util.userinfo.uid,t.token=cc.global.util.userinfo.token),o&&(t.platform=cc.global.util.gameinfo.platform),t=JSON.stringify(t)),this.sio.emit(e+"asd1",t))},ping:function(){this.send("game_ping")},close:function(e){if(this.lastRecieveTime=Date.now(),cc.global.util.showAlert("\u65ad\u7ebf\u91cd\u8fde\u4e2d"),cc.find("Canvas").emit("disconnectPush",null),e&&this.sio)return this.sio.connected=!1,void(this.sio=null);this.reconnection()},reconnection:function(){this.fnRecon()}}}),cc._RF.pop()},{"socket-io":"socket-io"}],NotificationNames:[function(e,t,i){"use strict";var n,o;function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}cc._RF.push(t,"3af98lKpaZGcYBsYmu07kF0","NotificationNames"),Object.defineProperty(i,"__esModule",{value:!0});i.NotificationNames=(o=n=function e(){a(this,e)},n.GET_ALL_ROOM_LIST_PUSH="getAllRoomListPush",n.GET_MY_CLUB_LIST_PUSH="getMyClubListPush",n.REFRESH_CLUB_INFO_PUSH="refreshClubInfoPush",n.TO_TOP_PUSH="toTopPush",n.GET_CLUB_SETTING_PUSH="getClubSettingPush",n.CHANGE_CLUB_SETTING_PUSH="changeClubSettingPush",n.GET_CLUB_MEMBERS_PUSH="getClubMembersPush",n.EXIT_CLUB_PUSH="exitClubPush",n.CLUB_LEADER_OUT_PUSH="clubLeaderOutPush",n.CLUB_LEADER_INVITE_PUSH="clubLeaderInvitePush",n.GET_CLUB_APPLY_LIST_PUSH="getClubApplyListPush",n.CLUB_APPLY_REVIEW_PUSH="clubApplyReviewPush",n.CIRCLE_LIST_EVENT_PUSH="circleListEventPush",n.CREATE_MODIFY_CIRCLE_EVENT_PUSH="createModifyCircleEventPush",n.OFFLINECIRCLE_EVENT_PUSH="offlineCircleEventPush",n.CIRCLE_GENERAL_JOIN_EXIT_EVENT_PUSH="circleGeneralJoinExitEventPush",n.CIRCLE_MEMBER_LIST_EVENT_PUSH="circleMemberInfoListEventPush",n.CIRCLE_PARTNER_LIST_EVENT_PUSH="circlePartnerListEventPush",n.MEMBER_DETAIL_INFO_EVENT_PUSH="memberDetailInfoEventPush",n.ADD_CIRCLE_MEMBER_EVENT_PUSH="addCircleMemberEventPush",n.MGR_SETTING_CIRCLE_EVENT_PUSH="mgrSettingCircleEventPush",n.CIRCLE_BLACK_LIST_EVENT_PUSH="circleBlacklistEventPush",n.CIRCLE_DEL_MEMBER_EVENT_PUSH="circleDelMemberEventPush",n.CIRCLE_PARTNER_ADD_EVENT_PUSH="circlePartnerAddEventPush",n.CIRCLE_MODIFY_STRENTH_EVENT_PUSH="circleModifyStrenthEventPush",n.CIRCLE_STRENTH_LOG_EVENT_PUSH="circleStrenthLogEventPush",n.HISTORY_HP_CHANGE_BY_OPERATE_EVENT_PUSH="historyHpChangeByOperateEventPush",n.CIRCLE_SYS_GLOBAL_EVENT_PUSH="circleSysGlobalEventPush",n.CIRCLE_GET_PROFIT_BALANCE_TO_HP_EVENT_PUSH="circleGetProfitBalanceToHpEventPush",n.CIRCLE_FUND_SAVE_PAY_EVENT_PUSH="circleFundSavePayEventPush",n.CIRCLE_FUND_BILL_DETAIL_EVENT_PUSH="circleFundBillDetailEventPush",n.CIRCLE_EXAM_MSG_INFO_EVENT_PUSH="circleExamMsgInfoEventPush",n.CIRCLE_MBR_ADD_EXIT_EXAM_EVENT_PUSH="circleMbrAddExitExamEventPush",n.CIRCLE_MSG_REMAIN_EVENT_PUSH="circleMsgRemindEventPush",n.DISMISS_CIRCLE_EVENT_PUSH="dismissCircleEventPush",n.TRANSFER_CIRCLE_EVENT_PUSH="transferCircleEventPush",n.RESTART_LOGIN_PUSH="restartLoginPush",n.QUICK_JOIN_ROOM_CIRCLE_EVENT_PUSH="quickJoinRoomCircleEventPush",n.CIRCLE_ROOM_LIST_EVENT_PUSH="circleRoomListEventPush",n.REMOVE_ROOM_CIRCLE_EVENT_PUSH="removeRoomCircleEventPush",n.GET_GAME_SETTING_PUSH="getGameSettingPush",n.GET_ROOM_CARD_PAY_INFO_PUSH="getRoomCardPayInfoPush",n.GET_ROOM_CARD_GAME_LOG_LIST_PUSH="getRoomCardGameLogListPush",n.GET_GAME_LOGS_LIST_PUSH="getGameLogsListPush",n.GET_CLUB_GAME_LOG_LIST_PUSH="getClubGameLogListPush",n.CIRCLE_RECORD_EVENT_PUSH="circleRecordEventPush",n.GET_ROOM_CARD_GAME_LOG_DETAIL_PUSH="getRoomCardGameLogDetailPush",n.CIRCLE_RECORD_INFO_EVENT_PUSH="circleRecordInfoEventPush",n.CHECK_BIND_STATUS_PUSH="checkBindStatusPush",n.USER_BIND_PUSH="userBindPush",n.ON_SHARE_RESULT="onShareResult",n.ON_POP_SHOW="onPopShow",n.ON_POP_HIDE="onPopHide",n.QUICK_ENTRY_ROOM_CIRCLE_EVENT_PUSH="quickEntryRoomCircleEventPush",n.RESET_PARTNER_EVENT_PUSH="resetPartnerEventPush",n.READ_MESSAGE_EVENT_PUSH="readMessageEventPush",n.CIRCLE_VISIT_JOIN_ROOM_EVENT_PUSH="circleVisitJoinRoomEventPush",n.CIRCLE_VISIT_LIST_EVENT_PUSH="circleVisitListEventPush",n.CIRCLE_VISIT_JOIN_GAME_EVENT_PUSH="circleVisitJoinGameEventPush",n.TEA_LISTEVENT_PUSH="tea_listEvent_push",n.TEA_CREATOREVENT_PUSH="tea_creatorEvent_push",n.TEA_JOINEVENT_PUSH="tea_joinEvent_push",n.TEA_MODIFYNAMEEVENT_PUSH="tea_modifyNameEvent_push",n.TEA_MODIFYPLAYEVENT_PUSH="tea_modifyPlayEvent_push",n.TEA_ADDMEMBEREVENT_PUSH="tea_addMemberEvent_push",n.TEA_IMPORTMEMBERLISTEVENT_PUSH="tea_importMemberListEvent_push",n.TEA_IMPORTMEMBEREVENT_PUSH="tea_importMemberEvent_push",n.TEA_CLOSESEVENT_PUSH="tea_closesEvent_push",n.TEA_REMOVEEVENT_PUSH="tea_removeEvent_push",n.TEA_MEMBERLISTEVENT_PUSH="tea_memberListEvent_push",n.TEA_AUDITMEMBEREVENT_PUSH="tea_auditMemberEvent_push",n.TEA_AUDITMEMBERLISTEVENT_PUSH="tea_auditMemberListEvent_push",n.TEA_EXITINFOLISTEVENT_PUSH="tea_exitInfoListEvent_push",n.TEA_ADMINLISTEVENT_PUSH="tea_adminListEvent_push",n.TEA_MODIFYADMINEVENT_PUSH="tea_modifyAdminEvent_push",n.TEA_MYRECORDLISTEVENT_PUSH="tea_myRecordListEvent_push",n.TEA_RECORDLISTEVENT_PUSH="tea_recordListEvent_push",n.TEA_RECORDSTATISLISTEVENT_PUSH="tea_recordStatisListEvent_push",n.TEA_BIGWINNERLISTEVENT_PUSH="tea_bigWinnerListEvent_push",n.TEA_QUICKJOINEVENT_PUSH="tea_quickJoinEvent_push",n.TEA_INFOEVENT_PUSH="tea_infoEvent_push",n.TEA_EXITMEMBEREVENT_PUSH="tea_exitMemberEvent_push",n.TEA_MODIFYINFORECORDEVENT_PUSH="tea_modifyInfoRecordEvent_push",n.TEA_ROOMLISTEVENTEVENT_PUSH="tea_roomListEvent_push",n.TEA_REMOVEROOMEVENT_PUSH="tea_removeRoomEvent_push",n.TEA_DELMEMBEREVENT_PUSH="tea_delMemberEvent_push",n.TEA_JOINROOMEVENT_PUSH="tea_joinRoomEvent_push",n.TEA_QUITROOMEVENT_PUSH="tea_quitRoomEvent_push",n.TEA_RECORDINFOEVENT_PUSH="tea_recordInfoEvent_push",n.TEA_MODIFYPROXYMONEYEVENT_PUSH="tea_modifyProxyMoneyEvent_push",n.TEA_MODIFYTEAMONEYEVENT_PUSH="tea_modifyTeaMoneyEvent_push",n.TEA_GETMEMBERINFOEVENT_PUSH="tea_getMemberInfoEvent_push",n.TEA_MEMBERMSGREADEVENT_PUSH="tea_memberMsgReadEvent_push",n.TEA_MONEYRECORDLISTEVENT_PUSH="tea_moneyRecordListEvent_push",n.TEA_RECORDTICKEVENT_PUSH="tea_recordTickEvent_push",n.PDK_PLAYERENTER_PUSH="pdk_playerEnter_push",n.PDK_GAMEREADYEVENT_PUSH="pdk_gameReadyEvent_push",n.PDK_GAMEEVENT_PUSH="pdk_gameEvent_push",n.PDK_RECONNECTGAMEEVENT_PUSH="pdk_reconnectGameEvent_push",n.PDK_EXITROOMEEVENT_PUSH="pdk_exitRoomeEvent_push",n.PDK_CLOSEROOMEVENT_PUSH="pdk_closeRoomEvent_push",n.PDK_GAMETRUSTEEEVENT_PUSH="pdk_gameTrusteeEvent_push",n.PDK_SETTLEACCOUNTS_PUSH="pdk_settleAccounts_push",n.PDK_GAMETIPEVENT_PUSH="pdk_gameTipEvent_push",o);cc._RF.pop()},{}],PdkConstant:[function(e,t,i){"use strict";var n,o;function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}cc._RF.push(t,"ff556+V91xPGL14LLS5Y7oj","PdkConstant"),Object.defineProperty(i,"__esModule",{value:!0});i.PdkConstant=(o=n=function e(){a(this,e)},n.GAME_STATUS_INIT=0,n.GAME_STATUS_READY=1,n.GAME_STATUS_START=3,n.GAME_STATUS_SUMMARY=5,n.GAME_STATUS_FINAL_SUMMARY=6,n.USER_STATUS_INIT=0,n.USER_STATUS_READY=1,n.USER_STATUS_AWAIT_PLAY=3,n.USER_STATUS_PLAY=4,n.USER_STATUS_SUMMARY=5,n.USER_STATUS_FINAL_SUMMARY=6,n.SELECTED_CARD_Y=30,n.CARD_TYPE_NONE=0,n.CARD_TYPE_DANPAI=1,n.CARD_TYPE_DUIZI=2,n.CARD_TYPE_SANTIAO=3,n.CARD_TYPE_SANDAI=4,n.CARD_TYPE_SHUNZI=5,n.CARD_TYPE_LIANDUI=6,n.CARD_TYPE_SANSHUN=7,n.CARD_TYPE_FEIJI=8,n.CARD_TYPE_SIDAI=9,n.CARD_TYPE_ZHADAN=10,o);cc._RF.pop()},{}],RoomTypeBtn:[function(e,t,i){"use strict";cc._RF.push(t,"2aca11FFI9OQK8WjovdNzud","RoomTypeBtn"),cc.Class({extends:cc.Component,properties:{roomType0:!0,roomType1:!0,roomType2:!0,roomType3:!0,roomType4:!0,roomType5:!0,roomType6:!0,roomType7:!0,roomType8:!0,roomType9:!0,roomType10:!0},start:function(){this.check()},check:function(){cc.global.room._roomData?this.node.active=this["roomType"+cc.global.room._roomData.roomType]||!1:console.log("\u5f02\u5e38:\u627e\u4e0d\u5230roomData")}}),cc._RF.pop()},{}],ScrollViewPlusItem:[function(e,t,i){"use strict";cc._RF.push(t,"66bd1i9KHFH4agONWTJimbv","ScrollViewPlusItem"),cc.Class({extends:cc.Component,properties:{onEnterScorllViewEvents:{type:cc.Component.EventHandler,default:[],tooltip:"\u8fdb\u5165ScrollView\u65f6\u56de\u8c03"},onExitScorllViewEvents:{type:cc.Component.EventHandler,default:[],tooltip:"\u79bb\u5f00ScrollView\u65f6\u56de\u8c03"},onPositionChangeEvents:{type:cc.Component.EventHandler,default:[],tooltip:"\u8fdb\u5165ScrollView\u4e4b\u540e\uff0c\u4f4d\u7f6e\u53d1\u751f\u6539\u53d8\u65f6\u56de\u8c03"},_isShowing:!0,useCommonEnter:!1,useCommonExit:!1},publishOnEnterScrollView:function(){this.useCommonEnter&&this.common_enter(),0!=this.onEnterScorllViewEvents.length&&this.onEnterScorllViewEvents.forEach(function(e){e.emit([])})},publishOnExitScrollView:function(){this.useCommonExit&&this.common_exit(),0!=this.onExitScorllViewEvents.length&&this.onExitScorllViewEvents.forEach(function(e){e.emit([])})},publishOnPositionChange:function(e,t){0!=this.onPositionChangeEvents.length&&this.onPositionChangeEvents.forEach(function(i){i.emit([e,t])})},common_enter:function(){this.node.opacity=255},common_exit:function(){this.node.opacity=0}}),cc._RF.pop()},{}],ScrollViewPlus:[function(e,t,i){"use strict";cc._RF.push(t,"84d20Ec9epPe7KtpkGzfq6o","ScrollViewPlus"),cc.Class({extends:cc.ScrollView,properties:{caculatePosition:{default:!1,tooltip:"\u662f\u5426\u8ba1\u7b97\u5728\u53ef\u89c6\u533a\u57df\u4e2dItem\u7684\u76f8\u5bf9\u4f4d\u7f6e\uff08\u53ef\u80fd\u4f1a\u76f8\u5bf9\u8017\u6027\u80fd\uff09"}},onScrollingDrawCallOpt:function(){this.optDc()},optDc:function(e){var t=this;if(0!=this.content.childrenCount){var i=this.node.parent.convertToWorldSpaceAR(cc.v2(this.node.x-this.node.anchorX*this.node.width,this.node.y-this.node.anchorY*this.node.height)),n=cc.rect(i.x,i.y,this.node.width,this.node.height);this.content.children.forEach(function(i){if(i.active){var o=i.getComponent("ScrollViewPlusItem");if(null!=o){var a=i.getBoundingBoxToWorld();a.intersects(n)?(o._isShowing||(o._isShowing=!0,o.publishOnEnterScrollView()),t.caculatePosition&&o._isShowing&&o.publishOnPositionChange((a.x-(n.x-a.width/2))/(a.width+n.width),(a.y-(n.y-a.height/2))/(a.height+n.height))):(o._isShowing||e)&&(o._isShowing=!1,o.publishOnExitScrollView())}}})}}}),cc._RF.pop()},{}],TelStatusController:[function(e,t,i){"use strict";cc._RF.push(t,"3cca02bVeROhqROT7IjVSqP","TelStatusController"),cc.Class({extends:cc.Component,properties:{timeNode:cc.Node,netWorkTypeNode:cc.Node,batteryLevelNode:cc.Node},start:function(){var e=this;this.checkNode(),cc.sys.os==cc.sys.OS_IOS&&(this.batteryLevelNode.active=!1),this.updateStatus(),this.schedule(function(){e.updateStatus()},1,cc.macro.REPEAT_FOREVER)},checkNode:function(){this.timeNode&&this.timeNode.active&&(this.showTime=!0),this.netWorkTypeNode&&this.netWorkTypeNode.active&&(this.showNewWork=!0),this.batteryLevelNode&&this.batteryLevelNode.active&&(this.showBatteryLevel=!0)},updateStatus:function(){cc.sys.os!=cc.sys.OS_IOS&&this.showBatteryLevel&&this.batteryLevel!=cc.sys.getBatteryLevel()&&(this.batteryLevel=cc.sys.getBatteryLevel(),this.batteryLevelNode.getComponent(cc.ProgressBar).progress=this.batteryLevel),this.showNewWork&&this.netWorkType!=cc.sys.getNetworkType()&&(this.netWorkType=cc.sys.getNetworkType(),cc.find("wifi",this.netWorkTypeNode).active=this.netWorkType==cc.sys.NetworkType.LAN,cc.find("WWAN",this.netWorkTypeNode).active=this.netWorkType==cc.sys.NetworkType.WWAN,cc.find("noWifi",this.netWorkTypeNode).active=this.netWorkType==cc.sys.NetworkType.NONE)},update:function(e){if(this.showTime){var t=new Date,i=("0"+t.getHours()).slice(-2),n=("0"+t.getMinutes()).slice(-2);this.timeNode.getComponent(cc.Label).string=i+":"+n}}}),cc._RF.pop()},{}],ThoundsAbbr:[function(e,t,i){"use strict";cc._RF.push(t,"1c5bfvofA5E8rgo/myDRoSw","ThoundsAbbr"),cc.Class({extends:cc.Component,properties:{},start:function(){},update:function(e){var t=this.node.getComponent(cc.Label).string;if(-1==t.indexOf("K")){var i=parseFloat(t);i>=1e3&&(t=this.toFixed(i/1e3,1)+"K",this.node.getComponent(cc.Label).string=t)}},toFixed:function(e,t){var i=new RegExp("^-?\\d+(?:.\\d{0,"+(t||-1)+"})?");return e.toString().match(i)[0]}}),cc._RF.pop()},{}],UserLabel:[function(e,t,i){"use strict";cc._RF.push(t,"57e499NLGZO/pLeCk3cq2Rn","UserLabel"),cc.Class({extends:cc.Component,properties:{key:"",parseFloat:!1},getUserInfo:function(){return cc.global.util.userinfo},updateLabel:function(){var e=this.getValue();this._lastValue=e,this.parseFloat&&(e=parseFloat(e)),this.getComponent(cc.Label).string=e},getValue:function(){var e=this.getUserInfo();return e?this["get"+this.key]?this["get"+this.key]():e[this.key]?e[this.key]:"":""},update:function(){var e=this.getValue();this._lastValue!=e&&this.updateLabel()}}),cc._RF.pop()},{}],animController:[function(e,t,i){"use strict";cc._RF.push(t,"d02bbxPhklDlrLDB+nXVk1U","animController"),cc.Class({extends:cc.Component,properties:{},destroyNode:function(e){this.node.destroy()}}),cc._RF.pop()},{}],anim_kaijin:[function(e,t,i){"use strict";cc._RF.push(t,"b18c7aCQ2tJEpHtbuZSZUcm","anim_kaijin"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},showKaijinPs:function(){console.log("show:\u8fd9\u662f\u52a8\u753b\u56de\u8c03\u51fd\u65701"),this.node.getChildByName("kaijin_bg").getComponent(cc.ParticleSystem).resetSystem(),this.node.getChildByName("txt_bg").getComponent(cc.ParticleSystem).resetSystem(),this.node.getChildByName("kaijin_quan").getComponent(cc.ParticleSystem).resetSystem();var e="Sounds/mjgame/game_p_gold_action";cc.loader.loadRes(e,function(t,i){console.log("(\u52a8\u753b\u56de\u8c03)\u64ad\u653e\u97f3\u9891:url="+e+" ;\u97f3\u91cf\u5f00\u5173:"+cc.global.util.setting.soundOn+" ;\u97f3\u91cf\u8bbe\u7f6e:"+cc.global.util.setting.sound),1==cc.global.util.setting.soundOn&&cc.audioEngine.play(i,!1,cc.global.util.setting.sound)})},hideKaijinPs:function(){console.log("hide:\u8fd9\u662f\u52a8\u753b\u56de\u8c03\u51fd\u65702"),this.node.getChildByName("kaijin_bg").getComponent(cc.ParticleSystem).stopSystem(),this.node.getChildByName("kaijin_bg").active=!1,this.node.getChildByName("txt_bg").getComponent(cc.ParticleSystem).stopSystem(),this.node.getChildByName("txt_bg").active=!1,this.node.getChildByName("kaijin_quan").getComponent(cc.ParticleSystem).stopSystem(),this.node.getChildByName("kaijin_quan").active=!1},animKaijinComp:function(){console.log("completed:\u8fd9\u662f\u52a8\u753b\u56de\u8c03\u51fd\u65703");var e=cc.find("Canvas").getComponent("mjgame");e._gameFun.playSound("Sounds/mjgame/game_p_discard"),console.log("\u6267\u884c\u524d\u7684\u5b9a\u91d1\u72b6\u6001:"+cc.global.game._game.isDingjin),e.hideShaizi(),e._gameFun.startCount(e._timePointer["s_"+e.focusIndex]),e.initHandMj(null,null,!0),cc.global.util.mySetTimeout(function(){cc.global.game._game.isDingjin=!0,console.log("\u6267\u884c\u540e\u7684\u5b9a\u91d1\u72b6\u6001:"+cc.global.game._game.isDingjin)},200)}}),cc._RF.pop()},{}],canOut:[function(e,t,i){"use strict";cc._RF.push(t,"32e39VcqUhNNpxaxO2EFQaH","canOut"),cc.Class({extends:cc.Component,properties:{paixingdefine:null},onLoad:function(){},playQiangSound:function(){console.log("\u6253\u67aa\u4e8b\u4ef6\u56de\u8c03"),cc.find("Canvas").getComponent("hall_shisanshui").playSound("daqiang")},showQiangKong:function(e){console.log("\u5e27\u4e8b\u4ef6\u56de\u8c03i="+e),this.node.parent.getChildByName("qiangkou").children[e].active=!0},pxtype:function(e,t,i,n){this.paixingdefine=n,e=this.paixingdefine.changeTocard(e),t=this.paixingdefine.changeTocard(t),i=this.paixingdefine.changeTocard(i);var o="c-1",a="c-1",c="c-1";3==e.length&&(o=this.jugdeType(e)),5==t.length&&(a=this.jugdeType(t),console.log("c2:"+a)),5==i.length&&(c=this.jugdeType(i),console.log("c3:"+c));new Object;return this.jugdeContrast(e,o,t,a,i,c)},jugdeContrast:function(e,t,i,n,o,a){var c={code:1},s=this.getNum(t),l=this.getNum(n),r=this.getNum(a);return-1!=s&&-1!=l&&(s<l||s==l&&this.c_to_c(t,e,i)||(c.code=0,c.type="error1")),-1!=l&&-1!=r&&(l<r||l==r&&this.c_to_c(n,i,o)||(c.code=0,c.type="error2")),-1!=s&&-1!=r&&(s<r||s==r&&this.c_to_c(t,e,o)||(c.code=0,c.type="error3")),c},jugdeType:function(e){e=this.paixingdefine.getOrder(e);for(var t=new Array,i=0;i<e.length;i++)t.push(this.paixingdefine.getValue(e[i]));var n=e.length,o="c0";return 3==n?o=this.threeType(t):5==n?o=this.fiveType(e,t):console.log("\u724c\u6570\u4e0d\u5bf9"),o},threeType:function(e){var t=this.paixingdefine.getListByNum(e);return 1==t[2].length?"c3":1==t[1].length?"c2":"c0"},fiveType:function(e,t){var i=this.paixingdefine.getListByNum(t);return this.paixingdefine.getidtonghuashun(e).length>=1?"c5":1==i[3].length&&1==i[0].length?"c4":1==i[4].length?"c6":1==i[2].length&&1==i[1].length?"c32":this.paixingdefine.getidtonghua(e).length>=1?"c11111":this.paixingdefine.getidshunzi(e).length>=1?"c12345":1==i[2].length&&2==i[0].length?"c3":2==i[1].length&&1==i[0].length?"c22":1==i[1].length&&3==i[0].length?"c2":"c0"},c_to_c:function(e,t,i){t=this.paixingdefine.getOrder(t),i=this.paixingdefine.getOrder(i);for(var n=new Array,o=0;o<t.length;o++)n.push(this.paixingdefine.getValue(t[o]));var a=new Array;for(o=0;o<i.length;o++)a.push(this.paixingdefine.getValue(i[o]));var c=this.paixingdefine.getListByNum(n),s=this.paixingdefine.getListByNum(a),l=!1;return"c0"==e?l=this.c0_to_c0(n,a):"c2"==e?l=this.c2_to_c2(n.length,c,s):"c22"==e?l=this.c22_to_c22(c,s):"c3"==e?l=this.c3_to_c3(c,s):"c12345"==e?l=this.c0_to_c0(n,a):"c11111"==e?l=this.c11111_to_c11111(n,a,t,i):"c32"==e?l=this.c3_to_c3(c,s):"c4"==e?l=this.c4_to_c4(c,s):"c5"==e?l=this.c0_to_c0(n,a):"c6"==e&&(l=this.c6_to_c6(c,s)),l},c0_to_c0:function(e,t){e=this.getOrder2(e),t=this.getOrder2(t);var i=!1;if(3==e.length)for(var n=0;n<3;n++){if(e[n]!=t[n]){if(e[n]<t[n]){i=!0;break}i=!1;break}i=!0}else for(n=0;n<5;n++){if(e[n]!=t[n]){if(e[n]<t[n]){i=!0;break}i=!1;break}i=!0}return i},c11111_to_c11111:function(e,t,i,n){e=this.getOrder2(e),t=this.getOrder2(t);var o=this.c11111fuzhu(e),a=this.c11111fuzhu(t),c=this.paixingdefine.getListByNum(e),s=this.paixingdefine.getListByNum(t);return"c0"==o&&"c0"==a?this.c0_to_c0(e,t):"c2"==o&&"c2"==a?this.c2_to_c2(e.length,c,s):"c22"==o&&"c22"==a?this.c22_to_c22(c,s):"c3"==o&&"c3"==a?this.c3_to_c3(c,s):"c3"==a&&("c22"==o||"c2"==o||"c0"==o)||("c22"==a&&"c2"==o||("c2"==a&&"c0"==o||"c22"==a&&"c0"==o))},c11111fuzhu:function(e){var t=this.paixingdefine.getListByNum(e);return 1==t[2].length&&2==t[0].length?"c3":2==t[1].length&&1==t[0].length?"c22":1==t[1].length&&3==t[0].length?"c2":"c0"},c2_to_c2:function(e,t,i){var n=!1;if(3==e)if(t[1][0]<i[1][0])n=!0;else if(t[1][0]>i[1][0])n=!1;else{var o=this.getOrder2(t[0]),a=this.getOrder2(i[0]);n=o[0]<=o[0]}else if(t[1][0]<i[1][0])n=!0;else if(t[1][0]>i[1][0])n=!1;else{o=this.getOrder2(t[0]),a=this.getOrder2(i[0]);for(var c=0;c<3;c++){if(o[c]!=a[c]){if(o[c]<a[c]){n=!0;break}n=!1;break}n=!0}}return n},c22_to_c22:function(e,t){var i=!1;if(e[1][1]<t[1][1])i=!0;else if(e[1][1]>t[1][1])i=!1;else if(e[1][0]<t[1][0])i=!0;else if(e[1][0]>t[1][0])i=!1;else{var n=this.getOrder2(e[0]),o=this.getOrder2(t[0]);i=n[0]==o[0]||n[0]<o[0]}return i},c3_to_c3:function(e,t){return e[2][0]<t[2][0]||!(e[2][0]>t[2][0])&&(e[1][0]<t[1][0]||!(e[1][0]>t[1][0])&&(e[0][1]<t[0][1]||!(e[0][1]>t[0][1])&&(e[0][0]<t[0][0]||!(e[0][0]>t[0][0]))))},c4_to_c4:function(e,t){return e[3][0]<t[3][0]},c6_to_c6:function(e,t){return e[4][0]<t[4][0]},getNum:function(e){return"c2"==e?1:"c22"==e?2:"c3"==e?3:"c12345"==e?4:"c11111"==e?5:"c32"==e?6:"c4"==e?7:"c5"==e?8:"c6"==e?9:"c-1"==e?-1:0},getOrder2:function(e){for(var t=e.length,i=0;i<t-1;i++)for(var n=0;n<t-i-1;n++){var o;if(e[n]<e[n+1])o=e[n],e[n]=e[n+1],e[n+1]=o}return e}}),cc._RF.pop()},{}],circleMemberController:[function(e,t,i){"use strict";cc._RF.push(t,"05767FhKYZEubrIIFnsiY0+","circleMemberController"),cc.Class({extends:cc.Component,properties:{tipColor:{default:"#ffec4e",tooltip:"\u63d0\u793a\u5f39\u7a97\u4e2d\u540d\u79f0\u7684\u989c\u8272\u503c,\u683c\u5f0f\u5982:#ffffff"}},onLoad:function(){},initData:function(e){this.memberData=e.memberData},onSetAdminClick:function(){if(1!=this.memberData.is_admin){var e=this;console.log("--\u6253\u5f00\u63d0\u793a\u5f39\u7a97--"),cc.global.pop_mgr.showFrm({name:"frm_tip_new",closeAnim:!1,customData:{msg:"\u4f60\u786e\u5b9a\u8981\u8bbe\u7f6e <color="+this.tipColor+">["+this.memberData.user_name+"]</color> \u4e3a\u7ba1\u7406\u5458\u5417?",maskClose:!0,btns:[{name:"\u53d6\u6d88"},{name:"\u786e\u5b9a",onClick:function(){e.setAdmin(1),this.onCloseClick()}}]}})}else cc.global.util.tipMsg("\u8be5\u6210\u5458\u5df2\u7ecf\u662f\u7ba1\u7406\u5458")},onCancelAdminClick:function(){if(1==this.memberData.is_admin){var e=this;console.log("--\u6253\u5f00\u63d0\u793a\u5f39\u7a97--"),cc.global.pop_mgr.showFrm({name:"frm_tip_new",closeAnim:!1,customData:{msg:"\u4f60\u786e\u5b9a\u8981\u5220\u9664\u7ba1\u7406\u5458 <color="+this.tipColor+">["+this.memberData.user_name+"]</color> \u5417?",maskClose:!0,btns:[{name:"\u53d6\u6d88"},{name:"\u786e\u5b9a",onClick:function(){e.setAdmin(0),this.onCloseClick()}}]}})}else cc.global.util.tipMsg("\u8be5\u6210\u5458\u4e0d\u662f\u7ba1\u7406\u5458")},setAdmin:function(e){cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u6570\u636e",!0),cc.global.net.send("mgrSettingCircleEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,circleId:cc.global.util.circleUserinfo.circle_id,platform:cc.global.util.gameinfo.platform,adminId:this.memberData.user_id,type:1,isAdmin:e})},onSetBlacklistClick:function(){if("Y"==this.memberData.is_use){var e=this;console.log("--\u6253\u5f00\u63d0\u793a\u5f39\u7a97--"),cc.global.pop_mgr.showFrm({name:"frm_tip_new",closeAnim:!1,customData:{msg:"\u4f60\u786e\u5b9a\u8981\u5c06 <color="+this.tipColor+">["+this.memberData.user_name+"]</color> \u52a0\u5165\u9ed1\u540d\u5355\u5417?",maskClose:!0,btns:[{name:"\u53d6\u6d88"},{name:"\u786e\u5b9a",onClick:function(){e.setBlackList(1),this.onCloseClick()}}]}})}else cc.global.util.tipMsg("\u8be5\u6210\u5458\u5df2\u5728\u9ed1\u540d\u5355\u5185")},onCancelBlacklistClick:function(){if("Y"!=this.memberData.is_use){var e=this;console.log("--\u6253\u5f00\u63d0\u793a\u5f39\u7a97--"),cc.global.pop_mgr.showFrm({name:"frm_tip_new",closeAnim:!1,customData:{msg:"\u4f60\u786e\u5b9a\u8981\u5c06 <color="+this.tipColor+">["+this.memberData.user_name+"]</color> \u79fb\u51fa\u9ed1\u540d\u5355\u5417?",maskClose:!0,btns:[{name:"\u53d6\u6d88"},{name:"\u786e\u5b9a",onClick:function(){e.setBlackList(2),this.onCloseClick()}}]}})}else cc.global.util.tipMsg("\u8be5\u6210\u5458\u4e0d\u5728\u9ed1\u540d\u5355\u5185")},setBlackList:function(e){cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u6570\u636e",!0),cc.global.net.send("circleBlacklistEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,circle_id:cc.global.util.circleUserinfo.circle_id,platform:cc.global.util.gameinfo.platform,user_id:this.memberData.user_id,type:e})},onRemoveMemberClick:function(){if(1==this.memberData.is_admin)return cc.global.util.playSound_buttonClick(),void cc.global.util.tipMsg("\u9700\u8981\u53d6\u6d88\u7ba1\u7406\u5458\u8eab\u4efd\u540e\u624d\u80fd\u5220\u9664");var e=this;console.log("--\u6253\u5f00\u63d0\u793a\u5f39\u7a97--"),cc.global.pop_mgr.showFrm({name:"frm_tip_new",closeAnim:!1,customData:{msg:"\u60a8\u786e\u5b9a\u8981\u5c06\u5220\u9664\u6210\u5458 <color="+this.tipColor+">["+this.memberData.user_name+"]</color> ?",maskClose:!0,btns:[{name:"\u53d6\u6d88"},{name:"\u786e\u5b9a",onClick:function(){e.removeMember(),this.onCloseClick()}}]}})},onShowZhanjiClick:function(){var e={type:"circleOther",account:this.memberData.account};cc.global.pop_mgr.showFrm({name:"frm_zhanji",customData:e})},removeMember:function(){cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u6570\u636e",!0),cc.global.net.send("circleDelMemberEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,circle_id:cc.global.util.circleUserinfo.circle_id,platform:cc.global.util.gameinfo.platform,user_id:this.memberData.user_id,type:1})},onSetPartnerClick:function(){if(2!=this.memberData.user_role){var e=this;console.log("--\u6253\u5f00\u63d0\u793a\u5f39\u7a97--"),cc.global.pop_mgr.showFrm({name:"frm_tip_new",closeAnim:!1,customData:{msg:"\u4f60\u786e\u5b9a\u8981\u8bbe\u7f6e <color="+this.tipColor+">["+this.memberData.user_name+"]</color> \u4e3a\u5408\u4f19\u4eba\u5417?",maskClose:!0,btns:[{name:"\u53d6\u6d88"},{name:"\u786e\u5b9a",onClick:function(){e.setPartner(1),this.onCloseClick()}}]}})}else cc.global.util.tipMsg("\u8be5\u6210\u5458\u5df2\u662f\u5408\u4f19\u4eba")},onCancelPartnerClick:function(){if(2==this.memberData.user_role){var e=this;console.log("--\u6253\u5f00\u63d0\u793a\u5f39\u7a97--"),cc.global.pop_mgr.showFrm({name:"frm_tip_new",closeAnim:!1,customData:{msg:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u5408\u4f19\u4eba <color="+this.tipColor+">["+this.memberData.user_name+"]</color> \u5417?",maskClose:!0,btns:[{name:"\u53d6\u6d88"},{name:"\u786e\u5b9a",onClick:function(){e.setPartner(2),this.onCloseClick()}}]}})}else cc.global.util.tipMsg("\u8be5\u6210\u5458\u4e0d\u662f\u5408\u4f19\u4eba")},setPartner:function(e){cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u6570\u636e",!0),1==e?cc.global.net.send("circlePartnerAddEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,circleId:cc.global.util.circleUserinfo.circle_id,platform:cc.global.util.gameinfo.platform,operatorUserCode:this.memberData.user_code}):2==e&&cc.global.net.send("circleDelMemberEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,circle_id:cc.global.util.circleUserinfo.circle_id,platform:cc.global.util.gameinfo.platform,user_id:this.memberData.user_id,type:2})},onResetPartnerClick:function(){if(2==this.memberData.user_role){var e=this;console.log("--\u6253\u5f00\u63d0\u793a\u5f39\u7a97--"),cc.global.pop_mgr.showFrm({name:"frm_tip_new",closeAnim:!1,customData:{msg:"\u4f60\u786e\u5b9a\u8981\u91cd\u7f6e\u5408\u4f19\u4eba <color="+this.tipColor+">["+this.memberData.user_name+"]</color> \u5417?",maskClose:!0,btns:[{name:"\u53d6\u6d88"},{name:"\u786e\u5b9a",onClick:function(){e.resetPartner(),this.onCloseClick()}}]}})}else cc.global.util.tipMsg("\u8be5\u6210\u5458\u4e0d\u662f\u5408\u4f19\u4eba")},resetPartner:function(){cc.global.net.send("resetPartnerEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,circleId:cc.global.util.circleUserinfo.circle_id,platform:cc.global.util.gameinfo.platform,operatedId:this.memberData.user_id})},changeProfitRatio:function(){console.log("\u6253\u5f00\u5f39\u7a97:frm_input"),cc.global.pop_mgr.showFrm({name:"frm_input",customData:{type:"num",maxLength:3,maxNum:100,defNum:"",placeholder:"\u767e\u5206\u6bd4",inputOver:this.inputOver_changeProfitRatio,label:null,target:this,title:"changeProfitRatio",showHead:!0,headimg:cc.global.http.url+"/zagame"+this.memberData.headimg,isAutoOver:!1,isShowOk:!0,closeWhenInputOver:!0}})},inputOver_changeProfitRatio:function(e,t,i){cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u8bf7\u6c42",!0),cc.global.net.send("mgrSettingCircleEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,circleId:cc.global.util.circleUserinfo.circle_id,platform:cc.global.util.gameinfo.platform,adminId:i.memberData.user_id,type:2,profitRatio:t||0})}}),cc._RF.pop()},{}],circlelist:[function(e,t,i){"use strict";cc._RF.push(t,"89324X7MEBDKYbwuZDQvQOb","circlelist");var n=e("./global/NotificationNames"),o=e("./global/item_generator");function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function n(o,a){try{var c=t[o](a),s=c.value}catch(e){return void i(e)}if(!c.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}cc.Class({extends:cc.Component,properties:{content:cc.Node,list:cc.Node,circlelist_item_prefab:cc.Prefab},start:function(){cc.global.util.resize(),this.playMusic(),this.registerObserver(),cc.sys.localStorage.removeItem("circleId"),cc.global.util.circleUserinfo=null,this.getCirclelist()},onDestroy:function(){this.removeObserver(),cc.global.net.send("unSubscribeCircleListEvent",{})},registerObserver:function(){if(this.eventList={},this.eventList[n.NotificationNames.MEMBER_DETAIL_INFO_EVENT_PUSH]=this.memberDetailInfoEventPush,this.eventList[n.NotificationNames.CIRCLE_LIST_EVENT_PUSH]=this.circleListEventPush,this.eventList[n.NotificationNames.CIRCLE_GENERAL_JOIN_EXIT_EVENT_PUSH]=this.circleGeneralJoinExitEventPush,this.eventList[n.NotificationNames.CIRCLE_MSG_REMAIN_EVENT_PUSH]=this.circleMsgRemindEventPush,this.eventList[n.NotificationNames.CIRCLE_EXAM_MSG_INFO_EVENT_PUSH]=this.onCircleExamMsgInfoEventPush,this.eventList)for(var e in this.eventList)Notification.on(e,this.eventList[e],this)},removeObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.off(e,this.eventList[e],this)},playMusic:function(){var e=this.node.getChildByName("music").getComponent(cc.AudioSource);e.volume=cc.global.util.setting.music,0==cc.global.util.setting.musicOn?e.mute=!0:e.mute=!1,e.play()},getCirclelist:function(){cc.find("tip_loading",this.content).active=!0,cc.global.net.send("subscribeCircleListEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform})},circleListEventPush:function(e){this.showList(this.list,e.circles,this.circlelist_item_prefab)},showList:function(){var e=a(regeneratorRuntime.mark(function e(t,i,n){var a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.item_generator.getInstance().executePreFrame(o.item_generator.getInstance()._getItemGenerator(t,i,n,function(e,t){var n=i[t].circle_id;cc.find("countMember",e).getComponent(cc.Label).string="\u6210\u5458: 99+",cc.find("creatorName",e).getComponent(cc.Label).string=i[t].name,cc.find("creatorId",e).getComponent(cc.Label).string=n,cc.find("userCode",e).getComponent(cc.Label).string=3==i[t].user_role?i[t].superior_user_code:i[t].user_code,cc.find("circleName",e).getComponent(cc.Label).string=i[t].circle_name;var o=cc.find("head/mask/sp",e),c=cc.global.http.url+"/zagame"+i[t].headimg;o.m_headimg&&o.m_headimg==c||(o.getComponent(cc.Sprite).spriteFrame=null,cc.global.util.setHeadimg(o,c,!1,function(){o.m_headimg=c})),e.m_circleId=i[t].circle_id,e.on("click",a.onCirclelistItemClick,a)}),4,this);case 2:cc.find("tip_loading",this.content).active=!1,cc.find("scroll",this.content).getComponent(cc.ScrollView).scrollToLeft(.1),cc.find("scroll",this.content).getComponent(cc.ScrollView).optDc(!0);case 5:case"end":return e.stop()}},e,this)}));return function(t,i,n){return e.apply(this,arguments)}}(),onCirclelistItemClick:function(e){cc.global.util.playSound_buttonClick();var t=e.target;this.isGoCircle=!0,cc.global.util.showAlert("\u6b63\u5728\u52a0\u8f7d",!0),cc.global.net.send("memberDetailInfoEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,user_id:cc.global.util.userinfo.uid,circle_id:t.m_circleId})},memberDetailInfoEventPush:function(e){this.isGoCircle&&(this.isGoCircle=!1,1==e.code?(cc.sys.localStorage.setItem("circleId",e.data.circle_id),cc.global.util.circleUserinfo=e.data,this.goCircle()):(cc.global.util.tipMsg(e.msg),cc.global.util.closeAlert()))},showFrm_clrcleMsg:function(e,t){console.log("\u6253\u5f00\u5f39\u7a97:"+t),cc.global.pop_mgr.showFrm({name:t,customData:customData})},showInput_joinCircle:function(){console.log("\u6253\u5f00\u5f39\u7a97:frm_input"),cc.global.pop_mgr.showFrm({name:"frm_input",customData:{type:"str",maxLength:8,defNum:"",placeholder:"\u8bf7\u8f93\u51658\u4f4d\u9080\u8bf7\u7801",inputOver:this.inputOver_joinCircle,label:null,target:this,title:"joinCircle",showHead:!1,isAutoOver:!0,isShowOk:!1,closeWhenInputOver:!1}})},inputOver_joinCircle:function(e,t,i){cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u8bf7\u6c42",!0),cc.global.net.send("circleGeneralJoinExitEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,circle_id:t,platform:cc.global.util.gameinfo.platform,userCode:t,superior_user_code:t,type:"join"})},circleGeneralJoinExitEventPush:function(e){cc.global.util.closeAlert(),cc.global.util.tipMsg(e.msg),1==e.code&&(cc.global.util.playSound("Sounds/sound_hall_close"),cc.global.pop_mgr.closeFrm({name:"frm_input",closeAnim:!1}))},showFrm:function(e,t){console.log("\u6253\u5f00\u5f39\u7a97:"+t),cc.global.pop_mgr.showFrm({name:t,customData:{type:2,hasCircleID:"N"}})},circleMsgRemindEventPush:function(e){1==e.code&&1==e.type&&this.getCirclelist()},onCircleExamMsgInfoEventPush:function(e){console.log("circleList:",e),1==e.code?cc.find("header/right/btn_msg/dotted",this.node).active=!0:cc.find("header/right/btn_msg/dotted",this.node).active=!1},goCircle:function(){cc.global.util.datingType="circle",cc.director.loadScene("circle")},goDating:function(){cc.global.util.showAlert("\u6b63\u5728\u52a0\u8f7d",!0),cc.global.util.datingType="dating",cc.director.loadScene("dating"),cc.global.util.playSound("Sounds/sound_hall_close")},onCircleCreateClick:function(e){cc.global.util.playSound_buttonClick(),cc.global.util.tipMsg("\u60a8\u7684\u94bb\u77f3\u4e0d\u8db3,\u8bf7\u5148\u5145\u503c")}}),cc._RF.pop()},{"./global/NotificationNames":"NotificationNames","./global/item_generator":"item_generator"}],circle:[function(e,t,i){"use strict";cc._RF.push(t,"2cc18N2QN1CRLXAq98S49Pi","circle");var n=e("./global/NotificationNames"),o=e("./global/item_generator");function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function n(o,a){try{var c=t[o](a),s=c.value}catch(e){return void i(e)}if(!c.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}cc.Class({extends:cc.Component,properties:{scrollNoticeNode:cc.Node,btnRoomTypePrefab:cc.Prefab,roomPrefab:cc.Prefab,lastClickGameTypeBtn:cc.Node,moreMenu:cc.Node,overlay:cc.Node,selfUserAvatarNode:cc.Node,selfUserNicknameLabel:cc.Label,rooms:cc.Node,room_types:cc.Node,roomPeopleCountLabel:cc.Label,msgInfoRedDotNode:cc.Node,roomTypeSwitcher:cc.Node,noneRoomTip:cc.Node,btnRoomTypeSF:[cc.SpriteFrame]},onLoad:function(){var e=this;cc.global.util.resize(),this.initView(),cc.global.game._dispatchEventHandel=this.node,this.node.on("getUserInfoPush",function(t){e.getUserInfoPush(t)}),this.requestPaused=!1,this.popModalCount=0,cc.global.util.replayCustomData&&cc.global.util.showReplayCustomData&&(cc.global.pop_mgr.showFrm({name:"frm_zhanji",customData:{type:"circle"}}),console.log("mjZhanjiData",cc.global.util.replayCustomData))},start:function(){this.playMusic(),this.registerObserver(),this.initFilter();var e=cc.global.util.circleRoomFilterGid?cc.global.util.circleRoomFilterGid:4,t=cc.global.util.circleRoomFilterIsGhost?cc.global.util.circleRoomFilterIsGhost:0;3==e?this.lastClickGameTypeBtn=cc.find("sidebar/scrollview/view/content/btn_mj",this.node):21==e?this.lastClickGameTypeBtn=cc.find("sidebar/scrollview/view/content/btn_pdk",this.node):4==e&&1==t&&(this.lastClickGameTypeBtn=cc.find("sidebar/scrollview/view/content/btn_sss",this.node)),this.lastClickGameTypeBtn.children[0].opacity=255,this.lastClickGameTypeBtn.children[1].opacity=0,this.requestRoomData(),this.requestCircleUserInfo(),this.requestExamMsg(),this.requestUserInfo(),this.schedule(this.requestRoomData,3),this.schedule(this.requestCircleUserInfo,3),this.schedule(this.requestExamMsg,3),this.schedule(this.requestUserInfo,3)},playMusic:function(){var e=cc.find("Canvas/music").getComponent(cc.AudioSource);e.volume=cc.global.util.setting.music,0==cc.global.util.setting.musicOn?e.mute=!0:e.mute=!1,e.play()},initView:function(){this.moreMenu.active=!1,this.roomTypeSwitcher.opacity=0,this.noneRoomTip.opacity=0,cc.global.util.setHeadimg(this.selfUserAvatarNode,cc.global.util.userinfo.headimg),this.selfUserNicknameLabel.string=cc.global.util.userinfo.name,this.displayNotice(cc.global.util.circleUserinfo.circle_notice)},initFilter:function(){var e=cc.global.util.circleRoomFilterGid?cc.global.util.circleRoomFilterGid:4,t=cc.global.util.circleRoomFilterIsGhost?cc.global.util.circleRoomFilterIsGhost:0;this.filter={circleCode:cc.global.util.circleUserinfo.circle_code,gid:e,isGhostCard:t}},switchGameType:function(e,t){switch(cc.global.util.playSound_buttonClick(),this.noneRoomTip.opacity=0,this.lastClickGameTypeBtn.children[0].opacity=0,this.lastClickGameTypeBtn.children[1].opacity=255,e.target.children[0].opacity=255,e.target.children[1].opacity=0,this.lastClickGameTypeBtn=e.target,cc.global.util.circleRoomFilterGid=null,cc.global.util.circleRoomFilterIsGhost=null,this.roomTypeSwitcher.runAction(cc.fadeIn(.1)),this.filter.isGhostCard=null,t){case"all":this.filter.gid=null,this.roomTypeSwitcher.runAction(cc.fadeOut(.1));break;case"sss":this.filter.gid=4,this.filter.isGhostCard=0;break;case"sss_gp":this.filter.gid=4,this.filter.isGhostCard=1;break;case"zjh":this.filter.gid=6;break;case"mj":this.filter.gid=3;break;case"nn":this.filter.gid=1;break;case"pdk":this.filter.gid=21;break;case"gdy":this.filter.gid=18;break;case"sg":this.filter.gid=19;break;case"gzmj":this.filter.gid=20;break;case"xmmj":case"gzmj":default:this.filter.gid=-1}-1==this.filter.gid&&cc.global.util.tipMsg_notOpen(),this._lastRoomTypeBtn=null,this.filterRoomType("all"),this.displayRoomList(),this.requestRoomData()},requestUserInfo:function(){this.requestPaused||cc.global.net.send("getUserInfo",{account:cc.global.util.userinfo.account})},filterRoomTypeEvent:function(e,t){cc.global.util.playSound_buttonClick(),this._lastRoomTypeBtn="all"===t?null:e.target,this.filterRoomType(t)},filterRoomType:function(e){if(console.log("filter room type",e),"all"==e)this.filter.gameStr=null,this.filter.score=null,this.filter.leaveScore=null,this.filter.enterScore=null,this.filter.color=null,this.filter.jiama=null;else if(4==this.filter.gid){var t=e.split("-");this.filter.gameStr=t[0],this.filter.score=t[1],this.filter.color=t[2],this.filter.jiama=t[3]}else{var i=e.split("-");this.filter.gameStr=i[0],this.filter.score=i[1]}this.displayRoomList()},showMoreMenu:function(){cc.global.util.playSound_buttonClick(),this._moreMenuIsShowed?this.hideMoreMenu():(this._moreMenuIsShowed=!0,this.overlay.active=!0,this.moreMenu.active=!0,this.moreMenu.opacity=0,this.moreMenu.y+=10,this.moreMenu.runAction(cc.spawn(cc.fadeIn(.1),cc.moveBy(.1,0,-10))))},hideMoreMenu:function(){var e=this;this._moreMenuIsShowed=!1,this.overlay.active=!1,this.moreMenu.runAction(cc.sequence(cc.spawn(cc.fadeOut(.1),cc.moveBy(.1,0,10)),cc.moveBy(.1,0,-10),cc.callFunc(function(){e.moreMenu.active=!1})))},goDating:function(){cc.global.net.send("offlineCircleEvent",{uid:cc.global.util.userinfo.uid,id:cc.global.util.userinfo.id,token:cc.global.util.userinfo.token,platform:cc.global.util.userinfo.platform}),cc.global.util.playSound_buttonClick(),cc.global.util.datingType="dating",cc.director.loadScene("dating")},registerObserver:function(){var e=this;Notification.on(n.NotificationNames.CIRCLE_ROOM_LIST_EVENT_PUSH,function(t){var i=t;e.roomListResp=i,e.roomList=i.array,e.displayRoomList("server")},this),Notification.on(n.NotificationNames.MEMBER_DETAIL_INFO_EVENT_PUSH,this.onMemberDetailInfoEventPush,this),Notification.on(n.NotificationNames.DISMISS_CIRCLE_EVENT_PUSH,this.dismissCircleEventPush,this),Notification.on(n.NotificationNames.CIRCLE_GENERAL_JOIN_EXIT_EVENT_PUSH,this.circleGeneralJoinExitEventPush,this),Notification.on(n.NotificationNames.TRANSFER_CIRCLE_EVENT_PUSH,this.transferCircleEventPush,this),Notification.on(n.NotificationNames.CIRCLE_EXAM_MSG_INFO_EVENT_PUSH,this.onCircleExamMsgInfoEventPush,this),Notification.on(n.NotificationNames.QUICK_JOIN_ROOM_CIRCLE_EVENT_PUSH,this.quickJoinRoomCircleEventPush,this),Notification.on(n.NotificationNames.REMOVE_ROOM_CIRCLE_EVENT_PUSH,this.removeRoomCircleEventPush,this),Notification.on(n.NotificationNames.ON_POP_SHOW,this.onPopShow,this),Notification.on(n.NotificationNames.ON_POP_HIDE,this.onPopHide,this),Notification.on(n.NotificationNames.OFFLINECIRCLE_EVENT_PUSH,this.offLineCircle,this),Notification.on(n.NotificationNames.QUICK_ENTRY_ROOM_CIRCLE_EVENT_PUSH,this.quickEntryRoomCircleEventPush,this)},removeObserver:function(){Notification.offType(n.NotificationNames.CIRCLE_ROOM_LIST_EVENT_PUSH),Notification.off(n.NotificationNames.MEMBER_DETAIL_INFO_EVENT_PUSH,this.onMemberDetailInfoEventPush,this),Notification.off(n.NotificationNames.DISMISS_CIRCLE_EVENT_PUSH,this.dismissCircleEventPush,this),Notification.off(n.NotificationNames.CIRCLE_GENERAL_JOIN_EXIT_EVENT_PUSH,this.circleGeneralJoinExitEventPush,this),Notification.off(n.NotificationNames.TRANSFER_CIRCLE_EVENT_PUSH,this.transferCircleEventPush,this),Notification.off(n.NotificationNames.CIRCLE_EXAM_MSG_INFO_EVENT_PUSH,this.onCircleExamMsgInfoEventPush,this),Notification.off(n.NotificationNames.QUICK_JOIN_ROOM_CIRCLE_EVENT_PUSH,this.quickJoinRoomCircleEventPush,this),Notification.off(n.NotificationNames.REMOVE_ROOM_CIRCLE_EVENT_PUSH,this.removeRoomCircleEventPush,this),Notification.off(n.NotificationNames.ON_POP_SHOW,this.onPopShow,this),Notification.off(n.NotificationNames.ON_POP_HIDE,this.onPopHide,this),Notification.off(n.NotificationNames.OFFLINECIRCLE_EVENT_PUSH,this.offLineCircle,this),Notification.off(n.NotificationNames.QUICK_ENTRY_ROOM_CIRCLE_EVENT_PUSH,this.quickEntryRoomCircleEventPush,this)},onPopShow:function(){this.popModalCount++,this.requestPaused=!0},onPopHide:function(){this.popModalCount--,this.popModalCount<=0&&(this.requestPaused=!1,this.popModalCount=0)},offLineCircle:function(e){console.log("\u73a9\u5bb6\u79bb\u5f00\u4eb2\u53cb\u5708\uff1a",e)},getUserInfoPush:function(e){e&&1==e.code&&(cc.global.util.userinfo.roomcard=e.user.roomcard)},requestRoomData:function(e){var t=this;if(e||!this.requestPaused){console.log("Request room data.");var i={};["clubCode","circleCode","roomType","gid","type","isGhostCard"].forEach(function(e){null!==t.filter[e]&&void 0!==t.filter[e]&&(i[e]=t.filter[e])}),console.log("params",i),cc.global.net.send("circleRoomListEvent",i,!0)}},requestCircleUserInfo:function(){this.requestPaused||cc.global.net.send("memberDetailInfoEvent",{user_id:cc.global.util.userinfo.uid,circle_id:cc.global.util.circleUserinfo.circle_id},!0)},requestExamMsg:function(){this.requestPaused||cc.global.net.send("circleExamMsgInfoEvent",{circle_id:cc.global.util.circleUserinfo.circle_id},!0)},displayRoomList:function(){var e=a(regeneratorRuntime.mark(function e(){var t,i,n,a,c,s,l=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"local";return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],i={},n={score:function(e){return e.base_info.yuanbao}},4==this.filter.gid?(n.gameStr=function(e){return"sss"},n.color=function(e){return e.base_info.color},n.jiama=function(e){return e.base_info.jiama}):3==this.filter.gid?n.gameStr=function(e){return"qzmj"}:21==this.filter.gid&&(n.gameStr=function(e){return"pdk"}),a=0,this.roomList.forEach(function(e,o){if(!l.filter.gid||l.filter.gid==e.gid){for(var c in 4==e.gid?i["sss-"+e.base_info.yuanbao+"-"+e.base_info.color+"-"+e.base_info.jiama]=1:3==e.gid?i["qzmj-"+e.base_info.yuanbao]=1:21==e.gid&&(i["pdk-"+e.base_info.yuanbao]=1),n)if(l.filter[c]&&l.filter[c]!=n[c](e))return;t.push(e),a+=Object.values(e.userList).length}}),0==t.length?"server"===r&&(this.noneRoomTip.opacity=255):this.noneRoomTip.opacity=0,a>99&&(a="99+"),this.roomPeopleCountLabel.string="\u5165\u5ea7\u4eba\u6570"+a,c=this.rooms,s=Object.keys(i),this._displayRoomType(s),e.next=14,o.item_generator.getInstance().executePreFrame(o.item_generator.getInstance()._getItemGenerator(c,t,this.roomPrefab,function(e,i){e.getComponent("CircleRoom").init(t[i])}),2,this);case 14:this.rooms.parent.parent.getComponent("ScrollViewPlus").optDc(!0);case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),_displayRoomType:function(){var e=a(regeneratorRuntime.mark(function e(t){var i,n,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.room_types,0==t.length?this.roomTypeSwitcher.runAction(cc.fadeOut(.1)):null!=this.filter.gid&&this.roomTypeSwitcher.runAction(cc.fadeIn(.1)),n=1,t.unshift(""),e.next=6,o.item_generator.getInstance().executePreFrame(o.item_generator.getInstance()._getItemGenerator(i,t,this.btnRoomTypePrefab,function(e,i){var n=t[i];e.getComponent("CircleRoomType").init(n,function(e){a.filterRoomTypeEvent(e,n)})},n),2,this);case 6:this.room_types.children.some(function(e,t){if(0==t)return!1;e.getComponent(cc.Sprite).spriteFrame=a.btnRoomTypeSF[0]}),this._lastRoomTypeBtn&&(this._lastRoomTypeBtn.getComponent(cc.Sprite).spriteFrame=this.btnRoomTypeSF[1]);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),onDestroy:function(){this.removeObserver()},goCirclelist:function(){cc.global.util.playSound_buttonClick(),cc.global.util.datingType="dating",cc.director.loadScene("circlelist")},displayNotice:function(e){if(e!=this._lastNotice){this._lastNotice=e;var t=this.scrollNoticeNode;e?(t.getChildByName("mask").getChildByName("lb").getComponent(cc.RichText).string=e.replace(/[\r\n]/g," "),t.active=!0):t.active=!1}},showFrm:function(e,t){var i=null;switch(t){case"frm_circleMember":i={type:1};break;case"frm_circlePartner":t="frm_circlePartner";break;case"frm_circleHpHistory":i={type:1};break;case"frm_create":i={type:"circle"};break;case"frm_create_setting":t="frm_create",i={type:"circle_setting"};break;case"frm_zhanji":i={type:"circle"};break;case"frm_circleJoinRoom":t="frm_circleJoinRoom",i={},console.log(e)}this._moreMenuIsShowed&&this.hideMoreMenu(),console.log("\u6253\u5f00\u5f39\u7a97:"+t),cc.global.pop_mgr.showFrm({name:t,customData:i})},goYbc:function(){cc.global.util.tipMsg_notOpen()},onDismissClick:function(){var e=this;this._moreMenuIsShowed&&this.hideMoreMenu(),console.log("--\u6253\u5f00\u63d0\u793a\u5f39\u7a97--"),cc.global.pop_mgr.showFrm({name:"frm_tip_new",closeAnim:!1,customData:{msg:"\u4f60\u786e\u5b9a\u8981\u89e3\u6563\u724c\u53cb\u5708 <color=#6040ff>["+cc.global.util.circleUserinfo.circle_name+"]</color> \u5417?",tip:"\u63d0\u793a\uff1a\u89e3\u6563\u724c\u53cb\u5708\u5c5e\u4e8e\u5371\u9669\u64cd\u4f5c\uff0c\u4e14\u6570\u636e\u4e0d\u53ef\u6062\u590d\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c\uff01",maskClose:!0,btns:[{name:"\u53d6\u6d88"},{name:"\u786e\u5b9a",onClick:function(){e.dismissCircleEvent(),this.onCloseClick()}}]}})},dismissCircleEvent:function(){cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u8bf7\u6c42",!0),cc.global.net.send("dismissCircleEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,circleId:cc.global.util.circleUserinfo.circle_id,platform:cc.global.util.gameinfo.platform})},dismissCircleEventPush:function(e){cc.global.util.tipMsg(e.msg),1==e.code?this.goCirclelist():cc.global.util.closeAlert()},onGeneralExitClick:function(){var e=this;if(this._moreMenuIsShowed&&this.hideMoreMenu(),1==cc.global.util.circleUserinfo.is_admin)return cc.global.util.playSound_buttonClick(),void cc.global.util.tipMsg("\u9700\u8981\u53d6\u6d88\u7ba1\u7406\u5458\u8eab\u4efd\u540e\u518d\u7533\u8bf7\u9000\u51fa");console.log("--\u6253\u5f00\u63d0\u793a\u5f39\u7a97--"),cc.global.pop_mgr.showFrm({name:"frm_tip_new",closeAnim:!1,customData:{msg:"\u4f60\u786e\u5b9a\u8981\u9000\u51fa\u724c\u53cb\u5708 <color=#ffec4e>["+cc.global.util.circleUserinfo.circle_name+"]</color> \u5417?",tip:"\u63d0\u793a\uff1a\u9000\u51fa\u724c\u53cb\u5708\u5c5e\u4e8e\u5371\u9669\u64cd\u4f5c\uff0c\u4e14\u6570\u636e\u4e0d\u53ef\u6062\u590d\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c\uff01",maskClose:!0,btns:[{name:"\u53d6\u6d88"},{name:"\u786e\u5b9a",onClick:function(){e.circleGeneralJoinExitEvent(),this.onCloseClick()}}]}})},circleGeneralJoinExitEvent:function(){cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u8bf7\u6c42",!0),cc.global.net.send("circleGeneralJoinExitEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,circle_id:cc.global.util.circleUserinfo.circle_id,platform:cc.global.util.gameinfo.platform,superior_user_code:cc.global.util.circleUserinfo.superior_user_code,type:"exit"})},circleGeneralJoinExitEventPush:function(e){cc.global.util.tipMsg(e.msg),cc.global.util.closeAlert()},onTransferCircleClick:function(){console.log("\u6253\u5f00\u5f39\u7a97:frm_input"),this._moreMenuIsShowed&&this.hideMoreMenu(),cc.global.pop_mgr.showFrm({name:"frm_input",customData:{type:"str",maxLength:9,defNum:"",placeholder:"\u8bf7\u8f93\u5165\u8f6c\u8ba9\u73a9\u5bb6ID",tip:"*\u8f6c\u8ba9\u5bf9\u8c61\u53ea\u80fd\u662f\u975e\u8be5\u724c\u53cb\u5708\u6210\u5458*",inputOver:this.inputOver_transferCircle,label:null,target:this,title:"transferCircle",showHead:!1,isAutoOver:!1,isShowOk:!0,closeWhenInputOver:!0}})},inputOver_transferCircle:function(e,t,i){cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u8bf7\u6c42",!0),cc.global.net.send("transferCircleEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,circleId:cc.global.util.circleUserinfo.circle_id,platform:cc.global.util.gameinfo.platform,newCreateAccount:t})},transferCircleEventPush:function(e){cc.global.util.tipMsg(e.msg),1==e.code?this.goCirclelist():cc.global.util.closeAlert()},onMemberDetailInfoEventPush:function(e){1==e.code?e.data.user_id==cc.global.util.circleUserinfo.user_id&&(cc.find("Canvas/header/left/club_id/lb").getComponent(cc.Label).string=e.data.circle_code,cc.global.util.circleUserinfo=e.data,this.displayNotice(cc.global.util.circleUserinfo.circle_notice)):(console.log("\u65e0\u6cd5\u83b7\u53d6\u5f53\u524d\u73a9\u5bb6\u4fe1\u606f,\u81ea\u52a8\u8fd4\u56de\u4eb2\u53cb\u5708\u5217\u8868"),this.goCirclelist())},onCircleExamMsgInfoEventPush:function(e){1==e.code?e.data.length>0?this.msgInfoRedDotNode.active=!0:this.msgInfoRedDotNode.active=!1:console.error("\u65e0\u6cd5\u83b7\u53d6\u6d88\u606f\u5ba1\u6838\u5217\u8868",e)},quickJoinRoomCircleEventPush:function(e){1==e.code&&this.requestRoomData(!0)},removeRoomCircleEventPush:function(e){1==e.code&&this.requestRoomData(!0)},notOpen:function(){cc.global.util.playSound_buttonClick(),cc.global.util.tipMsg_notOpen()},quickEntryRoomCircleEvent:function(){var e={uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,circleId:cc.global.util.circleUserinfo.circle_id};this.filter.gid&&void 0!=this.filter.gid&&(e.gid=this.filter.gid),cc.global.net.send("quickEntryRoomCircleEvent",e)},quickEntryRoomCircleEventPush:function(e){console.log("\u4eb2\u53cb\u5708\u5feb\u901f\u5f00\u59cb\u8fd4\u56de:"+e),0==e.code&&cc.global.util.tipMsg(e.msg)},testTip_NN:function(){cc.global.pop_mgr.showFrm({name:"frm_tip_new",closeAnim:!1,customData:{msg:"\u6b63\u5728\u66f4\u65b0\uff0c\u656c\u8bf7\u671f\u5f85...",tip:"",maskClose:!0,btns:[{name:"\u53d6\u6d88"},{name:"\u786e\u5b9a"}]}})}}),cc._RF.pop()},{"./global/NotificationNames":"NotificationNames","./global/item_generator":"item_generator"}],dating:[function(e,t,i){"use strict";cc._RF.push(t,"84bc8pELrhBNaS1lg17eTYf","dating");var n=e("./global/NotificationNames");cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.sys.os==cc.sys.OS_ANDROID?cc.global.util.LongitudeAndLatitude=jsb.reflection.callStaticMethod("org.cocos2dx.javascript.AppActivity","locationInfo","()Ljava/lang/String;"):cc.sys.os==cc.sys.OS_IOS&&(cc.global.util.LongitudeAndLatitude=jsb.reflection.callStaticMethod("JsUseOcTool","locationInfo")),cc.global.game._dispatchEventHandel=this.node,cc.global.game.gid=0,this.initHandle(),this.registerObserver()},start:function(){if(cc.global.util.resize(),this.enterAnim(),this.playMusic(),cc.find("Canvas/bg_particle")&&(cc.find("Canvas/bg_particle").zIndex=cc.global.util.DATING_ZINDEX_BG_PARTICLE),cc.global.net.sio)if("circle"==cc.global.util.datingType&&cc.global.util.circleUserinfo)this.goCircle();else if("tea"==cc.global.util.datingType)if(cc.global.util.teaUserinfo)this.goTea();else{var e=cc.sys.localStorage.getItem("teaInfoCode");e&&(this.isGoTea=!0,cc.global.util.showAlert("\u6b63\u5728\u52a0\u8f7d",!0),cc.global.net.send("tea_infoEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,teaInfoCode:e}))}else"ybc"==cc.global.util.datingType&&this.goYbc();else cc.global.room.createConnect();this.getHallNoice(),this.getScrollNoice(),this.checkIsExistRoom(),this.initview()},enterAnim:function(){var e=cc.find("Canvas/top"),t=e.opacity;e.opacity=0;var i=cc.find("Canvas/bottom"),n=i.opacity;i.opacity=0,this.scheduleOnce(function(){e.opacity=t,e.y+=e.height,e.runAction(cc.moveBy(.3,0,-e.height)),i.opacity=n,i.y-=i.height,i.runAction(cc.moveBy(.3,0,i.height))})},exitAnim:function(e){var t=this.node.getComponent(cc.Animation);t.once("finished",e,this),t.play("dating_exit");var i=cc.find("Canvas/top"),n=cc.find("Canvas/bottom");i.runAction(cc.moveBy(.3,0,i.height)),n.runAction(cc.moveBy(.3,0,-n.height))},playMusic:function(){var e=this.node.getChildByName("music").getComponent(cc.AudioSource);e.volume=cc.global.util.setting.music,0==cc.global.util.setting.musicOn?e.mute=!0:e.mute=!1,e.play()},initview:function(){var e=cc.find("Canvas/info");e.getChildByName("name").getComponent(cc.Label).string=cc.global.util.userinfo.name,cc.find("roomcard/lb",e).getComponent(cc.Label).string=parseFloat(cc.global.util.userinfo.roomcard),cc.find("yuanbao/lb",e).getComponent(cc.Label).string=parseFloat(cc.global.util.userinfo.yuanbao);var t=e.getChildByName("head").getChildByName("sp");cc.global.util.setHeadimg(t,cc.global.util.userinfo.headimg),cc.global.util.mySetInterval(function(){cc.global.net.send("getUserInfo",{account:cc.global.util.userinfo.account})},5e3)},registerObserver:function(){Notification.on(n.NotificationNames.MEMBER_DETAIL_INFO_EVENT_PUSH,this.memberDetailInfoEventPush,this),Notification.on(n.NotificationNames.TEA_INFOEVENT_PUSH,this.teaInfoEventPush,this)},removeObserver:function(){Notification.off(n.NotificationNames.MEMBER_DETAIL_INFO_EVENT_PUSH,this.memberDetailInfoEventPush,this),Notification.off(n.NotificationNames.TEA_INFOEVENT_PUSH,this.teaInfoEventPush,this)},initHandle:function(){var e=this;this.node.on("checkUserPush",function(t){e.checkUserPush(t)}),this.node.on("getUserInfoPush",function(t){e.getUserInfoPush(t)}),this.node.on("tipMsg",function(e){var t=e;switch(t.type){case 0:cc.global.util.tipMsg(t.msg);break;default:console.log("type\u7c7b\u578b\u4e0d\u6b63\u786e:"+t.type)}}),this.node.on("getMessagePush",function(t){var i=t;e.getMessagePush(i)}),this.node.on("getGameGoldSettingPush",function(t){e.node.getComponent("home").getGameGoldSettingPush(t)}),this.node.on("getArenaPush",function(t){e.getArenaPush(t)}),this.node.on("quickJoinClubRoomPush",function(t){e.quickJoinClubRoomPush(t)}),this.node.on("checkSignInPush",function(t){e.checkSignInPush(t)}),this.node.on("userSignInPush",function(t){e.userSignInPush(t)})},showFrm:function(e,t){console.log("\u6253\u5f00\u5f39\u7a97:"+t),cc.global.pop_mgr.showFrm({name:t})},showFrm_zhanji:function(e,t){t&&""!=t||(t="fk"),cc.global.pop_mgr.showFrm({name:"frm_zhanji",customData:{type:t}})},showFrm_create:function(e,t){t&&""!=t||(t="fk"),cc.global.pop_mgr.showFrm({name:"frm_create",customData:{type:t}})},showFrm_noShowSound:function(e,t){console.log("\u6253\u5f00\u5f39\u7a97:"+t),cc.global.pop_mgr.showFrm({name:t,showSound:!1})},goYbc:function(){cc.global.util.tipMsg_notOpen()},checkIsExistRoom:function(){var e=this;cc.global.net.sio&&cc.global.net.sio.connected?cc.global.net.send("checkUser",{uid:cc.global.util.userinfo.id,account:cc.global.util.userinfo.account,uuid:cc.global.util.userinfo.uuid,gid:-1,location:cc.global.util.LongitudeAndLatitude}):cc.global.util.mySetTimeout(function(){e.checkIsExistRoom()},100)},checkUserPush:function(e){1!=e.code&&cc.global.util.tipMsg(e.msg)},getUserInfoPush:function(e){if(e&&1==e.code){cc.global.util.userinfo.roomcard=parseFloat(e.user.roomcard),cc.global.util.userinfo.coins=parseFloat(e.user.coins),cc.global.util.userinfo.score=parseFloat(e.user.score),cc.global.util.userinfo.yuanbao=parseFloat(e.user.yuanbao);var t=cc.find("Canvas").getComponentsInChildren("moneyController");for(var i in t){var n=t[i];switch(n.moneyType){case cc.global.util.moneyTypeArr.roomcard.value:n.node.getComponent(cc.Label).string=cc.global.util.userinfo.roomcard;break;case cc.global.util.moneyTypeArr.coins.value:n.node.getComponent(cc.Label).string=cc.global.util.userinfo.coins;break;case cc.global.util.moneyTypeArr.score.value:n.node.getComponent(cc.Label).string=cc.global.util.userinfo.score;break;case cc.global.util.moneyTypeArr.yuanbao.value:n.node.getComponent(cc.Label).string=cc.global.util.userinfo.yuanbao}}}},getScrollNoice:function(){var e=this;cc.global.net.sio&&cc.global.net.sio.connected?cc.global.net.send("getMessage",{type:1,platform:cc.global.util.gameinfo.platform}):cc.global.util.mySetTimeout(function(){e.getScrollNoice()},1e3)},getMessagePush:function(e){var t=cc.find("Canvas/scrollNotice");1==e.type&&(1==e.code?(t.getChildByName("mask").getChildByName("lb").getComponent(cc.RichText).string=e.content.replace(/[\r\n]/g," "),t.active=!0):t.active=!1)},getHallNoice:function(e){e||!cc.global.util.isShowNotice?cc.global.http.sendRequest("/zagame/getZaEjectNotice.html",null,function(t){if(1==t.code){var i=t.data;null!=i&&(cc.global.pop_mgr.showFrm({name:"frm_notice",showSound:!1,customData:{msg:i.con}}),e||(cc.global.util.isShowNotice=!0))}}):console.log("\u672c\u6b21\u767b\u9646\u5df2\u663e\u793a\u8fc7\u5f39\u51fa\u516c\u544a,\u4e0d\u518d\u5f39\u51fa")},onCircleClick:function(){if(cc.global.util.playSound_buttonClick(),cc.global.util.circleUserinfo)this.goCircle();else{var e=cc.sys.localStorage.getItem("circleId");e?(this.isGoCircle=!0,cc.global.util.showAlert("\u6b63\u5728\u52a0\u8f7d",!0),cc.global.net.send("memberDetailInfoEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,user_id:cc.global.util.userinfo.uid,circle_id:e})):this.goCirclelist()}},memberDetailInfoEventPush:function(e){this.isGoCircle&&(this.isGoCircle=!1,1==e.code?(cc.global.util.circleUserinfo=e.data,this.goCircle()):(cc.global.util.circleUserinfo=null,this.goCirclelist()))},goCircle:function(){cc.director.preloadScene("circle",function(e){if(e)return console.log(e),void cc.global.util.tipMsg("\u52a0\u8f7d\u4eb2\u53cb\u5708\u5931\u8d25");cc.global.util.datingType="circle",cc.director.loadScene("circle")})},goCirclelist:function(){cc.director.preloadScene("circlelist",function(e){if(e)return console.log(e),void cc.global.util.tipMsg("\u52a0\u8f7d\u4eb2\u53cb\u5708\u5217\u8868\u5931\u8d25");cc.director.loadScene("circlelist")})},quickJoinClubRoomPush:function(e){1!=e.code&&(cc.global.util.closeAlert(),cc.global.util.tipMsg(e.msg))},onDestroy:function(){cc.global.util.clearAllTimer(),this.removeObserver()},noOpen:function(){cc.global.util.tipMsg_noOpen()},teaInfoEventPush:function(e){this.isGoTea&&(cc.global.util.closeAlert(),this.isGoTea=!1,1==e.code?cc.global.util.teaUserinfo=e.data:e.teaName&&e.teaCode?cc.global.util.teaUserinfo={teaName:e.teaName,teaInfoCode:e.teaCode}:cc.global.util.teaUserinfo=null,this.goTea())},onTeaClick:function(){if(cc.global.util.playSound_buttonClick(),cc.global.util.teaUserinfo)this.goTea();else{var e=cc.sys.localStorage.getItem("teaInfoCode");e?(this.isGoTea=!0,cc.global.util.showAlert("\u6b63\u5728\u52a0\u8f7d",!0),cc.global.net.send("tea_infoEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,teaInfoCode:e})):this.goTea()}},goTea:function(){cc.director.preloadScene("tea",function(e){if(e)return console.log(e),void cc.global.util.tipMsg("\u52a0\u8f7d\u8336\u697c\u5931\u8d25");cc.global.util.datingType="tea",cc.director.loadScene("tea")})}}),cc._RF.pop()},{"./global/NotificationNames":"NotificationNames"}],frm_auth:[function(e,t,i){"use strict";cc._RF.push(t,"67649Yir7lMq7gfHfNKk01F","frm_auth");var n=e("./base/pop_base");cc.Class({extends:n.pop_base,properties:{},onLoad:function(){},on_show:function(){this.getData()},on_hide:function(){},userAuth:function(){var e=this;cc.global.util.playSound_buttonClick();var t=cc.find("bg/con/name/edit",this.node).getComponent(cc.EditBox).string,i=cc.find("bg/con/card/edit",this.node).getComponent(cc.EditBox).string;""!=t?""!=i?(cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u6570\u636e",!0),cc.global.http.sendRequest("/zagame/auth/userAuth.json",{username:t,usercard:i,userid:cc.global.util.userinfo.id},function(t){cc.global.util.closeAlert(),t?(cc.global.util.tipMsg(t.msg),1==t.code&&(cc.find("bg/con",e.node).active=!1,cc.find("bg/tip",e.node).active=!0,e.ops.closeAnim=!1,e.ops.closeSound=!1,e.onCloseClick())):cc.global.util.tipMsg("\u7f51\u7edc\u5f02\u5e38")},null,!0)):cc.global.util.tipMsg("\u8bf7\u8f93\u5165\u8eab\u4efd\u8bc1\u53f7"):cc.global.util.tipMsg("\u8bf7\u8f93\u5165\u59d3\u540d")},getData:function(){var e=this;cc.global.http.sendRequest("/zagame/cxsfbdg.json",{id:cc.global.util.userinfo.id,type:"sID"},function(t){t?1==t.code?(cc.find("bg/con",e.node).active=!1,cc.find("bg/tip",e.node).active=!0):(cc.find("bg/con",e.node).active=!0,cc.find("bg/tip",e.node).active=!1,cc.find("bg/con/name/edit",e.node).getComponent(cc.EditBox).string="",cc.find("bg/con/card/edit",e.node).getComponent(cc.EditBox).string=""):cc.global.util.tipMsg_connectErr()})}}),cc._RF.pop()},{"./base/pop_base":"pop_base"}],frm_bindTel:[function(e,t,i){"use strict";cc._RF.push(t,"e0da47NnylDM5J5vt6iFQXV","frm_bindTel");var n=e("./base/pop_base"),o=e("../global/NotificationNames");cc.Class({extends:n.pop_base,properties:{},onLoad:function(){},registerObserver:function(){Notification.on(o.NotificationNames.USER_BIND_PUSH,this.userBindPush,this)},removeObserver:function(){Notification.off(o.NotificationNames.USER_BIND_PUSH,this.userBindPush,this)},on_show:function(){this.registerObserver(),cc.find("bg/tel/edit",this.node).getComponent(cc.EditBox).string="",cc.find("bg/password1/edit",this.node).getComponent(cc.EditBox).string="",cc.find("bg/password2/edit",this.node).getComponent(cc.EditBox).string="",cc.find("bg/code/edit",this.node).getComponent(cc.EditBox).string="",this.codeKey=null,cc.find("bg/code/btn_getCode",this.node).getComponent(cc.Button).interactable=!0},on_hide:function(){this.removeObserver()},sendMail:function(){cc.global.util.playSound_buttonClick();var e=cc.find("bg/tel/edit",this.node).getComponent(cc.EditBox).string;""!=e?(cc.global.util.showAlert("\u6b63\u5728\u83b7\u53d6",!0),this.codeKey=this.guid(),cc.global.http.sendRequest("/games.zhuoan.servers.ui/getVerificationCode",{tel:e,codeKey:this.codeKey,id:cc.global.util.userinfo.id,platform:cc.global.util.gameinfo.platform},function(e){cc.global.util.closeAlert(),e?cc.global.util.tipMsg(e.msg):cc.global.util.tipMsg("\u7f51\u7edc\u5f02\u5e38")})):cc.global.util.tipMsg("\u8bf7\u8f93\u5165\u624b\u673a\u53f7")},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},bindMobile:function(){cc.global.util.playSound_buttonClick();var e=cc.find("bg/tel/edit",this.node).getComponent(cc.EditBox).string,t=cc.find("bg/password1/edit",this.node).getComponent(cc.EditBox).string,i=cc.find("bg/password2/edit",this.node).getComponent(cc.EditBox).string,n=cc.find("bg/code/edit",this.node).getComponent(cc.EditBox).string;""!=e&&""!=t?t==i?""!=n?(cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u6570\u636e",!0),cc.global.net.send("userBind",{account:cc.global.util.userinfo.account,uuid:cc.global.util.userinfo.uuid,password:t,tel:e,authCode:n})):cc.global.util.tipMsg("\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"):cc.global.util.tipMsg("\u4e24\u6b21\u5bc6\u7801\u4e0d\u6b63\u786e"):cc.global.util.tipMsg("\u8bf7\u5c06\u4fe1\u606f\u586b\u5199\u5b8c\u6574")},userBindPush:function(e){cc.global.util.closeAlert(),cc.global.util.tipMsg(e.msg),1==e.code&&(this.checkBindStatus(),this.ops.closeAnim=!1,this.ops.closeSound=!1,this.onCloseClick())},checkBindStatus:function(){cc.global.net.send("checkBindStatus",{account:cc.global.util.userinfo.account})}}),cc._RF.pop()},{"../global/NotificationNames":"NotificationNames","./base/pop_base":"pop_base"}],frm_circleBackHpRec:[function(e,t,i){"use strict";cc._RF.push(t,"2da60RaJCxI77SXqrmRxDWE","frm_circleBackHpRec");var n=e("./base/pop_base"),o=e("../global/NotificationNames"),a=e("../global/item_generator");function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function n(o,a){try{var c=t[o](a),s=c.value}catch(e){return void i(e)}if(!c.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}cc.Class({extends:n.pop_base,properties:{content:{type:cc.Node,default:null,tooltip:"\u5f39\u7a97\u5185\u5bb9\u5bb9\u5668"},list:{type:cc.Node,default:null,tooltip:"\u5217\u8868\u5bb9\u5668"},item_prefab:{type:cc.Prefab,default:null,tooltip:"\u5217\u8868prefab"},addColor:new cc.Color,minusColor:new cc.Color,addSign:"+",minusSign:"",pageSize:{type:cc.Integer,default:6,min:1,tooltip:"\u6bcf\u9875\u663e\u793a\u6761\u6570"},lastPageBtn:{type:cc.Button,default:null,tooltip:"\u4e0a\u4e00\u9875\u6309\u94ae"},nextPageBtn:{type:cc.Button,default:null,tooltip:"\u4e0b\u4e00\u9875\u6309\u94ae"},pageText:{type:cc.Label,default:null,tooltip:"\u9875\u7801label"}},onLoad:function(){this.eventList={},this.eventList[o.NotificationNames.HISTORY_HP_CHANGE_BY_OPERATE_EVENT_PUSH]=this.getDataResp,this.eventList[o.NotificationNames.CIRCLE_GET_PROFIT_BALANCE_TO_HP_EVENT_PUSH]=this.circleGetProfitBalanceToHpEventPush},registerObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.on(e,this.eventList[e],this)},removeObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.off(e,this.eventList[e],this)},on_show:function(){this.registerObserver(),cc.find("content/yestodayHpFee",this.content).getComponent(cc.Label).string="",cc.find("content/totalBalance",this.content).getComponent(cc.Label).string="",this.totalBalance=null;for(var e=0;e<this.list.childrenCount;e++)this.list.children[e].active=!1;this.pageIndex=0,this.pageCount=0,this.updatePage(),this.getData()},on_hide:function(){this.removeObserver()},getData:function(){var e={circleId:cc.global.util.circleUserinfo.circle_id,uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,pageIndex:this.pageIndex||1,pageSize:this.pageSize,changeType:3};cc.global.util.showAlert("\u6b63\u5728\u83b7\u53d6\u6570\u636e",!0),cc.global.net.send("historyHpChangeByOperateEvent",e)},getDataResp:function(e){if(1!=e.code)return cc.global.util.tipMsg(e.msg),void cc.global.util.closeAlert();if(this.pageIndex>0&&e.pageIndex!=this.pageIndex)return console.log("\u8fd4\u56de\u6570\u636e\u9875\u7801\u9519\u8bef,\u5f53\u524d\u9875\u7801\u4e3a:"+this.pageIndex),void cc.global.util.closeAlert();if(this.pageIndex=e.pageIndex,this.pageCount=e.totalPage,this.totalCount=e.totalCount,this.updatePage(),cc.find("content/yestodayHpFee",this.content).getComponent(cc.Label).string=e.yestodayHpFee||0,cc.find("content/totalBalance",this.content).getComponent(cc.Label).string=e.totalBalance||0,this.totalBalance=parseFloat(e.totalBalance),this.pageIndex>this.pageCount&&this.pageCount>0)return this.pageIndex=this.pageCount,void this.getData();var t=e.data||[];this.showList(this.list,t,this.item_prefab)},showList:function(){var e=c(regeneratorRuntime.mark(function e(t,i,n){var o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.item_generator.getInstance().executePreFrame(a.item_generator.getInstance()._getItemGenerator(t,i,n,function(e,t){var n="add";(i[t].change_count<0||4==i[t].change_type)&&(n="minus"),cc.find("name",e).getComponent(cc.Label).string=i[t].user_name,cc.find("id",e).getComponent(cc.Label).string=i[t].account,cc.find("num",e).getComponent(cc.Label).string=o[n+"Sign"]+i[t].change_count,cc.find("num",e).color=o[n+"Color"],cc.find("time",e).getComponent(cc.Label).string=i[t].create_time}),4,this);case 2:cc.global.util.closeAlert();case 3:case"end":return e.stop()}},e,this)}));return function(t,i,n){return e.apply(this,arguments)}}(),changePage:function(e,t){if(cc.global.util.playSound_buttonClick(),"next"==t){if(this.pageIndex>=this.pageCount)return void cc.global.util.tipMsg("\u5df2\u7ecf\u662f\u6700\u540e\u4e00\u9875\u4e86!");this.pageIndex++}else if("last"==t){if(this.pageIndex<=1)return void cc.global.util.tipMsg("\u5df2\u7ecf\u662f\u7b2c\u4e00\u9875\u4e86!");this.pageIndex--}else parseInt(t)>this.pageCount?this.pageIndex=this.pageCount:parseInt(t)<1?this.pageIndex=1:this.pageIndex=parseInt(t);this.updatePage(),this.getData()},updatePage:function(){0==this.pageCount&&(this.pageIndex=0),this.pageText.string=this.pageIndex+"/"+this.pageCount,this.pageIndex<=1?this.lastPageBtn.interactable=!1:this.lastPageBtn.interactable||(this.lastPageBtn.interactable=!0),this.pageIndex>=this.pageCount?this.nextPageBtn.interactable=!1:this.nextPageBtn.interactable||(this.nextPageBtn.interactable=!0)},getBackHp:function(){this.totalBalance?(console.log("\u6253\u5f00\u5f39\u7a97:frm_input"),cc.global.pop_mgr.showFrm({name:"frm_input",customData:{type:"num",maxLength:this.totalBalance.toString().length,showBtnMax:!0,maxNum:this.totalBalance,defNum:this.totalBalance,placeholder:"\u6700\u591a"+this.totalBalance,inputOver:this.inputOver_getBackHp,label:null,target:this,title:"getBackHp",showHead:!1,isAutoOver:!1,isShowOk:!0,closeWhenInputOver:!0}})):cc.global.util.tipMsg("\u6ca1\u6709\u53ef\u63d0\u53d6\u7684\u4f63\u91d1")},inputOver_getBackHp:function(e,t,i){cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u8bf7\u6c42",!0),cc.global.net.send("circleGetProfitBalanceToHpEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,circleId:cc.global.util.circleUserinfo.circle_id,platform:cc.global.util.gameinfo.platform,profitBalance:t})},circleGetProfitBalanceToHpEventPush:function(e){cc.global.util.tipMsg(e.msg),cc.global.util.closeAlert(),1==e.code&&this.getData()}}),cc._RF.pop()},{"../global/NotificationNames":"NotificationNames","../global/item_generator":"item_generator","./base/pop_base":"pop_base"}],frm_circleConfig:[function(e,t,i){"use strict";cc._RF.push(t,"a9a285rPU9BybfR8cWqbef5","frm_circleConfig");var n=e("./base/pop_base"),o=e("../global/NotificationNames");cc.Class({extends:n.pop_base,properties:{toggleContainer_createRoomRole:cc.ToggleContainer,toggleContainer_fundPrepaidRole:cc.ToggleContainer,toggleContainer_fundBillRole:cc.ToggleContainer},onLoad:function(){this.eventList={},this.eventList[o.NotificationNames.CREATE_MODIFY_CIRCLE_EVENT_PUSH]=this.changeConfigResp,this.eventList[o.NotificationNames.MEMBER_DETAIL_INFO_EVENT_PUSH]=this.getDataResp},registerObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.on(e,this.eventList[e],this)},removeObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.off(e,this.eventList[e],this)},on_show:function(){this.registerObserver(),this.initView()},on_hide:function(){this.removeObserver()},initView:function(){this.toggleContainer_createRoomRole.node.getChildByName("toggle"+cc.global.util.circleUserinfo.create_room_role).getComponent(cc.Toggle).check(),this.toggleContainer_fundPrepaidRole.node.getChildByName("toggle"+cc.global.util.circleUserinfo.fund_prepaid_role).getComponent(cc.Toggle).check(),this.toggleContainer_fundBillRole.node.getChildByName("toggle"+cc.global.util.circleUserinfo.fund_bill_role).getComponent(cc.Toggle).check()},changeCreateRoomRole:function(e){var t=cc.global.util.getNodeIndex(e.node.name,"toggle");t!=cc.global.util.circleUserinfo.create_room_role&&(console.log("changeCreateRoomRole\u9009\u4e2d:"+t),cc.global.util.playSound_buttonClick(),cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u4fee\u6539",!0),cc.global.net.send("createModifyCircleEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,circleId:cc.global.util.circleUserinfo.circle_id,type:2,createRoomRole:t}))},changeFundPrepaidRole:function(e){var t=cc.global.util.getNodeIndex(e.node.name,"toggle");t!=cc.global.util.circleUserinfo.fund_prepaid_role&&(console.log("changeFundPrepaidRole\u9009\u4e2d:"+t),cc.global.util.playSound_buttonClick(),cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u4fee\u6539",!0),cc.global.net.send("createModifyCircleEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,circleId:cc.global.util.circleUserinfo.circle_id,type:2,fundPrepaidRole:t}))},changeFundBillRole:function(e){var t=cc.global.util.getNodeIndex(e.node.name,"toggle");t!=cc.global.util.circleUserinfo.fund_bill_role&&(console.log("changeFundBillRole\u9009\u4e2d:"+t),cc.global.util.playSound_buttonClick(),cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u4fee\u6539",!0),cc.global.net.send("createModifyCircleEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,circleId:cc.global.util.circleUserinfo.circle_id,type:2,fundBillRole:t}))},changeConfigResp:function(e){cc.global.util.tipMsg(e.msg),this.waiting=!0,cc.global.net.send("memberDetailInfoEvent",{user_id:cc.global.util.userinfo.uid,circle_id:cc.global.util.circleUserinfo.circle_id},!0)},getDataResp:function(e){this.waiting&&(this.waiting=!1,this.initView(),cc.global.util.closeAlert())}}),cc._RF.pop()},{"../global/NotificationNames":"NotificationNames","./base/pop_base":"pop_base"}],frm_circleFundRec:[function(e,t,i){"use strict";cc._RF.push(t,"9b337ggJVZOebhkmh4yeoKk","frm_circleFundRec");var n=e("./base/pop_base"),o=e("../global/NotificationNames"),a=e("../global/item_generator");function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function n(o,a){try{var c=t[o](a),s=c.value}catch(e){return void i(e)}if(!c.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}cc.Class({extends:n.pop_base,properties:{content:{type:cc.Node,default:null,tooltip:"\u5f39\u7a97\u5185\u5bb9\u5bb9\u5668"},list:{type:cc.Node,default:null,tooltip:"\u5217\u8868\u5bb9\u5668"},item_prefab:{type:cc.Prefab,default:null,tooltip:"\u5217\u8868prefab"},addColor:new cc.Color,minusColor:new cc.Color,addSign:"+",minusSign:"",pageSize:{type:cc.Integer,default:6,min:1,tooltip:"\u6bcf\u9875\u663e\u793a\u6761\u6570"},lastPageBtn:{type:cc.Button,default:null,tooltip:"\u4e0a\u4e00\u9875\u6309\u94ae"},nextPageBtn:{type:cc.Button,default:null,tooltip:"\u4e0b\u4e00\u9875\u6309\u94ae"},pageText:{type:cc.Label,default:null,tooltip:"\u9875\u7801label"}},onLoad:function(){this.eventList={},this.eventList[o.NotificationNames.CIRCLE_FUND_BILL_DETAIL_EVENT_PUSH]=this.getDataResp,this.eventList[o.NotificationNames.TEA_MONEYRECORDLISTEVENT_PUSH]=this.getDataResp},registerObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.on(e,this.eventList[e],this)},removeObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.off(e,this.eventList[e],this)},on_show:function(){if(this.registerObserver(),!this.ops||!this.ops.customData)return console.log("\u660e\u7ec6\u5f39\u7a97\u521d\u59cb\u5316\u5f02\u5e38,\u65e0\u6cd5\u83b7\u53d6\u660e\u7ec6\u7c7b\u578b"),void cc.global.util.tipMsg("\u53c2\u6570\u5f02\u5e38,\u8bf7\u91cd\u8bd5");if(this.type=this.ops.customData.type,this.type&&""!=this.type){cc.find("bg/titles/title_circle",this.node).active=!1,cc.find("bg/titles/title_tea",this.node).active=!1,cc.find("bg/titles/title_"+this.type,this.node).active=!0;for(var e=0;e<this.list.childrenCount;e++)this.list.children[e].active=!1;cc.find("bg/tab_content/toggle1",this.node).getComponent(cc.Toggle).isChecked=!0,cc.find("bg/tab_content/toggle2",this.node).getComponent(cc.Toggle).isChecked=!1,this.tabId=1,this.pageIndex=0,this.pageCount=0,this.updatePage(),cc.find("bg/date_page/label",this.node).getComponent(cc.Label).string=this.getDifferentDate(new Date,0),this.changeDateLabelActive(),this.getData()}else console.log("\u660e\u7ec6\u5f39\u7a97type\u5f02\u5e38")},on_hide:function(){this.removeObserver()},getData:function(){if("circle"==this.type){var e={circleId:cc.global.util.circleUserinfo.circle_id,uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,pageIndex:this.pageIndex||1,pageSize:this.pageSize,time:cc.find("bg/date_page/label",this.node).getComponent(cc.Label).string,type:this.tabId};cc.global.util.showAlert("\u6b63\u5728\u83b7\u53d6\u6570\u636e",!0),cc.global.net.send("circleFundBillDetailEvent",e)}else if("tea"==this.type){var t={teaInfoId:cc.global.util.teaUserinfo.id,uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,pageIndex:this.pageIndex||1,pageSize:this.pageSize,time:cc.find("bg/date_page/label",this.node).getComponent(cc.Label).string,type:this.tabId};cc.global.util.showAlert("\u6b63\u5728\u83b7\u53d6\u6570\u636e",!0),cc.global.net.send("tea_moneyRecordListEvent",t)}},getDataResp:function(e){if(1!=e.code)return cc.global.util.tipMsg(e.msg),void cc.global.util.closeAlert();if("circle"==this.type){if(this.pageIndex>0&&e.data.pageIndex!=this.pageIndex)return console.log("\u8fd4\u56de\u6570\u636e\u9875\u7801\u9519\u8bef,\u5f53\u524d\u9875\u7801\u4e3a:"+this.pageIndex),void cc.global.util.closeAlert();this.pageIndex=e.data.pageIndex,this.pageCount=e.data.totalPage,this.totalCount=e.data.totalCount}else if("tea"==this.type){if(this.pageIndex>0&&e.pageIndex!=this.pageIndex)return console.log("\u8fd4\u56de\u6570\u636e\u9875\u7801\u9519\u8bef,\u5f53\u524d\u9875\u7801\u4e3a:"+this.pageIndex),void cc.global.util.closeAlert();this.pageIndex=e.pageIndex,this.pageCount=e.totalPage,this.totalCount=e.totalCount}if(this.updatePage(),this.pageIndex>this.pageCount&&this.pageCount>0)return this.pageIndex=this.pageCount,void this.getData();if(e.fundCountAll?(cc.find("fundCountAll/num",this.node).getComponent(cc.Label).string=e.fundCountAll,cc.find("fundCountAll",this.node).active=!0):cc.find("fundCountAll",this.node).active=!1,e.teaMoneyAll?(cc.find("teaMoneyAll/num",this.node).getComponent(cc.Label).string=e.teaMoneyAll,cc.find("teaMoneyAll",this.node).active=!0):cc.find("teaMoneyAll",this.node).active=!1,"circle"==this.type){var t=e.data.list||[];t.length>0?cc.find("bg/tip",this.node).active=!1:(cc.find("bg/tip",this.node).getComponent(cc.Label).string="\xb7 \u6682\u65e0\u6570\u636e \xb7",cc.find("bg/tip",this.node).active=!0),this.showList(this.list,t,this.item_prefab)}else if("tea"==this.type){var i=e.data||[];i.length>0?cc.find("bg/tip",this.node).active=!1:(cc.find("bg/tip",this.node).getComponent(cc.Label).string="\xb7 \u6682\u65e0\u6570\u636e \xb7",cc.find("bg/tip",this.node).active=!0),this.showTeaList(this.list,i,this.item_prefab)}},showList:function(){var e=c(regeneratorRuntime.mark(function e(t,i,n){var o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.item_generator.getInstance().executePreFrame(a.item_generator.getInstance()._getItemGenerator(t,i,n,function(e,t){var n="\u672a\u77e5\u7c7b\u578b";switch(i[t].operator_type){case 1:n="\u57fa\u91d1\u8f6c\u5165";break;case 2:n="\u57fa\u91d1\u8f6c\u51fa";break;case 3:n="\u6e38\u620f\u6d88\u8017"}var a="add",c="";i[t].fund_change_count<0?c=o[(a="minus")+"Sign"]:2==i[t].operator_type?(a="minus",c="-"):c=o[a+"Sign"],cc.find("name",e).getComponent(cc.Label).string=n,cc.find("num",e).getComponent(cc.Label).string=c+i[t].fund_change_count,cc.find("num",e).color=o[a+"Color"],cc.find("member",e).getComponent(cc.Label).string=i[t].memo,cc.find("time",e).getComponent(cc.Label).string=i[t].gmt_create}),4,this);case 2:cc.global.util.closeAlert();case 3:case"end":return e.stop()}},e,this)}));return function(t,i,n){return e.apply(this,arguments)}}(),showTeaList:function(){var e=c(regeneratorRuntime.mark(function e(t,i,n){var o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.item_generator.getInstance().executePreFrame(a.item_generator.getInstance()._getItemGenerator(t,i,n,function(e,t){var n="add",a="";a=i[t].teaMoney<0?o[(n="minus")+"Sign"]:o[n+"Sign"],cc.find("name",e).getComponent(cc.Label).string=i[t].remark,cc.find("num",e).getComponent(cc.Label).string=a+i[t].teaMoney,cc.find("num",e).color=o[n+"Color"],cc.find("member",e).getComponent(cc.Label).string=i[t].operationInfo?i[t].operationInfo:"",cc.find("time",e).getComponent(cc.Label).string=i[t].createTime}),4,this);case 2:cc.global.util.closeAlert();case 3:case"end":return e.stop()}},e,this)}));return function(t,i,n){return e.apply(this,arguments)}}(),changePage:function(e,t){if(cc.global.util.playSound_buttonClick(),"next"==t){if(this.pageIndex>=this.pageCount)return void cc.global.util.tipMsg("\u5df2\u7ecf\u662f\u6700\u540e\u4e00\u9875\u4e86!");this.pageIndex++}else if("last"==t){if(this.pageIndex<=1)return void cc.global.util.tipMsg("\u5df2\u7ecf\u662f\u7b2c\u4e00\u9875\u4e86!");this.pageIndex--}else parseInt(t)>this.pageCount?this.pageIndex=this.pageCount:parseInt(t)<1?this.pageIndex=1:this.pageIndex=parseInt(t);this.updatePage(),this.getData()},updatePage:function(){0==this.pageCount&&(this.pageIndex=0),this.pageText.string=this.pageIndex+"/"+this.pageCount,this.pageIndex<=1?this.lastPageBtn.interactable=!1:this.lastPageBtn.interactable||(this.lastPageBtn.interactable=!0),this.pageIndex>=this.pageCount?this.nextPageBtn.interactable=!1:this.nextPageBtn.interactable||(this.nextPageBtn.interactable=!0)},getDifferentDate:function(e,t){var i=new Date(e);return i.setDate(i.getDate()+t),i.getFullYear()+"-"+(i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1)+"-"+(i.getDate()<10?"0"+i.getDate():i.getDate())},changeDate:function(e,t){cc.global.util.playSound_buttonClick();var i=this.getDifferentDate(cc.find("bg/date_page/label",this.node).getComponent(cc.Label).string,parseInt(t));cc.find("bg/date_page/label",this.node).getComponent(cc.Label).string=i,this.changeDateLabelActive(),this.getData()},changeDateLabelActive:function(){var e=cc.find("bg/date_page/label",this.node).getComponent(cc.Label).string,t=this.getDifferentDate(new Date,0),i=(new Date(e)-new Date(t))/864e5;cc.find("bg/date_page/btn_nextPage",this.node).active=i<0,cc.find("bg/date_page/btn_lastPage",this.node).active=i>-2},switchTab:function(e){e&&cc.global.util.playSound_buttonClick();for(var t=cc.find("bg/scroll/view/content",this.node),i=0;i<t.childrenCount;i++)t.children[i].active=!1;this.tabId=-1;for(var n=cc.find("bg/tab_content",this.node),o=0;o<n.childrenCount;o++)if(n.children[o].getComponent(cc.Toggle).isChecked){this.tabId=cc.global.util.getNodeIndex(n.children[o].name,"toggle");break}this.getData()}}),cc._RF.pop()},{"../global/NotificationNames":"NotificationNames","../global/item_generator":"item_generator","./base/pop_base":"pop_base"}],frm_circleFund:[function(e,t,i){"use strict";cc._RF.push(t,"9ee923WiiNOupIelicNMeOE","frm_circleFund");var n=e("./base/pop_base"),o=e("../global/NotificationNames");cc.Class({extends:n.pop_base,properties:{content_fundPrepaidRole:cc.Node,content_fundBillRole:cc.Node},onLoad:function(){this.eventList={},this.eventList[o.NotificationNames.CIRCLE_FUND_SAVE_PAY_EVENT_PUSH]=this.circleFundSavePayEventPush},registerObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.on(e,this.eventList[e],this)},removeObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.off(e,this.eventList[e],this)},on_show:function(){this.registerObserver(),this.initView()},on_hide:function(){this.removeObserver()},showFrm:function(e,t){var i=null;switch(t){case"frm_circleFundRec":i={type:"circle"}}console.log("\u6253\u5f00\u5f39\u7a97:"+t),cc.global.pop_mgr.showFrm({name:t,customData:i})},initView:function(){this.content_fundPrepaidRole.getChildByName("status_on").active=3==cc.global.util.circleUserinfo.fund_prepaid_role,this.content_fundPrepaidRole.getChildByName("status_off").active=3!=cc.global.util.circleUserinfo.fund_prepaid_role,this.content_fundBillRole.getChildByName("status_on").active=3==cc.global.util.circleUserinfo.fund_bill_role,this.content_fundBillRole.getChildByName("status_off").active=3!=cc.global.util.circleUserinfo.fund_bill_role},showInput_fundPay:function(){var e=null;1!=cc.global.util.circleUserinfo.user_role&&1!=cc.global.util.circleUserinfo.is_admin||(e="fundPay"),console.log("\u6253\u5f00\u5f39\u7a97:frm_input"),cc.global.pop_mgr.showFrm({name:"frm_input",customData:{type:"num",maxLength:8,defNum:"",placeholder:"\u5f53\u524d"+cc.global.util.userinfo.roomcard,inputOver:this.inputOver_fundPay,label:null,target:this,title:"fundPay",showHead:!1,isAutoOver:!1,isShowOk:!0,closeWhenInputOver:!0,tab:e}})},inputOver_fundPay:function(e,t,i){parseInt(t)>0?(cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u4fee\u6539"),cc.global.net.send("circleFundSavePayEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,circle_id:cc.global.util.circleUserinfo.circle_id,platform:cc.global.util.gameinfo.platform,operator_type:this.target_input.tabType||1,change_count:t})):cc.global.util.tipMsg("\u8bf7\u8f93\u5165\u5927\u4e8e0\u7684\u6570\u503c")},circleFundSavePayEventPush:function(e){cc.global.util.tipMsg(e.msg),cc.global.util.closeAlert(),cc.global.net.send("memberDetailInfoEvent",{user_id:cc.global.util.userinfo.uid,circle_id:cc.global.util.circleUserinfo.circle_id},!0),cc.global.net.send("getUserInfo",{account:cc.global.util.userinfo.account})}}),cc._RF.pop()},{"../global/NotificationNames":"NotificationNames","./base/pop_base":"pop_base"}],frm_circleHpHistory:[function(e,t,i){"use strict";cc._RF.push(t,"0b50bZmn0pHvoaGob47p8dI","frm_circleHpHistory");var n=e("./base/pop_base"),o=e("../global/NotificationNames"),a=e("../global/item_generator");function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function n(o,a){try{var c=t[o](a),s=c.value}catch(e){return void i(e)}if(!c.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}cc.Class({extends:n.pop_base,properties:{content:{type:cc.Node,default:null,tooltip:"\u5f39\u7a97\u5185\u5bb9\u5bb9\u5668"},list:{type:cc.Node,default:null,tooltip:"\u5217\u8868\u5bb9\u5668"},item_prefab:{type:cc.Prefab,default:null,tooltip:"\u5217\u8868prefab"},addColor:new cc.Color,minusColor:new cc.Color,addSign:"+",minusSign:"",pageSize:{type:cc.Integer,default:6,min:1,tooltip:"\u6bcf\u9875\u663e\u793a\u6761\u6570"},lastPageBtn:{type:cc.Button,default:null,tooltip:"\u4e0a\u4e00\u9875\u6309\u94ae"},nextPageBtn:{type:cc.Button,default:null,tooltip:"\u4e0b\u4e00\u9875\u6309\u94ae"},pageText:{type:cc.Label,default:null,tooltip:"\u9875\u7801label"}},onLoad:function(){this.eventList={},this.eventList[o.NotificationNames.CIRCLE_STRENTH_LOG_EVENT_PUSH]=this.getDataResp,this.eventList[o.NotificationNames.HISTORY_HP_CHANGE_BY_OPERATE_EVENT_PUSH]=this.getDataResp},registerObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.on(e,this.eventList[e],this)},removeObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.off(e,this.eventList[e],this)},on_show:function(){this.registerObserver(),this.ops.customData||(this.ops.customData={}),this.type=this.ops.customData.type||1,2==this.type&&(this.memberData=this.ops.customData.memberData),cc.find("titles/title_ownHpHistory",this.content).active=1==this.type,cc.find("titles/title_memberHpHistory",this.content).active=2==this.type,cc.find("content_own",this.content).active=1==this.type,cc.find("content_member",this.content).active=2==this.type,1==this.type?(cc.find("content_own/yestodayHp",this.content).getComponent(cc.Label).string="",cc.find("content_own/todayHp",this.content).getComponent(cc.Label).string=""):2==this.type&&(cc.find("content_member/historyAdd",this.content).getComponent(cc.Label).string="",cc.find("content_member/historyDeduct",this.content).getComponent(cc.Label).string="");for(var e=0;e<this.list.childrenCount;e++)this.list.children[e].active=!1;this.tabId=1,cc.find("bg/tab_content",this.node).active=1==this.type,this.pageIndex=0,this.pageCount=0,this.updatePage(),this.getData()},on_hide:function(){this.removeObserver()},getData:function(){var e={circleId:cc.global.util.circleUserinfo.circle_id,uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,pageIndex:this.pageIndex||1,pageSize:this.pageSize,hpLogType:this.tabId};cc.global.util.showAlert("\u6b63\u5728\u83b7\u53d6\u6570\u636e",!0),1==this.type?cc.global.net.send("circleStrenthLogEvent",e):2==this.type&&(e.targetUserId=this.memberData.user_id,e.changeType=1,cc.global.net.send("historyHpChangeByOperateEvent",e))},getDataResp:function(e){if(1!=e.code)return cc.global.util.tipMsg(e.msg),void cc.global.util.closeAlert();if(this.pageIndex>0&&e.pageIndex!=this.pageIndex)return console.log("\u8fd4\u56de\u6570\u636e\u9875\u7801\u9519\u8bef,\u5f53\u524d\u9875\u7801\u4e3a:"+this.pageIndex),void cc.global.util.closeAlert();if(this.pageIndex=e.pageIndex,this.pageCount=e.totalPage,this.totalCount=e.totalCount,this.updatePage(),1==this.type?(cc.find("content_own/yestodayHp",this.content).getComponent(cc.Label).string=e.yestodayHp,cc.find("content_own/todayHp",this.content).getComponent(cc.Label).string=e.todayHp):2==this.type&&(cc.find("content_member/historyAdd",this.content).getComponent(cc.Label).string=e.historyAdd,cc.find("content_member/historyDeduct",this.content).getComponent(cc.Label).string=e.historyDeduct),this.pageIndex>this.pageCount&&this.pageCount>0)return this.pageIndex=this.pageCount,void this.getData();var t=e.data||[];this.showList(this.list,t,this.item_prefab)},showList:function(){var e=c(regeneratorRuntime.mark(function e(t,i,n){var o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.item_generator.getInstance().executePreFrame(a.item_generator.getInstance()._getItemGenerator(t,i,n,function(e,t){var n="add";i[t].change_count<0&&(n="minus"),cc.find("name",e).getComponent(cc.Label).string=i[t].memo,cc.find("num",e).getComponent(cc.Label).string=o[n+"Sign"]+i[t].change_count,cc.find("num",e).color=o[n+"Color"],cc.find("time",e).getComponent(cc.Label).string=i[t].create_time}),4,this);case 2:cc.global.util.closeAlert();case 3:case"end":return e.stop()}},e,this)}));return function(t,i,n){return e.apply(this,arguments)}}(),changePage:function(e,t){if(cc.global.util.playSound_buttonClick(),"next"==t){if(this.pageIndex>=this.pageCount)return void cc.global.util.tipMsg("\u5df2\u7ecf\u662f\u6700\u540e\u4e00\u9875\u4e86!");this.pageIndex++}else if("last"==t){if(this.pageIndex<=1)return void cc.global.util.tipMsg("\u5df2\u7ecf\u662f\u7b2c\u4e00\u9875\u4e86!");this.pageIndex--}else parseInt(t)>this.pageCount?this.pageIndex=this.pageCount:parseInt(t)<1?this.pageIndex=1:this.pageIndex=parseInt(t);this.updatePage(),this.getData()},updatePage:function(){0==this.pageCount&&(this.pageIndex=0),this.pageText.string=this.pageIndex+"/"+this.pageCount,this.pageIndex<=1?this.lastPageBtn.interactable=!1:this.lastPageBtn.interactable||(this.lastPageBtn.interactable=!0),this.pageIndex>=this.pageCount?this.nextPageBtn.interactable=!1:this.nextPageBtn.interactable||(this.nextPageBtn.interactable=!0)},switchTab:function(e){e&&cc.global.util.playSound_buttonClick();for(var t=cc.find("bg/scroll/view/content",this.node),i=0;i<t.childrenCount;i++)t.children[i].active=!1;this.tabId=-1;for(var n=cc.find("bg/tab_content",this.node),o=0;o<n.childrenCount;o++)if(n.children[o].getComponent(cc.Toggle).isChecked){this.tabId=cc.global.util.getNodeIndex(n.children[o].name,"toggle");break}this.getData()}}),cc._RF.pop()},{"../global/NotificationNames":"NotificationNames","../global/item_generator":"item_generator","./base/pop_base":"pop_base"}],frm_circleJoinRoom:[function(e,t,i){"use strict";cc._RF.push(t,"30cf5kQOZtI/6sHHwnbIZZU","frm_circleJoinRoom");var n=e("./base/pop_base"),o=e("../global/NotificationNames"),a=e("../global/item_generator"),c={6:0,1:1,4:2,3:3,15:4,19:5,21:4};cc.Class({extends:n.pop_base,properties:{joinRoomUserItemPrefab:cc.Prefab,gameTypeSF:[cc.SpriteFrame],gameTypeICON:cc.Sprite,titleLabel:cc.Label,gameCountLabel:cc.Label,playerCount:cc.Label,baseInfo:cc.Label,users:cc.Node,removeRoomNode:cc.Node,exitRoomNode:cc.Node},onLoad:function(){this.eventList={},this.eventList[o.NotificationNames.GET_GAME_SETTING_PUSH]=this.showBaseInfo,this.eventList[o.NotificationNames.REMOVE_ROOM_CIRCLE_EVENT_PUSH]=this.removeRoomCircleEventPush,this.eventList[o.NotificationNames.TEA_REMOVEROOMEVENT_PUSH]=this.teaRemoveRoomEventPush,this.eventList[o.NotificationNames.TEA_JOINROOMEVENT_PUSH]=this.teaJoinRoomEventPush,this.eventList[o.NotificationNames.TEA_QUITROOMEVENT_PUSH]=this.teaQuitRoomEventPush},registerObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.on(e,this.eventList[e],this)},removeObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.off(e,this.eventList[e],this)},on_show:function(){this.roomInfo=this.ops.customData.roomInfo,10==this.roomInfo.roomType&&(this.removeRoomNode.getComponent("CircleRoleBtn").enabled=!1,!cc.global.util.teaUserinfo||0!=cc.global.util.teaUserinfo.memberPowern&&1!=cc.global.util.teaUserinfo.memberPowern?this.removeRoomNode.active=!1:this.removeRoomNode.active=!0),this.exitRoomNode.active=10==this.roomInfo.roomType&&1==this.roomInfo.isJoinRoom,this.roomInfo.base_info.player=this.roomInfo.base_info.maxPlayer||this.roomInfo.base_info.player,console.log("\u623f\u95f4\u8be6\u60c5\uff1a",this.roomInfo),this.registerObserver(),this.initView(),this.requestGameSetting()},on_hide:function(){this.removeObserver()},initView:function(){this.gameTypeICON.spriteFrame=this.gameTypeSF[c[this.roomInfo.gid]];var e=this.roomInfo,t=e.base_info.yuanbao,i=e.base_info.enterYB,n=e.base_info.leaveYB;10==this.roomInfo.roomType?this.titleLabel.string="\u5e95\u5206\uff1a"+t:3==this.roomInfo.gid&&50==e.base_info.turn.turn?this.titleLabel.string="\u5e95\u5206\uff1a"+e.base_info.score+"  \u8bfe\u5206\uff1a"+i:this.titleLabel.string="\u5e95\u5206\uff1a"+t+"   \u5165\u684c\uff1a"+i+"   \u79bb\u573a\uff1a"+n,this.gameCountLabel.string=e.gameIndex+"/"+e.gameCount,cc.find("bg/btn/btn_visit",this.node).active=e.visit,this.playerCount.string=e.base_info.player,this.showUsers(e.base_info.player,Object.values(e.userList))},requestGameSetting:function(){cc.global.net.send("getGameSetting",{flag:this.roomInfo.roomType,gid:this.roomInfo.gid,platform:cc.global.util.gameinfo.platform})},showUsers:function(e,t){for(var i=[],n=0;n<e;++n){var o=t.length>n?t[n]:null;o?i.push(o):i.push(null)}a.item_generator.getInstance().executePreFrame(a.item_generator.getInstance()._getItemGenerator(this.users,i,this.joinRoomUserItemPrefab,function(e,t){e.getComponent("CircleJoinRoomUserItem").init(i[t])}),2,this)},showBaseInfo:function(e){var t=this,i=this;console.log(e);var n=function(n,o){if("cutType"==n){var a=cc.global.util.circleUserinfo,c=!1;if(a&&(c="1"==a.is_admin||"1"==a.user_role),!c)return}if(19!=i.roomInfo.gid||1!=t.roomInfo.base_info.type||"bet"!=n&&"folieBet"!=n){if(19==i.roomInfo.gid){if(1==t.roomInfo.base_info.special&&("folieBet"==n||"folieScore"==n))return;if(2==t.roomInfo.base_info.special&&("bet"==n||"score"==n))return}o||(o=t.roomInfo.base_info[n]);for(var s=e.data,l=0;l<s.length;l++){var r=s[l];if(r.opt_key==n){var g="";return r.opt_val.some(function(e){if(JSON.stringify(e.val)==JSON.stringify(o))return g=e.name,!0}),g?(console.log(n+" / "+r.opt_name+":"+g),{opt_name:r.opt_name,desc:g}):null}}}},o=Object.keys(this.roomInfo.base_info);console.log(this.roomInfo.base_info);var a=[];o.forEach(function(e){var t=n(e);t&&"\u65e0"!=t.desc&&a.push(t.opt_name.replace(/\s/g,"")+t.desc.replace(/\s/g,""))}),null!=this.roomInfo.base_info.fanScore&&a.push("\u756a\u6ce8\uff1a"+this.roomInfo.base_info.fanScore),null!=this.roomInfo.base_info.keScore&&a.push("\u8bfe\u5206\u6bd4\uff1a"+this.roomInfo.base_info.keScore);var c=a.join(" / ");console.log("\u623f\u95f4\u63cf\u8ff0\uff1a",c),this.baseInfo.string=c},doJoinRoom:function(){cc.global.util.playSound_buttonClick(),cc.global.util.showAlert("\u6b63\u5728\u52a0\u8f7d");var e=this.roomInfo.room_no;cc.global.util.roomType=this.roomInfo.roomType,10==this.roomInfo.roomType?cc.global.net.send("tea_joinRoomEvent",{roomNo:e,uuid:cc.global.util.userinfo.uuid,account:cc.global.util.userinfo.account,uid:cc.global.util.userinfo.uid,teaInfoCode:cc.global.util.teaUserinfo.teaInfoCode}):cc.global.net.send("joinRoom",{room_no:e,uuid:cc.global.util.userinfo.uuid,account:cc.global.util.userinfo.account,location:cc.global.util.LongitudeAndLatitude})},removeRoom:function(){cc.global.util.playSound_buttonClick();var e=this.roomInfo.room_no,t=this.roomInfo.roomType;console.log("--\u6253\u5f00\u63d0\u793a\u5f39\u7a97--"+e),cc.global.pop_mgr.showFrm({name:"frm_tip_new",closeAnim:!1,customData:{msg:"\u4f60\u786e\u5b9a\u8981\u89e3\u6563\u8be5\u623f\u95f4\u5417?",maskClose:!0,btns:[{name:"\u53d6\u6d88"},{name:"\u786e\u5b9a",onClick:function(){cc.global.util.showAlert("\u6b63\u5728\u52a0\u8f7d",!0),9==t?cc.global.net.send("removeRoomCircleEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,roomNo:e,clubCode:cc.global.util.circleUserinfo.circle_code}):10==t&&cc.global.net.send("tea_removeRoomEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,roomNo:e,teaInfoCode:cc.global.util.teaUserinfo.teaInfoCode}),this.onCloseClick()}}]}})},removeRoomCircleEventPush:function(e){cc.global.util.tipMsg(e.msg),cc.global.util.closeAlert(),1==e.code&&(this.ops.closeAnim=!1,this.ops.closeSound=!1,this.onCloseClick())},teaRemoveRoomEventPush:function(e){cc.global.util.tipMsg(e.msg),cc.global.util.closeAlert(),1==e.code&&(this.ops.closeAnim=!1,this.ops.closeSound=!1,this.onCloseClick())},teaJoinRoomEventPush:function(e){cc.global.util.tipMsg(e.msg),cc.global.util.closeAlert(),1==e.code&&(this.ops.closeAnim=!1,this.ops.closeSound=!1,this.onCloseClick(),Notification.emit("tea_refresh_room_list",{}))},onExitRoomEventClick:function(){cc.global.util.playSound_buttonClick(),cc.global.util.showAlert("\u6b63\u5728\u52a0\u8f7d");var e=this.roomInfo.room_no;cc.global.net.send("tea_quitRoomEvent",{roomNo:e,uuid:cc.global.util.userinfo.uuid,account:cc.global.util.userinfo.account,uid:cc.global.util.LongitudeAndLatitude,teaInfoCode:cc.global.util.teaUserinfo.teaInfoCode})},teaQuitRoomEventPush:function(e){cc.global.util.tipMsg(e.msg),cc.global.util.closeAlert(),1==e.code&&(this.ops.closeAnim=!1,this.ops.closeSound=!1,this.onCloseClick(),Notification.emit("tea_refresh_room_list",{}))},onVisitGameClick:function(){cc.global.util.playSound_buttonClick();var e=this.roomInfo.room_no;cc.global.net.send("circleVisitJoinRoomEvent",{room_no:e,uuid:cc.global.util.userinfo.uuid,account:cc.global.util.userinfo.account,uid:cc.global.util.userinfo.uid,circleId:cc.global.util.circleUserinfo.circle_id})}}),cc._RF.pop()},{"../global/NotificationNames":"NotificationNames","../global/item_generator":"item_generator","./base/pop_base":"pop_base"}],frm_circleMemberDetail:[function(e,t,i){"use strict";cc._RF.push(t,"b1776BPlqRLopbi5PPTBDW4","frm_circleMemberDetail");var n=e("./base/pop_base"),o=e("../global/NotificationNames");cc.Class({extends:n.pop_base,properties:{content:{type:cc.Node,default:null,tooltip:"\u5f39\u7a97\u5185\u5bb9\u5bb9\u5668"}},onLoad:function(){this.eventList={},this.eventList[o.NotificationNames.MEMBER_DETAIL_INFO_EVENT_PUSH]=this.getDataResp,this.eventList[o.NotificationNames.MGR_SETTING_CIRCLE_EVENT_PUSH]=this.setAdminPush,this.eventList[o.NotificationNames.CIRCLE_BLACK_LIST_EVENT_PUSH]=this.setBlacklistPush,this.eventList[o.NotificationNames.CIRCLE_DEL_MEMBER_EVENT_PUSH]=this.delMemberPush,this.eventList[o.NotificationNames.CIRCLE_PARTNER_ADD_EVENT_PUSH]=this.setPartnerPush,this.eventList[o.NotificationNames.CIRCLE_MODIFY_STRENTH_EVENT_PUSH]=this.circleModifyStrenthEventPush,this.eventList[o.NotificationNames.RESET_PARTNER_EVENT_PUSH]=this.resetPartnerEventPush},registerObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.on(e,this.eventList[e],this)},removeObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.off(e,this.eventList[e],this)},on_show:function(){if(this.registerObserver(),!this.ops||!this.ops.customData||!this.ops.customData.memberData)return console.log("\u4eb2\u53cb\u5708\u5f39\u7a97\u521d\u59cb\u5316\u5f02\u5e38,\u65e0\u6cd5\u83b7\u53d6\u4eb2\u53cb\u5708\u6570\u636e"),void cc.global.util.tipMsg("\u53c2\u6570\u5f02\u5e38,\u8bf7\u91cd\u8bd5");this.memberData=this.ops.customData.memberData,this.type=this.ops.customData.type,this.initView(),this.getData()},on_hide:function(){this.removeObserver()},getData:function(){cc.global.util.showAlert("\u6b63\u5728\u83b7\u53d6\u6210\u5458\u6570\u636e",!0),cc.global.net.send("memberDetailInfoEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,user_id:this.memberData.user_id,circle_id:cc.global.util.circleUserinfo.circle_id})},getDataResp:function(e){if(!e.data||e.data.user_id==this.memberData.user_id){if(1==e.code){for(var t in this.total=e.total,e.data)this.memberData[t]=e.data[t];this.memberData.memberCount=e.total,this.showDetail()}else cc.global.util.tipMsg(e.msg);cc.global.util.closeAlert()}},initView:function(){cc.find("address/lb",this.content).getComponent(cc.Label).string="",cc.find("hp/lb",this.content).getComponent(cc.Label).string="",cc.find("name/lb",this.content).getComponent(cc.Label).string=this.memberData.name,cc.find("id/lb",this.content).getComponent(cc.Label).string=this.memberData.account||this.memberData.user_id,cc.find("content/totalNumber",this.content).getComponent(cc.Label).string=this.memberData.totalNumber,cc.find("content/totalScore",this.content).getComponent(cc.Label).string=parseFloat(this.memberData.totalScore),cc.find("content/bigWinnerCount",this.content).getComponent(cc.Label).string=this.memberData.bigWinnerCount,cc.find("content/bigWinnerScore",this.content).getComponent(cc.Label).string=parseFloat(this.memberData.bigWinnerScore),cc.find("titles/title_member",this.content).active=1==this.type,cc.find("titles/title_partner",this.content).active=2==this.type,cc.find("content_member",this.content).active=1==this.type,cc.find("content_partner",this.content).active=2==this.type},showDetail:function(){this.circleMemberController=this.node.getComponent("circleMemberController"),this.circleMemberController.initData({memberData:this.memberData}),cc.find("address/lb",this.content).getComponent(cc.Label).string=this.memberData.area,cc.find("hp/lb",this.content).getComponent(cc.Label).string=parseFloat(this.memberData.user_hp),cc.find("content/totalPlayNum",this.content).getComponent(cc.Label).string=this.memberData.userTotalPlay,2==this.type&&(cc.find("content_partner/profitRatio/lb",this.content).getComponent(cc.Label).string=this.memberData.profit_ratio+"%",cc.find("content_partner/memberCount/lb",this.content).getComponent(cc.Label).string=this.memberData.memberCount);var e=cc.find("head/sp",this.content),t=cc.global.http.url+"/zagame"+this.memberData.headimg;e.m_headimg&&e.m_headimg==t||(e.getComponent(cc.Sprite).spriteFrame=null,cc.global.util.setHeadimg(e,t,!1,function(){e.m_headimg=t})),1==this.memberData.user_role?(cc.find("bg/creator",this.node).active=!0,cc.find("content_member/btn_admin/set",this.content).active=!1,cc.find("content_member/btn_admin/cancel",this.content).active=!1,cc.find("content_member/btn_blacklist/set",this.content).active=!1,cc.find("content_member/btn_blacklist/cancel",this.content).active=!1,cc.find("content_member/btn_partner/set",this.content).active=!1,cc.find("content_member/btn_partner/cancel",this.content).active=!1,cc.find("content_partner/btn_admin/set",this.content).active=!1,cc.find("content_partner/btn_admin/cancel",this.content).active=!1,cc.find("content_partner/btn_blacklist/set",this.content).active=!1,cc.find("content_partner/btn_blacklist/cancel",this.content).active=!1):(cc.find("bg/creator",this.node).active=!1,cc.find("content_member/btn_admin/set",this.content).active=!0,cc.find("content_member/btn_admin/cancel",this.content).active=!0,cc.find("content_member/btn_blacklist/set",this.content).active=!0,cc.find("content_member/btn_blacklist/cancel",this.content).active=!0,cc.find("content_member/btn_partner/set",this.content).active=!0,cc.find("content_member/btn_partner/cancel",this.content).active=!0,cc.find("content_partner/btn_admin/set",this.content).active=!1,cc.find("content_partner/btn_admin/cancel",this.content).active=!1,cc.find("content_partner/btn_blacklist/set",this.content).active=!0,cc.find("content_partner/btn_blacklist/cancel",this.content).active=!0),2==this.memberData.user_role?(2!=this.type?cc.find("bg/partner",this.node).active=!0:cc.find("bg/partner",this.node).active=!1,cc.find("content_member/btn_partner/set",this.content).active=!1):(cc.find("bg/partner",this.node).active=!1,cc.find("content_member/btn_partner/cancel",this.content).active=!1),1==this.memberData.is_admin?(cc.find("bg/admin",this.node).active=!0,cc.find("content_member/btn_admin/set",this.content).active=!1,cc.find("content_partner/btn_admin/set",this.content).active=!1):(cc.find("bg/admin",this.node).active=!1,cc.find("content_member/btn_admin/cancel",this.content).active=!1,cc.find("content_partner/btn_admin/cancel",this.content).active=!1),"Y"!=this.memberData.is_use?(cc.find("content_member/btn_blacklist/set",this.content).active=!1,cc.find("content_partner/btn_blacklist/set",this.content).active=!1):(cc.find("content_member/btn_blacklist/cancel",this.content).active=!1,cc.find("content_partner/btn_blacklist/cancel",this.content).active=!1),1!=cc.global.util.circleUserinfo.user_role&&2!=cc.global.util.circleUserinfo.user_role&&1!=cc.global.util.circleUserinfo.is_admin&&(cc.find("content_member/btn_partner/set",this.content).active=!1,cc.find("content_member/btn_partner/cancel",this.content).active=!1),cc.find("content_member/btn_partner",this.content).active=this.memberData.isSuperiorRelation,this.memberData.canOperate||(cc.find("content_member/btn_admin/set",this.content).active=!1,cc.find("content_member/btn_admin/cancel",this.content).active=!1)},checkUpID:function(){cc.find("bg/name/upID/checkUpID",this.node).active=!1,cc.find("bg/name/upID/hideCheckUpID",this.node).active=!0,cc.find("bg/name/upID/upMsg",this.node).active=!0,cc.find("bg/name/upID/upMsg/name/label",this.node).getComponent(cc.Label).string=this.memberData.superUserName,cc.find("bg/name/upID/upMsg/id/label",this.node).getComponent(cc.Label).string=this.memberData.superUserId,cc.find("bg/name/upID/hide",this.node).active=!0},hideCheckUpID:function(){cc.find("bg/name/upID/checkUpID",this.node).active=!0,cc.find("bg/name/upID/hideCheckUpID",this.node).active=!1,cc.find("bg/name/upID/upMsg",this.node).active=!1,cc.find("bg/name/upID/hide",this.node).active=!1},setAdminPush:function(e){cc.global.util.tipMsg(e.msg),this.getData(),Notification.emit("refresh_circle_member_list",e),Notification.emit("refresh_circle_partner_list",e)},setBlacklistPush:function(e){cc.global.util.tipMsg(e.msg),this.getData(),Notification.emit("refresh_circle_member_list",e),Notification.emit("refresh_circle_partner_list",e)},delMemberPush:function(e){cc.global.util.tipMsg(e.msg),1==e.code?(2==e.data.type&&2!=this.type?this.getData():(cc.global.util.closeAlert(),this.ops.closeAnim=!1,this.ops.closeSound=!1,this.onCloseClick()),Notification.emit("refresh_circle_member_list",e),Notification.emit("refresh_circle_partner_list",e)):this.getData()},setPartnerPush:function(e){cc.global.util.tipMsg(e.msg),this.getData(),Notification.emit("refresh_circle_member_list",e),Notification.emit("refresh_circle_partner_list",e)},resetPartnerEventPush:function(e){cc.global.util.tipMsg(e.msg),this.getData(),Notification.emit("refresh_circle_partner_list",e)},showInput_changeHp:function(e,t){var i=!1,n=null;"minusHp"==t&&(i=!0,n=parseFloat(this.memberData.user_hp)),console.log("\u6253\u5f00\u5f39\u7a97:frm_input"),cc.global.pop_mgr.showFrm({name:"frm_input",customData:{type:"num",maxLength:9,showBtnMax:i,maxNum:n,defNum:"",inputOver:this.inputOver_changeHp,label:t,target:this,title:t,showHead:!0,headimg:cc.global.http.url+"/zagame"+this.memberData.headimg,isAutoOver:!1,isShowOk:!0,closeWhenInputOver:!1}})},inputOver_changeHp:function(e,t,i){parseInt(t)>0?("minusHp"==e&&(t=-t),cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u4fee\u6539"),cc.global.net.send("circleModifyStrenthEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,circleId:cc.global.util.circleUserinfo.circle_id,operatorUserCode:i.memberData.user_code,changeCount:t})):cc.global.util.tipMsg("\u8bf7\u8f93\u5165\u5927\u4e8e0\u7684\u6570\u503c")},circleModifyStrenthEventPush:function(e){1==e.code&&(cc.global.util.playSound("Sounds/sound_hall_close"),cc.global.pop_mgr.closeFrm({name:"frm_input",closeAnim:!1}),this.getData()),cc.global.util.tipMsg(e.msg),cc.global.util.closeAlert()},showMemberHpHistory:function(){cc.global.pop_mgr.showFrm({name:"frm_circleHpHistory",customData:{memberData:this.memberData,type:2}})}}),cc._RF.pop()},{"../global/NotificationNames":"NotificationNames","./base/pop_base":"pop_base"}],frm_circleMember:[function(e,t,i){"use strict";cc._RF.push(t,"4147dLQ4Q5CfaMbl9X0Jh2+","frm_circleMember");var n=e("./base/pop_base"),o=e("../global/NotificationNames"),a=e("../global/item_generator");function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function n(o,a){try{var c=t[o](a),s=c.value}catch(e){return void i(e)}if(!c.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}cc.Class({extends:n.pop_base,properties:{content:{type:cc.Node,default:null,tooltip:"\u5f39\u7a97\u5185\u5bb9\u5bb9\u5668"},list:{type:cc.Node,default:null,tooltip:"\u5217\u8868\u5bb9\u5668"},item_prefab:{type:cc.Prefab,default:null,tooltip:"\u5217\u8868prefab"},pageSize:{type:cc.Integer,default:6,min:1,tooltip:"\u6bcf\u9875\u663e\u793a\u6761\u6570"},lastPageBtn:{type:cc.Button,default:null,tooltip:"\u4e0a\u4e00\u9875\u6309\u94ae"},nextPageBtn:{type:cc.Button,default:null,tooltip:"\u4e0b\u4e00\u9875\u6309\u94ae"},pageText:{type:cc.Label,default:null,tooltip:"\u9875\u7801label"}},onLoad:function(){this.eventList={},this.eventList[o.NotificationNames.CIRCLE_MEMBER_LIST_EVENT_PUSH]=this.getDataResp,this.eventList[o.NotificationNames.CIRCLE_PARTNER_LIST_EVENT_PUSH]=this.getDataResp,this.eventList[o.NotificationNames.ADD_CIRCLE_MEMBER_EVENT_PUSH]=this.addCircleMemberEventPush,this.eventList[o.NotificationNames.CIRCLE_DEL_MEMBER_EVENT_PUSH]=this.delMemberPush,this.eventList.refresh_circle_member_list=this.getData},registerObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.on(e,this.eventList[e],this)},removeObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.off(e,this.eventList[e],this)},on_show:function(){this.registerObserver(),this.ops.customData||(this.ops.customData={}),this.type=this.ops.customData.type||1,cc.find("titles/title_member",this.content).active=1==this.type,cc.find("titles/title_partner",this.content).active=2==this.type,cc.find("content_member",this.content).active=1==this.type,cc.find("content_partner",this.content).active=2==this.type,cc.find("yestodayPlayTotal",this.content).getComponent(cc.Label).string="";for(var e=0;e<this.list.childrenCount;e++)this.list.children[e].active=!1;cc.find("bg/totalCount_txt",this.node).active=1==this.type,cc.find("bg/roomCardAll_txt",this.node).active=1==this.type,this.pageIndex=0,this.pageCount=0,this.updatePage(),this.selectAccount="";var t=new Date,i=t.getFullYear(),n=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,o=t.getDate()<10?"0"+t.getDate():t.getDate();cc.find("bg/date_page/label",this.node).getComponent(cc.Label).string=i+"-"+n+"-"+o,cc.find("bg/date_page/btn_lastPage",this.node).active=!0,cc.find("bg/date_page/btn_nextPage",this.node).active=!1;for(var a=cc.find("bg/scrollview/view/btns",this.node),c=0;c<a.childrenCount;c++)a.children[c].getComponent(cc.Toggle).isChecked=1==cc.global.util.getNodeIndex(a.children[c].name,"toggle");this.getData()},on_hide:function(){this.removeObserver()},getData:function(){var e={circleId:cc.global.util.circleUserinfo.circle_id,uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,circleCode:cc.global.util.circleUserinfo.circle_code,userCode:cc.global.util.circleUserinfo.user_code,pageIndex:this.pageIndex||1,pageSize:this.pageSize,time:cc.find("bg/date_page/label",this.node).getComponent(cc.Label).string};this.selectAccount&&""!=this.selectAccount&&(1==this.type?e.memberUserAccount=this.selectAccount:e.partnerUserAccount=this.selectAccount,e.circleCode=cc.global.util.circleUserinfo.circle_code),this.tabId=-1;for(var t=cc.find("bg/scrollview/view/btns",this.node),i=0;i<t.childrenCount;i++)if(t.children[i].getComponent(cc.Toggle).isChecked){this.tabId=cc.global.util.getNodeIndex(t.children[i].name,"toggle");break}-1!=this.tabId&&(e.condition=this.tabId-1),1==this.type?(cc.global.util.showAlert("\u6b63\u5728\u83b7\u53d6\u6210\u5458\u5217\u8868",!0),e.userRole=3,cc.global.net.send("circleMemberInfoListEvent",e)):(cc.global.util.showAlert("\u6b63\u5728\u83b7\u53d6\u5408\u4f19\u4eba\u5217\u8868",!0),e.userRole=2,cc.global.net.send("circlePartnerListEvent",e))},getDataResp:function(e){if(1!=e.code)return cc.global.util.tipMsg(e.msg),cc.global.util.closeAlert(),void(this.selectAccount=null);if(this.pageIndex>0&&e.pageIndex!=this.pageIndex)return console.log("\u8fd4\u56de\u6570\u636e\u9875\u7801\u9519\u8bef,\u5f53\u524d\u9875\u7801\u4e3a:"+this.pageIndex),void cc.global.util.closeAlert();if(this.pageIndex=e.pageIndex,this.pageCount=e.totalPage,this.totalCount=e.totalCount,this.updatePage(),cc.find("yestodayPlayTotal",this.content).getComponent(cc.Label).string=e.yestodayPlayTotal?e.yestodayPlayTotal:0,this.pageIndex>this.pageCount&&this.pageCount>0)return this.pageIndex=this.pageCount,void this.getData();e.gameAllCount&&2!=cc.global.util.circleUserinfo.user_role?(cc.find("totalCount_txt/totalCount",this.content).getComponent(cc.Label).string=e.gameAllCount,cc.find("totalCount_txt",this.content).active=!0):cc.find("totalCount_txt",this.content).active=!1,e.roomCardAll&&2!=cc.global.util.circleUserinfo.user_role?(cc.find("roomCardAll_txt/roomCardAll",this.content).getComponent(cc.Label).string=e.roomCardAll,cc.find("totalCount_txt",this.content).active=!0):cc.find("roomCardAll_txt",this.content).active=!1;var t=e.data||[];this.showList(this.list,t,this.item_prefab)},showList:function(){var e=c(regeneratorRuntime.mark(function e(t,i,n){var o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.item_generator.getInstance().executePreFrame(a.item_generator.getInstance()._getItemGenerator(t,i,n,function(e,t){cc.find("name",e).getComponent(cc.Label).string=i[t].name,cc.find("id",e).getComponent(cc.Label).string=i[t].account,cc.find("totalNumber",e).getComponent(cc.Label).string=i[t].totalNumber,cc.find("bigWinnerScore",e).getComponent(cc.Label).string=parseFloat(i[t].bigWinnerScore),cc.find("totalScore",e).getComponent(cc.Label).string=parseFloat(i[t].totalScore),cc.find("bigWinnerNumber",e).getComponent(cc.Label).string=i[t].bigWinnerCount,cc.find("online",e).active=!!i[t].isOnline,cc.find("offline",e).active=!i[t].isOnline,cc.find("jinzhiyouxi",e).active="Y"!=i[t].is_use,cc.find("admin",e).active=1==i[t].is_admin,cc.find("creator",e).active=1==i[t].user_role,cc.find("partner",e).active=2==i[t].user_role,cc.find("me",e).active=i[t].account==cc.global.util.userinfo.account,e.m_data=i[t],i[t].isUnder&&0!=i[t].isUnder?(cc.find("btn_detail",e).active=!0,cc.find("btn_detail",e).on("click",o.showDetail,o)):cc.find("btn_detail",e).active=!1}),4,this);case 2:0==i.length&&(this.selectAccount&&""!=this.selectAccount?cc.global.util.tipMsg("\xb7 \u73a9\u5bb6\u4e0d\u5b58\u5728 \xb7"):cc.global.util.tipMsg("\xb7 \u6682\u65e0\u6570\u636e \xb7")),cc.global.util.closeAlert();case 4:case"end":return e.stop()}},e,this)}));return function(t,i,n){return e.apply(this,arguments)}}(),changePage:function(e,t){if(cc.global.util.playSound_buttonClick(),"next"==t){if(this.pageIndex>=this.pageCount)return void cc.global.util.tipMsg("\u5df2\u7ecf\u662f\u6700\u540e\u4e00\u9875\u4e86!");this.pageIndex++}else if("last"==t){if(this.pageIndex<=1)return void cc.global.util.tipMsg("\u5df2\u7ecf\u662f\u7b2c\u4e00\u9875\u4e86!");this.pageIndex--}else parseInt(t)>this.pageCount?this.pageIndex=this.pageCount:parseInt(t)<1?this.pageIndex=1:this.pageIndex=parseInt(t);this.updatePage(),this.getData()},updatePage:function(){0==this.pageCount&&(this.pageIndex=0),this.pageText.string=this.pageIndex+"/"+this.pageCount,this.pageIndex<=1?this.lastPageBtn.interactable=!1:this.lastPageBtn.interactable||(this.lastPageBtn.interactable=!0),this.pageIndex>=this.pageCount?this.nextPageBtn.interactable=!1:this.nextPageBtn.interactable||(this.nextPageBtn.interactable=!0)},showDetail:function(e){console.log("\u6253\u5f00\u5f39\u7a97:frm_circleMemberDetail"),cc.global.pop_mgr.showFrm({name:"frm_circleMemberDetail",customData:{memberData:e.target.parent.m_data,type:this.type}})},addCircleMember:function(){console.log("\u6253\u5f00\u5f39\u7a97:frm_input"),cc.global.pop_mgr.showFrm({name:"frm_input",customData:{type:"str",maxLength:9,defNum:"",placeholder:"\u8bf7\u8f93\u5165\u73a9\u5bb6ID",inputOver:this.inputOver_addCircleMember,label:null,target:this,title:"addCircleMember",showHead:!1,isAutoOver:!1,isShowOk:!0,closeWhenInputOver:!1}})},inputOver_addCircleMember:function(e,t,i){cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u8bf7\u6c42",!0),cc.global.net.send("addCircleMemberEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,circle_id:cc.global.util.circleUserinfo.circle_id,account:t,superior_user_code:cc.global.util.circleUserinfo.user_code})},addCircleMemberEventPush:function(e){cc.global.util.tipMsg(e.msg),cc.global.util.closeAlert(),1==e.code&&(cc.global.util.playSound("Sounds/sound_hall_close"),cc.global.pop_mgr.closeFrm({name:"frm_input",closeAnim:!1}),this.getData())},searchCircleMember:function(){console.log("\u6253\u5f00\u5f39\u7a97:frm_input"),cc.global.pop_mgr.showFrm({name:"frm_input",customData:{type:"str",maxLength:9,defNum:"",placeholder:"\u8bf7\u8f93\u5165\u73a9\u5bb6ID",inputOver:this.inputOver_searchCircleMember,label:null,target:this,title:"searchCircleMember",showHead:!1,isAutoOver:!1,isShowOk:!0,closeWhenInputOver:!0}})},inputOver_searchCircleMember:function(e,t,i){i.pageIndex=0,i.pageCount=0,i.updatePage(),i.selectAccount=t,i.getData()},delMemberPush:function(e){1==e.code&&this.getData()},addDate:function(){cc.global.util.playSound_buttonClick();var e=new Date(cc.find("bg/date_page/label",this.node).getComponent(cc.Label).string);e.setDate(e.getDate()+1);var t=e.getFullYear(),i=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,n=e.getDate()<10?"0"+e.getDate():e.getDate();cc.find("bg/date_page/label",this.node).getComponent(cc.Label).string=t+"-"+i+"-"+n;var o=new Date,a=o.getFullYear()+"-"+(o.getMonth()+1<10?"0"+(o.getMonth()+1):o.getMonth()+1)+"-"+(o.getDate()<10?"0"+o.getDate():o.getDate()),c=(e-new Date(a))/864e5;cc.find("bg/date_page/btn_nextPage",this.node).active=c<0,cc.find("bg/date_page/btn_lastPage",this.node).active=c>-15,this.getData()},minusDate:function(){cc.global.util.playSound_buttonClick();var e=new Date(cc.find("bg/date_page/label",this.node).getComponent(cc.Label).string);e.setDate(e.getDate()-1);var t=e.getFullYear(),i=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,n=e.getDate()<10?"0"+e.getDate():e.getDate();cc.find("bg/date_page/label",this.node).getComponent(cc.Label).string=t+"-"+i+"-"+n;var o=new Date,a=o.getFullYear()+"-"+(o.getMonth()+1<10?"0"+(o.getMonth()+1):o.getMonth()+1)+"-"+(o.getDate()<10?"0"+o.getDate():o.getDate()),c=(e-new Date(a))/864e5;cc.find("bg/date_page/btn_nextPage",this.node).active=c<0,cc.find("bg/date_page/btn_lastPage",this.node).active=c>-15,this.getData()},switchTab:function(e){e&&cc.global.util.playSound_buttonClick();for(var t=cc.find("bg/scroll/view/content",this.node),i=0;i<t.childrenCount;i++)t.children[i].active=!1;this.pageIndex=0,this.pageCount=0,this.updatePage(),this.selectAccount="",this.getData()}}),cc._RF.pop()},{"../global/NotificationNames":"NotificationNames","../global/item_generator":"item_generator","./base/pop_base":"pop_base"}],frm_circleMsg:[function(e,t,i){"use strict";cc._RF.push(t,"27fb8sh+BhJu783xkRhqIhG","frm_circleMsg");var n=e("./base/pop_base"),o=e("../global/item_generator"),a=e("../global/NotificationNames");function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function n(o,a){try{var c=t[o](a),s=c.value}catch(e){return void i(e)}if(!c.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}cc.Class({extends:n.pop_base,properties:{content:cc.Node,item_prefab:cc.Prefab,content_color_type1:new cc.Color,content_color_type2:new cc.Color,content_color_type3:new cc.Color},onLoad:function(){this.eventList={},this.eventList[a.NotificationNames.CIRCLE_EXAM_MSG_INFO_EVENT_PUSH]=this.getDataResp,this.eventList[a.NotificationNames.CIRCLE_MBR_ADD_EXIT_EXAM_EVENT_PUSH]=this.circleMbrAddExitExamEventPush,this.eventList[a.NotificationNames.CIRCLE_MSG_REMAIN_EVENT_PUSH]=this.circleMsgRemindEventPush,this.eventList[a.NotificationNames.READ_MESSAGE_EVENT_PUSH]=this.readMessageEventPush},registerObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.on(e,this.eventList[e],this)},removeObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.off(e,this.eventList[e],this)},on_show:function(){this.registerObserver(),this.getData()},on_hide:function(){this.removeObserver()},getData:function(){console.log(this.ops.customData),cc.find("tip",this.content).active=!1,cc.global.util.showAlert("\u6b63\u5728\u52a0\u8f7d",!0),this.ops.customData?cc.global.net.send("circleExamMsgInfoEvent",{uid:cc.global.util.userinfo.uid,type:2,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform}):cc.global.net.send("circleExamMsgInfoEvent",{uid:cc.global.util.userinfo.uid,type:1,token:cc.global.util.userinfo.token,circle_id:cc.global.util.circleUserinfo.circle_id,platform:cc.global.util.gameinfo.platform})},getDataResp:function(e){if(1!=e.code)return cc.find("tip",this.content).active=!0,cc.global.util.tipMsg(e.msg),void cc.global.util.closeAlert();var t=cc.find("scroll/view/content",this.content),i=e.data||[];cc.find("tip",this.content).active=!1,this.showList(t,i,this.item_prefab)},showList:function(){var e=c(regeneratorRuntime.mark(function e(t,i,n){var a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.item_generator.getInstance().executePreFrame(o.item_generator.getInstance()._getItemGenerator(t,i,n,function(e,t){cc.find("title",e).getComponent(cc.Label).string=i[t].msg_title,cc.find("content",e).getComponent(cc.Label).string=i[t].msg_content,cc.find("time",e).getComponent(cc.Label).string=i[t].gmt_create,e.m_type=i[t].audit_type,e.m_recordId=i[t].recordId,e.m_msgId=i[t].msgId,e.m_userId=i[t].user_id,e.superior_user_code=i[t].superior_user_code,1==i[t].audit_type||2==i[t].audit_type?(cc.find("btn_yes",e).active=!0,cc.find("btn_no",e).active=!0,cc.find("btn_yes",e).on("click",a.onBtnClick_yes,a),cc.find("btn_no",e).on("click",a.onBtnClick_no,a)):(cc.find("btn_yes",e).active=!1,cc.find("btn_no",e).active=!1),4==i[t].audit_type?(cc.find("btn_yes",e).active=!0,cc.find("btn_no",e).active=!0,cc.find("btn_yes",e).on("click",a.onBtnClick_yes,a),cc.find("btn_no",e).on("click",a.onBtnClick_no,a)):5==i[t].audit_type?(cc.find("btn_ignore",e).active=!1,cc.find("btn_yes",e).active=!1,cc.find("btn_no",e).active=!1):6==i[t].audit_type&&(cc.find("btn_ignore",e).active=!0,cc.find("btn_ignore",e).on("click",a.onBtnIgnoreClick,a),cc.find("btn_yes",e).active=!1,cc.find("btn_no",e).active=!1)}),4,this);case 2:cc.find("scroll",this.content).getComponent(cc.ScrollView).scrollToTop(.1),cc.find("scroll",this.content).getComponent(cc.ScrollView).optDc(!0),0==i.length&&(cc.find("tip",this.content).active=!0),cc.global.util.closeAlert();case 6:case"end":return e.stop()}},e,this)}));return function(t,i,n){return e.apply(this,arguments)}}(),onBtnClick_yes:function(e){cc.global.util.playSound_buttonClick();var t=e.target.parent;this.sendMsgEvent(t,"Y")},onBtnClick_no:function(e){cc.global.util.playSound_buttonClick();var t=e.target.parent;this.sendMsgEvent(t,"N")},sendMsgEvent:function(e,t){var i="";if(1==e.m_type)i="join";else if(2==e.m_type)i="exit";else if(4==e.m_type)i="join";else{if(5!=e.m_type)return void console.log("type\u5f02\u5e38");i="exit"}cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u8bf7\u6c42",!0),cc.global.net.send("circleMbrAddExitExamEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,circle_id:cc.global.util.circleUserinfo.circle_id,superior_user_code:e.superior_user_code,audit_type:e.m_type,type:i,is_agree:t,recordId:e.m_recordId,msgId:e.m_msgId,user_id:e.m_userId})},circleMbrAddExitExamEventPush:function(e){cc.global.util.tipMsg(e.msg),this.getData()},circleMsgRemindEventPush:function(e){1==e.code&&2==e.type&&this.getData()},onBtnIgnoreClick:function(e){cc.global.net.send("readMessageEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,msgId:e.target.parent.m_msgId})},readMessageEventPush:function(e){1==e.code&&(cc.global.util.tipMsg(e.msg),this.getData())}}),cc._RF.pop()},{"../global/NotificationNames":"NotificationNames","../global/item_generator":"item_generator","./base/pop_base":"pop_base"}],frm_circleNameChange:[function(e,t,i){"use strict";cc._RF.push(t,"6949b+snA1D4KDHsbboof+y","frm_circleNameChange");var n=e("./base/pop_base"),o=e("../global/NotificationNames");cc.Class({extends:n.pop_base,properties:{nameEdit:cc.EditBox},onLoad:function(){this.eventList={},this.eventList[o.NotificationNames.CREATE_MODIFY_CIRCLE_EVENT_PUSH]=this.createModifyCircleEventPush},registerObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.on(e,this.eventList[e],this)},removeObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.off(e,this.eventList[e],this)},on_show:function(){this.registerObserver(),this.nameEdit.string=cc.global.util.circleUserinfo.circle_name},on_hide:function(){this.removeObserver()},setCircleName:function(){cc.global.util.playSound_buttonClick(),cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u4fee\u6539",!0),cc.global.net.send("createModifyCircleEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,circleId:cc.global.util.circleUserinfo.circle_id,type:2,circleName:this.nameEdit.string})},createModifyCircleEventPush:function(e){cc.global.util.tipMsg(e.msg),cc.global.util.closeAlert(),1==e.code&&(this.ops.closeAnim=!1,this.ops.closeSound=!1,this.onCloseClick())}}),cc._RF.pop()},{"../global/NotificationNames":"NotificationNames","./base/pop_base":"pop_base"}],frm_circlePartner:[function(e,t,i){"use strict";cc._RF.push(t,"fdbbbxFkftCPZTMPjDe9xkZ","frm_circlePartner");var n=e("./base/pop_base"),o=e("../global/NotificationNames"),a=e("../global/item_generator");function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function n(o,a){try{var c=t[o](a),s=c.value}catch(e){return void i(e)}if(!c.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}cc.Class({extends:n.pop_base,properties:{content:{type:cc.Node,default:null,tooltip:"\u5f39\u7a97\u5185\u5bb9\u5bb9\u5668"},list:{type:cc.Node,default:null,tooltip:"\u5217\u8868\u5bb9\u5668"},item_prefab:{type:cc.Prefab,default:null,tooltip:"\u5217\u8868prefab"},pageSize:{type:cc.Integer,default:6,min:1,tooltip:"\u6bcf\u9875\u663e\u793a\u6761\u6570"},lastPageBtn:{type:cc.Button,default:null,tooltip:"\u4e0a\u4e00\u9875\u6309\u94ae"},nextPageBtn:{type:cc.Button,default:null,tooltip:"\u4e0b\u4e00\u9875\u6309\u94ae"},pageText:{type:cc.Label,default:null,tooltip:"\u9875\u7801label"}},onLoad:function(){this.eventList={},this.eventList[o.NotificationNames.CIRCLE_PARTNER_LIST_EVENT_PUSH]=this.getDataResp,this.eventList.refresh_circle_partner_list=this.getData},registerObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.on(e,this.eventList[e],this)},removeObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.off(e,this.eventList[e],this)},on_show:function(){this.registerObserver(),this.pageIndex=0,this.pageCount=0,this.updatePage(),this.selectAccount="";for(var e=cc.find("bg/scrollview/view/btns",this.node),t=0;t<e.childrenCount;t++)e.children[t].getComponent(cc.Toggle).isChecked=1==cc.global.util.getNodeIndex(e.children[t].name,"toggle");this.getData()},on_hide:function(){this.removeObserver()},getData:function(){var e={circleId:cc.global.util.circleUserinfo.circle_id,uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,circleCode:cc.global.util.circleUserinfo.circle_code,userCode:cc.global.util.circleUserinfo.user_code,pageIndex:this.pageIndex||1,pageSize:this.pageSize};this.tabId=-1;for(var t=cc.find("bg/scrollview/view/btns",this.node),i=0;i<t.childrenCount;i++)if(t.children[i].getComponent(cc.Toggle).isChecked){this.tabId=cc.global.util.getNodeIndex(t.children[i].name,"toggle");break}-1!=this.tabId&&(e.condition=this.tabId-1),this.selectAccount&&""!=this.selectAccount&&(e.partnerUserAccount=this.selectAccount),cc.global.net.send("circlePartnerListEvent",e)},getDataResp:function(e){if(1!=e.code)return cc.global.util.tipMsg(e.msg),cc.global.util.closeAlert(),void(this.selectAccount=null);if(this.pageIndex>0&&e.pageIndex!=this.pageIndex)return console.log("\u8fd4\u56de\u6570\u636e\u9875\u7801\u9519\u8bef,\u5f53\u524d\u9875\u7801\u4e3a:"+this.pageIndex),void cc.global.util.closeAlert();if(this.pageIndex=e.pageIndex,this.pageCount=e.totalPage,this.totalCount=e.totalCount,this.updatePage(),this.pageIndex>this.pageCount&&this.pageCount>0)return this.pageIndex=this.pageCount,void this.getData();1==cc.global.util.circleUserinfo.user_role?(cc.find("tongji_info/profitBalanceAll_txt/profitBalanceAll",this.content).getComponent(cc.Label).string=e.memberInfo.profitBalanceAll,cc.find("tongji_info/upName_txt",this.content).active=!1,cc.find("tongji_info/profitRatio_txt",this.content).active=!1,cc.find("tongji_info/profitBalanceAll_txt",this.content).active=!0):(e.memberInfo.upName&&(cc.find("tongji_info/upName_txt/upName",this.content).getComponent(cc.Label).string=e.memberInfo.upName),cc.find("tongji_info/profitRatio_txt/profitRatio",this.content).getComponent(cc.Label).string=e.memberInfo.profitRatio+"%",cc.find("tongji_info/profitBalanceAll_txt/profitBalanceAll",this.content).getComponent(cc.Label).string=e.memberInfo.profitBalanceAll,cc.find("tongji_info/upName_txt",this.content).active=!0,cc.find("tongji_info/profitRatio_txt",this.content).active=!0,cc.find("tongji_info/profitBalanceAll_txt",this.content).active=!0);var t=e.data||[];this.showList(this.list,t,this.item_prefab)},showList:function(){var e=c(regeneratorRuntime.mark(function e(t,i,n){var o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.item_generator.getInstance().executePreFrame(a.item_generator.getInstance()._getItemGenerator(t,i,n,function(e,t){var n=cc.find("player",e).getChildByName("avatar").getChildByName("mask").getChildByName("pic"),a=cc.global.http.url+"/zagame"+i[t].headimg;n.m_headimg&&n.m_headimg==a||(n.getComponent(cc.Sprite).spriteFrame=null,cc.global.util.setHeadimg(n,a,!1,function(){n.m_headimg=a})),cc.find("player",e).getChildByName("name").getComponent(cc.Label).string=i[t].name,cc.find("player",e).getChildByName("jinzhiyouxi").active="Y"!=i[t].is_use,cc.find("player",e).getChildByName("account").getComponent(cc.Label).string=i[t].account,cc.find("player",e).getChildByName("user_hp").getComponent(cc.Label).string=i[t].user_hp,cc.find("player",e).getChildByName("profit_ratio").getComponent(cc.Label).string=i[t].profit_ratio+"%",cc.find("player",e).getChildByName("profit_balance_all").getComponent(cc.Label).string=i[t].profit_balance_all,cc.find("player",e).getChildByName("lowerCount").getComponent(cc.Label).string=i[t].lowerCount,e.m_data=i[t],i[t].isUnder&&0!=i[t].isUnder?(cc.find("player",e).getChildByName("btn_detail").active=!0,cc.find("player",e).getChildByName("btn_detail").on("click",o.showDetail,o)):cc.find("player",e).getChildByName("btn_detail").active=!1}),4,this);case 2:0==i.length&&(this.selectAccount&&""!=this.selectAccount?cc.global.util.tipMsg("\xb7 \u73a9\u5bb6\u4e0d\u5b58\u5728 \xb7"):cc.global.util.tipMsg("\xb7 \u6682\u65e0\u6570\u636e \xb7")),cc.global.util.closeAlert();case 4:case"end":return e.stop()}},e,this)}));return function(t,i,n){return e.apply(this,arguments)}}(),showDetail:function(e){cc.global.pop_mgr.showFrm({name:"frm_circleMemberDetail",customData:{memberData:e.target.parent.parent.m_data,type:2}})},changePage:function(e,t){if(cc.global.util.playSound_buttonClick(),"next"==t){if(this.pageIndex>=this.pageCount)return void cc.global.util.tipMsg("\u5df2\u7ecf\u662f\u6700\u540e\u4e00\u9875\u4e86!");this.pageIndex++}else if("last"==t){if(this.pageIndex<=1)return void cc.global.util.tipMsg("\u5df2\u7ecf\u662f\u7b2c\u4e00\u9875\u4e86!");this.pageIndex--}else parseInt(t)>this.pageCount?this.pageIndex=this.pageCount:parseInt(t)<1?this.pageIndex=1:this.pageIndex=parseInt(t);this.updatePage(),this.getData()},updatePage:function(){0==this.pageCount&&(this.pageIndex=0),this.pageText.string=this.pageIndex+"/"+this.pageCount,this.pageIndex<=1?this.lastPageBtn.interactable=!1:this.lastPageBtn.interactable||(this.lastPageBtn.interactable=!0),this.pageIndex>=this.pageCount?this.nextPageBtn.interactable=!1:this.nextPageBtn.interactable||(this.nextPageBtn.interactable=!0)},searchCircleMember:function(){console.log("\u6253\u5f00\u5f39\u7a97:frm_input"),cc.global.pop_mgr.showFrm({name:"frm_input",customData:{type:"str",maxLength:9,defNum:"",placeholder:"\u8bf7\u8f93\u5165\u73a9\u5bb6ID",inputOver:this.inputOver_searchCircleMember,label:null,target:this,title:"searchCircleMember",showHead:!1,isAutoOver:!1,isShowOk:!0,closeWhenInputOver:!0}})},inputOver_searchCircleMember:function(e,t,i){i.pageIndex=0,i.pageCount=0,i.updatePage(),i.selectAccount=t,i.getData()},switchTab:function(e){e&&cc.global.util.playSound_buttonClick();for(var t=cc.find("bg/scroll/view/content",this.node),i=0;i<t.childrenCount;i++)t.children[i].active=!1;this.pageIndex=0,this.pageCount=0,this.updatePage(),this.selectAccount="",this.getData()}}),cc._RF.pop()},{"../global/NotificationNames":"NotificationNames","../global/item_generator":"item_generator","./base/pop_base":"pop_base"}],frm_circleSetNotice:[function(e,t,i){"use strict";cc._RF.push(t,"b5d7dhC1XFKMIzQ0m6okJm7","frm_circleSetNotice");var n=e("./base/pop_base"),o=e("../global/NotificationNames");cc.Class({extends:n.pop_base,properties:{noticeEdit:cc.EditBox},onLoad:function(){this.eventList={},this.eventList[o.NotificationNames.CREATE_MODIFY_CIRCLE_EVENT_PUSH]=this.createModifyCircleEventPush},registerObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.on(e,this.eventList[e],this)},removeObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.off(e,this.eventList[e],this)},on_show:function(){this.registerObserver(),this.noticeEdit.string=cc.global.util.circleUserinfo.circle_notice},on_hide:function(){this.removeObserver()},setCircleNotice:function(){cc.global.util.playSound_buttonClick(),cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u4fee\u6539",!0),cc.global.net.send("createModifyCircleEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,circleId:cc.global.util.circleUserinfo.circle_id,type:2,circleNotice:this.noticeEdit.string})},createModifyCircleEventPush:function(e){cc.global.util.closeAlert(),1==e.code?(cc.global.util.tipMsg("\u4fee\u6539\u516c\u544a\u6210\u529f!"),this.ops.closeAnim=!1,this.ops.closeSound=!1,this.onCloseClick()):cc.global.util.tipMsg(e.msg)}}),cc._RF.pop()},{"../global/NotificationNames":"NotificationNames","./base/pop_base":"pop_base"}],frm_createCircle:[function(e,t,i){"use strict";cc._RF.push(t,"ed5baLCz8JL0KaL6eRnjQXJ","frm_createCircle");var n=e("./base/pop_base"),o=e("../global/NotificationNames");cc.Class({extends:n.pop_base,properties:{content:{type:cc.Node,default:null,tooltip:"\u5f39\u7a97\u5185\u5bb9\u5bb9\u5668"},circleNameLabel:cc.EditBox,roomcardTip:cc.RichText,roomcardTipTemplate:"2\u3001\u9700\u6ee1\u8db3<color=#00ff00>${need}</c>\u94bb\u77f3\uff0c\u60a8\u5f53\u524d\u62e5\u6709<color=#00ff00>${roomcard}</c>"},onLoad:function(){this.eventList={},this.eventList[o.NotificationNames.CREATE_MODIFY_CIRCLE_EVENT_PUSH]=this.createModifyCircleEventPush,this.eventList[o.NotificationNames.CIRCLE_SYS_GLOBAL_EVENT_PUSH]=this.circleSysGlobalEventPush,this.eventList[o.NotificationNames.CHECK_BIND_STATUS_PUSH]=this.checkBindStatusPush},registerObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.on(e,this.eventList[e],this)},removeObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.off(e,this.eventList[e],this)},on_show:function(){this.registerObserver(),this.circleNameLabel.string="",this.updateRoomcardTip(),this.getNeedRoomcard(),this.checkBindStatus()},on_hide:function(){this.removeObserver()},updateRoomcardTip:function(){this.roomcard=cc.global.util.userinfo.roomcard;var e=void 0==this.needRoomcard?"---":this.needRoomcard;this.roomcardTip.string=this.roomcardTipTemplate.replace("${need}",e).replace("${roomcard}",cc.global.util.userinfo.roomcard)},getNeedRoomcard:function(){cc.global.net.send("circleSysGlobalEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,globalKey:"game_circle_room_card"})},circleSysGlobalEventPush:function(e){if(1==e.code)for(var t=e.data,i=0;i<t.length;i++)if("game_circle_room_card"==t[i].global_key){this.needRoomcard=t[i].global_value,this.updateRoomcardTip();break}},checkBindStatus:function(){cc.global.net.send("checkBindStatus",{account:cc.global.util.userinfo.account})},checkBindStatusPush:function(e){0==e.code?(cc.find("bg/tip1/btn_bindTel",this.node).active=!0,cc.find("bg/tip1/ok",this.node).active=!1):(cc.find("bg/tip1/btn_bindTel",this.node).active=!1,cc.find("bg/tip1/ok",this.node).active=!0,cc.global.pop_mgr.closeFrm({name:"frm_bindTel"}))},onCreateClick:function(){if(cc.global.util.playSound_buttonClick(),""!=this.circleNameLabel.string){var e=1;cc.find("bg/createTip/toggle",this.node)&&(e=cc.find("bg/createTip/toggle",this.node).getComponent(cc.Toggle).isChecked?0:1),cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4",!0),cc.global.net.send("createModifyCircleEvent",{type:1,hpManagerRole:e,uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,circleName:this.circleNameLabel.string})}else cc.global.util.tipMsg("\u8bf7\u8f93\u5165\u724c\u53cb\u5708\u540d\u79f0")},createModifyCircleEventPush:function(e){cc.global.util.tipMsg(e.msg),cc.global.util.closeAlert(),1==e.code&&(this.ops.closeAnim=!1,this.ops.closeSound=!1,this.onCloseClick())},update:function(){this.roomcard!=cc.global.util.userinfo.roomcard&&this.updateRoomcardTip()},hideTip:function(){cc.find("bg/createTip/tip",this.node).active=!cc.find("bg/createTip/tip",this.node).active}}),cc._RF.pop()},{"../global/NotificationNames":"NotificationNames","./base/pop_base":"pop_base"}],frm_createTea:[function(e,t,i){"use strict";cc._RF.push(t,"ea816k/Qn9GnZqIqim4NGx4","frm_createTea");var n=e("./base/pop_base"),o=e("../global/NotificationNames");cc.Class({extends:n.pop_base,properties:{teaNameLabel:cc.EditBox},onLoad:function(){this.eventList={},this.eventList[o.NotificationNames.TEA_CREATOREVENT_PUSH]=this.teaCreatorEventPush,this.eventList.select_create_tea_setting=this.changeSettingString},registerObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.on(e,this.eventList[e],this)},removeObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.off(e,this.eventList[e],this)},on_show:function(){this.registerObserver(),cc.global.util.tea||(cc.global.util.tea={}),this.teaNameLabel.string="",cc.global.util.tea.createSetting=null,cc.global.util.tea.createGid=-1,cc.find("bg/wanfaSet/lb",this.node).getComponent(cc.Label).string="\u8bf7\u9009\u62e9\u6e38\u620f\u73a9\u6cd5"},on_hide:function(){this.removeObserver()},onCreateClick:function(){cc.global.util.playSound_buttonClick(),""!=this.teaNameLabel.string?cc.global.util.tea.createSetting?-1!=cc.global.util.tea.createGid?(cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4",!0),cc.global.net.send("tea_creatorEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,teaName:this.teaNameLabel.string,base_info:cc.global.util.tea.createSetting,gid:cc.global.util.tea.createGid})):cc.global.util.tipMsg("\u8bf7\u9009\u62e9\u6e38\u620f"):cc.global.util.tipMsg("\u8bf7\u9009\u62e9\u623f\u95f4\u914d\u7f6e"):cc.global.util.tipMsg("\u8bf7\u8f93\u5165\u8336\u697c\u540d\u79f0")},onRoomSettingClick:function(){cc.global.util.playSound_buttonClick(),cc.global.pop_mgr.showFrm({name:"frm_create",customData:{type:"tea_setting"}})},teaCreatorEventPush:function(e){cc.global.util.tipMsg(e.msg),cc.global.util.closeAlert(),1==e.code&&(this.ops.closeAnim=!1,this.ops.closeSound=!1,this.onCloseClick(),Notification.emit("tea_refresh_scence",{type:"create"}))},changeSettingString:function(e){cc.find("bg/wanfaSet/lb",this.node).getComponent(cc.Label).string=e}}),cc._RF.pop()},{"../global/NotificationNames":"NotificationNames","./base/pop_base":"pop_base"}],frm_create:[function(e,t,i){"use strict";cc._RF.push(t,"f13b6aTYrVIqr0LOhoGvbrM","frm_create");var n=e("./base/pop_base"),o=e("../global/item_generator"),a=e("../global/NotificationNames");function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function n(o,a){try{var c=t[o](a),s=c.value}catch(e){return void i(e)}if(!c.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}cc.Class({extends:n.pop_base,properties:{extraSGtype:{default:null,type:cc.Node}},onLoad:function(){var e=this;this.useCache=!0,window.createRoomCacheToggle=function(){e.useCache=!e.useCache,console.log("\u521b\u5efa\u623f\u95f4\u7f13\u5b58\u542f\u7528\u72b6\u6001:",e.useCache)}},registerObserver:function(){var e=this;Notification.on(a.NotificationNames.GET_GAME_SETTING_PUSH,function(t){e.getDataResp(t)},this),Notification.on(a.NotificationNames.GET_ROOM_CARD_PAY_INFO_PUSH,function(t){e.getRoomCardPayInfoPush(t)},this),Notification.on(a.NotificationNames.QUICK_JOIN_ROOM_CIRCLE_EVENT_PUSH,this.quickJoinRoomCircleEventPush,this)},removeObserver:function(){Notification.offType(a.NotificationNames.GET_GAME_SETTING_PUSH),Notification.offType(a.NotificationNames.GET_ROOM_CARD_PAY_INFO_PUSH),Notification.off(a.NotificationNames.QUICK_JOIN_ROOM_CIRCLE_EVENT_PUSH,this.quickJoinRoomCircleEventPush,this)},on_show:function(){if(this.registerObserver(),!this.ops||!this.ops.customData||!this.ops.customData.type||""==this.ops.customData.type)return console.log("\u521b\u5efa\u623f\u95f4\u5f39\u7a97\u521d\u59cb\u5316\u5f02\u5e38,\u65e0\u6cd5\u83b7\u53d6\u521b\u5efa\u623f\u95f4\u7c7b\u578b"),void cc.global.util.tipMsg("\u53c2\u6570\u5f02\u5e38,\u8bf7\u91cd\u8bd5");if(this.type=this.ops.customData.type,this.flag=-1,"club"==this.type||"club_setting"==this.type){if(!this.ops.customData.clubCode)return console.log("\u521b\u5efa\u623f\u95f4\u5f39\u7a97\u521d\u59cb\u5316\u5f02\u5e38,\u65e0\u6cd5\u83b7\u53d6\u724c\u53cb\u5708\u7f16\u53f7"),void cc.global.util.tipMsg("\u53c2\u6570\u5f02\u5e38,\u8bf7\u91cd\u8bd5");this.clubCode=this.ops.customData.clubCode}if(cc.find("bg/roomcard/lb",this.node).getComponent(cc.Label).string=cc.global.util.userinfo.roomcard,cc.find("bg/yuanbao/lb",this.node).getComponent(cc.Label).string=cc.global.util.userinfo.yuanbao,cc.find("bg/btn_create_fk",this.node).active=!1,cc.find("bg/btn_create_yb",this.node).active=!1,cc.find("bg/btn_create_club",this.node).active=!1,cc.find("bg/btn_create_club_setting",this.node).active=!1,cc.find("bg/btn_create_tea_setting",this.node).active=!1,cc.find("bg/btn_create_circle",this.node).active=!1,cc.find("bg/btn_create_circle_setting",this.node).active=!1,cc.find("bg/btn_create_change_tea_setting",this.node).active=!1,cc.find("bg/btn_create_"+this.type,this.node).active=!0,"yb"==this.type)cc.find("bg/isOpen",this.node).active=!1,cc.find("bg/scroll/view/content/dizhu_edit",this.node).active=!1,cc.find("bg/scroll/view/content/pump",this.node).active=!1,cc.find("bg/scroll/view/content/cut_fixed",this.node).active=!1,cc.find("bg/scroll/view/content/cut_rank",this.node).active=!1,this.showDizhuEdit=!1;else if("circle"==this.type||"circle_setting"==this.type){cc.find("bg/isOpen",this.node).active=!1,cc.find("bg/scroll/view/content/dizhu_edit",this.node).active=!0,cc.find("bg/scroll/view/content/pump",this.node).active=!0,cc.find("bg/scroll/view/content/cut_fixed",this.node).active=!0,cc.find("bg/scroll/view/content/cut_rank",this.node).active=!1,cc.find("bg/scroll/view/content/cut_fixed/lb",this.node).getComponent(cc.Label).string=1;for(var e=cc.find("bg/scroll/view/content/cut_rank",this.node).children,t=0;t<e.length;t++)e[t].getChildByName("lb").getComponent(cc.Label).string=1;this.showDizhuEdit=!1}else cc.find("bg/isOpen",this.node).active=!1,cc.find("bg/scroll/view/content/dizhu_edit",this.node).active=!1,cc.find("bg/scroll/view/content/pump",this.node).active=!1,cc.find("bg/scroll/view/content/cut_fixed",this.node).active=!1,cc.find("bg/scroll/view/content/cut_rank",this.node).active=!1,this.showDizhuEdit=!1;"fk"==this.type||"circle"==this.type||"tea_setting"==this.type||"change_tea_setting"==this.type?(cc.find("bg/tip_fk",this.node).active=!0,cc.find("bg/tip_fk/tea_ic",this.node).active="tea_setting"==this.type||"change_tea_setting"==this.type,cc.find("bg/tip_fk/ic",this.node).active="fk"==this.type||"circle"==this.type):cc.find("bg/tip_fk",this.node).active=!1,"club"==this.type?cc.find("bg/tip_club",this.node).active=!0:cc.find("bg/tip_club",this.node).active=!1;for(var i=cc.find("bg/btns/scrollview/view/content",this.node),n=0;n<i.childrenCount;n++)i.children[n].getComponent(cc.Toggle).isChecked=4==cc.global.util.getNodeIndex(i.children[n].name,"toggle");this.switchGame()},on_hide:function(){this.removeObserver()},switchGame:function(e){e&&cc.global.util.playSound_buttonClick();for(var t=cc.find("bg/btns/scrollview/view/content",this.node),i=0;i<t.childrenCount;i++)if(t.children[i].getComponent(cc.Toggle).isChecked){cc.global.util.getNodeIndex(t.children[i].name,"toggle");break}this.getData()},getData:function(){cc.global.util.showAlert("\u6b63\u5728\u52a0\u8f7d",!0),cc.find("bg/btn_create_"+this.type,this.node).getComponent(cc.Button).interactable=!1,this.base_info={},this.baseNumRow=null,this.playerRow=null,this.turnRow=null,this.bsHeadRow=null,this.colorRow=null,this.flowerColorRow=null,this.lackTypeRow=null,this.keScoreValRow=null,this.multipleScoreRow=null,this.zhuangXianCol=new Array,this.defaultZhuangXianColVal=new Array,this.defaultKeScore=100,this.gid=-1;for(var e=cc.find("bg/btns/scrollview/view/content",this.node),t=0;t<e.childrenCount;t++)if(e.children[t].getComponent(cc.Toggle).isChecked){this.gid=cc.global.util.getNodeIndex(e.children[t].name,"toggle");break}if(-1==this.gid)return console.log("\u9009\u9879\u83b7\u53d6\u5931\u8d25,gid\u5f02\u5e38"),cc.global.util.tipMsg("\u53c2\u6570\u5f02\u5e38,\u8bf7\u91cd\u8bd5"),void cc.global.util.closeAlert();if(!this.flag||-1==this.flag)switch(this.flag=-1,this.type){case"fk":this.flag=2;break;case"yb":this.flag=1;break;case"club":case"club_setting":this.flag=3;break;case"circle":case"circle_setting":this.flag=9;break;case"tea_setting":case"change_tea_setting":this.flag=10}return this["cacheData_"+this.flag+"_"+this.gid]&&Date.now()-this["cacheTime_"+this.flag+"_"+this.gid]<3e5&&(this.getDataResp(this["cacheData_"+this.flag+"_"+this.gid],!0),this.useCache)?void 0:-1==this.flag?(console.log("\u9009\u9879\u83b7\u53d6\u5931\u8d25,flag\u5f02\u5e38"),cc.global.util.tipMsg("\u53c2\u6570\u5f02\u5e38,\u8bf7\u91cd\u8bd5"),void cc.global.util.closeAlert()):void cc.global.net.send("getGameSetting",{flag:this.flag,gid:this.gid,platform:cc.global.util.gameinfo.platform})},getDataResp:function(e,t){var i=this;if(e){if(0==e.code)return cc.global.util.closeAlert(),void cc.global.util.tipMsg(e.msg);t||(this["cacheData_"+this.flag+"_"+this.gid]=e,this["cacheTime_"+this.flag+"_"+this.gid]=Date.now());var n=cc.find("bg/scroll/view/content/list",this.node);cc.global.util.loadPrefab(cc.global.util.PREFAB_DATING_ITEM_URL+"create_item_row",function(t){if(!t)return console.log("err: \u52a0\u8f7d\u9884\u5236\u8d44\u6e90\u5931\u8d25"),void cc.global.util.closeAlert();cc.global.util.loadPrefab(cc.global.util.PREFAB_DATING_ITEM_URL+"create_item_col",function(o){if(!o)return console.log("err: \u52a0\u8f7d\u9884\u5236\u8d44\u6e90\u5931\u8d25"),void cc.global.util.closeAlert();var a=e.data||[];i.showList(n,a,t,o)})})}else cc.global.util.tipMsg_connectErr()},showList:function(){var e=c(regeneratorRuntime.mark(function e(t,i,n,a){var c,s,l,r,g=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(c=i.length;c<t.children.length;c++)t.children[c].m_key=null;return e.next=3,o.item_generator.getInstance().executePreFrame(o.item_generator.getInstance()._getItemGenerator(t,i,n,function(e,t){cc.find("label",e).getComponent(cc.Label).string=i[t].opt_name,e.m_key=i[t].opt_key,e.m_name=i[t].opt_name,1!=g.gid&&4!=g.gid||"baseNum"==i[t].opt_key&&(g.baseNumRow=e),"player"==i[t].opt_key&&(g.playerRow=e),"turn"==i[t].opt_key&&(g.turnRow=e),"bsHead"==i[t].opt_key&&(g.bsHeadRow=e),"color"==i[t].opt_key&&(g.colorRow=e),"flowerColor"==i[t].opt_key&&(g.flowerColorRow=e),"jiama"==i[t].opt_key&&(g.jiamaRow=e),20==g.gid&&"lackType"==i[t].opt_key&&(g.lackTypeRow=e),3==g.gid&&"keScoreVal"==i[t].opt_key&&(g.keScoreValRow=e),3==g.gid&&"multipleScore"==i[t].opt_key&&(g.multipleScoreRow=e);var n=i[t].opt_val,c=cc.find("toggleGroup",e);if(i[t].id_hidden)return 1!=i[t].is_mul&&n.length>0&&(g.base_info[i[t].opt_key]=n[0].val),void(e.active=!1);e.active=!0,1==i[t].is_mul?c.getComponent(cc.ToggleContainer).enabled=!1:c.getComponent(cc.ToggleContainer).enabled=!0,o.item_generator.getInstance().executePreFrame(o.item_generator.getInstance()._getItemGenerator(c,n,a,function(o,a){15!=g.gid||"type"!==i[t].opt_key||2!=n[a].val?(15==g.gid&&"type"===i[t].opt_key&&1==n[a].val?(cc.find("extra_pdk_type",o).active=!0,cc.find("extra_pdk_type/\u53cd\u9ed1\u68433",o).on("toggle",g.pdkTypeClick,g)):cc.find("extra_pdk_type",o).active=!1,cc.find("Background/label",o).getComponent(cc.Label).string=n[a].name,o.m_val=n[a].val,o.m_mul=i[t].is_mul,o.nameVal=n[a].name,"roomType"==i[t].opt_key?g.getFlag(n[a].val)==g.flag?(o.getComponent(cc.Toggle).isChecked=!0,g.base_info[i[t].opt_key]=n[a].val):o.getComponent(cc.Toggle).isChecked=!1:0==a&&1!=i[t].is_mul?(o.getComponent(cc.Toggle).isChecked=!0,g.base_info[i[t].opt_key]=n[a].val):o.getComponent(cc.Toggle).isChecked=!1,19==g.gid&&(g.sgScore="robScore","folieBet"!=i[t].opt_key&&"bet"!=i[t].opt_key&&"score"!=i[t].opt_key&&"folieRobScore"!=i[t].opt_key&&"folieScore"!=i[t].opt_key||(e.active=!1),"special"===i[t].opt_key&&1==a&&(cc.find("extra_pdk_type",o).active=!0,g.extraSGtype=cc.find("extra_pdk_type",o),console.log(g.extraSGtype),cc.find("extra_pdk_type/\u53cd\u9ed1\u68433/label",o).getComponent(cc.Label).string="\u75af\u72c2\u738b\u765e")),o.on("toggle",g.cbClick,g),o.on("click",g.cbClick_sound,g),3==g.gid&&"zhuangXian"===i[t].opt_key&&(g.zhuangXianCol.push(o),g.defaultZhuangXianColVal.push(o.m_val)),3==g.gid&&"keScoreVal"===i[t].opt_key&&0==a&&(g.defaultKeScore=o.m_val)):o.active=!1}),2,g)}),2,this);case 3:cc.find("bg/scroll",this.node).getComponent(cc.ScrollView).scrollToTop(.1),this.checkSpecialOption(),"fk"!=this.type&&"circle"!=this.type&&"tea_setting"!=this.type&&"change_tea_setting"!=this.type||this.getRoomCardPayInfo(),s=cc.find("bg/scroll/view/content/dizhu_edit/yuanbao/lb",this.node),l=1,1==this.gid?l=1:4==this.gid?l=1:6==this.gid&&(l=1),this.inputOver(s,l),r=cc.find("bg/scroll/view/content/pump/lb",this.node),this.inputOver_pump(r,0),cc.find("bg/btn_create_"+this.type,this.node).getComponent(cc.Button).interactable=!0,cc.global.util.closeAlert();case 14:case"end":return e.stop()}},e,this)}));return function(t,i,n,o){return e.apply(this,arguments)}}(),cbClick_sound:function(){cc.global.util.playSound_buttonClick()},cbClick:function(e){var t=e.target,i=t.parent.parent.m_key;if(1==t.m_mul){if(this.base_info[i]||(this.base_info[i]=[]),t.getComponent(cc.Toggle).isChecked)this.base_info[i].push(t.m_val);else for(var n=0;n<this.base_info[i].length;n++)if(this.base_info[i][n]==t.m_val){this.base_info[i].splice(n,1);break}}else this.base_info[i]=t.m_val;if(console.log(t.m_val),null!=this.base_info.roomType&&this.getFlag(this.base_info.roomType)!=this.flag)return this.flag=this.getFlag(this.base_info.roomType),void this.getData();this.checkSpecialOption(),"fk"!=this.type&&"circle"!=this.type&&"tea_setting"!=this.type&&"change_tea_setting"!=this.type||this.getRoomCardPayInfo()},pdkTypeClick:function(e){var t=e.target.parent;t&&"\u53cd\u9ed1\u68433"===t.name&&t.getComponent(cc.Toggle).isChecked?this.base_info.type=2:this.base_info.type=1,this.checkSpecialOption(),"fk"!=this.type&&"circle"!=this.type&&"tea_setting"!=this.type&&"change_tea_setting"!=this.type||this.getRoomCardPayInfo()},checkSpecialOption:function(){if(1==this.base_info.cutType||2==this.base_info.cutType)cc.find("bg/scroll/view/content/pump",this.node).active=!0,cc.find("bg/scroll/view/content/cut_fixed",this.node).active=!1,cc.find("bg/scroll/view/content/cut_rank",this.node).active=!1;else if(4==this.base_info.cutType)cc.find("bg/scroll/view/content/pump",this.node).active=!1,cc.find("bg/scroll/view/content/cut_fixed",this.node).active=!0,cc.find("bg/scroll/view/content/cut_rank",this.node).active=!1;else if(5==this.base_info.cutType){cc.find("bg/scroll/view/content/pump",this.node).active=!1,cc.find("bg/scroll/view/content/cut_fixed",this.node).active=!1,cc.find("bg/scroll/view/content/cut_rank",this.node).active=!0;for(var e=void 0!=this.base_info.player?this.base_info.player:2,t=cc.find("bg/scroll/view/content/cut_rank",this.node).children,i=0;i<t.length;i++)t[i].active=i<e}else cc.find("bg/scroll/view/content/pump",this.node).active=!1,cc.find("bg/scroll/view/content/cut_fixed",this.node).active=!1,cc.find("bg/scroll/view/content/cut_rank",this.node).active=!1;if(cc.find("bg/scroll/view/content/mj_fanfenzhi",this.node).active=!1,cc.find("bg/scroll/view/content/mj_kefenbi",this.node).active=!1,"circle"==this.type||"circle_setting"==this.type){if(3==this.gid){cc.find("bg/scroll/view/content/dizhu_edit/enterYB",this.node).active=50!=this.base_info.turn.turn,cc.find("bg/scroll/view/content/dizhu_edit/leaveYB",this.node).active=50!=this.base_info.turn.turn,cc.find("bg/scroll/view/content/dizhu_edit/yuanbao/mj",this.node).active=!0;var n=cc.find("bg/scroll/view/content/dizhu_edit/yuanbao/lb",this.node).getComponent(cc.Label).string,o="\u756a\u500d\u3010"+n+"\u3011";50==this.base_info.turn.turn&&(o+="   \u8bfe\u6570\u3010"+100*n+"\u3011"),cc.find("bg/scroll/view/content/dizhu_edit/yuanbao/mj",this.node).getComponent(cc.Label).string=o}else cc.find("bg/scroll/view/content/dizhu_edit",this.node).active=!0,cc.find("bg/scroll/view/content/dizhu_edit/yuanbao",this.node).active=!0,cc.find("bg/scroll/view/content/dizhu_edit/enterYB",this.node).active=!0,cc.find("bg/scroll/view/content/dizhu_edit/leaveYB",this.node).active=!0,cc.find("bg/scroll/view/content/dizhu_edit/yuanbao/mj",this.node).active=!1;4==this.gid?cc.find("bg/scroll/view/content/guipai_num",this.node).active=!0:cc.find("bg/scroll/view/content/guipai_num",this.node).active=!1}var a=cc.find("bg/scroll/view/content/list",this.node);if(19==this.gid){for(var c=0;c<a.childrenCount;c++)1==this.base_info.type?("bet"!=a.children[c].m_key&&"folieBet"!=a.children[c].m_key||(a.children[c].active=!1),1==this.base_info.special?"robScore"==a.children[c].m_key?(this.sgScore="robScore",a.children[c].active=!0):"score"!=a.children[c].m_key&&"folieScore"!=a.children[c].m_key&&"folieRobScore"!=a.children[c].m_key||(a.children[c].active=!1):2==this.base_info.special&&("folieRobScore"==a.children[c].m_key?(this.sgScore="folieRobScore",a.children[c].active=!0):"robScore"!=a.children[c].m_key&&"score"!=a.children[c].m_key&&"folieScore"!=a.children[c].m_key||(a.children[c].active=!1))):2==this.base_info.type&&(1==this.base_info.special?("bet"==a.children[c].m_key?a.children[c].active=!0:"folieBet"==a.children[c].m_key&&(a.children[c].active=!1),"score"==a.children[c].m_key?(this.sgScore="score",a.children[c].active=!0):"robScore"!=a.children[c].m_key&&"folieScore"!=a.children[c].m_key&&"folieRobScore"!=a.children[c].m_key||(a.children[c].active=!1)):2==this.base_info.special&&("folieBet"==a.children[c].m_key?a.children[c].active=!0:"bet"==a.children[c].m_key&&(a.children[c].active=!1),"folieScore"==a.children[c].m_key?(this.sgScore="folieScore",a.children[c].active=!0):"robScore"!=a.children[c].m_key&&"score"!=a.children[c].m_key&&"folieRobScore"!=a.children[c].m_key||(a.children[c].active=!1)));cc.find("bg/scroll/view/content/dizhu_edit/yuanbao",this.node).active=!1}if(3==this.gid&&(this.keScoreValRow&&(this.keScoreValRow.active=50==this.base_info.turn.turn),this.multipleScoreRow&&(this.multipleScoreRow.active=50!=this.base_info.turn.turn)),this.baseNumRow&&(1==this.gid?5==this.base_info.type||7==this.base_info.type?this.baseNumRow.active=!1:this.baseNumRow.active=!0:4==this.gid&&(2==this.base_info.type?this.baseNumRow.active=!0:this.baseNumRow.active=!1)),this.showDizhuEdit){if(this.ratio=[1,100,50],8==this.base_info.roomType&&3!=this.gid?(this.playerRow&&15!=this.gid&&(this.playerRow.active=!1),this.turnRow&&(this.turnRow.active=!1)):(this.playerRow&&(this.playerRow.active=!0),this.turnRow&&(this.turnRow.active=!0)),19==this.gid&&this.sgScore){3==this.base_info[this.sgScore].length&&Array.isArray(this.base_info[this.sgScore])?20*parseInt(this.base_info[this.sgScore][2].val):2==this.base_info[this.sgScore].length&&Array.isArray(this.base_info[this.sgScore])?20*parseInt(this.base_info[this.sgScore][1].val):(console.log(this.base_info[this.sgScore]),20*parseInt(this.base_info[this.sgScore]))}this.inputOver()}this.bsHeadRow&&15==this.gid&&(2==this.base_info.player?this.bsHeadRow.active=!1:this.bsHeadRow.active=!0),4==this.gid&&(1==this.base_info.sameColor?(this.colorRow&&(this.colorRow.active=!1),this.flowerColorRow&&(this.flowerColorRow.active=!0),this.jiamaRow&&(this.jiamaRow.active=!1)):(this.colorRow&&(this.colorRow.active=!0),this.flowerColorRow&&(this.flowerColorRow.active=!1),this.jiamaRow&&(this.jiamaRow.active=!0))),20==this.gid&&this.lackTypeRow&&(4==this.base_info.player?this.lackTypeRow.active=!1:this.lackTypeRow.active=!0)},showInput:function(e,t){console.log("\u6253\u5f00\u5f39\u7a97:frm_input"),cc.global.pop_mgr.showFrm({name:"frm_input",customData:{type:"num",label:e.target,defNum:e.target.getComponent(cc.Label).string,maxLength:8,inputOver:this.inputOver,target:this,title:"leave"==t?"lizhuoTJ":"enter"==t?"ruzhuoTJ":"dizhuSet",showBtnPlusAndMinus:"leave"==t}})},inputOver:function(e,t,i){e||(e=cc.find("bg/scroll/view/content/dizhu_edit/yuanbao/lb",this.node),t=parseInt(e.getComponent(cc.Label).string)),i||(i=this);var n=i.ratio;n||(n=[1,100,0]);for(var o=e.parent.parent,a=[],c=0,s=0;s<o.childrenCount;s++)a.push(o.children[s].getChildByName("lb").getComponent(cc.Label)),o.children[s].name==e.parent.name&&(c=s);parseInt(a[0].string);if(t<1&&0==c&&(t=1),0==c&&t>1e3&&(t=1e3),0==c){if(a[0].string=t,a[1].string=t*n[1],a[2].string=t*n[2],3==i.gid){if(i.zhuangXianCol.length>0)for(var l=0;l<i.zhuangXianCol.length;l++){var r=i.defaultZhuangXianColVal[l].split("/")[0]*t,g=i.defaultZhuangXianColVal[l].split("/")[1]*t;i.zhuangXianCol[l].nameVal=r+"/"+g,i.zhuangXianCol[l].m_val=r+"/"+g,cc.find("Background/label",i.zhuangXianCol[l]).getComponent(cc.Label).string=r+"/"+g,i.base_info.zhuangXian&&i.zhuangXianCol[l].getComponent(cc.Toggle).isChecked&&(i.base_info.zhuangXian=r+"/"+g)}var h="\u756a\u500d\u3010"+t+"\u3011";50==i.base_info.turn.turn&&(h+="   \u8bfe\u6570\u3010"+100*t+"\u3011"),cc.find("bg/scroll/view/content/dizhu_edit/yuanbao/mj",i.node).getComponent(cc.Label).string=h}}else a[c].string=t},showInput_guiNum:function(e,t){console.log("\u6253\u5f00\u5f39\u7a97:frm_input"),cc.global.pop_mgr.showFrm({name:"frm_input",customData:{type:"num",label:e.target,defNum:parseInt(e.target.getComponent(cc.Label).string),maxNum:9,inputOver:this.inputOver_guiNum,target:this}})},inputOver_guiNum:function(e,t,i){t<0&&(t=0),e.getComponent(cc.Label).string=t},showInput_pump:function(e){console.log("\u6253\u5f00\u5f39\u7a97:frm_input"),cc.global.pop_mgr.showFrm({name:"frm_input",customData:{type:"num",label:e.target,maxLength:2,maxNum:20,defNum:parseInt(e.target.getComponent(cc.Label).string),inputOver:this.inputOver_pump,target:this}})},inputOver_pump:function(e,t,i){t<=0&&(t=1),e.getComponent(cc.Label).string=t+"%"},showInput_cut:function(e){console.log("\u6253\u5f00\u5f39\u7a97:frm_input"),cc.global.pop_mgr.showFrm({name:"frm_input",customData:{type:"num",label:e.target,maxLength:20,maxNum:2e4,defNum:parseInt(e.target.getComponent(cc.Label).string),inputOver:this.inputOver_cut,target:this}})},inputOver_cut:function(e,t,i){t<=0&&(t=0),e.getComponent(cc.Label).string=t},showInput_mj:function(e){console.log("\u6253\u5f00\u5f39\u7a97:frm_input"),cc.global.pop_mgr.showFrm({name:"frm_input",customData:{type:"num",label:e.target,maxLength:6,defNum:parseInt(e.target.getComponent(cc.Label).string),inputOver:this.inputOver_mj,target:this}})},inputOver_mj:function(e,t,i){t<=0&&(t=1),e.getComponent(cc.Label).string=t},getRoomCardPayInfo:function(){cc.global.net.send("getRoomCardPayInfo",{base_info:this.base_info})},getRoomCardPayInfoPush:function(e){if(e&&1==e.code){var t="";8==this.base_info.roomType&&(t="/\u4eba"),cc.find("bg/tip_fk/lb",this.node).getComponent(cc.Label).string=e.roomcard+t}else cc.global.util.tipMsg_connectErr(),cc.find("bg/tip_fk/lb",this.node).getComponent(cc.Label).string="--",console.log("err: \u83b7\u53d6\u623f\u8d39\u5931\u8d25")},onCreateClick:function(){cc.global.util.playSound_buttonClick(),-1!=this.gid?(cc.global.util.showAlert("\u6b63\u5728\u52a0\u8f7d",!0),this.doCreateRoom(this.gid)):cc.global.util.tipMsg_notOpen()},doCreateRoom:function(e){if(!this.base_info)return cc.global.util.tipMsg("\u83b7\u53d6\u623f\u95f4\u9009\u9879\u5931\u8d25,\u8bf7\u91cd\u8bd5"),void cc.global.util.closeAlert();var t={};for(var i in this.base_info)t[i]=this.base_info[i];if(this.baseNumRow&&!this.baseNumRow.active&&delete t.baseNum,this.lackTypeRow&&!this.lackTypeRow.active&&delete t.lackType,1==this.gid&&(t.gametype=1,t.qzTimes=[1,2,3],3==t.type&&(t.qznozhuang=2)),2==this.gid&&(t.type=1),3==this.gid){var n=cc.find("bg/scroll/view/content/mj_kefenbi",this.node);n.active&&(t.keScore=parseInt(cc.find("toggleGroup/create_item_col_input/input/label",n).getComponent(cc.Label).string));var o=cc.find("bg/scroll/view/content/mj_fanfenzhi",this.node);o.active&&(t.fanScore=parseInt(cc.find("toggleGroup/create_item_col_input/input/label",o).getComponent(cc.Label).string))}if(4==this.gid){1==t.sameColor&&(t.color=0,t.jiama=0);var a=parseInt(cc.find("bg/scroll/view/content/guipai_num/guipai/lb",this.node).getComponent(cc.Label).string);t.hardGhostNumber=a}if(19==this.gid&&(this.extraSGtype.getChildByName("\u53cd\u9ed1\u68433").getComponent(cc.Toggle).isChecked?t.isLaiZi=!0:t.isLaiZi=!1),20==this.gid&&(t.chook||(t.chook=[]),t.special||(t.special=[]),t.type||(t.type=3)),"fk"==this.type)cc.global.util.roomType=0,t.roomType=cc.global.util.roomType,cc.global.net.send("createRoom",{gid:this.gid,uuid:cc.global.util.userinfo.uuid,account:cc.global.util.userinfo.account,ip:cc.global.util.ip,port:cc.global.util.port,base_info:t,location:cc.global.util.LongitudeAndLatitude});else if("yb"==this.type){var c=cc.find("bg/scroll/view/content/dizhu_edit",this.node),s=cc.find("yuanbao/lb",c).getComponent(cc.Label).string,l=cc.find("enterYB/lb",c).getComponent(cc.Label).string,r=cc.find("leaveYB/lb",c).getComponent(cc.Label).string;cc.global.util.roomType=3,t.roomType=cc.global.util.roomType,cc.find("bg/isOpen",this.node).getComponent(cc.Toggle).isChecked?t.open=1:t.open=0,t.yuanbao=s,t.enterYB=l,t.leaveYB=r,1==this.gid&&(t.player=9,t.halfwayin=1,3==t.type&&(t.custFee=.1)),3==this.gid&&(t.custFee=.2),6==this.gid&&(t.player=7),4==this.gid&&(t.player=2,t.maxPlayer=8),cc.global.net.send("createRoom",{gid:this.gid,uuid:cc.global.util.userinfo.uuid,account:cc.global.util.userinfo.account,ip:cc.global.util.ip,port:cc.global.util.port,base_info:t,location:cc.global.util.LongitudeAndLatitude})}else if("club"==this.type)cc.global.util.roomType=6,t.roomType=cc.global.util.roomType,cc.global.net.send("quickJoinClubRoom",{gid:this.gid,uuid:cc.global.util.userinfo.uuid,account:cc.global.util.userinfo.account,ip:cc.global.util.ip,port:cc.global.util.port,base_info:t,clubCode:this.clubCode,location:cc.global.util.LongitudeAndLatitude});else if("club_setting"==this.type){for(var g="",h=cc.find("bg/scroll/view/content/list",this.node),d=0;d<h.childrenCount;d++)if(h.children[d].active){for(var u="",m=h.children[d].getChildByName("toggleGroup"),p=0;p<m.childrenCount;p++){(D=m.children[p]).active&&D.getComponent(cc.Toggle).isChecked&&(u+=D.getComponentInChildren(cc.Label).string.replace(/\s+/g,"")+"\uff0c")}""!=u&&(g+=u)}g.length>0&&(g=g.substring(0,g.length-1)),t.roomType=6,cc.global.net.send("changeClubSetting",{clubCode:this.clubCode,gid:this.gid,leader:cc.global.util.userinfo.account,uuid:cc.global.util.userinfo.uuid,setting:g,quick_setting:t})}else if("circle"==this.type){var f=cc.find("bg/scroll/view/content/dizhu_edit",this.node),b=parseInt(cc.find("bg/scroll/view/content/pump/lb",this.node).getComponent(cc.Label).string),_=cc.find("yuanbao/lb",f).getComponent(cc.Label).string,y=cc.find("enterYB/lb",f).getComponent(cc.Label).string,v=cc.find("leaveYB/lb",f).getComponent(cc.Label).string;if(t.pump=b,t.yuanbao=_,t.score=_,t.di=_,t.enterYB=y,t.leaveYB=v,3==this.gid&&(50==this.base_info.turn.turn?(t.leaveYB=0,t.fanMultiple=_,t.keScoreVal=100*_,t.enterYB=100*_,delete t.multipleScore):(t.fanMultiple=_,delete t.keScoreVal)),8==t.roomType&&(1==this.gid&&(t.player=9,t.halfwayin=1),6==this.gid&&(t.player=7),4==this.gid&&(t.player=2,t.maxPlayer=8)),4==t.cutType)t.cutList=cc.find("bg/scroll/view/content/cut_fixed/lb",this.node).getComponent(cc.Label).string;else if(5==t.cutType){for(var C=void 0!=t.player?t.player:2,N=cc.find("bg/scroll/view/content/cut_rank",this.node).children,S=[],B=0;B<N.length;B++)B<C&&S.push(N[B].getChildByName("lb").getComponent(cc.Label).string);t.cutList=S.join(",")}cc.global.util.roomType=t.roomType||8,cc.global.net.send("quickJoinRoomCircleEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,gid:this.gid,clubCode:cc.global.util.circleUserinfo.circle_code,createRoomType:1,base_info:t,location:cc.global.util.LongitudeAndLatitude})}else if("circle_setting"==this.type)cc.global.util.tipMsg_notOpen(),cc.global.util.closeAlert();else if("tea_setting"==this.type||"change_tea_setting"==this.type){if(t.roomType=10,cc.global.util.tea.createSetting=t,cc.global.util.tea.createGid=this.gid,cc.global.util.closeAlert(),"change_tea_setting"==this.type&&cc.global.net.send("tea_modifyPlayEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,teaInfoCode:cc.global.util.teaUserinfo.teaInfoCode,base_info:t,gid:this.gid}),"tea_setting"==this.type){for(var E="",T=cc.find("bg/scroll/view/content/list",this.node),x=0;x<T.childrenCount;x++)if(T.children[x].active){for(var I="",k=T.children[x].getChildByName("toggleGroup"),w=0;w<k.childrenCount;w++){var D;(D=k.children[w]).active&&D.getComponent(cc.Toggle).isChecked&&(I+=D.getComponentInChildren(cc.Label).string.replace(/\s+/g,"")+"\uff0c")}""!=I&&(E+=I)}E.length>0&&(E=E.substring(0,E.length-1)),Notification.emit("select_create_tea_setting",E)}this.ops.closeAnim=!1,this.ops.closeSound=!1,this.onCloseClick()}console.log(t)},getFlag:function(e){switch(parseInt(e)){case 0:case 2:return 2;case 3:return 1;case 6:return 3;case 8:return 8;case 9:return 9;case 10:return 10}return-1},quickJoinRoomCircleEventPush:function(e){cc.global.util.closeAlert(),cc.global.util.tipMsg(e.msg),1==e.code&&(this.ops.closeAnim=!1,this.ops.closeSound=!1,this.onCloseClick())}}),cc._RF.pop()},{"../global/NotificationNames":"NotificationNames","../global/item_generator":"item_generator","./base/pop_base":"pop_base"}],frm_fenxiang:[function(e,t,i){"use strict";cc._RF.push(t,"ebb3aqoiQ1Lx7siqN9t2CMk","frm_fenxiang");var n=e("./base/pop_base"),o=e("../global/NotificationNames");cc.Class({extends:n.pop_base,properties:{},onLoad:function(){},registerObserver:function(){var e=this;Notification.on(o.NotificationNames.ON_SHARE_RESULT,function(t){e.onShareResult(t)},this)},removeObserver:function(){Notification.offType(o.NotificationNames.ON_SHARE_RESULT)},on_show:function(){this.registerObserver();for(var e=cc.find("bg",this.node).getComponentsInChildren(sp.Skeleton),t=0;t<e.length;t++)e[t].setAnimation(0,"animation",!1)},on_hide:function(){this.removeObserver()},onShareClick:function(e,t){cc.global.util.playSound_buttonClick(),this.type=t,"2"==t?(cc.global.util.showAlert("\u6b63\u5728\u751f\u6210\u4e8c\u7ef4\u7801",!0),cc.global.http.sendRequest("/gameproxy/shareQRCode.json",{userId:cc.global.util.userinfo.id,uuid:cc.global.util.userinfo.uuid},function(e){if(cc.global.util.closeAlert(),e)if(0==e.code&&cc.global.util.tipMsg(e.msg),e.imagePath){var t={mediaType:"2",shareTo:"0",imageUrl:e.imagePath+"?v="+Date.now(),thumbImage:"Icon-50.png",thumbSize:"64"};cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org.cocos2dx.javascript.AppActivity","showShare","(Ljava/lang/String;)V",JSON.stringify(t)):cc.sys.os==cc.sys.OS_IOS?jsb.reflection.callStaticMethod("JsUseOcTool","showShare:",JSON.stringify(t)):cc.global.util.tipMsg("\u6682\u4e0d\u652f\u6301\u8be5\u5e73\u53f0")}else cc.global.util.tipMsg(e.msg);else cc.global.util.tipMsg_connectErr()})):(cc.global.util.showAlert("\u6b63\u5728\u52a0\u8f7d",!0),cc.global.http.sendRequest("/zagame/global/wxShare.json",{gid:-1,type:0,room_no:"",visitCode:"",platform:cc.global.util.gameinfo.platform},function(e){if(cc.global.util.closeAlert(),e){0==e.code&&cc.global.util.tipMsg(e.msg);var i={title:e.data.title,text:e.data.text,url:e.data.url,mediaType:"2",shareTo:t,imageUrl:e.data.imagePath,thumbImage:"Icon-50.png",thumbSize:"64"};cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org.cocos2dx.javascript.AppActivity","showShare","(Ljava/lang/String;)V",JSON.stringify(i)):cc.sys.os==cc.sys.OS_IOS?jsb.reflection.callStaticMethod("JsUseOcTool","showShare:",JSON.stringify(i)):cc.global.util.tipMsg("\u6682\u4e0d\u652f\u6301\u8be5\u5e73\u53f0")}else cc.global.util.tipMsg_connectErr()}))},onShareResult:function(e){"1"==e?(cc.global.util.tipMsg("\u5206\u4eab\u6210\u529f"),this.appShareInter()):"-1"==e?cc.global.util.tipMsg("\u53d6\u6d88\u5206\u4eab"):cc.global.util.tipMsg("\u5206\u4eab\u5931\u8d25")},appShareInter:function(){var e=1==this.type?1:0;cc.global.http.sendRequest("/zagame/appShareInter.json",{userId:cc.global.util.userinfo.id,type:e},function(e){console.log("---\u5206\u4eab\u5956\u52b1\u56de\u8c03---")})}}),cc._RF.pop()},{"../global/NotificationNames":"NotificationNames","./base/pop_base":"pop_base"}],frm_input:[function(e,t,i){"use strict";cc._RF.push(t,"0b73dwkPmZMDq0dBH55oVCw","frm_input");var n=e("./base/pop_base");cc.Class({extends:n.pop_base,properties:{btn_ok:cc.Node,btn_del:cc.Node},onLoad:function(){this.input=cc.find("bg/input",this.node),this.input_label=this.input.getComponent(cc.Label),this.placeholder_label=cc.find("bg/placeholder",this.node).getComponent(cc.Label)},on_show:function(){if(this.config={type:"num",maxLength:16,showBtnMax:!1,showBtnPlusAndMinus:!1,maxNum:null,defNum:"",placeholder:"",tip:"",inputOver:null,label:null,target:null,title:null,showHead:!1,headimg:null,isAutoOver:!1,isShowOk:!0,closeWhenInputOver:!0,tab:null,tabPrefix:"toggle",target_input:this},this.ops.customData)for(var e in this.ops.customData)this.config[e]=this.ops.customData[e];this.input_label.string=this.config.defNum,this.updatePlaceholder();for(var t=cc.find("bg/titles",this.node),i=0;i<t.childrenCount;i++)t.children[i].active=!1;this.config.title&&cc.find("title_"+this.config.title,t)&&(cc.find("title_"+this.config.title,t).active=!0),cc.find("bg/tip",this.node).getComponent(cc.Label).string=this.config.tip,this.config.showBtnMax?cc.find("bg/btn_max",this.node).active=!0:cc.find("bg/btn_max",this.node).active=!1,cc.find("bg/btn_plus",this.node).active=this.config.showBtnPlusAndMinus,cc.find("bg/btn_minus",this.node).active=!1;for(var n=cc.find("bg/tabs",this.node),o=0;o<n.childrenCount;o++)n.children[o].active=!1;if(this.config.tab&&cc.find("tab_"+this.config.tab,n)){var a=cc.find("tab_"+this.config.tab,n);if(a&&(a.active=!0,a.childrenCount>0)){var c=a.children[0];c.getComponent(cc.Toggle).check(),this.tabType=cc.global.util.getNodeIndex(c.name,this.config.tabPrefix)}}var s=cc.find("bg/head/sp",this.node);this.config.showHead?(cc.find("bg/head_frame",this.node).active=!0,cc.find("bg/head",this.node).active=!0,s.getComponent(cc.Sprite).spriteFrame=null,cc.global.util.setHeadimg(s,this.config.headimg)):(cc.find("bg/head_frame",this.node).active=!1,cc.find("bg/head",this.node).active=!1),this.config.isShowOk?(this.btn_del.active=!1,this.btn_ok.active=!0):(this.btn_del.active=!0,this.btn_ok.active=!1)},on_hide:function(){},switchTab:function(e){cc.global.util.playSound_buttonClick(),this.tabType=cc.global.util.getNodeIndex(e.node.name,this.config.tabPrefix),console.log(this.tabType)},onNumClick:function(e,t){if(cc.global.util.playSound_buttonClick(),this.input_label.string.length>=this.config.maxLength)return console.log("input:\u8fbe\u5230\u6700\u5927\u4f4d\u6570"),void(this.config.isAutoOver?this.onBtnClick(null,"ok"):this.config.maxNum&&(this.input_label.string=this.config.maxNum,this.updatePlaceholder()));this.input_label.string=this.converWithType(this.input_label.string+t),this.updatePlaceholder(),this.input_label.string.length>=this.config.maxLength&&this.config.isAutoOver&&this.onBtnClick(null,"ok")},onBtnClick:function(e,t){switch(e&&cc.global.util.playSound_buttonClick(),t){case"del":if(this.input_label.string.length>0){var i=this.input_label.string;this.input_label.string=i.substr(0,i.length-1),this.updatePlaceholder()}break;case"reset":this.input_label.string="",this.updatePlaceholder();break;case"ok":var n="";this.input_label.string.length>0?(n=this.converWithType(this.input_label.string),this.config.showBtnPlusAndMinus&&!cc.find("bg/btn_plus",this.node).active&&cc.find("bg/btn_minus",this.node).active&&(n="-"+n)):"num"==this.config.type&&(n=0),this.config.inputOver&&this.config.inputOver(this.config.label,n,this.config.target),this.config.closeWhenInputOver&&this.onCloseClick()}},converWithType:function(e){return"num"==this.config.type?this.config.maxNum&&parseFloat(e)>this.config.maxNum?this.config.maxNum:parseFloat(e):e},onBtnMaxClick:function(){cc.global.util.playSound_buttonClick(),this.config.maxNum&&(this.input_label.string=this.converWithType(this.config.maxNum),this.updatePlaceholder())},updatePlaceholder:function(){this.input_label.string.length>0?this.placeholder_label.node.active=!1:(this.placeholder_label.string!==this.config.placeholder&&(this.placeholder_label.string=this.config.placeholder),this.placeholder_label.node.active=!0)},onChangePlusAndMinusClick:function(){cc.global.util.playSound_buttonClick(),cc.find("bg/btn_plus",this.node).active=!cc.find("bg/btn_plus",this.node).active,cc.find("bg/btn_minus",this.node).active=!cc.find("bg/btn_minus",this.node).active}}),cc._RF.pop()},{"./base/pop_base":"pop_base"}],frm_join:[function(e,t,i){"use strict";cc._RF.push(t,"8c7d1RhVF1AAo5NTAoKev5l","frm_join");var n=e("./base/pop_base");cc.Class({extends:n.pop_base,properties:{defValue:"-"},onLoad:function(){this.labels=cc.find("bg/labels",this.node),this.count=this.labels.childrenCount},on_show:function(){for(var e=0;e<this.count;e++)this.labels.children[e].getComponent(cc.Label).string="-";this.inpNum=0},on_hide:function(){},onNumClick:function(e,t){cc.global.util.playSound_buttonClick(),this.inpNum<this.count&&(this.labels.children[this.inpNum++].getComponent(cc.Label).string=t),this.inpNum==this.count&&this.doJoinRoom()},onBtnClick:function(e,t){switch(t){case"del":cc.global.util.playSound_buttonClick(),this.inpNum>0&&(this.labels.children[--this.inpNum].getComponent(cc.Label).string=this.defValue);break;case"reset":cc.global.util.playSound_buttonClick();for(var i=0;i<this.count;i++)this.labels.children[i].getComponent(cc.Label).string=this.defValue,this.inpNum=0;break;case"ok":this.doJoinRoom()}},doJoinRoom:function(){if(!(this.inpNum<6)){cc.global.util.showAlert("\u6b63\u5728\u52a0\u8f7d",!0);for(var e="",t=0;t<this.count;t++)e+=this.labels.children[t].getComponent(cc.Label).string;cc.global.util.roomType=0,cc.global.net.send("joinRoom",{room_no:e,uuid:cc.global.util.userinfo.uuid,account:cc.global.util.userinfo.account,location:cc.global.util.LongitudeAndLatitude})}}}),cc._RF.pop()},{"./base/pop_base":"pop_base"}],frm_kefu:[function(e,t,i){"use strict";cc._RF.push(t,"3c8e2QRnP1PqIhmraAYeHeG","frm_kefu");var n=e("./base/pop_base");cc.Class({extends:n.pop_base,properties:{},onLoad:function(){},on_show:function(){this.getData()},on_hide:function(){},getData:function(){var e=this;cc.global.http.sendRequest("/zagame/zdlwase.json",{},function(t){t?cc.global.util.loadPrefab(cc.global.util.PREFAB_DATING_ITEM_URL+"kefu_item",function(i){if(i){var n=cc.find("bg/scroll/view/content",e.node),o=t.wetchaMsg;cc.global.util.initListNode(n,o,i,function(t,i){var n=cc.find("title",t),a=cc.find("label",t),c=cc.find("btn_fz",a),s=cc.find("btn_pd",a);n.getComponent(cc.Label).string=o[i].tite,a.getComponent(cc.Label).string=o[i].txt,"pd"==o[i].type?(s.active=!0,c.active=!1):(s.active=!1,c.active=!0),c.hasEventListener("click")||c.on("click",function(){cc.global.util.copy(a)},e),s.hasEventListener("click")||s.on("click",function(){cc.global.util.callTelphone(a)},e)})}else console.log("err: \u52a0\u8f7d\u9884\u5236\u8d44\u6e90\u5931\u8d25")}):cc.global.util.tipMsg_connectErr()})}}),cc._RF.pop()},{"./base/pop_base":"pop_base"}],frm_mall:[function(e,t,i){"use strict";cc._RF.push(t,"bf7c04qX1lE865nk0jz3BS4","frm_mall");var n=e("./base/pop_base"),o=e("../global/item_generator");function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function n(o,a){try{var c=t[o](a),s=c.value}catch(e){return void i(e)}if(!c.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}cc.Class({extends:n.pop_base,properties:{colCount:{default:4,type:cc.Integer,min:0,displayName:"\u6bcf\u884c\u5546\u54c1\u4e2a\u6570",tooltip:"\u586b\u5199\u6bcf\u884c\u5546\u54c1\u4e2a\u6570,\u7528\u4e8e\u8ba1\u7b97\u884c\u80cc\u666f\u7684\u5c55\u793a\u6570\u91cf"},defImg_1:{default:null,type:cc.SpriteFrame,displayName:"\u623f\u5361\u5546\u54c1",tooltip:"\u623f\u5361\u5546\u54c1\u9ed8\u8ba4\u56fe\u6807"},defImg_2:{default:null,type:cc.SpriteFrame,displayName:"\u91d1\u5e01\u5546\u54c1",tooltip:"\u91d1\u5e01\u5546\u54c1\u9ed8\u8ba4\u56fe\u6807"},defImg_3:{default:null,type:cc.SpriteFrame,displayName:"\u79ef\u5206\u5546\u54c1",tooltip:"\u79ef\u5206\u5546\u54c1\u9ed8\u8ba4\u56fe\u6807"},defImg_4:{default:null,type:cc.SpriteFrame,displayName:"\u5143\u5b9d\u5546\u54c1",tooltip:"\u5143\u5b9d\u5546\u54c1\u9ed8\u8ba4\u56fe\u6807"}},onLoad:function(){},on_show:function(){cc.global.util.playSound("Sounds/sound_hall_mall"),cc.find("bg/roomcard/lb",this.node).getComponent(cc.Label).string=cc.global.util.userinfo.roomcard,cc.find("bg/yuanbao/lb",this.node).getComponent(cc.Label).string=cc.global.util.userinfo.yuanbao,this.switchType()},on_hide:function(){},switchType:function(e){var t=this;e&&cc.global.util.playSound_buttonClick(),cc.global.util.showAlert("\u6b63\u5728\u52a0\u8f7d",!0);for(var i=cc.find("bg/scroll/view/content/rowList",this.node),n=0;n<i.childrenCount;n++)i.children[n].active=!1;for(var o=cc.find("bg/scroll/view/content/itemList",this.node),a=0;a<o.childrenCount;a++)o.children[a].active=!1;this.type=-1;for(var c=cc.find("bg/btns",this.node),s=0;s<c.childrenCount;s++)if(c.children[s].getComponent(cc.Toggle).isChecked){this.type=cc.global.util.getNodeIndex(c.children[s].name,"toggle");break}if(-1==this.type)return console.log("\u5546\u54c1\u83b7\u53d6\u5931\u8d25,type\u5f02\u5e38"),cc.global.util.tipMsg("\u53c2\u6570\u5f02\u5e38,\u8bf7\u91cd\u8bd5"),void cc.global.util.closeAlert();this.getData(function(e){if(e&&0!=e.length){var i=cc.find("bg/scroll/view/content/rowList",t.node),n=0;t.colCount>0&&(n=Math.ceil(e.length/t.colCount)),cc.global.util.initListNode(i,{length:n},i.children[0]);var o=cc.find("bg/scroll/view/content/itemList",t.node);cc.global.util.loadPrefab(cc.global.util.PREFAB_DATING_ITEM_URL+"mall_item",function(i){if(!i)return console.log("err: \u52a0\u8f7d\u9884\u5236\u8d44\u6e90\u5931\u8d25"),void cc.global.util.closeAlert();t.showList(o,e,i)})}else cc.global.util.closeAlert()})},getData:function(e){var t=this;this["cacheData_"+this.type]&&Date.now()-this["cacheTime_"+this.type]<15e3?e&&e(this["cacheData_"+this.type]):cc.global.http.sendRequest("/zagame/getzamall.html",{platform:cc.global.util.gameinfo.platform,id:cc.global.util.userinfo.id,type:this.type},function(i){if(!i)return cc.global.util.tipMsg_connectErr(),void(e&&e(null));t["cacheData_"+t.type]=i,t["cacheTime_"+t.type]=Date.now(),e&&e(i)})},showList:function(){var e=a(regeneratorRuntime.mark(function e(t,i,n){var a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.item_generator.getInstance().executePreFrame(o.item_generator.getInstance()._getItemGenerator(t,i,n,function(e,t){var n="";for(var o in cc.global.util.moneyTypeArr)if(cc.global.util.moneyTypeArr[o].value==a.type){n=cc.global.util.moneyTypeArr[o].name;break}cc.find("denomination",e).getComponent(cc.Label).string=i[t].denomination+n,cc.find("payMoney",e).getComponent(cc.Label).string=i[t].payMoney+"\u5143";var c=cc.find("logo",e);c.m_url&&c.m_url==i[t].logo||(c.getComponent(cc.Sprite).spriteFrame=a["defImg_"+a.type]),cc.global.util.setHeadimg(cc.find("logo",e),i[t].logo,!0,function(){c.m_url=i[t].logo}),e.m_id=i[t].id,e.hasEventListener("click")||e.on("click",function(){cc.global.util.tipMsg("\u7cfb\u7edf\u5347\u7ea7\u4e2d\uff0c\u5145\u503c\u8bf7\u8054\u7cfb\u5b98\u65b9\u5ba2\u670d")},a)}),8,this);case 2:cc.find("bg/scroll",this.node).getComponent(cc.ScrollView).scrollToTop(.1),cc.global.util.closeAlert();case 4:case"end":return e.stop()}},e,this)}));return function(t,i,n){return e.apply(this,arguments)}}()}),cc._RF.pop()},{"../global/item_generator":"item_generator","./base/pop_base":"pop_base"}],frm_notice:[function(e,t,i){"use strict";cc._RF.push(t,"5c477RD0h1FrL33xm5LJo6h","frm_notice");var n=e("./base/pop_base");cc.Class({extends:n.pop_base,properties:{},onLoad:function(){this.content=cc.find("bg/scroll/view/content",this.node)},on_show:function(){if(!this.ops||!this.ops.customData||!this.ops.customData.msg)return console.log("\u5f39\u51fa\u516c\u544a\u5f39\u7a97\u521d\u59cb\u5316\u5f02\u5e38,\u65e0\u6cd5\u83b7\u53d6\u516c\u544a\u5185\u5bb9"),void cc.global.util.tipMsg("\u622a\u5c4f\u4e8c\u7ef4\u7801\uff0c\u5206\u4eab\u7ed9\u5fae\u4fe1\u597d\u53cb");cc.find("label",this.content).getComponent(cc.Label).string=this.ops.customData.msg},on_hide:function(){}}),cc._RF.pop()},{"./base/pop_base":"pop_base"}],frm_pay:[function(e,t,i){"use strict";cc._RF.push(t,"76b8cyEVfNJhZWkxf+YJ0fb","frm_pay");var n=e("./base/pop_base");cc.Class({extends:n.pop_base,properties:{},onLoad:function(){},on_show:function(){},on_hide:function(){},mall_goPay:function(e,t){cc.global.util.playSound_buttonClick(),cc.global.util.showAlert(),console.log("[\u786e\u5b9a\u8d2d\u4e70] id:"+this.ops.customData.id);var i=cc.global.http.url+"/zagame/gmzamall.json?zaid="+this.ops.customData.id+"&id="+cc.global.util.userinfo.id+"&paytype="+t+"&platform="+cc.global.util.gameinfo.platform;cc.sys.openURL(i),cc.global.util.closeAlert()}}),cc._RF.pop()},{"./base/pop_base":"pop_base"}],frm_personal:[function(e,t,i){"use strict";cc._RF.push(t,"dac48CXFSxGM46B16XrTR0n","frm_personal");var n=e("./base/pop_base"),o=e("../global/NotificationNames");cc.Class({extends:n.pop_base,properties:{},onLoad:function(){},registerObserver:function(){Notification.on(o.NotificationNames.CHECK_BIND_STATUS_PUSH,this.checkBindStatusPush,this)},removeObserver:function(){Notification.off(o.NotificationNames.CHECK_BIND_STATUS_PUSH,this.checkBindStatusPush,this)},on_show:function(){this.registerObserver(),cc.find("bg/name",this.node).getComponent(cc.Label).string=cc.global.util.userinfo.name,cc.find("bg/id/lb",this.node).getComponent(cc.Label).string=cc.global.util.userinfo.account,cc.find("bg/ip/lb",this.node).getComponent(cc.Label).string=cc.global.util.userinfo.ip,cc.find("bg/roomcard/lb",this.node).getComponent(cc.Label).string=cc.global.util.userinfo.roomcard,cc.find("bg/yuanbao/lb",this.node).getComponent(cc.Label).string=cc.global.util.userinfo.yuanbao,cc.find("bg/sex/man",this.node).active="\u5973"!=cc.global.util.userinfo.sex,cc.find("bg/sex/woman",this.node).active="\u5973"==cc.global.util.userinfo.sex,cc.global.util.setHeadimg(cc.find("bg/head/sp",this.node),cc.global.util.userinfo.headimg,!0),"1"==cc.global.util.userinfo.isAuthentication?cc.find("bg/btn_auth",this.node).getComponent(cc.Button).interactable=!1:cc.find("bg/btn_auth",this.node).getComponent(cc.Button).interactable=!0,this.checkBindStatus()},on_hide:function(){this.removeObserver()},checkBindStatus:function(){cc.global.net.send("checkBindStatus",{account:cc.global.util.userinfo.account})},checkBindStatusPush:function(e){0==e.code?cc.find("bg/btn_bindTel",this.node).getComponent(cc.Button).interactable=!0:(cc.find("bg/btn_bindTel",this.node).getComponent(cc.Button).interactable=!1,cc.global.pop_mgr.closeFrm({name:"frm_bindTel"}))},onCopyClick:function(e){cc.global.util.copy(e.target.parent)}}),cc._RF.pop()},{"../global/NotificationNames":"NotificationNames","./base/pop_base":"pop_base"}],frm_shezhi:[function(e,t,i){"use strict";cc._RF.push(t,"76df7GbjaROqqn8hmfOoC/+","frm_shezhi");var n=e("./base/pop_base");cc.Class({extends:n.pop_base,properties:{sfIcons:{default:[],type:cc.SpriteFrame}},onLoad:function(){this.musicProgressWidth=cc.find("bg/music/slider/progress",this.node).width,this.soundProgressWidth=cc.find("bg/sound/slider/progress",this.node).width},on_show:function(){cc.find("Canvas/music")&&(this.bgm=cc.find("Canvas/music").getComponent(cc.AudioSource)),cc.find("bg/music/slider",this.node).getComponent(cc.Slider).progress=cc.global.util.setting.music,cc.find("bg/music/slider/progress",this.node).width=cc.global.util.setting.music*this.musicProgressWidth,cc.find("bg/music/switch/Background",this.node).getComponent(cc.Sprite).spriteFrame=this.sfIcons[cc.global.util.setting.musicOn],cc.find("bg/sound/slider",this.node).getComponent(cc.Slider).progress=cc.global.util.setting.sound,cc.find("bg/sound/slider/progress",this.node).width=cc.global.util.setting.sound*this.soundProgressWidth,cc.find("bg/sound/switch/Background",this.node).getComponent(cc.Sprite).spriteFrame=this.sfIcons[cc.global.util.setting.soundOn],cc.find("bg/version",this.node).getComponent(cc.Label).string="\u7248\u672c\u53f7\uff1a"+cc.global.util.gameinfo.version},on_hide:function(){this.saveSetting()},changeMusicVolume:function(e){cc.global.util.setting.music=e.progress,e.node.getChildByName("progress").width=e.progress*this.musicProgressWidth,this.bgm&&(this.bgm.volume=cc.global.util.setting.music)},changeSoundVolume:function(e){cc.global.util.setting.sound=e.progress,e.node.getChildByName("progress").width=e.progress*this.soundProgressWidth},switchMusic:function(){1==cc.global.util.setting.musicOn?cc.global.util.setting.musicOn=0:cc.global.util.setting.musicOn=1,cc.find("bg/music/switch/Background",this.node).getComponent(cc.Sprite).spriteFrame=this.sfIcons[cc.global.util.setting.musicOn],this.bgm.mute=0==cc.global.util.setting.musicOn},switchSound:function(){1==cc.global.util.setting.soundOn?cc.global.util.setting.soundOn=0:cc.global.util.setting.soundOn=1,cc.find("bg/sound/switch/Background",this.node).getComponent(cc.Sprite).spriteFrame=this.sfIcons[cc.global.util.setting.soundOn]},saveSetting:function(){console.log("\u5f53\u524d\u97f3\u91cf\u8bbe\u7f6e\u4e3a:"+JSON.stringify(cc.global.util.setting)),cc.sys.localStorage.setItem("volumeSetting",JSON.stringify(cc.global.util.setting))},changeScreenIndent:function(e){cc.global.util.changeScreenIndent(e.progress),cc.global.util.setting.screenIndent=e.progress,e.node.getChildByName("progress").width=e.progress*this.screenIndentProgressWidth},exitLogin:function(){cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","cancelAuthorize","()V"):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("JsUseOcTool","cancelAuthorize"),cc.director.loadScene("login")}}),cc._RF.pop()},{"./base/pop_base":"pop_base"}],frm_sssReplay:[function(e,t,i){"use strict";cc._RF.push(t,"745a9FJZTpJYLaRhbDHx4Tw","frm_sssReplay");var n=e("./base/pop_base");cc.Class({extends:n.pop_base,properties:{card_small_atlas:{default:null,type:cc.SpriteAtlas},card_mp_small_atlas:{default:null,type:cc.SpriteAtlas}},onLoad:function(){this.eventList={}},registerObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.on(e,this.eventList[e],this)},removeObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.off(e,this.eventList[e],this)},on_show:function(){if(this.ops&&this.ops.customData){this.registerObserver(),this.initView(),this.node.getChildByName("mapai").active=!1,this.node.getChildByName("headLeft").getChildByName("roominfo").getChildByName("info").active=!1,this.node.getChildByName("headLeft").getChildByName("roominfo").getChildByName("info2").active=!1,this.node.getChildByName("headLeft").getChildByName("roominfo").getChildByName("num").getComponent(cc.Label).string="\u623f\u53f7\uff1a"+cc.global.util.room_no,this.node.getChildByName("headLeft").getChildByName("roominfo").getChildByName("jushu").getComponent(cc.Label).string="\u7b2c"+this.ops.customData.data.game_index+"\u5c40",this.ops.customData.createTime?(this.node.getChildByName("headLeft").getChildByName("roominfo").getChildByName("time").getComponent(cc.Label).string="\u6e38\u620f\u65f6\u95f4\uff1a"+this.ops.customData.createTime,this.node.getChildByName("headLeft").getChildByName("roominfo").getChildByName("time").active=!0):this.node.getChildByName("headLeft").getChildByName("roominfo").getChildByName("time").active=!1;var e=this.ops.customData.data.result,t=-1,i=this.ops.customData.data.maPai;if(i){var n=i.split("-");t=parseInt(20*(n[0]-1))+parseInt(n[1])}for(var o=0;o<e.length;o++){var a=this.node.getChildByName("game").getChildByName("player"+e[o].myIndex);a.getChildByName("touxiang").getChildByName("name").getComponent(cc.Label).string=e[o].name,a.getChildByName("touxiang").getChildByName("score").getComponent(cc.Label).string=e[o].score,""!=e[o].headimg&&function(t){console.log("\u5f53\u524d\u7528\u6237\u4fe1\u606f"+e[o].name+"\uff0c\u7528\u6237\u5934\u50cf\uff1a"+cc.global.http.url+"/zagame"+e[o].headimg),cc.loader.load(cc.global.http.url+"/zagame"+e[o].headimg,function(e,i){var n=new cc.SpriteFrame(i,cc.Rect(0,0,i.width,i.height));t.getChildByName("touxiang").getChildByName("sss_img_touxiang").getComponent(cc.Sprite).spriteFrame=n})}(a),a.getChildByName("pai").active=!0;for(var c=new Array,s=new Array,l=new Array,r=0;r<e[o].myPai.length;r++)r<3?c.push(e[o].myPai[r]):r<8?s.push(e[o].myPai[r]):l.push(e[o].myPai[r]);this.sortCardDesc(c),this.sortCardDesc(s),this.sortCardDesc(l);for(var g=a.getChildByName("pai").getChildByName("up").getComponentsInChildren(cc.Sprite),h=0;h<g.length;h++)this.ops.customData.data.maPaiIndex==e[o].myIndex&&-1!=t&&t==c[h]?this.setSpriteFrameByNum(c[h],g[h],this.card_mp_small_atlas,!0):this.setSpriteFrameByNum(c[h],g[h],this.card_small_atlas,!0);var d=a.getChildByName("pai").getChildByName("cen").getComponentsInChildren(cc.Sprite);for(h=0;h<d.length;h++)this.ops.customData.data.maPaiIndex==e[o].myIndex&&-1!=t&&t==s[h]?this.setSpriteFrameByNum(s[h],d[h],this.card_mp_small_atlas,!0):this.setSpriteFrameByNum(s[h],d[h],this.card_small_atlas,!0);var u=a.getChildByName("pai").getChildByName("down").getComponentsInChildren(cc.Sprite);for(h=0;h<u.length;h++)this.ops.customData.data.maPaiIndex==e[o].myIndex&&-1!=t&&t==l[h]?this.setSpriteFrameByNum(l[h],u[h],this.card_mp_small_atlas,!0):this.setSpriteFrameByNum(l[h],u[h],this.card_small_atlas,!0);a.active=!0}cc.global.util.closeAlert()}else console.log("\u6253\u5f00\u6218\u7ee9\u56de\u653e\u53c2\u6570\u9519\u8bef")},initView:function(){for(var e=this.node.getChildByName("game").children,t=0;t<e.length;t++)if(-1!=e[t].name.indexOf("player")){e[t].getChildByName("pai").active=!1,e[t].getChildByName("zongfen").active=!1,e[t].getChildByName("ready_ok").active=!1,e[t].getChildByName("done_ok").active=!1,e[t].getChildByName("bijiao").active=!1,e[t].getChildByName("touxiang").getChildByName("zhuang").active=!1,e[t].getChildByName("t_teshupaixing").active=!1,e[t].getChildByName("xiazhu").active=!1;for(var i=e[t].getChildByName("pai").children,n=0;n<i.length;n++){console.log("\u6e05\u7a7a\u624b\u724c");for(var o=i[n].getComponentsInChildren(cc.Sprite),a=0;a<o.length;a++)this.setSpriteFrameByNum(0,o[a],this.card_small_atlas,!0)}e[t].getChildByName("bifen").active=!1,e[t].getChildByName("bifen").children[0].active=e[t].getChildByName("bifen").children[1].active=e[t].getChildByName("bifen").children[2].active=!1,e[t].getChildByName("t_teshupaixing").active=!1,e[t].getChildByName("sss_img_lipaiz").active=!1,e[t].active=!1}},on_hide:function(){this.removeObserver()},setSpriteFrameByNum:function(e,t,i,n){if(t.spriteFrame=this.getSpriteFrameByNum(e,i),t.node.mTag=parseInt(e),n)return!1;for(var o=t.node.parent,a="",c=0;;){if(e=e.toString()+a,!o.getChildByName(e)){t.node.name=e,console.log("set num is "+e);break}a="_"+c,c++}},getSpriteFrameByNum:function(e,t){return t.getSpriteFrame("card_"+e)},getValue:function(e){if(e>=80)return 0;var t=e%20;return 1==t?14:t},sortCardDesc:function(e){var t=this;e.sort(function(e,i){return t.getValue(i)-t.getValue(e)})}}),cc._RF.pop()},{"./base/pop_base":"pop_base"}],frm_teaDaoru:[function(e,t,i){"use strict";cc._RF.push(t,"c95c4vGhm9BNosytuCMxo4k","frm_teaDaoru");var n=e("./base/pop_base"),o=e("../global/NotificationNames"),a=e("../global/item_generator");function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function n(o,a){try{var c=t[o](a),s=c.value}catch(e){return void i(e)}if(!c.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}cc.Class({extends:n.pop_base,properties:{content:{type:cc.Node,default:null,tooltip:"\u5f39\u7a97\u5185\u5bb9\u5bb9\u5668"},list:{type:cc.Node,default:null,tooltip:"\u5217\u8868\u5bb9\u5668"},item_prefab:{type:cc.Prefab,default:null,tooltip:"\u5217\u8868prefab"}},onLoad:function(){this.eventList={},this.eventList[o.NotificationNames.TEA_IMPORTMEMBERLISTEVENT_PUSH]=this.getDataResp,this.eventList[o.NotificationNames.TEA_IMPORTMEMBEREVENT_PUSH]=this.teaImportMemberEventPush},registerObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.on(e,this.eventList[e],this)},removeObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.off(e,this.eventList[e],this)},on_show:function(){this.registerObserver(),this.getData()},on_hide:function(){this.removeObserver()},getData:function(){cc.global.net.send("tea_importMemberListEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,teaInfoCode:cc.global.util.teaUserinfo.teaInfoCode})},getDataResp:function(e){if(1!=e.code)return cc.global.util.tipMsg(e.msg),cc.global.util.closeAlert(),void(this.selectAccount=null);var t=e.data||[];this.showList(this.list,t,this.item_prefab)},showList:function(){var e=c(regeneratorRuntime.mark(function e(t,i,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.item_generator.getInstance().executePreFrame(a.item_generator.getInstance()._getItemGenerator(t,i,n,function(e,t){e.m_teaInfoCode=i[t].teaInfoCode,cc.find("player",e).getChildByName("id").getComponent(cc.Label).string=i[t].teaInfoCode,cc.find("player",e).getChildByName("name").getComponent(cc.Label).string=i[t].teaName,cc.find("player",e).getChildByName("num").getComponent(cc.Label).string=i[t].number,cc.find("player",e).getChildByName("Toggle").getComponent(cc.Toggle).isChecked=!1}),4,this);case 2:cc.global.util.closeAlert();case 3:case"end":return e.stop()}},e,this)}));return function(t,i,n){return e.apply(this,arguments)}}(),onImportClick:function(){cc.global.util.playSound_buttonClick();for(var e=[],t=cc.find("bg/ScrollView/view/content",this.node),i=0;i<t.childrenCount;i++){t.children[i].getChildByName("player").getChildByName("Toggle").getComponent(cc.Toggle).isChecked&&e.push(t.children[i].m_teaInfoCode)}0!=e.length?(cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u8bf7\u6c42",!0),cc.global.net.send("tea_importMemberEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,teaInfoCode:cc.global.util.teaUserinfo.teaInfoCode,teaInfoCodeIds:e.join(",")})):cc.global.util.tipMsg("\u8bf7\u9009\u62e9\u8336\u697c\u540e\u8fdb\u884c\u5bfc\u5165")},teaImportMemberEventPush:function(e){cc.global.util.closeAlert(),cc.global.util.tipMsg(e.msg),1==e.code&&(cc.global.util.playSound("Sounds/sound_hall_close"),this.onCloseClick())}}),cc._RF.pop()},{"../global/NotificationNames":"NotificationNames","../global/item_generator":"item_generator","./base/pop_base":"pop_base"}],frm_teaJar:[function(e,t,i){"use strict";cc._RF.push(t,"5c3c6Zb2Q5OH7909A3nNlZV","frm_teaJar");var n=e("./base/pop_base"),o=e("../global/NotificationNames");cc.Class({extends:n.pop_base,properties:{teaNumLb:{type:cc.Label,default:null,tooltip:"\u5f53\u524d\u8336\u7f50\u8336\u53f6\u6570"}},onLoad:function(){this.eventList={},this.eventList[o.NotificationNames.TEA_MODIFYPROXYMONEYEVENT_PUSH]=this.teaModifyProxyMoneyEventPush},registerObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.on(e,this.eventList[e],this)},removeObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.off(e,this.eventList[e],this)},on_show:function(){this.registerObserver(),this.initView()},on_hide:function(){this.removeObserver()},showFrm:function(e,t){var i=null;switch(t){case"frm_circleFundRec":i={type:"tea"}}console.log("\u6253\u5f00\u5f39\u7a97:"+t),cc.global.pop_mgr.showFrm({name:t,customData:i})},initView:function(){this.teaNumLb.string=cc.global.util.teaUserinfo.proxyMoney},showInput_fundPay:function(e,t){this.changeType=t,console.log("\u6253\u5f00\u5f39\u7a97:frm_input");var i={type:"num",maxLength:8,defNum:"",placeholder:"\u8bf7\u8f93\u5165\u8336\u53f6\u6570",inputOver:this.inputOver_fundPay,label:null,target:this,showHead:!1,isAutoOver:!1,isShowOk:!0,closeWhenInputOver:!0};i.title="1"==this.changeType?"teaAdd":"teaMinus",cc.global.pop_mgr.showFrm({name:"frm_input",customData:i})},inputOver_fundPay:function(e,t,i){parseInt(t)>0?(cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u4fee\u6539"),cc.global.net.send("tea_modifyProxyMoneyEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,teaInfoCode:cc.global.util.teaUserinfo.teaInfoCode,type:i.changeType,modifyMoney:t})):cc.global.util.tipMsg("\u8bf7\u8f93\u5165\u5927\u4e8e0\u7684\u6570\u503c")},teaModifyProxyMoneyEventPush:function(e){cc.global.util.tipMsg(e.msg),cc.global.util.closeAlert(),1==e.code&&(this.teaNumLb.string=e.newMoney,cc.global.net.send("getUserInfo",{account:cc.global.util.userinfo.account}))}}),cc._RF.pop()},{"../global/NotificationNames":"NotificationNames","./base/pop_base":"pop_base"}],frm_teaMember:[function(e,t,i){"use strict";cc._RF.push(t,"f3c95RDBBBEfZSichzRaCrE","frm_teaMember");var n=e("./base/pop_base"),o=e("../global/NotificationNames"),a=e("../global/item_generator");function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function n(o,a){try{var c=t[o](a),s=c.value}catch(e){return void i(e)}if(!c.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}cc.Class({extends:n.pop_base,properties:{content:{type:cc.Node,default:null,tooltip:"\u5f39\u7a97\u5185\u5bb9\u5bb9\u5668"},list:{type:cc.Node,default:null,tooltip:"\u5217\u8868\u5bb9\u5668"},item_prefab:{type:cc.Prefab,default:null,tooltip:"\u5217\u8868prefab"},out_msg_list:{type:cc.Node,default:null,tooltip:"\u5217\u8868\u5bb9\u5668"},out_msg_item_prefab:{type:cc.Prefab,default:null,tooltip:"\u5217\u8868prefab"},pageSize:{type:cc.Integer,default:6,min:1,tooltip:"\u6bcf\u9875\u663e\u793a\u6761\u6570"},lastPageBtn:{type:cc.Button,default:null,tooltip:"\u4e0a\u4e00\u9875\u6309\u94ae"},nextPageBtn:{type:cc.Button,default:null,tooltip:"\u4e0b\u4e00\u9875\u6309\u94ae"},pageText:{type:cc.Label,default:null,tooltip:"\u9875\u7801label"}},onLoad:function(){this.eventList={},this.eventList[o.NotificationNames.TEA_MEMBERLISTEVENT_PUSH]=this.getDataResp,this.eventList[o.NotificationNames.TEA_AUDITMEMBERLISTEVENT_PUSH]=this.getDataResp,this.eventList[o.NotificationNames.TEA_ADMINLISTEVENT_PUSH]=this.getDataResp,this.eventList[o.NotificationNames.TEA_EXITINFOLISTEVENT_PUSH]=this.getDataResp,this.eventList[o.NotificationNames.TEA_AUDITMEMBEREVENT_PUSH]=this.teaAuditMemberEventPush,this.eventList[o.NotificationNames.TEA_ADDMEMBEREVENT_PUSH]=this.teaAddMemberEventPush,this.eventList[o.NotificationNames.TEA_DELMEMBEREVENT_PUSH]=this.teaDelMemberEventPush,this.eventList[o.NotificationNames.TEA_EXITMEMBEREVENT_PUSH]=this.teaExitMemberEventPush,this.eventList[o.NotificationNames.TEA_MODIFYADMINEVENT_PUSH]=this.teaModifyAdminEventPush,this.eventList[o.NotificationNames.TEA_MODIFYTEAMONEYEVENT_PUSH]=this.teaModifyTeaMoneyEventPush,this.eventList[o.NotificationNames.TEA_MEMBERMSGREADEVENT_PUSH]=this.teaMemberMsgReadEventPush},registerObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.on(e,this.eventList[e],this)},removeObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.off(e,this.eventList[e],this)},on_show:function(){this.registerObserver(),this.pageIndex=0,this.pageCount=0,this.updatePage(),this.selectAccount="",this.getData(),cc.find("bg/audit_tip",this.node).active=!1,cc.find("bg/out_audit_tip",this.node).active=!1,cc.find("bg/content_member/btn_findMember",this.node).active=!0,cc.find("bg/content_member/btn_exitTea",this.node).active=!0,cc.find("bg/content_member/btn_addAdmin",this.node).active=!1,cc.find("bg/content_member/btn_addMember",this.node).active=!0,cc.find("bg/content_tab/toggle1",this.node).active=!0,cc.find("bg/content_tab/toggle2",this.node).active=!0,cc.find("bg/content_tab/toggle3",this.node).active=!0,cc.find("bg/content_tab/toggle4",this.node).active=!0,cc.find("bg/content_tab/toggle1",this.node).getComponent(cc.Toggle).isChecked=!0,cc.find("bg/content_tab/toggle2",this.node).getComponent(cc.Toggle).isChecked=!1,cc.find("bg/content_tab/toggle3",this.node).getComponent(cc.Toggle).isChecked=!1,cc.find("bg/content_tab/toggle4",this.node).getComponent(cc.Toggle).isChecked=!1,0==cc.global.util.teaUserinfo.memberPowern?cc.find("bg/content_member/btn_exitTea",this.node).active=!1:1==cc.global.util.teaUserinfo.memberPowern?cc.find("bg/content_tab/toggle4",this.node).active=!1:(cc.find("bg/content_member/btn_addMember",this.node).active=!1,cc.find("bg/content_member/btn_findMember",this.node).active=!1,cc.find("bg/content_tab/toggle2",this.node).active=!1,cc.find("bg/content_tab/toggle3",this.node).active=!1,cc.find("bg/content_tab/toggle4",this.node).active=!1)},on_hide:function(){this.removeObserver()},getData:function(){this.tabId=-1;for(var e=cc.find("bg/content_tab",this.node),t=0;t<e.childrenCount;t++)if(e.children[t].getComponent(cc.Toggle).isChecked){this.tabId=cc.global.util.getNodeIndex(e.children[t].name,"toggle");break}var i={uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,teaInfoCode:cc.global.util.teaUserinfo.teaInfoCode};switch(this.tabId){case"1":i.pageIndex=this.pageIndex||1,i.pageSize=this.pageSize,this.selectAccount&&(i.usersAccountOrName=this.selectAccount),cc.global.net.send("tea_memberListEvent",i);break;case"2":cc.global.net.send("tea_auditMemberListEvent",i);break;case"3":cc.global.net.send("tea_exitInfoListEvent",i);break;case"4":cc.global.net.send("tea_adminListEvent",i)}},getDataResp:function(e){if(1!=e.code)return cc.global.util.tipMsg(e.msg),cc.global.util.closeAlert(),void(this.selectAccount=null);if("1"==this.tabId){if(this.pageIndex>0&&e.pageIndex!=this.pageIndex)return console.log("\u8fd4\u56de\u6570\u636e\u9875\u7801\u9519\u8bef,\u5f53\u524d\u9875\u7801\u4e3a:"+this.pageIndex),void cc.global.util.closeAlert();if(this.pageIndex=e.pageIndex,this.pageCount=e.totalPage,this.totalCount=e.totalCount,this.updatePage(),this.pageIndex>this.pageCount&&this.pageCount>0)return this.pageIndex=this.pageCount,void this.getData();cc.find("bg/page",this.node).active=!0,cc.find("bg/audit_tip",this.node).active=e.auditMemberCount&&e.auditMemberCount>0,cc.find("bg/out_audit_tip",this.node).active=e.quitMemberMsgCount&&e.quitMemberMsgCount>0,cc.find("bg/content_member/btn_findMember",this.node).active=0==cc.global.util.teaUserinfo.memberPowern||1==cc.global.util.teaUserinfo.memberPowern,cc.find("bg/content_member/btn_exitTea",this.node).active=0!=cc.global.util.teaUserinfo.memberPowern,cc.find("bg/content_member/btn_addMember",this.node).active=0==cc.global.util.teaUserinfo.memberPowern||1==cc.global.util.teaUserinfo.memberPowern,cc.find("bg/content_member/btn_addAdmin",this.node).active=!1}else cc.find("bg/page",this.node).active=!1,cc.find("bg/content_member/btn_findMember",this.node).active=!1,cc.find("bg/content_member/btn_exitTea",this.node).active=!1,cc.find("bg/content_member/btn_addMember",this.node).active=!1,cc.find("bg/content_member/btn_addAdmin",this.node).active="4"==this.tabId&&0==cc.global.util.teaUserinfo.memberPowern;var t=e.data||[];if(t.length>0?cc.find("bg/tip",this.node).active=!1:(cc.find("bg/tip",this.node).getComponent(cc.Label).string="\xb7 \u6682\u65e0\u6570\u636e \xb7",cc.find("bg/tip",this.node).active=!0,"2"==this.tabId&&(cc.find("bg/audit_tip",this.node).active=!1)),"3"==this.tabId){this.out_msg_list.parent.parent.active=!0,this.list.parent.parent.active=!1,this.showOutMsgList(this.out_msg_list,t,this.out_msg_item_prefab),cc.find("bg/out_audit_tip",this.node).active=!1;for(var i=0;i<t.length;i++)if(0==t[i].isRead){cc.find("bg/out_audit_tip",this.node).active=!0;break}}else this.out_msg_list.parent.parent.active=!1,this.list.parent.parent.active=!0,this.showList(this.list,t,this.item_prefab)},showList:function(){var e=c(regeneratorRuntime.mark(function e(t,i,n){var o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.item_generator.getInstance().executePreFrame(a.item_generator.getInstance()._getItemGenerator(t,i,n,function(e,t){e.m_teaMemberAccount=i[t].memberAccount,e.m_memberId=i[t].memberId,e.m_teaMemberName=i[t].memberName,cc.find("player",e).getChildByName("name").getComponent(cc.Label).string=i[t].memberName,cc.find("player",e).getChildByName("id").getComponent(cc.Label).string=i[t].memberAccount;var n=cc.find("player",e).getChildByName("avatar").getChildByName("mask").getChildByName("pic"),a=i[t].memberHeadimg;n.m_headimg&&n.m_headimg==a||(n.getComponent(cc.Sprite).spriteFrame=null,cc.global.util.setHeadimg(n,a,!1,function(){n.m_headimg=a})),cc.find("player",e).getChildByName("online").active=i[t].isOnline,cc.find("player",e).getChildByName("offline").active=!i[t].isOnline,cc.find("player",e).getChildByName("btn_content").getChildByName("btn_delete").active=!1,cc.find("player",e).getChildByName("btn_content").getChildByName("btn_zhanji").active=!1,cc.find("player",e).getChildByName("btn_content").getChildByName("btn_ziliao").active=!1,cc.find("player",e).getChildByName("btn_content").getChildByName("btn_tongyi").active=!1,cc.find("player",e).getChildByName("btn_content").getChildByName("btn_jujue").active=!1,cc.find("player",e).getChildByName("tea").active=!1,"1"==o.tabId&&(0==cc.global.util.teaUserinfo.memberPowern||1==cc.global.util.teaUserinfo.memberPowern?(cc.find("player",e).getChildByName("btn_content").getChildByName("btn_ziliao").active=!0,cc.find("player",e).getChildByName("btn_content").getChildByName("btn_zhanji").active=!0,cc.find("player",e).getChildByName("btn_content").getChildByName("btn_ziliao").on("click",o.onBtnModifyTeaMoneyClick,o),cc.find("player",e).getChildByName("btn_content").getChildByName("btn_zhanji").on("click",o.onBtnZhanjiClick,o),cc.find("player",e).getChildByName("tea").active=!0,cc.find("player",e).getChildByName("tea").getChildByName("tea").getComponent(cc.Label).string=i[t].memberTeaMoney?i[t].memberTeaMoney:0,0!=i[t].memberPowern&&1!=i[t].memberPowern?(cc.find("player",e).getChildByName("btn_content").getChildByName("btn_delete").active=!0,cc.find("player",e).getChildByName("btn_content").getChildByName("btn_delete").on("click",o.onBtnRemoveMember,o)):0==cc.global.util.teaUserinfo.memberPowern&&0!=i[t].memberPowern&&(cc.find("player",e).getChildByName("btn_content").getChildByName("btn_delete").active=!0,cc.find("player",e).getChildByName("btn_content").getChildByName("btn_delete").on("click",o.onBtnRemoveMember,o))):i[t].memberAccount==cc.global.util.userinfo.account&&(cc.find("player",e).getChildByName("tea").active=!0,cc.find("player",e).getChildByName("tea").getChildByName("tea").getComponent(cc.Label).string=i[t].memberTeaMoney?i[t].memberTeaMoney:0)),"2"==o.tabId&&(cc.find("player",e).getChildByName("btn_content").getChildByName("btn_tongyi").active=!0,cc.find("player",e).getChildByName("btn_content").getChildByName("btn_jujue").active=!0,cc.find("player",e).getChildByName("online").active=!1,cc.find("player",e).getChildByName("offline").active=!1,cc.find("player",e).getChildByName("btn_content").getChildByName("btn_tongyi").on("click",o.onBtnClick_yes,o),cc.find("player",e).getChildByName("btn_content").getChildByName("btn_jujue").on("click",o.onBtnClick_no,o)),"4"==o.tabId&&(cc.find("player",e).getChildByName("btn_content").getChildByName("btn_delete").active=!0,cc.find("player",e).getChildByName("btn_content").getChildByName("btn_delete").on("click",o.onBtnRemoveAdmin,o))}),4,this);case 2:cc.global.util.closeAlert();case 3:case"end":return e.stop()}},e,this)}));return function(t,i,n){return e.apply(this,arguments)}}(),showOutMsgList:function(){var e=c(regeneratorRuntime.mark(function e(t,i,n){var o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.item_generator.getInstance().executePreFrame(a.item_generator.getInstance()._getItemGenerator(t,i,n,function(e,t){e.m_memberMsgId=i[t].memberMsgId,cc.find("player",e).getChildByName("name").getComponent(cc.Label).string=i[t].memberName,cc.find("player",e).getChildByName("id").getComponent(cc.Label).string=i[t].memberAccount;var n=cc.find("player",e).getChildByName("avatar").getChildByName("mask").getChildByName("pic"),a=i[t].memberHeadimg;n.m_headimg&&n.m_headimg==a||(n.getComponent(cc.Sprite).spriteFrame=null,cc.global.util.setHeadimg(n,a,!1,function(){n.m_headimg=a})),cc.find("player",e).getChildByName("name_tea").getChildByName("name").getComponent(cc.Label).string=i[t].teaName,cc.find("player",e).getChildByName("id_tea").getChildByName("id").getComponent(cc.Label).string=i[t].teaInfoCode,0==i[t].isRead?(cc.find("player",e).getChildByName("btn_delete").on("click",o.onReadOutMsgClick,o),cc.find("player",e).getChildByName("btn_delete").active=!0):cc.find("player",e).getChildByName("btn_delete").active=!1}),4,this);case 2:cc.global.util.closeAlert();case 3:case"end":return e.stop()}},e,this)}));return function(t,i,n){return e.apply(this,arguments)}}(),onReadOutMsgClick:function(e){var t=e.target.parent.parent.m_memberMsgId;this.sendTeaMemberMsgReadEvent(0,t)},sendTeaMemberMsgReadEvent:function(e,t){cc.global.net.send("tea_memberMsgReadEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,teaInfoId:cc.global.util.teaUserinfo.id,type:e,memberMsgId:t})},teaMemberMsgReadEventPush:function(e){1==e.code&&this.switchTab()},onBtnModifyTeaMoneyClick:function(e){cc.global.util.playSound_buttonClick(),this.modifyMemberId=e.target.parent.parent.parent.m_memberId,cc.global.pop_mgr.showFrm({name:"frm_input",customData:{type:"num",maxLength:8,defNum:"",placeholder:"\u8bf7\u8f93\u5165\u8336\u53f6\u6570",inputOver:this.inputOver_ModifyTeaMoney,label:null,target:this,title:"tea_sc",showHead:!1,isAutoOver:!1,isShowOk:!0,closeWhenInputOver:!0}})},onBtnZhanjiClick:function(e){var t=e.target.parent.parent.parent.m_teaMemberAccount;cc.global.pop_mgr.showFrm({name:"frm_teaPersonZhanji",customData:{selectAccount:t}})},inputOver_ModifyTeaMoney:function(e,t,i){parseInt(t)>0?(cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u4fee\u6539"),cc.global.net.send("tea_modifyTeaMoneyEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,teaInfoCode:cc.global.util.teaUserinfo.teaInfoCode,type:0,modifyMoney:t,memberId:i.modifyMemberId})):cc.global.util.tipMsg("\u8bf7\u8f93\u5165\u5927\u4e8e0\u7684\u6570\u503c")},teaModifyTeaMoneyEventPush:function(e){cc.global.util.closeAlert(),cc.global.util.tipMsg(e.msg),this.getData()},onBtnClick_yes:function(e){cc.global.util.playSound_buttonClick();var t=e.target.parent.parent.parent;this.sendTeaAuditMemberEvent(t,"1")},onBtnClick_no:function(e){cc.global.util.playSound_buttonClick();var t=e.target.parent.parent.parent;this.sendTeaAuditMemberEvent(t,"2")},sendTeaAuditMemberEvent:function(e,t){var i={uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,teaInfoCode:cc.global.util.teaUserinfo.teaInfoCode,audit:t,memberId:e.m_memberId};cc.global.net.send("tea_auditMemberEvent",i)},teaAuditMemberEventPush:function(e){1==e.code&&this.switchTab()},onBtnRemoveMember:function(e){cc.global.util.playSound_buttonClick();var t=e.target.parent.parent.parent;this.removeMemberName=t.m_teaMemberName,this.removeMemberAccount=t.m_teaMemberAccount;var i=this;cc.global.pop_mgr.showFrm({name:"frm_tip_new",closeAnim:!1,customData:{msg:"\u60a8\u786e\u5b9a\u8981\u79fb\u9664\u6210\u5458 <color=#6040ff>["+i.removeMemberName+"]</color> \u5417?",tip:"\u63d0\u793a\uff1a\u79fb\u9664\u6210\u5458\u5c5e\u4e8e\u5371\u9669\u64cd\u4f5c\uff0c\u4e14\u6570\u636e\u4e0d\u53ef\u6062\u590d\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c\uff01",maskClose:!0,btns:[{name:"\u53d6\u6d88"},{name:"\u786e\u5b9a",onClick:function(){i.sendRemoveMemberEvent(),this.onCloseClick()}}]}})},onBtnRemoveAdmin:function(e){cc.global.util.playSound_buttonClick();var t=e.target.parent.parent.parent;this.removeMemberName=t.m_teaMemberName,this.removeMemberAccount=t.m_teaMemberAccount;var i=this;cc.global.pop_mgr.showFrm({name:"frm_tip_new",closeAnim:!1,customData:{msg:"\u60a8\u786e\u5b9a\u8981\u79fb\u9664\u7ba1\u7406\u5458 <color=#6040ff>["+i.removeMemberName+"]</color> \u5417?",maskClose:!0,btns:[{name:"\u53d6\u6d88"},{name:"\u786e\u5b9a",onClick:function(){i.sendTeaModifyAdminEvent(i.removeMemberAccount,0),this.onCloseClick()}}]}})},sendRemoveMemberEvent:function(){console.log("\u79fb\u9664\u6210\u5458\u53c2\u6570\u4e3a\uff1a"+this.removeMemberName+","+this.removeMemberAccount),cc.global.net.send("tea_delMemberEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,teaInfoCode:cc.global.util.teaUserinfo.teaInfoCode,delUsersAccount:this.removeMemberAccount})},teaDelMemberEventPush:function(e){cc.global.util.tipMsg(e.msg),1==e.code&&this.switchTab()},changePage:function(e,t){if(cc.global.util.playSound_buttonClick(),"next"==t){if(this.pageIndex>=this.pageCount)return void cc.global.util.tipMsg("\u5df2\u7ecf\u662f\u6700\u540e\u4e00\u9875\u4e86!");this.pageIndex++}else if("last"==t){if(this.pageIndex<=1)return void cc.global.util.tipMsg("\u5df2\u7ecf\u662f\u7b2c\u4e00\u9875\u4e86!");this.pageIndex--}else parseInt(t)>this.pageCount?this.pageIndex=this.pageCount:parseInt(t)<1?this.pageIndex=1:this.pageIndex=parseInt(t);this.updatePage(),this.getData()},updatePage:function(){0==this.pageCount&&(this.pageIndex=0),this.pageText.string=this.pageIndex+"/"+this.pageCount,this.pageIndex<=1?this.lastPageBtn.interactable=!1:this.lastPageBtn.interactable||(this.lastPageBtn.interactable=!0),this.pageIndex>=this.pageCount?this.nextPageBtn.interactable=!1:this.nextPageBtn.interactable||(this.nextPageBtn.interactable=!0)},switchTab:function(e){e&&cc.global.util.playSound_buttonClick();for(var t=cc.find("bg/scroll/view/content",this.node),i=0;i<t.childrenCount;i++)t.children[i].active=!1;this.getData()},addTeaMemberClick:function(){cc.global.util.playSound_buttonClick(),console.log("\u6253\u5f00\u5f39\u7a97:frm_input"),cc.global.pop_mgr.showFrm({name:"frm_input",customData:{type:"str",maxLength:9,defNum:"",placeholder:"\u8bf7\u8f93\u5165\u73a9\u5bb6ID",inputOver:this.inputOver_addTeaMember,label:null,target:this,title:"addCircleMember",showHead:!1,isAutoOver:!1,isShowOk:!0,closeWhenInputOver:!0}})},inputOver_addTeaMember:function(e,t,i){cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u8bf7\u6c42",!0),cc.global.net.send("tea_addMemberEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,teaInfoCode:cc.global.util.teaUserinfo.teaInfoCode,addUsersAccount:t})},teaAddMemberEventPush:function(e){cc.global.util.tipMsg(e.msg),cc.global.util.closeAlert(),1==e.code&&(cc.global.util.playSound("Sounds/sound_hall_close"),cc.global.pop_mgr.closeFrm({name:"frm_input",closeAnim:!1}),this.switchTab())},onExitTeaClick:function(){cc.global.util.playSound_buttonClick();var e=this;cc.global.pop_mgr.showFrm({name:"frm_tip_new",closeAnim:!1,customData:{msg:"\u4f60\u786e\u5b9a\u8981\u9000\u51fa\u8336\u697c <color=#ffec4e>["+cc.global.util.teaUserinfo.teaName+"]</color> \u5417?",tip:"\u63d0\u793a\uff1a\u9000\u51fa\u8336\u697c\u5c5e\u4e8e\u5371\u9669\u64cd\u4f5c\uff0c\u4e14\u6570\u636e\u4e0d\u53ef\u6062\u590d\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c\uff01",maskClose:!0,btns:[{name:"\u53d6\u6d88"},{name:"\u786e\u5b9a",onClick:function(){e.sendTeaExitMemberEvent(),this.onCloseClick()}}]}})},sendTeaExitMemberEvent:function(){cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u8bf7\u6c42",!0),cc.global.net.send("tea_exitMemberEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,teaInfoCode:cc.global.util.teaUserinfo.teaInfoCode})},teaExitMemberEventPush:function(e){cc.global.util.tipMsg(e.msg),cc.global.util.closeAlert(),1==e.code&&(cc.global.util.playSound("Sounds/sound_hall_close"),this.onCloseClick(),cc.global.util.teaUserinfo=null,cc.sys.localStorage.setItem("teaInfoCode",null),Notification.emit("tea_refresh_scence",{type:"exit"}))},onSearchClick:function(){cc.global.util.playSound_buttonClick(),console.log("\u6253\u5f00\u5f39\u7a97:frm_input"),cc.global.pop_mgr.showFrm({name:"frm_input",customData:{type:"str",maxLength:9,defNum:"",placeholder:"\u8bf7\u8f93\u5165\u73a9\u5bb6ID",inputOver:this.inputOver_search,label:null,target:this,title:"searchCircleMember",showHead:!1,isAutoOver:!1,isShowOk:!0,closeWhenInputOver:!0}})},inputOver_search:function(e,t,i){i.pageIndex=0,i.pageCount=0,i.updatePage(),i.selectAccount=t,i.switchTab()},onAddTeaAdminClick:function(){cc.global.util.playSound_buttonClick(),console.log("\u6253\u5f00\u5f39\u7a97:frm_input"),cc.global.pop_mgr.showFrm({name:"frm_input",customData:{type:"str",maxLength:9,defNum:"",placeholder:"\u8bf7\u8f93\u5165\u73a9\u5bb6ID",inputOver:this.inputOver_addTeaAdmin,label:null,target:this,title:"addCircleMember",showHead:!1,isAutoOver:!1,isShowOk:!0,closeWhenInputOver:!0}})},inputOver_addTeaAdmin:function(e,t,i){i.sendTeaModifyAdminEvent(t,1)},sendTeaModifyAdminEvent:function(e,t){cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u8bf7\u6c42",!0),cc.global.net.send("tea_modifyAdminEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,teaInfoCode:cc.global.util.teaUserinfo.teaInfoCode,updateUsersAccount:e,type:t})},teaModifyAdminEventPush:function(e){cc.global.util.tipMsg(e.msg),cc.global.util.closeAlert(),1==e.code&&(cc.global.util.playSound("Sounds/sound_hall_close"),cc.global.pop_mgr.closeFrm({name:"frm_input",closeAnim:!1}),this.switchTab())}}),cc._RF.pop()},{"../global/NotificationNames":"NotificationNames","../global/item_generator":"item_generator","./base/pop_base":"pop_base"}],frm_teaPersonZhanji:[function(e,t,i){"use strict";cc._RF.push(t,"babbey/xW1KDocpyrhFk9FL","frm_teaPersonZhanji");var n=e("./base/pop_base"),o=e("../global/NotificationNames"),a=e("../global/item_generator");function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function n(o,a){try{var c=t[o](a),s=c.value}catch(e){return void i(e)}if(!c.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}cc.Class({extends:n.pop_base,properties:{content:{type:cc.Node,default:null,tooltip:"\u5f39\u7a97\u5185\u5bb9\u5bb9\u5668"},zj_list:{type:cc.Node,default:null,tooltip:"\u6218\u7ee9\u5217\u8868\u5bb9\u5668"},zj_item_prefab:{type:cc.Prefab,default:null,tooltip:"\u6218\u7ee9\u5217\u8868prefab"},pageSize:{type:cc.Integer,default:6,min:1,tooltip:"\u6bcf\u9875\u663e\u793a\u6761\u6570"},lastPageBtn:{type:cc.Button,default:null,tooltip:"\u4e0a\u4e00\u9875\u6309\u94ae"},nextPageBtn:{type:cc.Button,default:null,tooltip:"\u4e0b\u4e00\u9875\u6309\u94ae"},pageText:{type:cc.Label,default:null,tooltip:"\u9875\u7801label"}},onLoad:function(){this.eventList={},this.eventList[o.NotificationNames.TEA_RECORDLISTEVENT_PUSH]=this.getDataResp},registerObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.on(e,this.eventList[e],this)},removeObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.off(e,this.eventList[e],this)},on_show:function(){this.ops&&this.ops.customData?(this.registerObserver(),this.pageIndex=0,this.pageCount=0,this.updatePage(),this.selectTime="",this.ops.customData.selectAccount&&(this.selectAccount=this.ops.customData.selectAccount),this.ops.customData.selectTime&&(this.selectTime=this.ops.customData.selectTime),cc.find("bg/date_page/label",this.node).getComponent(cc.Label).string=this.selectTime?this.selectTime:this.getDifferentDate(new Date,0),this.changeDateLabelActive(),this.getData()):console.log("\u53c2\u6570\u9519\u8bef")},on_hide:function(){this.removeObserver()},getData:function(){var e={uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,teaInfoCode:cc.global.util.teaUserinfo.teaInfoCode,time:cc.find("bg/date_page/label",this.node).getComponent(cc.Label).string,usersAccount:this.selectAccount,pageIndex:this.pageIndex||1,pageSize:this.pageSize};cc.global.net.send("tea_recordListEvent",e)},getDataResp:function(e){if(1!=e.code)return cc.global.util.tipMsg(e.msg),cc.global.util.closeAlert(),void(this.selectAccount=null);if(this.pageIndex>0&&e.pageIndex!=this.pageIndex)return console.log("\u8fd4\u56de\u6570\u636e\u9875\u7801\u9519\u8bef,\u5f53\u524d\u9875\u7801\u4e3a:"+this.pageIndex),void cc.global.util.closeAlert();if(this.pageIndex=e.pageIndex,this.pageCount=e.totalPage,this.totalCount=e.totalCount,this.updatePage(),this.pageIndex>this.pageCount&&this.pageCount>0)return this.pageIndex=this.pageCount,void this.getData();var t=e.data||[];t.length>0?cc.find("bg/tip",this.node).active=!1:(cc.find("bg/tip",this.node).getComponent(cc.Label).string="\xb7 \u6682\u65e0\u6570\u636e \xb7",cc.find("bg/tip",this.node).active=!0),this.showZjList(this.zj_list,t,this.zj_item_prefab)},showZjList:function(){var e=c(regeneratorRuntime.mark(function e(t,i,n){var o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.item_generator.getInstance().executePreFrame(a.item_generator.getInstance()._getItemGenerator(t,i,n,function(e,t){for(var n=cc.find("players",e).children,a=0;a<n.length;a++)a<i[t].memberList.length?function(){n[a].getChildByName("name").getComponent(cc.Label).string=i[t].memberList[a].memberName,n[a].getChildByName("input_id").getComponent(cc.Label).string=i[t].memberList[a].memberAccount,n[a].getChildByName("score").getComponent(cc.Label).string=i[t].memberList[a].memberScore;var e=n[a].getChildByName("avatar").getChildByName("mask").getChildByName("pic"),o=i[t].memberList[a].memberHeadimg;e.m_headimg&&e.m_headimg==o||(e.getComponent(cc.Sprite).spriteFrame=null,cc.global.util.setHeadimg(e,o,!1,function(){e.m_headimg=o})),n[a].active=!0}():n[a].active=!1;cc.find("info/input_roomNum",e).getComponent(cc.Label).string=i[t].roomNo,cc.find("info/game_name",e).getComponent(cc.Label).string=3==i[t].gid?"\u6cc9\u5dde\u9ebb\u5c06":4==i[t].gid?"\u5341\u4e09\u6c34":21==i[t].gid?"\u8dd1\u5f97\u5feb":"",cc.find("info/input_gameInfo",e).getComponent(cc.Label).string=i[t].gameMumber+"\u4eba "+i[t].gameSum+"\u5c40",cc.find("info/time",e).getComponent(cc.Label).string=i[t].createTime,cc.find("info/roomNum",e).getComponent(cc.Label).string=t+1,e.m_roomNo=i[t].roomNo,e.m_roomId=i[t].roomId,e.m_gid=i[t].gid,e.getChildByName("play").on("click",o.showZhanjiDetail,o)}),4,this);case 2:cc.global.util.closeAlert();case 3:case"end":return e.stop()}},e,this)}));return function(t,i,n){return e.apply(this,arguments)}}(),showZhanjiDetail:function(e){cc.global.util.playSound_buttonClick();var t={type:"tea",gid:e.target.parent.m_gid,room_no:e.target.parent.m_roomNo,room_id:e.target.parent.m_roomId};cc.global.pop_mgr.showFrm({name:"frm_zhanjiDetail",customData:t})},changePage:function(e,t){if(cc.global.util.playSound_buttonClick(),"next"==t){if(this.pageIndex>=this.pageCount)return void cc.global.util.tipMsg("\u5df2\u7ecf\u662f\u6700\u540e\u4e00\u9875\u4e86!");this.pageIndex++}else if("last"==t){if(this.pageIndex<=1)return void cc.global.util.tipMsg("\u5df2\u7ecf\u662f\u7b2c\u4e00\u9875\u4e86!");this.pageIndex--}else parseInt(t)>this.pageCount?this.pageIndex=this.pageCount:parseInt(t)<1?this.pageIndex=1:this.pageIndex=parseInt(t);this.updatePage(),this.getData()},updatePage:function(){0==this.pageCount&&(this.pageIndex=0),this.pageText.string=this.pageIndex+"/"+this.pageCount,this.pageIndex<=1?this.lastPageBtn.interactable=!1:this.lastPageBtn.interactable||(this.lastPageBtn.interactable=!0),this.pageIndex>=this.pageCount?this.nextPageBtn.interactable=!1:this.nextPageBtn.interactable||(this.nextPageBtn.interactable=!0)},getDifferentDate:function(e,t){var i=new Date(e);return i.setDate(i.getDate()+t),i.getFullYear()+"-"+(i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1)+"-"+(i.getDate()<10?"0"+i.getDate():i.getDate())},changeDate:function(e,t){cc.global.util.playSound_buttonClick();var i=this.getDifferentDate(cc.find("bg/date_page/label",this.node).getComponent(cc.Label).string,parseInt(t));cc.find("bg/date_page/label",this.node).getComponent(cc.Label).string=i,this.changeDateLabelActive(),this.getData()},changeDateLabelActive:function(){var e=cc.find("bg/date_page/label",this.node).getComponent(cc.Label).string,t=this.getDifferentDate(new Date,0),i=(new Date(e)-new Date(t))/864e5;cc.find("bg/date_page/btn_nextPage",this.node).active=i<0,cc.find("bg/date_page/btn_lastPage",this.node).active=i>-15}}),cc._RF.pop()},{"../global/NotificationNames":"NotificationNames","../global/item_generator":"item_generator","./base/pop_base":"pop_base"}],frm_teaSetting:[function(e,t,i){"use strict";cc._RF.push(t,"a48c5AsiydNYZ1DN1Z3IkXA","frm_teaSetting");var n=e("./base/pop_base"),o=e("../global/NotificationNames");cc.Class({extends:n.pop_base,properties:{frmNameEdit:cc.EditBox},onLoad:function(){this.eventList={},this.eventList[o.NotificationNames.TEA_MODIFYNAMEEVENT_PUSH]=this.teaModifyNameEventPush,this.eventList[o.NotificationNames.TEA_MODIFYPLAYEVENT_PUSH]=this.teaModifyPlayEventPush,this.eventList[o.NotificationNames.TEA_REMOVEEVENT_PUSH]=this.teaRemoveEventPush,this.eventList[o.NotificationNames.TEA_ADDMEMBEREVENT_PUSH]=this.teaAddMemberEventPush,this.eventList[o.NotificationNames.TEA_CLOSESEVENT_PUSH]=this.teaClosesEventPush},registerObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.on(e,this.eventList[e],this)},removeObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.off(e,this.eventList[e],this)},on_show:function(){this.registerObserver(),cc.global.util.teaUserinfo&&(cc.find("bg/nameSet/teaName",this.node).getComponent(cc.Label).string=cc.global.util.teaUserinfo.teaName,this.frmNameEdit.string=cc.global.util.teaUserinfo.teaName,cc.find("bg/nameSet/input_id",this.node).getComponent(cc.Label).string=cc.global.util.teaUserinfo.teaInfoCode,cc.find("bg/nameSet/input_num",this.node).getComponent(cc.Label).string=cc.global.util.teaUserinfo.number,cc.find("bg/wanfaSet/lb",this.node).getComponent(cc.Label).string=cc.global.util.teaUserinfo.gameInfo,0==cc.global.util.teaUserinfo.teaInfoType?(cc.find("bg/otherBtn/btn_dayang",this.node).active=!0,cc.find("bg/otherBtn/btn_kaiye",this.node).active=!1):1==cc.global.util.teaUserinfo.teaInfoType?(cc.find("bg/otherBtn/btn_dayang",this.node).active=!1,cc.find("bg/otherBtn/btn_kaiye",this.node).active=!0):(cc.find("bg/otherBtn/btn_dayang",this.node).active=!1,cc.find("bg/otherBtn/btn_kaiye",this.node).active=!1))},on_hide:function(){this.removeObserver()},showOrHideNameModifyNameFrm:function(e,t){cc.global.util.playSound_buttonClick(),cc.find("nameXiugai",this.node).active="1"==t},sendTeaModifyNameEvent:function(){cc.global.util.playSound_buttonClick(),this.frmNameEdit.string!=cc.global.util.teaUserinfo.teaName?(cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u4fee\u6539",!0),cc.global.net.send("tea_modifyNameEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,teaInfoCode:cc.global.util.teaUserinfo.teaInfoCode,teaName:this.frmNameEdit.string})):cc.global.util.tipMsg("\u6682\u672a\u4fee\u6539\u8336\u697c\u540d\u79f0\uff0c\u65e0\u9700\u63d0\u4ea4")},teaModifyNameEventPush:function(e){if(cc.global.util.tipMsg(e.msg),1==e.code){if(cc.global.util.teaUserinfo.teaName=this.frmNameEdit.string,cc.find("Canvas/header/cl_info/name").getComponent(cc.Label).string=cc.global.util.teaUserinfo.teaName,cc.find("bg/nameSet/teaName",this.node).getComponent(cc.Label).string=cc.global.util.teaUserinfo.teaName,cc.find("Canvas/sidebar/scrollview").active)for(var t=cc.find("Canvas/sidebar/scrollview/view/content").children,i=0;i<t.length;i++)t[i].getChildByName("Background").getChildByName("tea_name").getComponent(cc.Label).string=cc.global.util.teaUserinfo.teaName;cc.find("nameXiugai",this.node).active=!1}cc.global.util.closeAlert()},teaModifyPlayEventPush:function(e){cc.global.util.tipMsg(e.msg),1==e.code&&(cc.global.util.teaUserinfo.gameInfo=e.gameInfo,cc.find("bg/wanfaSet/lb",this.node).getComponent(cc.Label).string=cc.global.util.teaUserinfo.gameInfo),cc.global.util.closeAlert()},onTeaRemoveClick:function(){cc.global.util.playSound_buttonClick();var e=this;cc.global.pop_mgr.showFrm({name:"frm_tip_new",closeAnim:!1,customData:{msg:"\u60a8\u786e\u5b9a\u8981\u9500\u6bc1\u8336\u697c <color=#6040ff>["+cc.global.util.teaUserinfo.teaName+"]</color> \u5417?",tip:"\u63d0\u793a\uff1a\u9500\u6bc1\u8336\u697c\u5c5e\u4e8e\u5371\u9669\u64cd\u4f5c\uff0c\u4e14\u6570\u636e\u4e0d\u53ef\u6062\u590d\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c\uff01",maskClose:!0,btns:[{name:"\u53d6\u6d88"},{name:"\u786e\u5b9a",onClick:function(){e.sendTeaRemoveEvent(),this.onCloseClick()}}]}})},sendTeaRemoveEvent:function(){cc.global.util.playSound_buttonClick(),cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u8bf7\u6c42",!0),cc.global.net.send("tea_removeEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,teaInfoCode:cc.global.util.teaUserinfo.teaInfoCode})},teaRemoveEventPush:function(e){cc.global.util.tipMsg(e.msg),cc.global.util.closeAlert(),1==e.code&&(cc.find("Canvas/header/cl_info").active=!1,cc.global.util.teaUserinfo=null,cc.sys.localStorage.setItem("teaInfoCode",null),Notification.emit("tea_refresh_scence",{type:"dissolve"}),this.onCloseClick())},addTeaMemberClick:function(){cc.global.util.playSound_buttonClick(),console.log("\u6253\u5f00\u5f39\u7a97:frm_input"),cc.global.pop_mgr.showFrm({name:"frm_input",customData:{type:"str",maxLength:9,defNum:"",placeholder:"\u8bf7\u8f93\u5165\u73a9\u5bb6ID",inputOver:this.inputOver_addTeaMember,label:null,target:this,title:"addCircleMember",showHead:!1,isAutoOver:!1,isShowOk:!0,closeWhenInputOver:!1}})},inputOver_addTeaMember:function(e,t,i){cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u8bf7\u6c42",!0),cc.global.net.send("tea_addMemberEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,teaInfoCode:cc.global.util.teaUserinfo.teaInfoCode,addUsersAccount:t})},teaAddMemberEventPush:function(e){cc.global.util.tipMsg(e.msg),cc.global.util.closeAlert(),1==e.code&&(cc.global.util.playSound("Sounds/sound_hall_close"),cc.global.pop_mgr.closeFrm({name:"frm_input",closeAnim:!1}))},showFrm:function(e,t){cc.global.util.playSound_buttonClick();var i=null;switch(t){case"frm_teaDaoru":i={};break;case"frm_create":i={type:"change_tea_setting"}}console.log("\u6253\u5f00\u5f39\u7a97:"+t),cc.global.pop_mgr.showFrm({name:t,customData:i})},onTeaCloseOrOpenClick:function(e,t){cc.global.util.playSound_buttonClick(),cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u8bf7\u6c42",!0),cc.global.net.send("tea_closesEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,teaInfoCode:cc.global.util.teaUserinfo.teaInfoCode,teaInfoType:t})},teaClosesEventPush:function(e){cc.global.util.closeAlert(),cc.global.util.tipMsg(e.msg),1==e.code&&(cc.global.util.teaUserinfo.teaInfoType=e.teaInfoType,0==cc.global.util.teaUserinfo.teaInfoType?(cc.find("bg/otherBtn/btn_dayang",this.node).active=!0,cc.find("bg/otherBtn/btn_kaiye",this.node).active=!1):1==cc.global.util.teaUserinfo.teaInfoType?(cc.find("bg/otherBtn/btn_dayang",this.node).active=!1,cc.find("bg/otherBtn/btn_kaiye",this.node).active=!0):(cc.find("bg/otherBtn/btn_dayang",this.node).active=!1,cc.find("bg/otherBtn/btn_kaiye",this.node).active=!1),cc.global.util.playSound("Sounds/sound_hall_close"))}}),cc._RF.pop()},{"../global/NotificationNames":"NotificationNames","./base/pop_base":"pop_base"}],frm_teaZhanji:[function(e,t,i){"use strict";cc._RF.push(t,"d7a5fl0f6lMZqSw97+KX6mb","frm_teaZhanji");var n=e("./base/pop_base"),o=e("../global/NotificationNames"),a=e("../global/item_generator");function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function n(o,a){try{var c=t[o](a),s=c.value}catch(e){return void i(e)}if(!c.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}cc.Class({extends:n.pop_base,properties:{content:{type:cc.Node,default:null,tooltip:"\u5f39\u7a97\u5185\u5bb9\u5bb9\u5668"},zj_list:{type:cc.Node,default:null,tooltip:"\u6218\u7ee9\u5217\u8868\u5bb9\u5668"},zj_item_prefab:{type:cc.Prefab,default:null,tooltip:"\u6218\u7ee9\u5217\u8868prefab"},zb_list:{type:cc.Node,default:null,tooltip:"\u7ad9\u699c\u5217\u8868\u5bb9\u5668"},big_winner_item_prefab:{type:cc.Prefab,default:null,tooltip:"\u5927\u8d62\u5bb6\u5217\u8868prefab"},big_winner_list:{type:cc.Node,default:null,tooltip:"\u5927\u8d62\u5bb6\u5217\u8868\u5bb9\u5668"},zb_item_prefab:{type:cc.Prefab,default:null,tooltip:"\u7ad9\u699c\u5217\u8868prefab"},pageSize:{type:cc.Integer,default:6,min:1,tooltip:"\u6bcf\u9875\u663e\u793a\u6761\u6570"},lastPageBtn:{type:cc.Button,default:null,tooltip:"\u4e0a\u4e00\u9875\u6309\u94ae"},nextPageBtn:{type:cc.Button,default:null,tooltip:"\u4e0b\u4e00\u9875\u6309\u94ae"},pageText:{type:cc.Label,default:null,tooltip:"\u9875\u7801label"}},onLoad:function(){this.eventList={},this.eventList[o.NotificationNames.TEA_MYRECORDLISTEVENT_PUSH]=this.getTab1DataResp,this.eventList[o.NotificationNames.TEA_RECORDLISTEVENT_PUSH]=this.getTab2DataResp,this.eventList[o.NotificationNames.TEA_RECORDSTATISLISTEVENT_PUSH]=this.getTab3DataResp,this.eventList[o.NotificationNames.TEA_BIGWINNERLISTEVENT_PUSH]=this.getTab5DataResp,this.eventList[o.NotificationNames.TEA_RECORDTICKEVENT_PUSH]=this.teaRecordTickEventPush},getTab1DataResp:function(e){"1"==this.tabId&&this.getDataResp(e)},getTab2DataResp:function(e){"2"==this.tabId&&this.getDataResp(e)},getTab3DataResp:function(e){"3"!=this.tabId&&"4"!=this.tabId||this.getDataResp(e)},getTab5DataResp:function(e){"5"==this.tabId&&this.getDataResp(e)},registerObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.on(e,this.eventList[e],this)},removeObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.off(e,this.eventList[e],this)},on_show:function(){this.registerObserver(),this.pageIndex=0,this.pageCount=0,this.updatePage(),this.selectAccount="",this.sequence=1,cc.find("bg/content_tab/toggle1",this.node).active=!0,cc.find("bg/content_tab/toggle2",this.node).active=!0,cc.find("bg/content_tab/toggle3",this.node).active=!0,cc.find("bg/content_tab/toggle4",this.node).active=!0,cc.find("bg/content_tab/toggle5",this.node).active=!0,cc.find("bg/content_tab/toggle1",this.node).getComponent(cc.Toggle).isChecked=!0,cc.find("bg/content_tab/toggle2",this.node).getComponent(cc.Toggle).isChecked=!1,cc.find("bg/content_tab/toggle3",this.node).getComponent(cc.Toggle).isChecked=!1,cc.find("bg/content_tab/toggle4",this.node).getComponent(cc.Toggle).isChecked=!1,cc.find("bg/content_tab/toggle5",this.node).getComponent(cc.Toggle).isChecked=!1,cc.find("bg/sequence_node",this.node).active=!1,cc.find("bg/date_page/label",this.node).getComponent(cc.Label).string=this.getDifferentDate(new Date,0),this.changeDateLabelActive(),this.ops&&this.ops.customData&&(this.ops.customData.selectAccount&&(this.selectAccount=this.ops.customData.selectAccount),this.ops.customData.openType&&"showOther"==this.ops.customData.openType&&(cc.find("bg/content_tab/toggle2",this.node).getComponent(cc.Toggle).isChecked=!0,cc.find("bg/content_tab/toggle1",this.node).active=!1,cc.find("bg/content_tab/toggle2",this.node).active=!1,cc.find("bg/content_tab/toggle3",this.node).active=!1,cc.find("bg/content_tab/toggle4",this.node).active=!1,cc.find("bg/content_tab/toggle5",this.node).active=!1)),cc.global.util.replayCustomData&&cc.global.util.showReplayCustomData&&this.showTheChekingData(),this.getData()},showTheChekingData:function(){cc.find("bg/date_page/label",this.node).getComponent(cc.Label).string=cc.global.util.replayCustomData.selectTime;for(var e=cc.global.util.replayCustomData,t=cc.find("bg/content_tab",this.node),i=0;i<t.childrenCount;i++)t.children[i].getComponent(cc.Toggle).isChecked=i==Number(e.tabId)-1;cc.global.util.showReplayCustomData=!1,cc.global.pop_mgr.showFrm({name:"frm_zhanjiDetail",customData:e})},on_hide:function(){this.removeObserver()},getData:function(){this.tabId=-1;for(var e=cc.find("bg/content_tab",this.node),t=0;t<e.childrenCount;t++)if(e.children[t].getComponent(cc.Toggle).isChecked){this.tabId=cc.global.util.getNodeIndex(e.children[t].name,"toggle");break}cc.find("bg/btn_findMember",this.node).active=1!=this.tabId;var i={uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,teaInfoCode:cc.global.util.teaUserinfo.teaInfoCode,pageIndex:this.pageIndex||1,pageSize:this.pageSize};switch(this.selectAccount&&(i.usersAccountOrName=this.selectAccount),this.tabId){case"1":i.time=cc.find("bg/date_page/label",this.node).getComponent(cc.Label).string,cc.global.net.send("tea_myRecordListEvent",i);break;case"2":i.time=cc.find("bg/date_page/label",this.node).getComponent(cc.Label).string,this.selectAccount&&(i.usersAccount=this.selectAccount),cc.global.net.send("tea_recordListEvent",i);break;case"3":i.sequence=this.sequence,cc.global.net.send("tea_recordStatisListEvent",i);break;case"4":i.time=this.getDifferentDate(new Date,-1),i.sequence=this.sequence,cc.global.net.send("tea_recordStatisListEvent",i);break;case"5":cc.global.net.send("tea_bigWinnerListEvent",i)}},getDataResp:function(e){if(1!=e.code)return cc.global.util.tipMsg(e.msg),cc.global.util.closeAlert(),void(this.selectAccount=null);if(this.pageIndex>0&&e.pageIndex!=this.pageIndex)return console.log("\u8fd4\u56de\u6570\u636e\u9875\u7801\u9519\u8bef,\u5f53\u524d\u9875\u7801\u4e3a:"+this.pageIndex),void cc.global.util.closeAlert();if(this.pageIndex=e.pageIndex,this.pageCount=e.totalPage,this.totalCount=e.totalCount,this.updatePage(),this.pageIndex>this.pageCount&&this.pageCount>0)return this.pageIndex=this.pageCount,void this.getData();var t=e.data||[];t.length>0?cc.find("bg/tip",this.node).active=!1:(cc.find("bg/tip",this.node).getComponent(cc.Label).string="\xb7 \u6682\u65e0\u6570\u636e \xb7",cc.find("bg/tip",this.node).active=!0),cc.find("bg/person_info",this.node).active="1"==this.tabId,"1"==this.tabId&&(cc.find("bg/person_info/gameCount",this.node).getComponent(cc.Label).string="\u603b\u573a\u6b21\uff1a"+e.gameCount,cc.find("bg/person_info/allScore",this.node).getComponent(cc.Label).string="\u603b\u79ef\u5206\uff1a"+e.allScore,cc.find("bg/person_info/winCount",this.node).getComponent(cc.Label).string="\u8d62 \u5c40\uff1a"+e.winCount,cc.find("bg/person_info/loseCount",this.node).getComponent(cc.Label).string="\u8f93 \u5c40\uff1a"+e.loseCount,cc.find("bg/person_info/tiesCount",this.node).getComponent(cc.Label).string="\u5e73 \u5c40\uff1a"+e.tiesCount,cc.find("bg/person_info/bigWinCount",this.node).getComponent(cc.Label).string="\u5927\u8d62\u5bb6\uff1a"+e.bigWinCount),cc.find("bg/tea_info",this.node).active="2"==this.tabId,"2"==this.tabId&&(cc.find("bg/tea_info/totalCount",this.node).getComponent(cc.Label).string="\u603b\u573a\u6b21\uff1a"+e.totalCount,cc.find("bg/tea_info/proxyMoneyALl",this.node).getComponent(cc.Label).string="\u8336\u58f6\u6d88\u8017\uff1a"+(e.proxyMoneyALl?Math.abs(e.proxyMoneyALl):0),cc.find("bg/tea_info/teaMoneyALl",this.node).getComponent(cc.Label).string="AA\u6d88\u8017\uff1a"+(e.teaMoneyALl?Math.abs(e.teaMoneyALl):0)),cc.find("bg/sequence_node",this.node).active="3"==this.tabId||"4"==this.tabId,this.changeSequenceNodeActive(),"1"==this.tabId||"2"==this.tabId?(this.zb_list.parent.parent.active=!1,this.zj_list.parent.parent.active=!0,this.big_winner_list.parent.parent.active=!1,cc.find("bg/date_page",this.node).active=!0,this.showZjList(this.zj_list,t,this.zj_item_prefab)):"3"==this.tabId||"4"==this.tabId?(this.zb_list.parent.parent.active=!0,this.zj_list.parent.parent.active=!1,this.big_winner_list.parent.parent.active=!1,cc.find("bg/date_page",this.node).active=!1,this.showZbList(this.zb_list,t,this.zb_item_prefab)):"5"==this.tabId&&(this.zb_list.parent.parent.active=!1,this.zj_list.parent.parent.active=!1,this.big_winner_list.parent.parent.active=!0,cc.find("bg/date_page",this.node).active=!1,this.showBigWinnerList(this.big_winner_list,t,this.big_winner_item_prefab))},showZjList:function(){var e=c(regeneratorRuntime.mark(function e(t,i,n){var o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.item_generator.getInstance().executePreFrame(a.item_generator.getInstance()._getItemGenerator(t,i,n,function(e,t){for(var n=cc.find("players",e).children,a=0;a<n.length;a++)a<i[t].memberList.length?function(){n[a].getChildByName("name").getComponent(cc.Label).string=i[t].memberList[a].memberName,n[a].getChildByName("input_id").getComponent(cc.Label).string=i[t].memberList[a].memberAccount,n[a].getChildByName("score").getComponent(cc.Label).string=i[t].memberList[a].memberScore;var e=n[a].getChildByName("avatar").getChildByName("mask").getChildByName("pic"),o=i[t].memberList[a].memberHeadimg;e.m_headimg&&e.m_headimg==o||(e.getComponent(cc.Sprite).spriteFrame=null,cc.global.util.setHeadimg(e,o,!1,function(){e.m_headimg=o})),n[a].active=!0}():n[a].active=!1;cc.find("info/input_roomNum",e).getComponent(cc.Label).string=i[t].roomNo,cc.find("info/game_name",e).getComponent(cc.Label).string=3==i[t].gid?"\u6cc9\u5dde\u9ebb\u5c06":4==i[t].gid?"\u5341\u4e09\u6c34":21==i[t].gid?"\u8dd1\u5f97\u5feb":"",cc.find("info/input_gameInfo",e).getComponent(cc.Label).string=i[t].gameMumber+"\u4eba "+i[t].gameSum+"\u5c40",cc.find("info/time",e).getComponent(cc.Label).string=i[t].createTime,cc.find("info/roomNum",e).getComponent(cc.Label).string=t+1,cc.find("info/input_fkXiaohao",e).active="1"==o.tabId&&i[t].recordInfo||"2"==o.tabId,cc.find("info/input_fkXiaohao/input",e).getComponent(cc.Label).string=i[t].recordInfo?i[t].recordInfo:"",e.m_roomNo=i[t].roomNo,e.m_roomId=i[t].roomId,e.m_gid=i[t].gid,e.getChildByName("play").on("click",o.showZhanjiDetail,o),e.on("click",o.showNodeZhanjiDetail,o)}),4,this);case 2:cc.global.util.closeAlert();case 3:case"end":return e.stop()}},e,this)}));return function(t,i,n){return e.apply(this,arguments)}}(),showZbList:function(){var e=c(regeneratorRuntime.mark(function e(t,i,n){var o,c=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=this,e.next=3,a.item_generator.getInstance().executePreFrame(a.item_generator.getInstance()._getItemGenerator(t,i,n,function(e,t){var n=cc.find("player/avatar/mask/pic",e),a=i[t].memberHeadimg;n.m_headimg&&n.m_headimg==a||(n.getComponent(cc.Sprite).spriteFrame=null,cc.global.util.setHeadimg(n,a,!1,function(){n.m_headimg=a})),cc.find("player/name",e).getComponent(cc.Label).string=i[t].memberName,cc.find("player/txt_id/id",e).getComponent(cc.Label).string=i[t].memberAccount,cc.find("player/txt_jfzh/input_jfzh",e).getComponent(cc.Label).string=i[t].memberScore,cc.find("player/txt_dyjcs/input_dyjcs",e).getComponent(cc.Label).string=i[t].bigWinCount,cc.find("player/txt_zc/input_zc",e).getComponent(cc.Label).string=i[t].memberCount,cc.find("player/txt_yj/input_yj",e).getComponent(cc.Label).string=i[t].winCount,cc.find("player/txt_pj/input_pj",e).getComponent(cc.Label).string=i[t].tiesCount,cc.find("player/txt_sj/input_sj",e).getComponent(cc.Label).string=i[t].loseCount,cc.find("time/input_time",e).getComponent(cc.Label).string=i[t].createTime,cc.find("roomNum",e).getComponent(cc.Label).string=t+1,cc.find("tick",e).active="4"==o.tabId&&0==i[t].tickStatus,cc.find("undo",e).active="4"==o.tabId&&1==i[t].tickStatus,e.m_memberAccount=i[t].memberAccount,e.m_gameRecordId=i[t].gameRecordId,cc.find("tick",e).on("click",c.onTickClick,c),cc.find("undo",e).on("click",c.onUndoClick,c),e.getChildByName("click_node").on("click",c.onZbClick,c)}),4,this);case 3:cc.global.util.closeAlert();case 4:case"end":return e.stop()}},e,this)}));return function(t,i,n){return e.apply(this,arguments)}}(),onTickClick:function(e){var t=e.target.parent.m_gameRecordId;this.snedTeaRecordTickEvent(t,1)},onUndoClick:function(e){var t=e.target.parent.m_gameRecordId;this.snedTeaRecordTickEvent(t,0)},snedTeaRecordTickEvent:function(e,t){cc.global.net.send("tea_recordTickEvent",{uid:cc.global.util.userinfo.uid,teaInfoCode:cc.global.util.teaUserinfo.teaInfoCode,gameRecordId:e,tickStatus:t})},teaRecordTickEventPush:function(e){cc.global.util.tipMsg(e.msg),1==e.code&&this.switchTab()},showBigWinnerList:function(){var e=c(regeneratorRuntime.mark(function e(t,i,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.item_generator.getInstance().executePreFrame(a.item_generator.getInstance()._getItemGenerator(t,i,n,function(e,t){cc.find("player",e).getChildByName("name").getComponent(cc.Label).string=i[t].memberName,cc.find("player",e).getChildByName("id").getComponent(cc.Label).string=i[t].memberAccount,cc.find("player",e).getChildByName("number").getComponent(cc.Label).string=i[t].bigWinCount?i[t].bigWinCount:0;var n=cc.find("player",e).getChildByName("avatar").getChildByName("mask").getChildByName("pic"),o=i[t].memberHeadimg;n.m_headimg&&n.m_headimg==o||(n.getComponent(cc.Sprite).spriteFrame=null,cc.global.util.setHeadimg(n,o,!1,function(){n.m_headimg=o}))}),4,this);case 2:cc.global.util.closeAlert();case 3:case"end":return e.stop()}},e,this)}));return function(t,i,n){return e.apply(this,arguments)}}(),showZhanjiDetail:function(e){cc.global.util.playSound_buttonClick();var t={type:"tea",gid:e.target.parent.m_gid,room_no:e.target.parent.m_roomNo,room_id:e.target.parent.m_roomId};3==e.target.parent.m_gid&&(cc.global.util.replayCustomData=t,t.tabId=this.tabId,t.selectTime=cc.find("bg/date_page/label",this.node).getComponent(cc.Label).string),cc.global.pop_mgr.showFrm({name:"frm_zhanjiDetail",customData:t})},showNodeZhanjiDetail:function(e){cc.global.util.playSound_buttonClick(),console.log("\u6253\u5f00\u5f39\u7a97:frm_zhanjiDetail");var t={type:"tea",gid:"4",room_no:e.target.m_roomNo,room_id:e.target.m_roomId};cc.global.pop_mgr.showFrm({name:"frm_zhanjiDetail",customData:t})},onZbClick:function(e){var t={selectAccount:e.target.parent.m_memberAccount};"3"==this.tabId&&(t.selectTime=this.getDifferentDate(new Date,0)),"4"==this.tabId&&(t.selectTime=this.getDifferentDate(new Date,-1)),cc.global.pop_mgr.showFrm({name:"frm_teaPersonZhanji",customData:t})},changePage:function(e,t){if(cc.global.util.playSound_buttonClick(),"next"==t){if(this.pageIndex>=this.pageCount)return void cc.global.util.tipMsg("\u5df2\u7ecf\u662f\u6700\u540e\u4e00\u9875\u4e86!");this.pageIndex++}else if("last"==t){if(this.pageIndex<=1)return void cc.global.util.tipMsg("\u5df2\u7ecf\u662f\u7b2c\u4e00\u9875\u4e86!");this.pageIndex--}else parseInt(t)>this.pageCount?this.pageIndex=this.pageCount:parseInt(t)<1?this.pageIndex=1:this.pageIndex=parseInt(t);this.updatePage(),this.getData()},updatePage:function(){0==this.pageCount&&(this.pageIndex=0),this.pageText.string=this.pageIndex+"/"+this.pageCount,this.pageIndex<=1?this.lastPageBtn.interactable=!1:this.lastPageBtn.interactable||(this.lastPageBtn.interactable=!0),this.pageIndex>=this.pageCount?this.nextPageBtn.interactable=!1:this.nextPageBtn.interactable||(this.nextPageBtn.interactable=!0)},switchTab:function(e){e&&cc.global.util.playSound_buttonClick();for(var t=cc.find("bg/scroll/view/content",this.node),i=0;i<t.childrenCount;i++)t.children[i].active=!1;this.getData()},getDifferentDate:function(e,t){var i=new Date(e);return i.setDate(i.getDate()+t),i.getFullYear()+"-"+(i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1)+"-"+(i.getDate()<10?"0"+i.getDate():i.getDate())},changeDate:function(e,t){cc.global.util.playSound_buttonClick();var i=this.getDifferentDate(cc.find("bg/date_page/label",this.node).getComponent(cc.Label).string,parseInt(t));cc.find("bg/date_page/label",this.node).getComponent(cc.Label).string=i,this.changeDateLabelActive(),this.switchTab()},changeDateLabelActive:function(){var e=cc.find("bg/date_page/label",this.node).getComponent(cc.Label).string,t=this.getDifferentDate(new Date,0),i=(new Date(e)-new Date(t))/864e5;console.log("\u65e5\u671f\u7ffb\u9875\u65f6\u95f4\u95f4\u9694\u4e3a"+i),cc.find("bg/date_page/btn_nextPage",this.node).active=i<0,cc.find("bg/date_page/btn_lastPage",this.node).active=i>-15},onSearchClick:function(){cc.global.util.playSound_buttonClick(),console.log("\u6253\u5f00\u5f39\u7a97:frm_input"),cc.global.pop_mgr.showFrm({name:"frm_input",customData:{type:"str",maxLength:9,defNum:"",placeholder:"\u8bf7\u8f93\u5165\u73a9\u5bb6ID",inputOver:this.inputOver_search,label:null,target:this,title:"searchCircleMember",showHead:!1,isAutoOver:!1,isShowOk:!0,closeWhenInputOver:!0}})},inputOver_search:function(e,t,i){i.pageIndex=0,i.pageCount=0,i.updatePage(),i.selectAccount=t,i.switchTab()},onChangeSequenceClick:function(e,t){this.sequence=t,console.log("\u6218\u699c"+this.sequence),this.changeSequenceNodeActive(),this.switchTab()},changeSequenceNodeActive:function(){cc.find("bg/sequence_node/desc",this.node).active=1==this.sequence,cc.find("bg/sequence_node/asc",this.node).active=-1==this.sequence}}),cc._RF.pop()},{"../global/NotificationNames":"NotificationNames","../global/item_generator":"item_generator","./base/pop_base":"pop_base"}],frm_tip_new:[function(e,t,i){"use strict";cc._RF.push(t,"b49ceO0WR1Ov4NkI38wZ0a8","frm_tip_new");var n=e("./base/pop_base");cc.Class({extends:n.pop_base,properties:{},onLoad:function(){},on_show:function(){if(!this.ops||!this.ops.customData)return console.log("\u63d0\u793a\u5f39\u7a97\u521d\u59cb\u5316\u5f02\u5e38,\u65e0\u6cd5\u83b7\u53d6\u57fa\u672c\u53c2\u6570"),void cc.global.util.tipMsg("\u53c2\u6570\u5f02\u5e38,\u8bf7\u91cd\u8bd5");cc.find("bg/tip",this.node).getComponent(cc.RichText).string=this.ops.customData.msg||"",cc.find("bg/tip2",this.node).getComponent(cc.Label).string=this.ops.customData.tip||"",cc.find("bg/btn_close",this.node).active=this.ops.customData.hasClose||!1,this.ops.customData.maskClose?cc.find("mask",this.node).on("click",this.onCloseClick,this):cc.find("mask",this.node).off("click",this.onCloseClick,this),this.ops.customData.btns||(this.ops.customData.btns=[]);for(var e=cc.find("bg/btns",this.node),t=0;t<e.children.length;t++)t<this.ops.customData.btns.length?(e.children[t].active=!0,e.children[t].getChildByName("label").getComponent(cc.Label).string=this.ops.customData.btns[t].name,this.ops.customData.btns[t].onClick?e.children[t].on("click",this.ops.customData.btns[t].onClick,this):e.children[t].on("click",this.onCloseClick,this)):e.children[t].active=!1},on_hide:function(e){if(!e){this.ops.customData.btns||(this.ops.customData.btns=[]);for(var t=cc.find("bg/btns",this.node),i=0;i<t.children.length;i++)i<this.ops.customData.btns.length&&(this.ops.customData.btns[i].onClick?t.children[i].off("click",this.ops.customData.btns[i].onClick,this):t.children[i].off("click",this.onCloseClick,this),t.children[i].active=!1)}}}),cc._RF.pop()},{"./base/pop_base":"pop_base"}],frm_tip:[function(e,t,i){"use strict";cc._RF.push(t,"e4441vOxpZHToNyd6BL6hwm","frm_tip"),cc.Class({extends:cc.Component,properties:{content:{default:null,type:cc.Node}},initView:function(e){e.name?this.node.name=e.name:this.node.name="frm_tip",this.showSound=e.showSound,this.closeSound=e.closeSound,this.content.getChildByName("tip").getComponent(cc.Label).string=e.msg,this.content.getChildByName("btn_close").active=e.hasClose||!1,e.maskClose?this.node.getChildByName("mask").on("click",this.onCloseClick,this):this.node.getChildByName("mask").off("click",this.onCloseClick,this);for(var t=this.content.getChildByName("btns"),i=0;i<t.children.length;i++)i<e.btns.length?(t.children[i].active=!0,t.children[i].getChildByName("label").getComponent(cc.Label).string=e.btns[i].name,e.btns[i].onClick?t.children[i].on("click",e.btns[i].onClick,this):t.children[i].on("click",this.onCloseClick,this)):t.children[i].active=!1;return e.showAnim&&(this.content.scale=.2,this.content.runAction(cc.scaleTo(.1,1))),this},show:function(){this.showSound&&cc.global.util.playSound_buttonClick(),cc.find("Canvas").addChild(this.node)},hide:function(){cc.global.util.hideFrmTip(this.node)},onCloseClick:function(){this.closeSound&&cc.global.util.playSound("Sounds/sound_hall_close"),this.hide()}}),cc._RF.pop()},{}],frm_wanfa:[function(e,t,i){"use strict";cc._RF.push(t,"a5599+cE41OaIUdIvbVaywX","frm_wanfa");var n=e("./base/pop_base");cc.Class({extends:n.pop_base,properties:{},onLoad:function(){},on_show:function(){if(this.ops&&this.ops.customData){var e=this.ops.customData.gid;cc.find("bg/scrollview/view/btns",this.node).active=!1;for(var t=cc.find("bg/rule/view/content",this.node),i=0;i<t.childrenCount;i++){var n=t.children[i];cc.global.util.getNodeIndex(n.name,"rule")==e?n.active=!0:n.active=!1}}else{var o=cc.find("bg/scrollview/view/btns",this.node);o.active=!0;for(var a=0;a<o.childrenCount;a++)o.children[a].getComponent(cc.Toggle).isChecked=4==cc.global.util.getNodeIndex(o.children[a].name,"toggle");var c=cc.find("bg/rule/view/content",this.node);c.active=!0;for(var s=0;s<c.childrenCount;s++){var l=c.children[s];4==cc.global.util.getNodeIndex(l.name,"rule")?l.active=!0:l.active=!1}}},on_hide:function(){},switchGame:function(e){cc.global.util.playSound_buttonClick();for(var t=cc.global.util.getNodeIndex(e.node.name,"toggle"),i=cc.find("bg/rule/view/content",this.node),n=0;n<i.childrenCount;n++){var o=i.children[n];cc.global.util.getNodeIndex(o.name,"rule")==t?o.active=!0:o.active=!1}}}),cc._RF.pop()},{"./base/pop_base":"pop_base"}],frm_xiaoxi:[function(e,t,i){"use strict";cc._RF.push(t,"bec75xqhrtBArMNqIWWfwPG","frm_xiaoxi");var n=e("./base/pop_base"),o=e("../global/item_generator");function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function n(o,a){try{var c=t[o](a),s=c.value}catch(e){return void i(e)}if(!c.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}cc.Class({extends:n.pop_base,properties:{},onLoad:function(){},on_show:function(){this.getData()},on_hide:function(){},getData:function(){var e=this;cc.global.http.sendRequest("/zagame/getZaNotice.html",null,function(t){if(!t)return cc.global.util.tipMsg_connectErr(),void cc.global.util.closeAlert();cc.global.util.loadPrefab(cc.global.util.PREFAB_DATING_ITEM_URL+"xiaoxi_item",function(i){if(!i)return console.log("err: \u52a0\u8f7d\u9884\u5236\u8d44\u6e90\u5931\u8d25"),void cc.global.util.closeAlert();var n=cc.find("bg/titleList/view/content",e.node),o=t.data||[];e.showList(n,o,i)})})},showList:function(){var e=a(regeneratorRuntime.mark(function e(t,i,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.item_generator.getInstance().executePreFrame(o.item_generator.getInstance()._getItemGenerator(t,i,n,function(e,t){cc.find("label",e).getComponent(cc.Label).string=i[t].title,e.m_content=i[t].con}),8,this);case 2:this.switchTab(),cc.global.util.closeAlert();case 4:case"end":return e.stop()}},e,this)}));return function(t,i,n){return e.apply(this,arguments)}}(),switchTab:function(){for(var e=cc.find("bg/titleList/view/content",this.node),t="",i=0;i<e.childrenCount;i++)if(e.children[i].active&&e.children[i].getComponent(cc.Toggle).isChecked){t=e.children[i].m_content;break}cc.find("bg/scroll/view/content/label",this.node).getComponent(cc.Label).string=t}}),cc._RF.pop()},{"../global/item_generator":"item_generator","./base/pop_base":"pop_base"}],frm_zhanjiDetail:[function(e,t,i){"use strict";cc._RF.push(t,"6aeb8kMOt1J2LyVUhqglPdX","frm_zhanjiDetail");var n=e("./base/pop_base"),o=e("../global/NotificationNames"),a=e("../global/item_generator");function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function n(o,a){try{var c=t[o](a),s=c.value}catch(e){return void i(e)}if(!c.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}cc.Class({extends:n.pop_base,properties:{score_win_color:new cc.Color,score_lose_color:new cc.Color},onLoad:function(){this.list=cc.find("bg/scroll/view/content",this.node),this.eventList={},this.eventList[o.NotificationNames.GET_ROOM_CARD_GAME_LOG_DETAIL_PUSH]=this.getDataResp,this.eventList[o.NotificationNames.CIRCLE_RECORD_INFO_EVENT_PUSH]=this.getDataResp,this.eventList[o.NotificationNames.TEA_RECORDINFOEVENT_PUSH]=this.getDataResp},registerObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.on(e,this.eventList[e],this)},removeObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.off(e,this.eventList[e],this)},on_show:function(){if(this.registerObserver(),!this.ops||!this.ops.customData)return console.log("\u6218\u7ee9\u8be6\u60c5\u5f39\u7a97\u521d\u59cb\u5316\u5f02\u5e38,\u65e0\u6cd5\u83b7\u53d6\u6218\u7ee9\u7c7b\u578b"),void cc.global.util.tipMsg("\u53c2\u6570\u5f02\u5e38,\u8bf7\u91cd\u8bd5");this.type=this.ops.customData.type,this.user_id=this.ops.customData.user_id,this.gid=this.ops.customData.gid,this.roomType=this.ops.customData.roomType,this.room_no=this.ops.customData.room_no,this.room_id=this.ops.customData.room_id,this.getData()},on_hide:function(){this.removeObserver()},onCloseClick:function(){this.ops&&this.ops.closeSound&&cc.global.util.playSound("Sounds/sound_hall_close"),this.hide()},getData:function(){console.log("\u6218\u7ee9\u8be6\u60c5\u623f\u95f4id"+this.room_id),cc.global.util.showAlert("\u6b63\u5728\u52a0\u8f7d",!0);for(var e=0;e<this.list.childrenCount;e++)this.list.children[e].active=!1;"circle"==this.type||"circleOther"==this.type?cc.global.net.send("circleRecordInfoEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,circleCode:cc.global.util.circleUserinfo.circle_code,roomNo:this.room_no,gid:this.gid,roomId:this.room_id}):"tea"==this.type?cc.global.net.send("tea_recordInfoEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,teaInfoCode:cc.global.util.teaUserinfo.teaInfoCode,roomNo:this.room_no,roomId:this.room_id}):cc.global.net.send("getRoomCardGameLogDetail",{user_id:this.user_id,gid:this.gid,roomType:this.roomType,room_no:this.room_no,roomId:this.room_id})},getDataResp:function(e){var t=this;e?cc.global.util.loadPrefab(cc.global.util.PREFAB_DATING_ITEM_URL+"zhanjiDetail_item",function(i){if(!i)return console.log("err: \u52a0\u8f7d\u9884\u5236\u8d44\u6e90\u5931\u8d25"),void cc.global.util.closeAlert();var n=e.list||[];t.showList(t.list,n,i)}):(cc.global.util.tipMsg(cc.global.util.httpErr),cc.global.util.closeAlert())},showList:function(){var e=c(regeneratorRuntime.mark(function e(t,i,n){var o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.item_generator.getInstance().executePreFrame(a.item_generator.getInstance()._getItemGenerator(t,i,n,function(e,t){e.mTag=i[t].gamelog_id,cc.find("num",e).getComponent(cc.Label).string="\u7b2c"+(t+1)+"\u5c40";for(var n="",a=0;a<i[t].result.length;a++){var c=cc.find("players/player"+a,e);i[t].result[a].score<0?(cc.find("score",c).color=o.score_lose_color,n=""):(cc.find("score",c).color=o.score_win_color,n="+"),cc.find("name",c).getComponent(cc.Label).string=i[t].result[a].player,cc.find("score",c).getComponent(cc.Label).string=n+i[t].result[a].score,c.active=!0}for(var s=i[t].result.length;s<cc.find("players",e).childrenCount;s++)cc.find("players/player"+s,e).active=!1;3==o.gid||4==o.gid?(cc.find("play",e).m_playData={room_no:i[t].room_no,id:i[t].id,glog_id:i[t].gamelog_id||i[t].glog_id,gid:o.gid,createTime:i[t].createTime},cc.find("play",e).on("click",o.onPlayClick,o),cc.find("play",e).active=!0):cc.find("play",e).active=!1}),4,this);case 2:cc.find("bg/scroll",this.node).getComponent(cc.ScrollView).scrollToTop(.1),cc.find("bg/scroll",this.node).getComponent(cc.ScrollView).optDc(!0),cc.global.util.closeAlert();case 5:case"end":return e.stop()}},e,this)}));return function(t,i,n){return e.apply(this,arguments)}}(),onPlayClick:function(e){cc.global.util.playSound_buttonClick();var t=e.node.m_playData;cc.global.util.room_no=t.room_no;var i=t.glog_id,n=t.id,o=t.gid,a=t.createTime;cc.global.util.showAlert("\u6b63\u5728\u83b7\u53d6\u56de\u653e\u6570\u636e"),cc.global.http.sendRequest("/zagame/global/visitMJGameRoom.json",{gid:o,glog_id:i,room_no:cc.global.util.room_no,uid:cc.global.util.userinfo.id,visitCode:""},function(e){return e?0==e.code?(cc.global.util.closeAlert(),void cc.global.util.tipMsg(e.msg)):void(3==o?(cc.global.util.mjReplayData=e.data,cc.global.util.mjReplayData.glog_id=i,cc.global.util.mjReplayData.id=n,cc.global.util.mjReplayData.visitCode="",cc.director.loadScene("replay_mj")):4==o&&cc.global.pop_mgr.showFrm({name:"frm_sssReplay",customData:{data:e.data,createTime:a},showAnim:!1,showSound:!1,closeAnim:!1,closeSound:!0})):(cc.global.util.closeAlert(),void cc.global.util.tipMsg_connectErr())},null,!0)}}),cc._RF.pop()},{"../global/NotificationNames":"NotificationNames","../global/item_generator":"item_generator","./base/pop_base":"pop_base"}],frm_zhanji:[function(e,t,i){"use strict";cc._RF.push(t,"143ed2dT8NKzYuH83YvAzyD","frm_zhanji");var n=e("./base/pop_base"),o=e("../global/item_generator"),a=e("../global/NotificationNames");function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function n(o,a){try{var c=t[o](a),s=c.value}catch(e){return void i(e)}if(!c.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}cc.Class({extends:n.pop_base,properties:{club_leader_bg_dx:{default:0,type:cc.Integer,displayName:"\u724c\u53cb\u5708\u4f1a\u957f\u6218\u7ee9\u5f39\u7a97x\u504f\u79fb\u91cf"},score_win_color:new cc.Color,score_lose_color:new cc.Color,top_score_win_color:new cc.Color,top_score_lose_color:new cc.Color,pageSize:{type:cc.Integer,default:6,min:1,tooltip:"\u6bcf\u9875\u663e\u793a\u6761\u6570"},lastPageBtn:{type:cc.Button,default:null,tooltip:"\u4e0a\u4e00\u9875\u6309\u94ae"},nextPageBtn:{type:cc.Button,default:null,tooltip:"\u4e0b\u4e00\u9875\u6309\u94ae"},pageText:{type:cc.Label,default:null,tooltip:"\u9875\u7801label"}},onLoad:function(){this.eventList={},this.eventList[a.NotificationNames.GET_ROOM_CARD_GAME_LOG_LIST_PUSH]=this.getDataResp,this.eventList[a.NotificationNames.GET_GAME_LOGS_LIST_PUSH]=this.getDataResp,this.eventList[a.NotificationNames.GET_CLUB_GAME_LOG_LIST_PUSH]=this.getDataResp,this.eventList[a.NotificationNames.CIRCLE_RECORD_EVENT_PUSH]=this.getDataResp},showTheChekingData:function(){for(var e=cc.find("bg/scrollview/view/btns",this.node),t=0;t<e.childrenCount;t++)e.children[t].getComponent(cc.Toggle).isChecked="toggle3"==e.children[t].name;var i=cc.global.util.replayCustomData;cc.global.pop_mgr.showFrm({name:"frm_zhanjiDetail",customData:i})},registerObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.on(e,this.eventList[e],this)},removeObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.off(e,this.eventList[e],this)},on_show:function(){if(this.registerObserver(),!this.ops||!this.ops.customData)return console.log("\u6218\u7ee9\u5f39\u7a97\u521d\u59cb\u5316\u5f02\u5e38,\u65e0\u6cd5\u83b7\u53d6\u6218\u7ee9\u7c7b\u578b"),void cc.global.util.tipMsg("\u53c2\u6570\u5f02\u5e38,\u8bf7\u91cd\u8bd5");this.type=this.ops.customData.type,this.type&&""!=this.type||(console.log("\u6218\u7ee9type\u5f02\u5e38,\u6539\u4e3a\u9ed8\u8ba4\u503cfk"),this.type="fk"),this.pageIndex=0,this.pageCount=0,this.updatePage(),cc.find("bg/zj_fk_title",this.node).active=!1,cc.find("bg/zj_yb_title",this.node).active=!1,cc.find("bg/zj_club_title",this.node).active=!1,cc.find("bg/zj_circle_title",this.node).active=!1,cc.find("bg/zj_circleOther_title",this.node).active=!1,cc.find("bg/zj_"+this.type+"_title",this.node).active=!0;var e=new Date,t=e.getFullYear(),i=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,n=e.getDate()<10?"0"+e.getDate():e.getDate();cc.global.util.replayCustomData&&cc.global.util.showReplayCustomData?(cc.find("bg/page/label",this.node).getComponent(cc.Label).string=cc.global.util.replayCustomData.selectTime,this.showTheChekingData(),cc.global.util.showReplayCustomData=!1):cc.find("bg/page/label",this.node).getComponent(cc.Label).string=t+"-"+i+"-"+n,this.showOrHideDatePage(),this.selectAccount="",this.type&&"circle"==this.type?cc.find("bg/btn_zj_search_id",this.node).active=cc.global.util.circleUserinfo.is_admin&&1==cc.global.util.circleUserinfo.is_admin:cc.find("bg/btn_zj_search_id",this.node).active=!1,this.type&&"circle"==this.type||"circleOther"==this.type||"fk"==this.type?(cc.find("bg/person_tongji",this.node).active=!0,cc.find("bg/page",this.node).active=!0,cc.find("bg/page1",this.node).active=!0):(cc.find("bg/person_tongji",this.node).active=!1,cc.find("bg/page",this.node).active=!1,cc.find("bg/page1",this.node).active=!1),"club"==this.type&&1==this.ops.customData.isLeader?(cc.find("bg/zj_club_title/switch_all",this.node).active=!0,cc.find("bg/zj_club_title/switch_my",this.node).active=!0,cc.find("bg",this.node).x=this.club_leader_bg_dx):(cc.find("bg/zj_club_title/switch_all",this.node).active=!1,cc.find("bg/zj_club_title/switch_my",this.node).active=!1,cc.find("bg",this.node).x=0),this.switchGame()},on_hide:function(){this.removeObserver()},onCloseClick:function(){this.ops&&this.ops.closeSound&&cc.global.util.playSound("Sounds/sound_hall_close"),this.hide()},switchGame:function(e){var t=this;e&&cc.global.util.playSound_buttonClick();for(var i=cc.find("bg/scroll/view/content",this.node),n=0;n<i.childrenCount;n++)i.children[n].active=!1;cc.find("bg/tip",this.node).getComponent(cc.Label).string="\u6570\u636e\u52a0\u8f7d\u4e2d...",cc.find("bg/tip",this.node).active=!0,this.getData(function(e){e&&t.getDataResp(e,!0)})},getData:function(e){this.gid=-1;for(var t=cc.find("bg/scrollview/view/btns",this.node),i=0;i<t.childrenCount;i++)if(t.children[i].getComponent(cc.Toggle).isChecked){this.gid=cc.global.util.getNodeIndex(t.children[i].name,"toggle");break}if(-1==this.gid)return console.log("\u6218\u7ee9\u83b7\u53d6\u5931\u8d25,gid\u5f02\u5e38"),cc.global.util.tipMsg("\u53c2\u6570\u5f02\u5e38,\u8bf7\u91cd\u8bd5"),void(e&&e(null));this.club_suf="";var n=cc.find("bg/zj_club_title/switch_all",this.node);if(n.active&&n.getComponent(cc.Toggle).isChecked&&(this.club_suf="_all"),this["cacheData_"+this.type+"_"+this.gid+this.club_suf]&&Date.now()-this["cacheTime_"+this.type+"_"+this.gid+"_"+cc.find("bg/page/label",this.node).getComponent(cc.Label).string+this.club_suf]<15e3)e&&e(this["cacheData_"+this.type+"_"+this.gid+"_"+cc.find("bg/page/label",this.node).getComponent(cc.Label).string+this.club_suf]);else{var o=cc.find("bg/page/label",this.node).getComponent(cc.Label).string;switch(console.log("\u8bf7\u6c42\u6218\u7ee9\u6570\u636e:"+o),this.type){case"fk":cc.global.net.send("getRoomCardGameLogList",{gid:this.gid,user_id:cc.global.util.userinfo.id,roomType:0,time:o,pageIndex:this.pageIndex||1,pageSize:this.pageSize});break;case"yb":cc.global.net.send("getGameLogsList",{gid:this.gid,id:cc.global.util.userinfo.id});break;case"club":""!=this.club_suf?cc.global.net.send("getClubGameLogList",{gid:this.gid,user_id:cc.global.util.userinfo.id,roomType:6,clubCode:this.ops.customData.clubCode}):cc.global.net.send("getRoomCardGameLogList",{gid:this.gid,user_id:cc.global.util.userinfo.id,roomType:6,clubCode:this.ops.customData.clubCode});break;case"circle":this.selectAccount&&""!=this.selectAccount?(console.log("\u67e5\u8be2\u6307\u5b9a\u73a9\u5bb6["+this.selectAccount+"]\u6218\u7ee9"),cc.global.net.send("circleRecordEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,gameId:this.gid,circleCode:cc.global.util.circleUserinfo.circle_code,time:o,userId:this.selectAccount,pageIndex:this.pageIndex||1,pageSize:this.pageSize})):(console.log("\u67e5\u8be2\u6240\u6709\u73a9\u5bb6\u6218\u7ee9"),cc.global.net.send("circleRecordEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,gameId:this.gid,circleCode:cc.global.util.circleUserinfo.circle_code,time:o,pageIndex:this.pageIndex||1,pageSize:this.pageSize}));break;case"circleOther":console.log("\u67e5\u8be2\u5176\u4ed6\u73a9\u5bb6["+this.ops.customData.account+"]\u6218\u7ee9"),cc.global.net.send("circleRecordEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,gameId:this.gid,circleCode:cc.global.util.circleUserinfo.circle_code,userId:this.ops.customData.account,time:o,pageIndex:this.pageIndex||1,pageSize:this.pageSize})}e&&e(null)}},getDataResp:function(e,t){var i=this;if(console.log("getData",e),!e)return cc.global.util.tipMsg_connectErr(),cc.find("bg/tip",this.node).getComponent(cc.Label).string="\xb7 \u6682\u65e0\u6570\u636e \xb7",void(cc.find("bg/tip",this.node).active=!0);if(this.pageIndex>0&&e.pageIndex!=this.pageIndex&&2!=e.code)return console.log("\u8fd4\u56de\u6570\u636e\u9875\u7801\u9519\u8bef,\u5f53\u524d\u9875\u7801\u4e3a:"+this.pageIndex),void cc.global.util.closeAlert();if(this.pageIndex=e.pageIndex?e.pageIndex:0,this.pageCount=e.totalPage?e.totalPage:0,this.totalCount=e.totalCount?e.totalCount:0,this.updatePage(),this.pageIndex>this.pageCount&&this.pageCount>0)return this.pageIndex=this.pageCount,void this.switchGame();if(2==e.code)return cc.find("bg/person_tongji",this.node).active=!1,cc.find("bg/tip",this.node).getComponent(cc.Label).string="\u73a9\u5bb6\u4e0d\u5b58\u5728\uff0c\u8bf7\u68c0\u67e5\u8f93\u5165ID\u662f\u5426\u6b63\u786e",void(cc.find("bg/tip",this.node).active=!0);this.type&&"circle"==this.type||"circleOther"==this.type?(cc.find("bg/person_tongji",this.node).active=!0,cc.find("bg/person_tongji/now_score/title",this.node).getComponent(cc.Label).string="\u5f53\u524d\u4f53\u529b"):this.type&&"fk"==this.type?(cc.find("bg/person_tongji",this.node).active=!0,cc.find("bg/person_tongji/now_score/title",this.node).getComponent(cc.Label).string="\u5f53\u524d\u623f\u5361"):cc.find("bg/person_tongji",this.node).active=!1,cc.find("bg/person_tongji/name",this.node).getComponent(cc.Label).string=e.nickName?e.nickName:"",cc.find("bg/person_tongji/now_score/lb",this.node).getComponent(cc.Label).string=e.userHp?e.userHp:e.roomCard?e.roomCard:"\u6682\u65e0\u6570\u636e",cc.find("bg/person_tongji/zongchangci/lb",this.node).getComponent(cc.Label).string=e.totalNumber?e.totalNumber:"\u6682\u65e0\u6570\u636e",cc.find("bg/person_tongji/zongdefen/lb",this.node).getComponent(cc.Label).string=e.totalScore?parseFloat(e.totalScore):"\u6682\u65e0\u6570\u636e",cc.find("bg/person_tongji/dyj_zongchangci/lb",this.node).getComponent(cc.Label).string=e.bigWinnerCount?e.bigWinnerCount:"\u6682\u65e0\u6570\u636e",cc.find("bg/person_tongji/dyj_zongdefen/lb",this.node).getComponent(cc.Label).string=e.bigWinnerScore?parseFloat(e.bigWinnerScore):"\u6682\u65e0\u6570\u636e";var n=cc.find("bg/person_tongji/head/sp",this.node),o=e.headimg;if(o&&(n.m_headimg&&n.m_headimg==o||(n.getComponent(cc.Sprite).spriteFrame=null,cc.global.util.setHeadimg(n,o,!1,function(){n.m_headimg=o}))),0==e.code)return cc.find("bg/tip",this.node).getComponent(cc.Label).string="\xb7 \u6682\u65e0\u6570\u636e \xb7",void(cc.find("bg/tip",this.node).active=!0);e.gid==this.gid?(t||(this["cacheData_"+this.type+"_"+this.gid+"_"+cc.find("bg/page/label",this.node).getComponent(cc.Label).string+this.club_suf]=e,this["cacheTime_"+this.type+"_"+this.gid+"_"+cc.find("bg/page/label",this.node).getComponent(cc.Label).string+this.club_suf]=Date.now()),cc.global.util.showAlert("\u6b63\u5728\u52a0\u8f7d",!0),cc.global.util.loadPrefab(cc.global.util.PREFAB_DATING_ITEM_URL+"zhanji_item",function(t){if(!t)return console.log("err: \u52a0\u8f7d\u9884\u5236\u8d44\u6e90\u5931\u8d25"),void cc.global.util.closeAlert();var n=cc.find("bg/scroll/view/content",i.node),o=e.data;o&&o.length>0?(cc.find("bg/tip",i.node).active=!1,i.showList(n,o,t)):(cc.find("bg/tip",i.node).getComponent(cc.Label).string="\xb7 \u6682\u65e0\u6570\u636e \xb7",cc.find("bg/tip",i.node).active=!0,cc.global.util.closeAlert())})):console.log("\u83b7\u53d6\u6218\u7ee9\u5f02\u5e38: gid="+e.gid)},showList:function(){var e=c(regeneratorRuntime.mark(function e(t,i,n){var a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.item_generator.getInstance().executePreFrame(o.item_generator.getInstance()._getItemGenerator(t,i,n,function(e,t){cc.find("info/num",e).getComponent(cc.Label).string=t+1,i[t].createTime=i[t].createTime||i[t].createtime,i[t].playermap=i[t].playermap||i[t].result,cc.find("info/room_no",e).getComponent(cc.Label).string=i[t].room_no,cc.find("info/time",e).getComponent(cc.Label).string=i[t].createTime;for(var n=cc.find("roomType",e),o=0;o<n.childrenCount;o++)n.children[o].name=="roomType"+i[t].room_type?n.children[o].active=!0:n.children[o].active=!1;for(var c=cc.find("info/top",e),s=null,l=!1,r="",g=0;g<i[t].playermap.length;g++)s=cc.find("players/player"+g,e),l=!1,"club"==a.type&&a.club_suf,0==g&&(l=!0),l?(i[t].playermap[g].score<0?(cc.find("score",c).color=a.top_score_lose_color,r=""):(cc.find("score",c).color=a.top_score_win_color,r="+"),cc.find("name",c).getComponent(cc.Label).string=i[t].playermap[g].player||i[t].playermap[g].name?i[t].playermap[g].player||i[t].playermap[g].name:"",cc.find("score",c).getComponent(cc.Label).string=r+i[t].playermap[g].score,a.getShowCutPermission(i[t].playermap[g])?(cc.find("xiaohao",c).active=!0,cc.find("xiaohao",c).getComponent(cc.Label).string=i[t].playermap[g].cutScore):cc.find("xiaohao",c).active=!1,s.active=!1):(i[t].playermap[g].score<0?(cc.find("score",s).color=a.score_lose_color,r=""):(cc.find("score",s).color=a.score_win_color,r="+"),cc.find("name",s).getComponent(cc.Label).string=i[t].playermap[g].player||i[t].playermap[g].name?i[t].playermap[g].player||i[t].playermap[g].name:"",cc.find("score",s).getComponent(cc.Label).string=r+i[t].playermap[g].score,a.getShowCutPermission(i[t].playermap[g])?(cc.find("xiaohao",s).active=!0,cc.find("xiaohao",s).getComponent(cc.Label).string=i[t].playermap[g].cutScore):cc.find("xiaohao",s).active=!1,s.active=!0);for(var h=i[t].playermap.length;h<cc.find("players",e).childrenCount;h++)cc.find("players/player"+h,e).active=!1;e.m_roomNo=i[t].room_no,e.m_roomId=i[t].room_id,e.m_userId=i[t].userId,3!=a.gid||"yb"!=a.type&&8!=i[t].room_type?cc.find("info/play",e).active=!1:(cc.find("info/play",e).m_playData={room_no:i[t].room_no,id:i[t].id,glog_id:i[t].glog_id,gid:a.gid},cc.find("info/play",e).on("click",a.onPlayClick,a),cc.find("info/play",e).active=!0),"fk"==a.type||"club"==a.type||9==i[t].room_type?(e.on("click",a.showZhanjiDetail,a),e.getComponent(cc.Button).interactable=!0):e.getComponent(cc.Button).interactable=!1}),4,this);case 2:cc.find("bg/scroll",this.node).getComponent(cc.ScrollView).scrollToTop(.1),cc.find("bg/scroll",this.node).getComponent(cc.ScrollView).optDc(!0),cc.global.util.closeAlert();case 5:case"end":return e.stop()}},e,this)}));return function(t,i,n){return e.apply(this,arguments)}}(),getShowCutPermission:function(e){if(e&&e.cutType&&(1==e.cutType||2==e.cutType||3==e.cutType||4==e.cutType||5==e.cutType)){var t=cc.global.util.circleUserinfo;if(t&&("1"==t.is_admin||"1"==t.user_role))return!0}return!1},onPlayClick:function(e){cc.global.util.playSound_buttonClick();var t=e.node.m_playData;cc.global.util.room_no=t.room_no;var i=t.glog_id,n=t.id,o=t.gid;cc.global.util.showAlert("\u6b63\u5728\u83b7\u53d6\u56de\u653e\u6570\u636e"),cc.global.http.sendRequest("/zagame/global/visitMJGameRoom.json",{gid:o,glog_id:i,room_no:cc.global.util.room_no,uid:cc.global.util.userinfo.id,visitCode:""},function(e){return e?0==e.code?(cc.global.util.closeAlert(),void cc.global.util.tipMsg(e.msg)):void(3==o&&(cc.global.util.mjReplayData=e.data,cc.global.util.mjReplayData.glog_id=i,cc.global.util.mjReplayData.id=n,cc.global.util.mjReplayData.visitCode="",cc.director.loadScene("replay_mj"))):(cc.global.util.closeAlert(),void cc.global.util.tipMsg_connectErr())},null,!0)},showZhanjiDetail:function(e){console.trace(),console.log("\u6253\u5f00\u5f39\u7a97:frm_zhanjiDetail");var t=0;"club"==this.type&&(t=6);var i={type:this.type,user_id:e.target.m_userId,gid:this.gid,roomType:t,room_no:e.target.m_roomNo,room_id:e.target.m_roomId,selectTime:cc.find("bg/page/label",this.node).getComponent(cc.Label).string};cc.global.util.replayCustomData=i,cc.global.pop_mgr.showFrm({name:"frm_zhanjiDetail",customData:i})},addDate:function(){cc.global.util.playSound_buttonClick();var e=new Date(cc.find("bg/page/label",this.node).getComponent(cc.Label).string);e.setDate(e.getDate()+1);var t=e.getFullYear(),i=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,n=e.getDate()<10?"0"+e.getDate():e.getDate();cc.find("bg/page/label",this.node).getComponent(cc.Label).string=t+"-"+i+"-"+n,this.showOrHideDatePage(),this.switchGame()},minusDate:function(){cc.global.util.playSound_buttonClick();var e=new Date(cc.find("bg/page/label",this.node).getComponent(cc.Label).string);e.setDate(e.getDate()-1);var t=e.getFullYear(),i=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,n=e.getDate()<10?"0"+e.getDate():e.getDate();cc.find("bg/page/label",this.node).getComponent(cc.Label).string=t+"-"+i+"-"+n,this.showOrHideDatePage(),this.switchGame()},showOrHideDatePage:function(){var e=new Date(cc.find("bg/page/label",this.node).getComponent(cc.Label).string),t=new Date,i=t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate()),n=(e-new Date(i))/864e5;cc.find("bg/page/btn_nextPage",this.node).active=n<0,cc.find("bg/page/btn_lastPage",this.node).active=n>-2},searchUserGameLog:function(){cc.global.util.playSound_buttonClick(),cc.global.pop_mgr.showFrm({name:"frm_input",customData:{type:"str",maxLength:9,defNum:"",placeholder:"\u8bf7\u8f93\u5165\u73a9\u5bb6ID",inputOver:this.inputOver_searchUserGameLog,label:null,target:this,title:"searchCircleMember",showHead:!1,isAutoOver:!1,isShowOk:!0,closeWhenInputOver:!0}})},inputOver_searchUserGameLog:function(e,t,i){i.selectAccount=t,i.switchGame()},changePage:function(e,t){if(cc.global.util.playSound_buttonClick(),"next"==t){if(this.pageIndex>=this.pageCount)return void cc.global.util.tipMsg("\u5df2\u7ecf\u662f\u6700\u540e\u4e00\u9875\u4e86!");this.pageIndex++}else if("last"==t){if(this.pageIndex<=1)return void cc.global.util.tipMsg("\u5df2\u7ecf\u662f\u7b2c\u4e00\u9875\u4e86!");this.pageIndex--}else parseInt(t)>this.pageCount?this.pageIndex=this.pageCount:parseInt(t)<1?this.pageIndex=1:this.pageIndex=parseInt(t);this.updatePage(),this.switchGame()},updatePage:function(){0==this.pageCount&&(this.pageIndex=0),this.pageText.string=this.pageIndex+"/"+this.pageCount,this.pageIndex<=1?this.lastPageBtn.interactable=!1:this.lastPageBtn.interactable||(this.lastPageBtn.interactable=!0),this.pageIndex>=this.pageCount?this.nextPageBtn.interactable=!1:this.nextPageBtn.interactable||(this.nextPageBtn.interactable=!0)}}),cc._RF.pop()},{"../global/NotificationNames":"NotificationNames","../global/item_generator":"item_generator","./base/pop_base":"pop_base"}],gameMoneyIcon:[function(e,t,i){"use strict";cc._RF.push(t,"ebe38MXYYNCBaxPqpsaydsN","gameMoneyIcon"),cc.Class({extends:cc.Component,properties:{sp:cc.Node,ic_roomcard:cc.SpriteFrame,ic_coins:cc.SpriteFrame,ic_score:cc.SpriteFrame,ic_yuanbao:cc.SpriteFrame,ic_hp:cc.SpriteFrame},start:function(){this.updateIcon()},updateIcon:function(e,t,i){if(t=void 0==t?cc.global.room._roomData.roomType:t,!i||0==i.length)switch(i="score",t){case 1:i="coins";break;case 3:i="yuanbao";break;case 8:case 9:i="hp"}this.sp||(this.sp=cc.find("sp",this.node)),e&&(this.sp.width=this.sp.height=e),this.sp.getComponent(cc.Sprite).spriteFrame=this["ic_"+i]}}),cc._RF.pop()},{}],game:[function(e,t,i){"use strict";cc._RF.push(t,"7b93d+Vhd5KT4iK92XvlhJk","game");var n=e("./NotificationNames");cc.Class({extends:cc.Component,properties:{gid:-1,_dispatchEventHandel:null,eventList:null},initHandle:function(){var e=this;this.initHandle_hall(),this.initHandle_circle(),this.initHandle_tea(),this.initHandle_sss(),this.initHandle_mj(),this.initHandle_pdk2(),this.initHandle_nn(),cc.global.net.addHandler("sendMsgEventPush",function(t){console.log("\u6536\u5230\u6d88\u606f:"+JSON.stringify(t)),null!=e._dispatchEventHandel&&e._dispatchEventHandel.emit("sendMsgEvent",t)}),cc.global.net.addHandler("tipMsgPush",function(t){console.log("\u6d88\u606f\u63d0\u793a,\u5185\u5bb9\u4e3a:"+JSON.stringify(t)),null!=e._dispatchEventHandel&&e._dispatchEventHandel.emit("tipMsg",t)}),cc.global.net.addHandler("getMessagePush",function(t){console.log("\u6eda\u52a8\u516c\u544a,\u5185\u5bb9\u4e3a:"+JSON.stringify(t)),1==t.type?null!=e._dispatchEventHandel&&e._dispatchEventHandel.emit("getMessagePush",t):e.dispatchEvent("getMessagePush",t)});var t=!1;cc.game.on(cc.game.EVENT_HIDE,function(){console.log("\u6e38\u620f\u8fdb\u5165\u540e\u53f0!!!"),t=!0}),cc.game.on(cc.game.EVENT_SHOW,function(){console.log("\u91cd\u65b0\u56de\u5230\u6e38\u620f!!!"),t&&(cc.Canvas.instance.node.getComponent("hall_shisanshui")?cc.Canvas.instance.node.getComponent("hall_shisanshui").returnGame():cc.Canvas.instance.node.getComponent("mjgame")&&cc.Canvas.instance.node.getComponent("mjgame").returnGame(),t=!1)})},initHandle_hall:function(){var e=this;cc.global.net.addHandler("checkUserPush",function(t){console.log("\u68c0\u6d4b\u662f\u5426\u5728\u623f\u95f4\u5185:"+JSON.stringify(t)),null!=e._dispatchEventHandel&&e._dispatchEventHandel.emit("checkUserPush",t)}),cc.global.net.addHandler("getAllRoomListPush",function(e){console.log("\u83b7\u53d6\u5143\u5b9d\u573a\u623f\u95f4\u5217\u8868:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.GET_ALL_ROOM_LIST_PUSH,e)}),cc.global.net.addHandler("getGameSettingPush",function(e){console.log("\u83b7\u53d6\u6e38\u620f\u623f\u95f4\u9009\u9879:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.GET_GAME_SETTING_PUSH,e)}),cc.global.net.addHandler("getGameLogsListPush",function(e){console.log("\u6218\u7ee9:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.GET_GAME_LOGS_LIST_PUSH,e)}),cc.global.net.addHandler("getUserInfoPush",function(t){console.log("\u5237\u65b0\u7528\u6237\u4fe1\u606f:"+JSON.stringify(t)),null!=e._dispatchEventHandel&&e._dispatchEventHandel.emit("getUserInfoPush",t)}),cc.global.net.addHandler("getRoomCardPayInfoPush",function(e){console.log("\u5237\u65b0\u623f\u5361\u4fe1\u606f:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.GET_ROOM_CARD_PAY_INFO_PUSH,e)}),cc.global.net.addHandler("getGameGoldSettingPush",function(t){console.log("\u83b7\u53d6\u91d1\u5e01\u573a\u6b21\u4fe1\u606f:"+JSON.stringify(t)),null!=e._dispatchEventHandel&&e._dispatchEventHandel.emit("getGameGoldSettingPush",t)}),cc.global.net.addHandler("getArenaPush",function(t){console.log("\u83b7\u53d6\u7ade\u6280\u573a\u573a\u6b21\u4fe1\u606f:"+JSON.stringify(t)),null!=e._dispatchEventHandel&&e._dispatchEventHandel.emit("getArenaPush",t)}),cc.global.net.addHandler("getRoomCardGameLogListPush",function(e){console.log("\u623f\u5361\u6218\u7ee9:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.GET_ROOM_CARD_GAME_LOG_LIST_PUSH,e)}),cc.global.net.addHandler("getRoomCardGameLogDetailPush",function(e){console.log("\u6218\u7ee9\u8be6\u60c5:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.GET_ROOM_CARD_GAME_LOG_DETAIL_PUSH,e)}),cc.global.net.addHandler("checkSignInPush",function(t){console.log("\u5224\u65ad\u663e\u793a\u7b7e\u5230\u5f39\u7a97:"+JSON.stringify(t)),null!=e._dispatchEventHandel&&e._dispatchEventHandel.emit("checkSignInPush",t)}),cc.global.net.addHandler("userSignInPush",function(t){console.log("\u6267\u884c\u7b7e\u5230:"+JSON.stringify(t)),null!=e._dispatchEventHandel&&e._dispatchEventHandel.emit("userSignInPush",t)}),cc.global.net.addHandler("checkBindStatusPush",function(e){console.log("\u68c0\u6d4b\u624b\u673a\u7ed1\u5b9a\u72b6\u6001:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.CHECK_BIND_STATUS_PUSH,e)}),cc.global.net.addHandler("userBindPush",function(e){console.log("\u7ed1\u5b9a\u624b\u673a:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.USER_BIND_PUSH,e)}),cc.global.net.addHandler("getMyClubListPush",function(e){console.log("\u83b7\u53d6\u724c\u53cb\u5708\u5217\u8868:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.GET_MY_CLUB_LIST_PUSH,e)}),cc.global.net.addHandler("getClubMembersPush",function(e){console.log("\u83b7\u53d6\u6210\u5458\u5217\u8868:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.GET_CLUB_MEMBERS_PUSH,e)}),cc.global.net.addHandler("getClubSettingPush",function(e){console.log("\u83b7\u53d6\u724c\u53cb\u5708\u8bbe\u7f6e:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.GET_CLUB_SETTING_PUSH,e)}),cc.global.net.addHandler("changeClubSettingPush",function(e){console.log("\u66f4\u6539\u724c\u53cb\u5708\u8bbe\u7f6e:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.CHANGE_CLUB_SETTING_PUSH,e)}),cc.global.net.addHandler("exitClubPush",function(e){console.log("\u9000\u51fa\u724c\u53cb\u5708:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.EXIT_CLUB_PUSH,e)}),cc.global.net.addHandler("toTopPush",function(e){console.log("\u7f6e\u9876\u724c\u53cb\u5708:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TO_TOP_PUSH,e)}),cc.global.net.addHandler("refreshClubInfoPush",function(e){console.log("\u5237\u65b0\u724c\u53cb\u5708\u4fe1\u606f:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.REFRESH_CLUB_INFO_PUSH,e)}),cc.global.net.addHandler("quickJoinClubRoomPush",function(t){console.log("\u724c\u53cb\u5708\u521b\u5efa\u52a0\u5165\u7ed3\u679c:"+JSON.stringify(t)),null!=e._dispatchEventHandel&&e._dispatchEventHandel.emit("quickJoinClubRoomPush",t)}),cc.global.net.addHandler("getClubGameLogListPush",function(e){console.log("\u724c\u53cb\u5708\u6210\u5458\u6218\u7ee9:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.GET_CLUB_GAME_LOG_LIST_PUSH,e)}),cc.global.net.addHandler("clubLeaderInvitePush",function(e){console.log("\u724c\u53cb\u5708\u9080\u8bf7:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.CLUB_LEADER_INVITE_PUSH,e)}),cc.global.net.addHandler("getClubApplyListPush",function(e){console.log("\u724c\u53cb\u5708\u5ba1\u6279\u5217\u8868:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.GET_CLUB_APPLY_LIST_PUSH,e)}),cc.global.net.addHandler("clubApplyReviewPush",function(e){console.log("\u724c\u53cb\u5708\u5ba1\u6279:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.CLUB_APPLY_REVIEW_PUSH,e)}),cc.global.net.addHandler("clubLeaderOutPush",function(e){console.log("\u724c\u53cb\u5708\u8e22\u51fa:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.CLUB_LEADER_OUT_PUSH,e)})},initHandle_circle:function(){cc.global.net.addHandler(n.NotificationNames.CIRCLE_LIST_EVENT_PUSH,function(e){console.log("\u4eb2\u53cb\u5708\u5217\u8868:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.CIRCLE_LIST_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.CREATE_MODIFY_CIRCLE_EVENT_PUSH,function(e){console.log("\u521b\u5efa\u4eb2\u53cb\u5708\u6216\u66f4\u6539\u8bbe\u7f6e:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.CREATE_MODIFY_CIRCLE_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.OFFLINECIRCLE_EVENT_PUSH,function(e){console.log("\u73a9\u5bb6\u79bb\u5f00\u4eb2\u53cb\u5708:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.OFFLINECIRCLE_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.CIRCLE_GENERAL_JOIN_EXIT_EVENT_PUSH,function(e){console.log("\u4eb2\u53cb\u5708\u7533\u8bf7\u52a0\u5165\u6216\u9000\u51fa:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.CIRCLE_GENERAL_JOIN_EXIT_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.CIRCLE_MEMBER_LIST_EVENT_PUSH,function(e){console.log("\u4eb2\u53cb\u5708\u6210\u5458\u5217\u8868:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.CIRCLE_MEMBER_LIST_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.CIRCLE_PARTNER_LIST_EVENT_PUSH,function(e){console.log("\u4eb2\u53cb\u5708\u5408\u4f19\u4eba\u5217\u8868:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.CIRCLE_PARTNER_LIST_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.MEMBER_DETAIL_INFO_EVENT_PUSH,function(e){console.log("\u4eb2\u53cb\u5708\u6210\u5458\u8be6\u7ec6\u4fe1\u606f:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.MEMBER_DETAIL_INFO_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.ADD_CIRCLE_MEMBER_EVENT_PUSH,function(e){console.log("\u7ba1\u7406\u5458\u6dfb\u52a0\u6210\u5458:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.ADD_CIRCLE_MEMBER_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.MGR_SETTING_CIRCLE_EVENT_PUSH,function(e){console.log("\u8bbe\u7f6e\u7ba1\u7406\u5458\u6216\u4fee\u6539\u5206\u6da6:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.MGR_SETTING_CIRCLE_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.CIRCLE_BLACK_LIST_EVENT_PUSH,function(e){console.log("\u8bbe\u7f6e\u9ed1\u540d\u5355:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.CIRCLE_BLACK_LIST_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.CIRCLE_DEL_MEMBER_EVENT_PUSH,function(e){console.log("\u5220\u9664\u6210\u5458\u6216\u5220\u9664\u5408\u4f19\u4eba:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.CIRCLE_DEL_MEMBER_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.CIRCLE_PARTNER_ADD_EVENT_PUSH,function(e){console.log("\u6dfb\u52a0\u5408\u4f19\u4eba:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.CIRCLE_PARTNER_ADD_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.CIRCLE_MODIFY_STRENTH_EVENT_PUSH,function(e){console.log("\u589e\u51cf\u4f53\u529b:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.CIRCLE_MODIFY_STRENTH_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.CIRCLE_STRENTH_LOG_EVENT_PUSH,function(e){console.log("\u4f53\u529b\u65e5\u5fd7:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.CIRCLE_STRENTH_LOG_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.HISTORY_HP_CHANGE_BY_OPERATE_EVENT_PUSH,function(e){console.log("\u5386\u53f2\u4f53\u529b\u64cd\u4f5c\u8bb0\u5f55:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.HISTORY_HP_CHANGE_BY_OPERATE_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.CIRCLE_SYS_GLOBAL_EVENT_PUSH,function(e){console.log("\u83b7\u53d6\u4eb2\u53cb\u5708\u5168\u5c40\u53c2\u6570:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.CIRCLE_SYS_GLOBAL_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.CIRCLE_GET_PROFIT_BALANCE_TO_HP_EVENT_PUSH,function(e){console.log("\u63d0\u53d6\u4f59\u989d\u5230\u4f53\u529b\u503c:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.CIRCLE_GET_PROFIT_BALANCE_TO_HP_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.CIRCLE_FUND_SAVE_PAY_EVENT_PUSH,function(e){console.log("\u57fa\u91d1\u8f6c\u5165\u8f6c\u51fa:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.CIRCLE_FUND_SAVE_PAY_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.CIRCLE_FUND_BILL_DETAIL_EVENT_PUSH,function(e){console.log("\u57fa\u91d1\u8d26\u5355\u660e\u7ec6:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.CIRCLE_FUND_BILL_DETAIL_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.CIRCLE_ROOM_LIST_EVENT_PUSH,function(e){console.log("\u4eb2\u53cb\u5708\u623f\u95f4\u5217\u8868:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.CIRCLE_ROOM_LIST_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.CIRCLE_EXAM_MSG_INFO_EVENT_PUSH,function(e){console.log("\u4eb2\u53cb\u5708\u6d88\u606f\u5217\u8868:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.CIRCLE_EXAM_MSG_INFO_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.CIRCLE_MBR_ADD_EXIT_EXAM_EVENT_PUSH,function(e){console.log("\u5ba1\u6838\u7ed3\u679c:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.CIRCLE_MBR_ADD_EXIT_EXAM_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.DISMISS_CIRCLE_EVENT_PUSH,function(e){console.log("\u89e3\u6563\u4eb2\u53cb\u5708:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.DISMISS_CIRCLE_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TRANSFER_CIRCLE_EVENT_PUSH,function(e){console.log("\u4eb2\u53cb\u5708\u8f6c\u8ba9:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TRANSFER_CIRCLE_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.CIRCLE_MSG_REMAIN_EVENT_PUSH,function(e){console.log("\u6d88\u606f\u63d0\u9192\u63a5\u53e3:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.CIRCLE_MSG_REMAIN_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.CIRCLE_RECORD_EVENT_PUSH,function(e){console.log("\u4eb2\u53cb\u5708\u6218\u7ee9\u56de\u8c03:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.CIRCLE_RECORD_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.CIRCLE_RECORD_INFO_EVENT_PUSH,function(e){console.log("\u4eb2\u53cb\u5708\u6218\u7ee9\u8be6\u60c5\u56de\u8c03:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.CIRCLE_RECORD_INFO_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.QUICK_JOIN_ROOM_CIRCLE_EVENT_PUSH,function(e){console.log("\u4eb2\u53cb\u5708\u521b\u5efa\u623f\u95f4\u56de\u8c03:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.QUICK_JOIN_ROOM_CIRCLE_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.REMOVE_ROOM_CIRCLE_EVENT_PUSH,function(e){console.log("\u4eb2\u53cb\u5708\u89e3\u6563\u623f\u95f4\u56de\u8c03:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.REMOVE_ROOM_CIRCLE_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.RESTART_LOGIN_PUSH,function(e){console.log("token\u8d85\u65f6:"+JSON.stringify(e)),cc.global.util.restartLogin("\u8be5\u8d26\u53f7\u5df2\u5728\u5176\u4ed6\u5730\u65b9\u767b\u9646,\u8bf7\u91cd\u65b0\u767b\u9646")}),cc.global.net.addHandler(n.NotificationNames.QUICK_ENTRY_ROOM_CIRCLE_EVENT_PUSH,function(e){console.log("\u4eb2\u53cb\u5708\u5feb\u901f\u5f00\u59cb:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.QUICK_ENTRY_ROOM_CIRCLE_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.RESET_PARTNER_EVENT_PUSH,function(e){console.log("\u4eb2\u53cb\u5708\u91cd\u7f6e\u5408\u4f19\u4eba:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.RESET_PARTNER_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.READ_MESSAGE_EVENT_PUSH,function(e){console.log("\u8bfb\u53d6\u5ba1\u6838\u4fe1\u606f:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.READ_MESSAGE_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.CIRCLE_VISIT_JOIN_ROOM_EVENT_PUSH,function(e){console.log("\u89c2\u6218:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.CIRCLE_VISIT_JOIN_ROOM_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.CIRCLE_VISIT_LIST_EVENT_PUSH,function(e){console.log("\u89c2\u6218\u73a9\u5bb6\u5217\u8868:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.CIRCLE_VISIT_LIST_EVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.CIRCLE_VISIT_JOIN_GAME_EVENT_PUSH,function(e){console.log("\u89c2\u6218\u7528\u6237\u5750\u4e0b:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.CIRCLE_VISIT_JOIN_GAME_EVENT_PUSH,e)})},initHandle_tea:function(){cc.global.net.addHandler(n.NotificationNames.TEA_LISTEVENT_PUSH,function(e){console.log("\u8336\u697c\u5217\u8868:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_LISTEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_CREATOREVENT_PUSH,function(e){console.log("\u521b\u5efa\u8336\u697c:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_CREATOREVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_JOINEVENT_PUSH,function(e){console.log("\u52a0\u5165\u8336\u697c:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_JOINEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_MODIFYNAMEEVENT_PUSH,function(e){console.log("\u4fee\u6539\u8336\u697c\u540d\u79f0:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_MODIFYNAMEEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_MODIFYPLAYEVENT_PUSH,function(e){console.log("\u4fee\u6539\u8336\u697c\u73a9\u6cd5:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_MODIFYPLAYEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_ADDMEMBEREVENT_PUSH,function(e){console.log("\u8336\u697c\u6dfb\u52a0\u6210\u5458:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_ADDMEMBEREVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_IMPORTMEMBERLISTEVENT_PUSH,function(e){console.log("\u8336\u697c\u83b7\u53d6\u53ef\u6210\u5458\u5bfc\u5165\u8336\u697c\u5217\u8868:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_IMPORTMEMBERLISTEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_IMPORTMEMBEREVENT_PUSH,function(e){console.log("\u5bfc\u5165\u6210\u5458:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_IMPORTMEMBEREVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_CLOSESEVENT_PUSH,function(e){console.log("\u8336\u697c\u6253\u70ca:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_CLOSESEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_REMOVEEVENT_PUSH,function(e){console.log("\u8336\u697c\u9500\u6bc1:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_REMOVEEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_MEMBERLISTEVENT_PUSH,function(e){console.log("\u8336\u697c\u6210\u5458\u5217\u8868:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_MEMBERLISTEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_AUDITMEMBEREVENT_PUSH,function(e){console.log("\u8336\u697c\u5ba1\u6838\u6210\u5458:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_AUDITMEMBEREVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_AUDITMEMBERLISTEVENT_PUSH,function(e){console.log("\u8336\u697c\u5ba1\u6838\u6210\u5458\u5217\u8868:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_AUDITMEMBERLISTEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_EXITINFOLISTEVENT_PUSH,function(e){console.log("\u8336\u697c\u9000\u7fa4\u901a\u77e5\u5217\u8868:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_EXITINFOLISTEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_ADMINLISTEVENT_PUSH,function(e){console.log("\u8336\u697c\u7ba1\u7406\u5458\u5217\u8868:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_ADMINLISTEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_MODIFYADMINEVENT_PUSH,function(e){console.log("\u8336\u697c\u7ba1\u7406\u5458\u4fee\u6539:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_MODIFYADMINEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_MYRECORDLISTEVENT_PUSH,function(e){console.log("\u8336\u697c\u6211\u7684\u6218\u7ee9\u5217\u8868:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_MYRECORDLISTEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_RECORDSTATISLISTEVENT_PUSH,function(e){console.log("\u8336\u697c\u7ad9\u699c\u5217\u8868:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_RECORDSTATISLISTEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_RECORDLISTEVENT_PUSH,function(e){console.log("\u8336\u697c\u6218\u7ee9\u5217\u8868:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_RECORDLISTEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_BIGWINNERLISTEVENT_PUSH,function(e){console.log("\u8336\u697c\u5927\u8d62\u5bb6\u5217\u8868:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_BIGWINNERLISTEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_QUICKJOINEVENT_PUSH,function(e){console.log("\u8336\u697c\u5feb\u901f\u52a0\u5165:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_QUICKJOINEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_INFOEVENT_PUSH,function(e){Notification.emit(n.NotificationNames.TEA_INFOEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_EXITMEMBEREVENT_PUSH,function(e){console.log("\u8336\u697c\u6210\u5458\u9000\u51fa:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_EXITMEMBEREVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_MODIFYINFORECORDEVENT_PUSH,function(e){console.log("\u4fee\u6539\u8336\u697c\u7ad9\u699c\u67e5\u770b\u6743\u9650:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_MODIFYINFORECORDEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_ROOMLISTEVENTEVENT_PUSH,function(e){Notification.emit(n.NotificationNames.TEA_ROOMLISTEVENTEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_REMOVEROOMEVENT_PUSH,function(e){console.log("\u8336\u697c\u5927\u5385\u623f\u95f4\u89e3\u6563:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_REMOVEROOMEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_DELMEMBEREVENT_PUSH,function(e){console.log("\u8336\u697c\u7ba1\u7406\u5458\u5220\u9664\u6210\u5458:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_DELMEMBEREVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_JOINROOMEVENT_PUSH,function(e){console.log("\u8336\u697c\u52a0\u5165\u623f\u95f4:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_JOINROOMEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_QUITROOMEVENT_PUSH,function(e){console.log("\u8336\u697c\u9000\u51fa\u623f\u95f4:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_QUITROOMEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_RECORDINFOEVENT_PUSH,function(e){console.log("\u8336\u697c\u6218\u7ee9\u8be6\u60c5:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_RECORDINFOEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_MODIFYPROXYMONEYEVENT_PUSH,function(e){console.log("\u8336\u697c\u8336\u7f50\u4f59\u989d\u4fee\u6539:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_MODIFYPROXYMONEYEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_MODIFYTEAMONEYEVENT_PUSH,function(e){console.log("\u8336\u697c\u6210\u5458\u8336\u53f6\u4fee\u6539:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_MODIFYTEAMONEYEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_GETMEMBERINFOEVENT_PUSH,function(e){Notification.emit(n.NotificationNames.TEA_GETMEMBERINFOEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_MEMBERMSGREADEVENT_PUSH,function(e){console.log("\u8336\u697c\u6210\u5458\u6d88\u606f\u5df2\u8bfb:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_MEMBERMSGREADEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_MONEYRECORDLISTEVENT_PUSH,function(e){console.log("\u8336\u697c\u8336\u7f50\u6d88\u8017\u8bb0\u5f55:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_MONEYRECORDLISTEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.TEA_RECORDTICKEVENT_PUSH,function(e){console.log("\u8336\u697c\u6218\u699c\u52fe\u9009:"+JSON.stringify(e)),Notification.emit(n.NotificationNames.TEA_RECORDTICKEVENT_PUSH,e)})},initHandle_sss:function(){var e=this;cc.global.net.addHandler("playerEnterPush_SSS",function(t){console.log("\u6709\u5176\u4ed6\u7528\u6237\u8fdb\u5165\u623f\u95f4\uff0c\u63a5\u53d7\u53c2\u6570:"+JSON.stringify(t)),cc.global.room._roomData.users.push(t),console.log("\u5f53\u524d\u623f\u95f4\u6570\u636e\u4e3a:"+JSON.stringify(cc.global.room._roomData));var i=new Array;i.push(t),e.dispatchEvent("joinUserInit",i)}),cc.global.net.addHandler("playerReadyPush_SSS",function(t){console.log("\u6709\u5176\u4ed6\u7528\u6237\u5df2\u51c6\u5907,\u63a5\u6536\u53c2\u6570:"+JSON.stringify(t)),e.dispatchEvent("playerReady",t)}),cc.global.net.addHandler("gameStartPush_SSS",function(t){console.log("\u63d0\u524d\u5f00\u59cb,\u63a5\u6536\u53c2\u6570:"+JSON.stringify(t)),e.dispatchEvent("gameStartPush",t)}),cc.global.net.addHandler("gameXiaZhuPush_SSS",function(t){console.log("\u6709\u7528\u6237\u4e0b\u6ce8,\u63a5\u6536\u53c2\u6570:"+JSON.stringify(t)),e.dispatchEvent("gameXiaZhuPush",t)}),cc.global.net.addHandler("changeGameStatusPush_SSS",function(t){console.log("\u6539\u53d8\u6e38\u620f\u72b6\u6001,\u63a5\u6536\u53c2\u6570\u4e3a:"+JSON.stringify(t)),e.dispatchEvent("changeGameStatus",t)}),cc.global.net.addHandler("sss_cutCardEvent_push",function(t){console.log("\u73a9\u5bb6\u5207\u724c\u4e8b\u4ef6,\u63a5\u6536\u53c2\u6570\u4e3a:"+JSON.stringify(t)),e.dispatchEvent("sss_cutCardEvent_push",t)}),cc.global.net.addHandler("gameActionPush_SSS",function(t){console.log("\u63a5\u6536\u4e8b\u4ef6,\u63a5\u6536\u53c2\u6570\u4e3a:"+JSON.stringify(t)),e.dispatchEvent("gameAction",t)}),cc.global.net.addHandler("closeRoomPush_SSS",function(t){console.log("\u8bf7\u6c42\u89e3\u6563\u623f\u95f4,\u63a5\u6536\u53c2\u6570\u4e3a:"+JSON.stringify(t)),e.dispatchEvent("closeRoom",t)}),cc.global.net.addHandler("exitRoomPush_SSS",function(t){console.log("\u623f\u95f4\u89e3\u6563/\u9000\u51fa\u623f\u95f4,\u63a5\u6536\u53c2\u6570\u4e3a:"+JSON.stringify(t)),e.dispatchEvent("exitRoom",t)}),cc.global.net.addHandler("reconnectGamePush_SSS",function(t){console.log("\u91cd\u65b0\u8fde\u63a5\u8fd4\u56de\u6570\u636e:"+JSON.stringify(t)),0==t.type?e.backHall():e.dispatchEvent("reconnectGame",t.data)}),cc.global.net.addHandler("userReconnectPush_SSS",function(t){console.log("\u6709\u73a9\u5bb6\u91cd\u8fde:"+JSON.stringify(t)),e.dispatchEvent("userReconnect",t)}),cc.global.net.addHandler("userDisconnectPush_SSS",function(t){console.log("\u6709\u73a9\u5bb6\u79bb\u7ebf:"+JSON.stringify(t)),e.dispatchEvent("userDisconnect",t)}),cc.global.net.addHandler("voiceCallGamePush_SSS",function(t){console.log("\u5341\u4e09\u6c34\u8bed\u97f3\u5f00\u542f\u5173\u95ed\uff0c\u63a5\u6536\u53c2\u6570\u4e3a:"+JSON.stringify(t)),e.dispatchEvent("voiceCall",t)}),cc.global.net.addHandler("playerGameInfo_SSS",function(t){console.log("\u63a5\u6536\u4f59\u989d\u66f4\u65b0\u6d88\u606f:"+JSON.stringify(t)),e.dispatchEvent("playerGameInfo",t)}),cc.global.net.addHandler("xipaiMessaPush",function(t){console.log("\u6d17\u724c\u6267\u884c\u8be2\u95ee\u6d88\u606f:"+JSON.stringify(t)),e.dispatchEvent("xipaiMessaPush",t)}),cc.global.net.addHandler("xipaiFunPush",function(t){console.log("\u6d17\u724c\u6267\u884c\u7ed3\u679c\u6d88\u606f:"+JSON.stringify(t)),e.dispatchEvent("xipaiFunPush",t)}),cc.global.net.addHandler("sssTimerPush_SSS",function(t){console.log("\u5012\u8ba1\u65f6:"+JSON.stringify(t)),e.dispatchEvent("startTimer",t)}),cc.global.net.addHandler("checkMypaiPush_SSS",function(t){console.log("\u67e5\u770b\u81ea\u5df1\u7684\u624b\u724c:"+JSON.stringify(t)),e.dispatchEvent("checkMypaiPush_SSS",t)}),cc.global.net.addHandler("sss_relistEvent_push",function(t){console.log("\u91cd\u65b0\u6446\u724c:",t),e.dispatchEvent("sss_relistEvent_push",t)}),cc.global.net.addHandler("handleReviewEventPush",function(t){console.log("\u724c\u5c40\u56de\u987e:",t),e.dispatchEvent("handleReviewEventPush",t)})},initHandle_mj:function(){var e=this;cc.global.net.addHandler("playerEnterPush",function(t){console.log("\u6709\u5176\u4ed6\u7528\u6237\u8fdb\u5165\u623f\u95f4\uff0c\u63a5\u53d7\u53c2\u6570:"+JSON.stringify(t)),cc.global.room._roomData.users.push(t);var i=new Array;i.push(t),e.dispatchEvent("joinUserInit",i)}),cc.global.net.addHandler("qzmj_readyTimer_push",function(t){console.log("\u5c0f\u5c40\u7ed3\u7b97\u5012\u8ba1\u65f6,\u63a5\u6536\u53c2\u6570\u4e3a:"+JSON.stringify(t)),e.dispatchEvent("qzmj_readyTimer",t)}),cc.global.net.addHandler("readyTimerPush",function(t){console.log("\u51c6\u5907\u5012\u8ba1\u65f6,\u63a5\u6536\u53c2\u6570\u4e3a:"+JSON.stringify(t)),e.dispatchEvent("readyTimerPush",t)}),cc.global.net.addHandler("gameReadyPush",function(t){console.log("\u6709\u5176\u4ed6\u73a9\u5bb6\u51c6\u5907,\u63a5\u6536\u53c2\u6570\u4e3a:"+JSON.stringify(t)),e.dispatchEvent("gameReady",t)}),cc.global.net.addHandler("gameStartPush",function(t){console.log("\u5f00\u59cb\u6e38\u620f,\u63a5\u6536\u53c2\u6570\u4e3a:"+JSON.stringify(t)),e._game=t,e._game.groupidx=new Object,e.dispatchEvent("gameStartInit",t)}),cc.global.net.addHandler("gameKaiJuPush",function(t){console.log("\u5f00\u5c40\u6b65\u9aa4\u8bf7\u6c42,\u63a5\u53d7\u53c2\u6570\u4e3a:"+JSON.stringify(t)),e.dispatchEvent("gameKaiju",t)}),cc.global.net.addHandler("gameChupaiReadyPush",function(t){console.log("\u51fa\u724c\u51c6\u5907\u8bf7\u6c42,\u63a5\u53d7\u53c2\u6570\u4e3a:"+JSON.stringify(t)),e.dispatchEvent("gameChupaiReadyInit",t)}),cc.global.net.addHandler("gameBuHuaPush",function(t){console.log("\u8865\u82b1\u4e8b\u4ef6\u7ed3\u679c,\u63a5\u53d7\u53c2\u6570\u4e3a:"+JSON.stringify(t)),e.dispatchEvent("gameBuhua",t)}),cc.global.net.addHandler("gameTrusteePush",function(t){console.log("\u6258\u7ba1\uff0c\u63a5\u6536\u53c2\u6570\u4e3a:"+JSON.stringify(t)),e.dispatchEvent("gameTrusteePush",t)}),cc.global.net.addHandler("gameChupaiPush",function(t){if(console.log("\u51fa\u724c\u8bf7\u6c42,\u63a5\u6536\u53c2\u6570\u4e3a:"+JSON.stringify(t)),e._game&&(e._game.isDingjin||-10==t.lastType||t.focus!=e._game.myIndex))e.dispatchEvent("gameChupaiInit",t);else var i=window.setInterval(function(){e._game&&e._game.isDingjin&&(1==cc.global.util.isTrustee?null!==cc.Canvas.instance.node.getComponent("mjgame")&&(cc.global.util.showAlert(),cc.global.net.send("reconnectGame",{room_no:cc.global.room._roomData.room_no,account:cc.global.util.userinfo.account,uuid:cc.global.util.userinfo.uuid})):e.dispatchEvent("gameChupaiInit",t),window.clearInterval(i))},500)}),cc.global.net.addHandler("gameActionPush",function(t){if(console.log("\u6e38\u620f\u4e8b\u4ef6\uff0c\u63a5\u6536\u53c2\u6570\u4e3a\uff1a"+JSON.stringify(t)),e._game.isDingjin||t.focus!=e._game.myIndex)e.action=t,e.dispatchEvent("gameAction",t);else var i=window.setInterval(function(){e._game.isDingjin&&(e.action=t,e.dispatchEvent("gameAction",t),window.clearInterval(i))},500)}),cc.global.net.addHandler("gameActReultPush",function(t){console.log("\u63a5\u6536\u6e38\u620f\u4e8b\u4ef6\u7ed3\u679c\uff0c\u63a5\u6536\u53c2\u6570\u4e3a\uff1a"+JSON.stringify(t)),e.dispatchEvent("gameActReult",t)}),cc.global.net.addHandler("gameJieSuanPush",function(t){console.log("\u63a5\u6536\u7ed3\u7b97\u4e8b\u4ef6,\u63a5\u6536\u53c2\u6570\u4e3a:"+JSON.stringify(t)),e.dispatchEvent("gameJieSuan",t)}),cc.global.net.addHandler("gameLiuJuPush",function(t){console.log("\u63a5\u6536\u6d41\u5c40\u4e8b\u4ef6,\u63a5\u6536\u53c2\u6570\u4e3a:"+JSON.stringify(t)),e.dispatchEvent("gameLiuJu",t)}),cc.global.net.addHandler("closeRoomPush",function(t){console.log("\u8bf7\u6c42\u89e3\u6563\u623f\u95f4,\u63a5\u6536\u53c2\u6570\u4e3a:"+JSON.stringify(t)),e.dispatchEvent("closeRoom",t)}),cc.global.net.addHandler("exitRoomPush",function(t){console.log("\u623f\u95f4\u89e3\u6563/\u9000\u51fa\u623f\u95f4,\u63a5\u6536\u53c2\u6570\u4e3a:"+JSON.stringify(t)),e.dispatchEvent("exitRoom",t)}),cc.global.net.addHandler("reconnectGamePush",function(t){console.log("\u91cd\u65b0\u8fde\u63a5\u8fd4\u56de\u6570\u636e:"+JSON.stringify(t)),0==t.code?cc.global.game.backHall():(e._dispatchEventHandel=null,e._stopRepeate=!1,e._isRecon=!0,e.reconData=t,cc.director.loadScene("hall_mj"))}),cc.global.net.addHandler("userDisconnectPush",function(t){console.log("\u6709\u73a9\u5bb6\u79bb\u7ebf:"+JSON.stringify(t)),e.dispatchEvent("userDisconnect",t)}),cc.global.net.addHandler("userReconnectPush",function(t){console.log("\u6709\u73a9\u5bb6\u91cd\u8fde:"+JSON.stringify(t)),e.dispatchEvent("userReconnect",t)}),cc.global.net.addHandler("voiceCallGamePush",function(t){console.log("\u9ebb\u5c06\u8bed\u97f3\u5f00\u542f\u5173\u95ed\uff0c\u63a5\u6536\u53c2\u6570\u4e3a:"+JSON.stringify(t)),e.dispatchEvent("voiceCall",t)})},initHandle_pdk2:function(){cc.global.net.addHandler(n.NotificationNames.PDK_PLAYERENTER_PUSH,function(e){console.log("\u65b0\u7248\u672c\u8dd1\u5f97\u5feb"+n.NotificationNames.PDK_PLAYERENTER_PUSH+":"+JSON.stringify(e)),cc.global.room._roomData.users.push(e),Notification.emit(n.NotificationNames.PDK_PLAYERENTER_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.PDK_GAMEREADYEVENT_PUSH,function(e){console.log("\u65b0\u7248\u672c\u8dd1\u5f97\u5feb"+n.NotificationNames.PDK_GAMEREADYEVENT_PUSH+":"+JSON.stringify(e)),Notification.emit(n.NotificationNames.PDK_GAMEREADYEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.PDK_GAMEEVENT_PUSH,function(e){console.log("\u65b0\u7248\u672c\u8dd1\u5f97\u5feb"+n.NotificationNames.PDK_GAMEEVENT_PUSH+":"+JSON.stringify(e)),null!=cc.Canvas.instance.node.getComponent("new_hall_pdk")?Notification.emit(n.NotificationNames.PDK_GAMEEVENT_PUSH,e):cc.global.util.pdkGameEventCache=e}),cc.global.net.addHandler(n.NotificationNames.PDK_RECONNECTGAMEEVENT_PUSH,function(e){console.log("\u65b0\u7248\u672c\u8dd1\u5f97\u5feb"+n.NotificationNames.PDK_RECONNECTGAMEEVENT_PUSH+":"+JSON.stringify(e)),Notification.emit(n.NotificationNames.PDK_RECONNECTGAMEEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.PDK_EXITROOMEEVENT_PUSH,function(e){console.log("\u65b0\u7248\u672c\u8dd1\u5f97\u5feb"+n.NotificationNames.PDK_EXITROOMEEVENT_PUSH+":"+JSON.stringify(e)),Notification.emit(n.NotificationNames.PDK_EXITROOMEEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.PDK_CLOSEROOMEVENT_PUSH,function(e){console.log("\u65b0\u7248\u672c\u8dd1\u5f97\u5feb"+n.NotificationNames.PDK_CLOSEROOMEVENT_PUSH+":"+JSON.stringify(e)),Notification.emit(n.NotificationNames.PDK_CLOSEROOMEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.PDK_GAMETRUSTEEEVENT_PUSH,function(e){console.log("\u65b0\u7248\u672c\u8dd1\u5f97\u5feb"+n.NotificationNames.PDK_GAMETRUSTEEEVENT_PUSH+":"+JSON.stringify(e)),Notification.emit(n.NotificationNames.PDK_GAMETRUSTEEEVENT_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.PDK_SETTLEACCOUNTS_PUSH,function(e){console.log("\u65b0\u7248\u672c\u8dd1\u5f97\u5feb"+n.NotificationNames.PDK_SETTLEACCOUNTS_PUSH+":"+JSON.stringify(e)),Notification.emit(n.NotificationNames.PDK_SETTLEACCOUNTS_PUSH,e)}),cc.global.net.addHandler(n.NotificationNames.PDK_GAMETIPEVENT_PUSH,function(e){console.log("\u65b0\u7248\u672c\u8dd1\u5f97\u5feb"+n.NotificationNames.PDK_GAMETIPEVENT_PUSH+":"+JSON.stringify(e)),Notification.emit(n.NotificationNames.PDK_GAMETIPEVENT_PUSH,e)})},initHandle_nn:function(){var e=this;cc.global.net.addHandler("exitRoomPush_NN",function(t){e.dispatchEvent("exitRoom",t)}),cc.global.net.addHandler("playerEnterPush_NN",function(t){console.log("\u6709\u5176\u4ed6\u7528\u6237\u8fdb\u5165\u623f\u95f4\uff0c\u63a5\u53d7\u53c2\u6570:"+JSON.stringify(t)),cc.global.room._roomData.users.push(t),console.log("\u5f53\u524d\u623f\u95f4\u6570\u636e\u4e3a:"+JSON.stringify(cc.global.room._roomData));var i=new Array;i.push(t),e.dispatchEvent("joinUserInit",i)}),cc.global.net.addHandler("playerReadyPush_NN",function(t){console.log("\u6709\u5176\u4ed6\u7528\u6237\u5df2\u51c6\u5907,\u63a5\u6536\u53c2\u6570:"+JSON.stringify(t)),e.dispatchEvent("playerReady",t)}),cc.global.net.addHandler("changeGameStatusPush_NN",function(t){console.log("\u6539\u53d8\u6e38\u620f\u72b6\u6001,\u63a5\u6536\u53c2\u6570\u4e3a:"+JSON.stringify(t)),e.dispatchEvent("changeGameStatus",t)}),cc.global.net.addHandler("qiangZhuangPush_NN",function(t){console.log("\u62a2\u5e84\u56de\u8c03,\u63a5\u6536\u53c2\u6570\u4e3a:"+JSON.stringify(t)),e.dispatchEvent("qiangZhuang",t)}),cc.global.net.addHandler("gameXiaZhuPush_NN",function(t){console.log("\u62a2\u5e84\u56de\u8c03,\u63a5\u6536\u53c2\u6570\u4e3a:"+JSON.stringify(t)),e.dispatchEvent("XiaZhu",t)}),cc.global.net.addHandler("showPaiPush_NN",function(t){console.log("\u62a2\u5e84\u56de\u8c03,\u63a5\u6536\u53c2\u6570\u4e3a:"+JSON.stringify(t)),e.dispatchEvent("showPai",t)})},receiveAndriod:function(e){console.log("\u7acb\u523b\u64ad\u653e\u81ea\u5df1\u7684"),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org.cocos2dx.javascript.AppActivity","downloadRecordedFilePlay","(Ljava/lang/String;)V",e):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("JsUseOcTool","downloadRecordedFilePlay:",e);var t=this.gid;cc.global.net.send("voiceCallGame",{openid:cc.global.util.userinfo.openid,account:cc.global.util.userinfo.account,room_no:cc.global.room._roomData.room_no,gid:t,msg:e,myIndex:cc.global.room._roomData.myIndex})},dispatchEvent:function(e,t,i){var n=this;if(this._stopRepeate)return console.log("\u6e38\u620f\u573a\u666f\u7ed3\u675f\uff0c\u6e05\u9664\u5f85\u5904\u7406\u4e8b\u4ef6"),this._stopRepeate=!1,void(this.eventList=[]);if(this._dispatchEventHandel){if(console.log("\u5524\u8d77\u4e8b\u4ef6,\u4f20\u5165\u53c2\u6570\uff1a"+JSON.stringify(t)),this.eventList)for(var o=0;o<this.eventList.length;o++){var a=this.eventList[o];this._dispatchEventHandel.emit(a.name,a.data)}this.eventList=[],i||this._dispatchEventHandel.emit(e,t)}else{if(!i)(a=new Object).name=e,a.data=t,this.eventList||(this.eventList=[]),this.eventList.push(a);setTimeout(function(){n.dispatchEvent(e,t,"rep")},100)}},backHall:function(){console.log("\u8fd4\u56de\u5927\u5385"),cc.global.game._dispatchEventHandel=null,cc.global.game._stopRepeate=!0,cc.global.game.eventList=[],"circle"==cc.global.util.datingType&&cc.global.util.circleUserinfo?cc.director.loadScene("circle"):cc.director.loadScene("dating")}}),cc._RF.pop()},{"./NotificationNames":"NotificationNames"}],hall_shisanshui:[function(require,module,exports){"use strict";cc._RF.push(module,"07d774X3ZRHkKdQKvz1XSj5","hall_shisanshui");var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_item_generator=require("./global/item_generator"),_assert=require("assert");function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function n(o,a){try{var c=t[o](a),s=c.value}catch(e){return void i(e)}if(!c.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}Array.prototype.remove=function(e){if(console.log("\u5220\u9664\u6570\u7ec4\u8282\u70b9,dx="+e),isNaN(e)||e>this.length)return!1;this.splice(e,1)},Array.prototype.removeVal=function(e){for(var t=0;t<this.length;t++)if(this[t]==e){this.splice(t,1);break}},Array.prototype.hasVal=function(e){var t=!1;"number"==typeof e&&(e=e.toString());for(var i=0;i<this.length;i++)if(this[i].toString()==e){t=!0;break}return t},cc.Class({extends:cc.Component,properties:{frmSz:{default:null,type:cc.Node},sfIcons:{default:[],type:cc.SpriteFrame},headLeft:{default:null,type:cc.Node},headRight:{default:null,type:cc.Node},testBtn:{default:null,type:cc.Node},testHolds:{default:null,type:cc.Node},sclectPais:{default:null,type:cc.Node},bgm:{default:null,type:cc.AudioSource},sound:{default:null,type:cc.AudioSource},item:{type:cc.Prefab,default:null},countAlta:{default:null,type:cc.SpriteAtlas},sctuji:{default:null,type:cc.SpriteAtlas},card_mp_small_atlas:{default:null,type:cc.SpriteAtlas},card_mp_big_atlas:{default:null,type:cc.SpriteAtlas},card_small_atlas:{default:null,type:cc.SpriteAtlas},card_big_atlas:{default:null,type:cc.SpriteAtlas},nz_altas:{default:null,type:cc.SpriteAtlas},player_altas:{default:null,type:cc.SpriteAtlas},btn_altas:{default:null,type:cc.SpriteAtlas},plus_altas:{default:null,type:cc.SpriteAtlas},dis_altas:{default:null,type:cc.SpriteAtlas},tesupai_altas:{default:null,type:cc.SpriteAtlas},visiter_prefab:{type:cc.Prefab,default:null,tooltip:"\u89c2\u6218\u73a9\u5bb6"},gameData:null,genders:null,closeCountdown:-1,closeTimer:null,gameMode:0,updateCountDown:0,countDown:null,paiDefine:null,canOutDefine:null,paixing:null,_stopCountDown:0,_dun:null,_dunSelected:null,_time:25,_refreshTime:0,_countDown:null,_seatMap:null,_isRoomClosed:!1,_gameStatu:0,_kaiqiangArray:new Array,_bindList:new Array,_visitPlayerIndex:-99,browAtlas:{default:null,type:cc.SpriteAtlas},msgTab:{default:null,type:cc.Node},browTab:{default:null,type:cc.Node},sendMsgList:{default:null,type:cc.Node},sendBrowList:{default:null,type:cc.Node},halltip2:cc.Node,sendCommonWords:cc.Node,cbTC:cc.Node,cbTC2:cc.Node},onLoad:function(){cc.global.util.gameBgSet&&cc.global.util.gameBgSet.sss&&this.setBg(cc.global.util.gameBgSet.sss),cc.global.util.pokerBgSet;var e=cc.global.room._roomData;if(cc.find("Canvas/qiepai").active=1==e.cutCardMode,10==e.roomType&&(cc.global.util.datingType="tea",!cc.global.util.teaUserinfo)){var t=cc.sys.localStorage.getItem("teaInfoCode");t&&cc.global.net.send("tea_infoEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,teaInfoCode:t})}if((8==e.roomType||9==e.roomType)&&(cc.global.util.datingType="circle",cc.global.util.circleRoomFilterGid=4,cc.global.util.circleRoomFilterIsGhost=e.hardGhostNumber>0?1:0,!cc.global.util.circleUserinfo)){var i=cc.sys.localStorage.getItem("circleId");i&&cc.global.net.send("memberDetailInfoEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,user_id:cc.global.util.userinfo.uid,circle_id:i})}cc.global.util.userinfo.win&&1==cc.global.util.userinfo.win?this.testBtn.active=!0:this.testBtn.active=!1;var n=e.roomType;4==n&&(n=1),2!=n&&6!=n&&9!=n||(n=0),8==n&&(n=3),cc.global.util.roomType=n,cc.global.game._stopRepeate=!1,cc.global.game.gid=4,this.gameData=new Object,this.gameData.startTime=-1,this.gameData.lastTime=-1,this.gameData.bipaiOver=!0,this.initCheckMyPai(!0),this._seatMap=[{seat:0,index:-1},{seat:3,index:-1},{seat:2,index:-1},{seat:4,index:-1},{seat:1,index:-1},{seat:5,index:-1},{seat:6,index:-1},{seat:7,index:-1}],this.genders=["w","w","w","w","w","w"],this.genders[e.myIndex]="\u7537"==cc.global.util.userinfo.sex?"m":"w",this._dun={up:3,cen:5,down:5},this._dunSelected={up:[],cen:[],down:[]},this.countDown={hour:1,min:0,sec:0};var o=require("sssPxUtil");this.paiDefine=new o,this.canOutDefine=this.paiDefine;var a=Math.round((Date.now()-cc.global.util.loadTimer)/1e3);e.timer-a>=0?e.timer-=a:e.timer=0,3==e.gameStatus&&(e.bipaiTimer+=Date.now()-cc.global.util.loadTimer),this.optionNodeX=this.node.getChildByName("option_node").x,this.tipgzNode=this.node.getChildByName("tipgzNode"),cc.global.room._roomData.myIndex==this._visitPlayerIndex&&(this.tipgzNode.active=!0),this.qiepaiStartPositions=[];for(var c=cc.find("Canvas/qiepai/cards"),s=0;s<c.children.length;s++)this.qiepaiStartPositions.push(c.children[s].position);this.initView(),this.resetGame();cc.find("Canvas/qiepai/cards").children;if(this.initHandle(),cc.global.game._dispatchEventHandel=this.node,this.node.getChildByName("mapai")){var l=this.node.getChildByName("mapai").getComponentInChildren(cc.Sprite);cc.global.room._roomData.mapai&&0!=parseInt(cc.global.room._roomData.mapai)?this.setSpriteFrameByNum(cc.global.room._roomData.mapai,l,this.card_small_atlas,!0):l.node.parent.active=!1}var r=cc.find("Canvas/shezhi/Public_PanelBG_3/SettingMucBG/sz_btn_kai"),g=cc.find("Canvas/shezhi/Public_PanelBG_3/SettingSubBG/sz_btn_kai");0==cc.global.util.setting.musicOn&&(r.getComponent(cc.Sprite).spriteFrame=this.sfIcons[1]),0==cc.global.util.setting.soundOn&&(g.getComponent(cc.Sprite).spriteFrame=this.sfIcons[1]),this.cb_setting_bar(cc.find("Canvas/shezhi/Public_PanelBG_3/SettingMucBG/barcon").getComponent(cc.Slider),"1"),this.cb_setting_bar(cc.find("Canvas/shezhi/Public_PanelBG_3/SettingSubBG/barcon").getComponent(cc.Slider),"0"),cc.sys.os==cc.sys.OS_ANDROID?(console.log("\u5b89\u5353:\u8bed\u97f3\u521d\u59cb\u5316"),jsb.reflection.callStaticMethod("org.cocos2dx.javascript.AppActivity","joinGame","(Ljava/lang/String;)V",cc.global.util.userinfo.openid)):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("JsUseOcTool","joinGame:",String(cc.global.util.userinfo.openid));for(var h=0;h<this.sclectPais.childrenCount;h++){var d=this.sclectPais.children[h];(!d.clickNum||d.clickNum>0)&&(d.clickNum=0)}},getMessagePush:function(e){var t=cc.find("Canvas/in_gg");2==e.type&&(1==e.code?(t.mTag?t.mTag=t.mTag+1:t.mTag=1,t.getChildByName("mask").getChildByName("lb").getComponent(cc.Label).string=e.content,t.active=!0,cc.global.util.mySetTimeout(function(){t.mTag=t.mTag-1,t.mTag<=0&&(t.active=!1)},5e4)):t.active=!1)},start:function(){console.log("start!!!"),cc.global.util.resize(),this.touch_dx=this.node.width/2-640,this.touch_dy=this.node.height/2-360,cc.audioEngine.setMaxAudioInstance(6),this.playMusic()},playMusic:function(){var e=this,t=this.node.getChildByName("music").getComponent(cc.AudioSource);t.volume=cc.global.util.setting.music,0==cc.global.util.setting.musicOn?t.mute=!0:t.mute=!1,t.play(),cc.global.util.mySetTimeout(function(){e.node&&e.playMusic()},59e3)},update:function(e){if(this.updateCountown+=e,this.updateCountDown>1){var t=new Date;this.showDay(this.headRight.getChildByName("daojishi")),this._refreshTime>0&&this._refreshTime--,1==this._gameStatu||2==this._gameStatu?this._stopCountDown++:this._stopCountDown=0,this.updateCountDown=0}t=Date.now();if(this.gameData.startTime>0&&t-1e3*Math.floor(this.gameData.lastTime/1e3)>=1e3){this.gameData.lastTime=t;var i=Math.floor((t-this.gameData.startTime)/1e3);if(this.gameData.countType<0)return;var n=this.gameData.limitTime;n-i<=3&&this.isStartCounting&&(this.isStartCounting=!1,this.sendQiepaiReq(!0)),i<=n?(cc.find("Canvas/game/yaoqing/nz/str").getComponent(cc.Label).string=n-i,cc.find("Canvas/liPaiZhong/nz/str").getComponent(cc.Label).string=n-i,cc.find("Canvas/statement/nz/str").getComponent(cc.Label).string=n-i):(cc.find("Canvas/game/yaoqing/nz/str").getComponent(cc.Label).string=0,cc.find("Canvas/liPaiZhong/nz/str").getComponent(cc.Label).string=0,cc.find("Canvas/statement/nz/str").getComponent(cc.Label).string=0,this.gameData.startTime=-1)}var o=cc.global.util.getCurrentTime();this.currentTime!=o&&(cc.find("headLeft/roominfo/current_time",this.node).getComponent(cc.Label).string=o)},onStartClick:function(){cc.global.util.playSound_buttonClick(),cc.global.net.send("gameStart_SSS",{room_no:cc.global.room._roomData.room_no,account:cc.global.util.userinfo.account,type:0})},doGameStart:function(){cc.global.util.showAlert("\u6b63\u5728\u5f00\u59cb\u6e38\u620f..."),cc.global.net.send("gameStart_SSS",{room_no:cc.global.room._roomData.room_no,account:cc.global.util.userinfo.account,type:1})},onBeginClick:function(e){cc.global.util.playSound_buttonClick(),this.node.getChildByName("statement").active=!1,this.node.getChildByName("game").getChildByName("yaoqing").getChildByName("sss_btn_zhunbei").active=!1,this.node.getChildByName("headRight").getChildByName("btn_xipai").active=!0,this.sendReq("gameReady_SSS",{room_no:cc.global.room._roomData.room_no,account:cc.global.util.userinfo.account,sss:cc.global.room._roomData.testPais}),(!this.gameData.arr||this.gameData.arr.length>0)&&(this.gameData.arr=[]),(!cc.global.room._roomData.testPais||cc.global.room._roomData.testPais.length>0)&&(cc.global.room._roomData.testPais=[]);for(var t=0;t<this.sclectPais.childrenCount;t++){var i=this.sclectPais.children[t];i.clickNum&&0==i.clickNum||(i.clickNum=0)}},onShowdowClick:function(){for(var e=this.node.getChildByName("liPaiZhong").getChildByName("paixing").children,t=0;t<e.length;t++)e[t].y>0&&(e[t].y=0)},onCardClick:function(e){if(null==e)return!1;var t;(t=e.target?e.target:e).y>0?t.y=0:t.y=35},onTesuClick:function(e){var t=e.target,i=cc.global.room._roomData;t||(t=e);var n=this.node.getChildByName("liPaiZhong"),o=n.getChildByName("teshupai").getChildByName("teshupai_tc").getChildByName("teshupai_paix_bg").getChildByName("t_shisanshui").getComponent(cc.Sprite);this.setSpriteFrameByName("type_"+i.myPaiType,o,this.tesupai_altas),n.getChildByName("lipai_tc").active=!1,n.getChildByName("sss_btn_teshupai_an").active=!1,n.getChildByName("zdlp_liangpai").active=!1,n.getChildByName("zdlp_quxiao").active=!1,n.getChildByName("paiBtn").active=!0,n.getChildByName("teshupai").active=!0},onTeshuSureClick:function(){var e=new Object;e.type=3,e.room_no=cc.global.room._roomData.room_no,e.account=cc.global.util.userinfo.account,this.sendReq("gameAction_SSS",e),this.lipaizhong_opt(!0)},onTeshuCancelClick:function(){var e=this.node.getChildByName("liPaiZhong");if(e.getChildByName("lipai_tc").active=!0,e.getChildByName("sss_btn_teshupai_an").active=!0,e.getChildByName("zdlp_liangpai").active=!1,e.getChildByName("zdlp_quxiao").active=!1,e.getChildByName("paiBtn").active=!0,e.getChildByName("teshupai").active=!1,3==this._dunSelected.up.length&&5==this._dunSelected.cen.length&&5==this._dunSelected.down.length)return e.getChildByName("zdlp_liangpai").active=!0,void(e.getChildByName("zdlp_quxiao").active=!0)},onReplaceClick:function(e){cc.find("game/yaoqing/btn_replace",this.node).active=!1;var t=new Object;t.room_no=cc.global.room._roomData.room_no,t.account=cc.global.util.userinfo.account,t.uid=cc.global.util.userinfo.uid,this.sendReq("sss_relistEvent",t)},sss_relistEvent_push:function(e){if(1==e.code){for(var t=cc.global.room._roomData.myIndex,i=cc.global.room._roomData.users,n=0;n<i.length;n++)if(i[n].index==e.myIndex){cc.global.room._roomData.users[n].userStatus=1;break}var o=this.getIndex(e.myIndex),a=this.node.getChildByName("game").getChildByName("player"+o);e.myIndex==t?(a.getChildByName("pai").active=!1,this.sortCardDesc(this.gameData.myPai),this.initGame()):(a.getChildByName("pai").active=!1,this.createMoveAnime(a.getChildByName("paianime")),a.getChildByName("sss_img_lipaiz").active=!0,a.getChildByName("done_ok").active=!1)}},onPaikuangClick:function(e,t,i,n){var o;if(!n){this.gameData.selectCards=new Array;for(var a=this.node.getChildByName("liPaiZhong").getChildByName("paixing").children,c=0;c<a.length;c++)a[c].y>0&&this.gameData.selectCards.push(a[c].mTag)}if(e.target){if(o=e.target.parent,!this.checkPaiKunagCon(e.target,t))return void(this.gameData.selectCards=new Array)}else o=e.getChildByName("paikuang");var s=this._dun[t],l=this.gameData.selectCards,r="";if(console.log("\u5f53\u524d\u9009\u4e2d\u7684\u724c\u4fe1\u606f\u4e3a"+JSON.stringify(l)+",pos\uff1a"+t),0!=l.length&&l.length<=s){if(!this.paixingDefine(t))return;var g=o.getComponentsInChildren(cc.Sprite);for(c=0;c<l.length;c++){for(var h=0;h<g.length;h++)if(null==g[h].spriteFrame){cc.global.room._roomData.maPaiAccount==cc.global.util.userinfo.account&&cc.global.room._roomData.mapai==l[c]?g[h].spriteFrame=this.getSpriteFrameByNum(l[c],this.card_mp_small_atlas):g[h].spriteFrame=this.getSpriteFrameByNum(l[c],this.card_small_atlas);break}this._dunSelected[t].push(parseInt(l[c])),s--}this.shoot(parseInt(l[c]),i),this._dun[t]=s;var d="up"==t?3:5;if(this._dunSelected[t].length==d){var u=this.getCardTypeName(this.paiDefine.getBestType(this._dunSelected[t]).maxType,t);this.setSpriteFrameByName("dj_type_"+u,o.parent.getChildByName("paixing").getComponent(cc.Sprite),this.player_altas),o.parent.getChildByName("paixing").active=!0}else o.parent.getChildByName("paixing").active=!1}else r=0==l.length?"\u8bf7\u9009\u62e9\u8981\u653e\u7f6e\u7684\u724c\u7ec4":"\u9009\u4e2d\u7684\u724c\u6570\u4e0d\u7b26\u5408\u8981\u6c42\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\uff01",cc.global.util.tipMsg(r)},onClearSelected:function(e,t){for(var i=new Array,n=(e.target?e.target.parent:e).getChildByName("paikuang").getComponentsInChildren(cc.Sprite),o=0;o<n.length;o++)n[o].spriteFrame=null;var a="up"==t?3:5;this._dun[t]=a;var c,s=this._dunSelected[t],l=this.node.getChildByName("liPaiZhong").getChildByName("paixing");for(o=0;o<s.length;o++){var r=this.getRepeatTag(s[o],l,function(e){return!e.active});r.active=!0,this.gameData.myPai.push(parseInt(s[o])),i.push(r)}return this._dunSelected[t]=new Array,this.gameData.selectCards=new Array,this.node.getChildByName("liPaiZhong").getChildByName("zdlp_liangpai").active=!1,this.node.getChildByName("liPaiZhong").getChildByName("zdlp_quxiao").active=!1,"up"==t&&(c=this.node.getChildByName("liPaiZhong").getChildByName("lipai_tc").getChildByName("t_toudao")),"cen"==t&&(c=this.node.getChildByName("liPaiZhong").getChildByName("lipai_tc").getChildByName("t_zhongdao")),"down"==t&&(c=this.node.getChildByName("liPaiZhong").getChildByName("lipai_tc").getChildByName("t_weidao")),c&&(c.getChildByName("paixing").active=!1),this.showCanUsePaiXing(this.gameData.myPai),{selected:s,hideNodes:i}},onClearAll:function(e){var t=this.node.getChildByName("liPaiZhong").getChildByName("lipai_tc");this.onClearSelected(t.getChildByName("t_toudao"),"up"),this.onClearSelected(t.getChildByName("t_zhongdao"),"cen"),this.onClearSelected(t.getChildByName("t_weidao"),"down"),this.gameData.selectCards=new Array},onClearAll2:function(e){var t=this.node.getChildByName("liPaiZhong").getChildByName("lipai_tc");this.onClearSelected(t.getChildByName("t_toudao"),"up"),this.onClearSelected(t.getChildByName("t_zhongdao"),"cen"),this.onClearSelected(t.getChildByName("t_weidao"),"down"),this.gameData.selectCards=new Array,this.playSound("click_open")},onPaixingClick:function(e,t){this.playSound("GAME_CARD");var i=this.paixing[t];if(this.paixing.nowType&&this.paixing.nowType==t||(this.paixing.nowType=t,this.paixing.tot=i.length,this.paixing.click=0),-1!=e.target.getComponent(cc.Sprite).spriteFrame.name.indexOf("_an"))return!1;this.gameData.selectCards=new Array;for(var n=i[this.paixing.click],o=this.node.getChildByName("liPaiZhong").getChildByName("paixing"),a=0;a<o.children.length;a++)o.children[a].y=0;for(var c=0;c<n.length;c++)this.getRepeatTag(n[c],o,function(e){return e.y<35&&e.active}).y=35;this.paixing.click+1<this.paixing.tot?this.paixing.click++:this.paixing.click=0},onShowCards:function(e){this.playSound("click_window");var t=new Array;t.push.apply(t,this._dunSelected.up),t.push.apply(t,this._dunSelected.cen),t.push.apply(t,this._dunSelected.down);var i=new Object;i.type=2,i.room_no=cc.global.room._roomData.room_no,i.account=cc.global.util.userinfo.account,i.myPai=t,this.sendReq("gameAction_SSS",i),this.lipaizhong_opt(!0)},onNextRoomSureClick:function onNextRoomSureClick(){var self=this;cc.global.util.showAlert();var xhr=cc.global.http.sendRequest("/zagame/room/nextGameRoom.html",{gid:4,roomNo:cc.global.room._roomData.room_no,uid:cc.global.util.userinfo.id,uuid:cc.global.util.userinfo.uuid},function(){console.log(xhr.responseText);var result=eval("("+xhr.responseText+")");1==result.code?(cc.global.room._roomData.room_no=result.data.room_no,console.log("\u65b0\u7684\u623f\u95f4\u53f7\u662f:"+result.data.room_no),cc.global.room.enterRoom_SSS(cc.global.room._roomData.room_no,null,!0)):(cc.global.util.closeAlert(),cc.global.util.tipMsg(result.msg))},null,!0)},onReconnectClick:function(e,t){this._refreshTime<=0?(cc.global.util.playSound_buttonClick(),this._refreshTime=180,console.log("\u53d1\u9001\u91cd\u8fde\u8bf7\u6c42"),cc.global.util.showAlert("\u6b63\u5728\u52a0\u8f7d"),this.sendReq("reconnectGame_SSS",{room_no:cc.global.room._roomData.room_no,account:cc.global.util.userinfo.account,uuid:cc.global.util.userinfo.uuid})):t||cc.global.util.tipMsg("\u5237\u65b0\u51b7\u5374\u65f6\u95f4\uff1a"+this._refreshTime+"\u79d2")},onTouxiangClick:function(e,t){cc.global.util.playSound_buttonClick(),console.log("\u70b9\u51fb\u5934\u50cf");var i=cc.find("Canvas/userIP");i.active=!0;var n=e.target.parent,o=e.target.getComponent(cc.Sprite).spriteFrame,a=n.getChildByName("name").getComponent(cc.Label).string;i.getChildByName("headImg").getComponent(cc.Sprite).spriteFrame=o,i.getChildByName("name").getComponent(cc.Label).string=a;var c=cc.global.room._roomData.users,s=cc.global.room._roomData.myIndex,l=cc.global.util.circleUserinfo,r=!1;l&&(r="1"==l.is_admin||"1"==l.user_role);for(var g=0;g<c.length;g++){var h=this.getIndex(c[g].index);if(parseInt(h)==parseInt(t)){var d=cc.global.util.processId(c[g].account),u=void 0;u=0==h&&s!=this._visitPlayerIndex?c[g].account:r?c[g].account:d,i.getChildByName("IP").active=!0,i.getChildByName("IP").getComponent(cc.Label).string=c[g].ip,i.getChildByName("ID").getComponent(cc.Label).string=u,c[g].ip}parseInt(h)==parseInt(this.getIndex(cc.global.room._roomData.myIndex))&&c[g].ip}i.getChildByName("distance").active=!1},onTouxiangHideClick:function(){cc.global.util.playSound_buttonClick(),cc.find("Canvas/userIP").active=!1},onVisitSeatClick:function(e,t){this.sendReq("circleVisitJoinGameEvent",{room_no:cc.global.room._roomData.room_no,uid:cc.global.util.userinfo.id,account:cc.global.util.userinfo.account,seatIndex:t,token:cc.global.util.userinfo.token})},onXipaiClick:function(e,t){var i=cc.global.room._roomData,n=this.node.getChildByName("xipai");t?1==t?(n.getChildByName("tip").active=!1,n.active=!1,this.sendReq("xipaiFun",{account:cc.global.util.userinfo.account,room_no:i.room_no,gid:4,cur:i.xipaiData.cur,allCount:i.xipaiData.allCount,sum:i.xipaiData.sum})):-1==t?(n.getChildByName("tip").active=!1,n.active=!1):2==t&&(n.getChildByName("tip").active=!1,n.active=!0,n.getComponent(cc.Animation).on("finished",function(){n.active=!1},this),this.playSound("GAME_SHUFFLE"),n.getComponent(cc.Animation).play()):this.sendReq("xipaiMessa",{account:cc.global.util.userinfo.account,room_no:i.room_no,gid:4})},initView:function(){console.log("initView"),this.setGameState(0),cc.global.room._roomData.gameStatus<4&&(this.node.getChildByName("frm_banker").active=!1,cc.find("Canvas/game/yaoqing/banker").active=!1,cc.find("Canvas/statement/btnzunbei").getComponent(cc.Button).interactable=!0),cc.global.room._roomData.myIndex==this._visitPlayerIndex?(cc.find("Canvas/btn_msg").active=!1,cc.find("Canvas/shezhi/Public_PanelBG_3/btn_jiesan").active=!1):(cc.find("Canvas/btn_msg").active=!0,cc.find("Canvas/shezhi/Public_PanelBG_3/btn_jiesan").active=!0),cc.find("Canvas/btn_voice").active=!1,cc.find("Canvas/option_node/btns/btn_replay").active=cc.global.room._roomData.myIndex!=this._visitPlayerIndex;for(var e=this.node.getChildByName("game").children,t=0;t<e.length;t++)if(-1!=e[t].name.indexOf("player")){e[t].getChildByName("pai").active=!1,e[t].getChildByName("zongfen").active=!1,e[t].getChildByName("ready_ok").active=!1,e[t].getChildByName("done_ok").active=!1,e[t].getChildByName("bijiao").active=!1,e[t].getChildByName("touxiang").getChildByName("zhuang").active=!1,e[t].getChildByName("t_teshupaixing").active=!1,e[t].getChildByName("xiazhu").active=!1;for(var i=e[t].getChildByName("pai").children,n=0;n<i.length;n++){console.log("\u6e05\u7a7a\u624b\u724c");for(var o=i[n].getComponentsInChildren(cc.Sprite),a=0;a<o.length;a++)this.setSpriteFrameByNum(0,o[a],this.card_small_atlas,!0)}e[t].getChildByName("bifen").active=!1,e[t].getChildByName("bifen").children[0].active=e[t].getChildByName("bifen").children[1].active=e[t].getChildByName("bifen").children[2].active=!1,e[t].getChildByName("t_teshupaixing").active=!1,e[t].getChildByName("sss_img_lipaiz").active=!1,e[t].active=!1}this.lipaizhong_opt(!0),this.celarKaiQiang();var c=cc.global.room._roomData;if(c.gameStatus<=1){for(t=0;t<c.users.length;t++)if(c.users[t].index==c.myIndex){1!=c.users[t].userStatus&&(this.node.getChildByName("game").getChildByName("yaoqing").getChildByName("sss_btn_zhunbei").active=!0);break}c.startIndex==c.myIndex&&c.game_index,cc.find("Canvas/game/yaoqing/btn_start").active=!1}this.initUser(c.users),this.initVisitor(),this.showRoomNum(this.headLeft.getChildByName("roominfo"),cc.global.room._roomData.room_no),0==cc.global.util.roomType||10==cc.global.util.roomType?(console.log("\u521d\u59cb\u5316\u5c40\u6570\uff0c\u5f53\u524d\u6570\u636e\uff1a"+JSON.stringify(c)),this.showJushu(this.headLeft.getChildByName("roominfo"),c.game_index,c.game_count)):this.headLeft.getChildByName("roominfo").getChildByName("jushu").active=!1,1==cc.global.util.roomType&&(this.node.getChildByName("headLeft").getChildByName("roominfo").active=!1),cc.find("headLeft/roominfo/current_time",this.node).getComponent(cc.Label).string=cc.global.util.getCurrentTime()},initVisitor:function(){for(var e=cc.global.room._roomData.users,t=new Array,i=0;i<e.length;i++)t.push(this.getIndex(e[i].index));var n=cc.find("seat_node",this.node),o=6;cc.global.room._roomData.playerCount&&(o=cc.global.room._roomData.playerCount);for(var a=0;a<n.children.length;a++)!t.hasVal(a)&&cc.global.room._roomData.myIndex==this._visitPlayerIndex&&a<o?n.children[a].active=!0:n.children[a].active=!1},initUser:function(e){for(var t=cc.global.room._roomData,i=0;i<e.length;i++){this.setIndex(e[i].index);var n=!1;0==e[i].status&&(n=!0),this.userDisconnect(e[i].index,n),this.genders[e[i].index]="\u7537"==e[i].sex?"m":"w";var o=this.getIndex(e[i].index),a=this.node.getChildByName("game").getChildByName("player"+o);a.getChildByName("touxiang").getChildByName("name").getComponent(cc.Label).string=e[i].name,a.getChildByName("touxiang").getChildByName("score").getComponent(cc.Label).string=e[i].score,a.getChildByName("zhuang").active=!1,t.zhuang==e[i].index?a.getChildByName("touxiang").getChildByName("zhuang").active=!0:a.getChildByName("touxiang").getChildByName("zhuang").active=!1,""!=e[i].headimg&&function(t){console.log("\u5f53\u524d\u7528\u6237\u4fe1\u606f"+e[i].name+"\uff0c\u7528\u6237\u5934\u50cf\uff1a"+e[i].headimg),cc.loader.load(e[i].headimg,function(e,i){var n=new cc.SpriteFrame(i,cc.Rect(0,0,i.width,i.height));t.getChildByName("touxiang").getChildByName("sss_img_touxiang").getComponent(cc.Sprite).spriteFrame=n})}(a),(t.gameStatus<=1||4==t.gameStatus)&&(1==e[i].userStatus?a.getChildByName("ready_ok").active=!0:a.getChildByName("ready_ok").active=!1),a.getChildByName("pochan").active=e[i].isCollapse,a.active=!0}},gameReady:function(e){for(var t=this.getIndex(e),i=cc.global.room._roomData,n=0;n<i.users.length;n++)i.users[n].index==e&&(cc.global.room._roomData.users[n].userStatus=1,this.node.getChildByName("game").getChildByName("player"+t).getChildByName("ready_ok").active=!0);e==i.myIndex&&(cc.global.room._roomData.gameStatus=1,this.isStartCounting&&(this.isStartCounting=!1),this.showOrHideQiePai(!1),this.showOrHideQiePaiBtn(!1),this.initView())},onXiazhuClick:function(e,t){this.node.getChildByName("chouma_btn").active=!1;var i=cc.global.room._roomData.baseNum[t].val;cc.global.net.send("gameXiaZhu_SSS",{account:cc.global.util.userinfo.account,room_no:cc.global.room._roomData.room_no,money:i})},updateScore:function(e){for(var t=cc.global.room._roomData.users,i=0;i<t.length;i++){var n=this.getIndex(t[i].index),o=this.node.getChildByName("game").getChildByName("player"+n);o.getChildByName("touxiang").getChildByName("score").getComponent(cc.Label).string=t[i].score,o.getChildByName("pochan").active=t[i].isCollapse}},changeGameStatus:function(e){var t=this,i=cc.global.room._roomData;switch(this.updateScore(i.gameData),0!=cc.global.util.roomType&&10!=cc.global.util.roomType||this.showJushu(this.headLeft.getChildByName("roominfo"),i.game_index,i.game_count),i.gameStatus){case 0:case 1:cc.find("game/yaoqing/btn_replace",this.node).active=!1,e||this.initView();break;case 2:this.initView(),this.showOrHideQiePai(!1),this.showOrHideQiePaiBtn(!1),this.showOrHideQpzIcon(!1),cc.global.util.closeAlert(),cc.find("Canvas/game/yaoqing/btn_start").active=!1,cc.find("Canvas/game/yaoqing/sss_btn_zhunbei").active=!1,cc.find("Canvas/frm_startTip").active=!1,this.gameData.myPai=i.myPai,this.initGame();break;case 3:cc.find("game/yaoqing/btn_replace",this.node).active=!1,this.initCheckMyPai(!1);var n=1e3-(i.bipaiTimer?i.bipaiTimer:0);n<0?n=0:this.setGameState(2);for(var o=0;o<i.users.length;o++){var a=this.getIndex(i.users[o].index),c=this.node.getChildByName("game").getChildByName("player"+a);i.users[o].userStatus>1&&this.chupaiEnd(i.users[o].index),this.getIndex(i.zhuang)==a?c.getChildByName("touxiang").getChildByName("zhuang").active=!0:c.getChildByName("touxiang").getChildByName("zhuang").active=!1}this.gameData.bipaiOver=!1,n>0?cc.global.util.mySetTimeout(function(){t.node&&t.showBipai()},n):t.showBipai();break;case 4:this.intoJiesuan();break;case 5:this.intoJiesuan(!0);break;case 6:this.startXiazhu();break;case 8:var s=this.node.getChildByName("game").children;for(o=0;o<s.length;o++)-1!=s[o].name.indexOf("player")&&(s[o].getChildByName("ready_ok").active=!1);this.showBanker()}this.startTimer(i)},initGame:function(){console.log("initgame");var e=cc.global.room._roomData;this.node.getChildByName("ipcheck").active=!1,this.node.getChildByName("chouma_btn").active=!1,console.log("\u91cd\u7f6eselectCards"),this.gameData.selectCards=new Array,this.node.getChildByName("statement").active=!1;for(var t=this.node.getChildByName("game"),i=0;i<t.children.length;i++){if(-1!=t.children[i].name.indexOf("player"))null!=(o=t.getChildByName("player"+i))&&(o.getChildByName("ready_ok").active=!1),this.getIndex(e.zhuang)==i?o.getChildByName("touxiang").getChildByName("zhuang").active=!0:o.getChildByName("touxiang").getChildByName("zhuang").active=!1}this.node.getChildByName("headRight").getChildByName("btn_xipai").active=!1;var n=e.users;for(i=0;i<n.length;i++)if(1==n[i].userStatus||6==n[i].userStatus){var o,a=this.getIndex(n[i].index);if((o=this.node.getChildByName("game").getChildByName("player"+a)).getChildByName("sss_img_lipaiz").active=!0,0==a)this.createGunPaiAinme(),this.playSound("start_poker",e.myIndex),this.setGameState(1);else{var c=o.getChildByName("pai");this.init_handpai(c,this.card_small_atlas,this.card_mp_small_atlas)}}else{if(2!=n[i].userStatus)continue;this.chupaiEnd(n[i].index)}},startXiazhu:function(){var e=cc.global.room._roomData;this.node.getChildByName("ipcheck").active=!1,this.gameData.selectCards=new Array,this.node.getChildByName("statement").active=!1;for(var t=this.node.getChildByName("game"),i=0;i<t.children.length;i++)if(-1!=t.children[i].name.indexOf("player")){var n=t.getChildByName("player"+i);null!=n&&(n.getChildByName("ready_ok").active=!1),this.getIndex(e.zhuang)==i?n.getChildByName("touxiang").getChildByName("zhuang").active=!0:n.getChildByName("touxiang").getChildByName("zhuang").active=!1}this.node.getChildByName("headRight").getChildByName("btn_xipai").active=!1;var o=e.users;for(i=0;i<o.length;i++)if(o[i].index!=e.zhuang&&o[i].index==e.myIndex&&1==o[i].userStatus){var a=this.node.getChildByName("chouma_btn"),c=e.baseNum;for(i=0;i<a.children.length;i++)i<c.length?(a.children[i].getChildByName("label").getComponent(cc.Label).string=c[i].name,1==c[i].isuse?a.children[i].getComponent(cc.Button).interactable=!0:a.children[i].getComponent(cc.Button).interactable=!1):a.children[i].active=!1;a.active=!0;break}},doXiazhu:function(e){var t=this.getIndex(e.index),i=this.node.getChildByName("game").getChildByName("player"+t);i.getChildByName("xiazhu").getComponent(cc.Label).string=e.value+"\u500d",i.getChildByName("xiazhu").active=!0,e.index==cc.global.room._roomData.myIndex&&(this.node.getChildByName("chouma_btn").active=!1)},init_handpai:function(e,t,i){var n=cc.global.room._roomData;if(2==n.gameStatus)if("player0"==e.parent.name&&cc.global.room._roomData.myIndex!=this._visitPlayerIndex){for(var o=n.myPai,a=this.node.getChildByName("liPaiZhong"),c=a.getChildByName("paixing").getComponentsInChildren(cc.Sprite),s=0;s<o.length;s++){var l=o[s];this.setSpriteFrameByNum(l,c[s],t),n.maPaiAccount==cc.global.util.userinfo.account&&n.mapai==l&&this.setSpriteFrameByNum(l,c[s],i)}a.active=!0,this.lipaizhong_opt(!1),this.showCanUsePaiXing(o);var r=a.getChildByName("sss_btn_teshupai_an");n.myPaiType>0?(r.active=!0,this.onTesuClick(r)):r.active=!1}else this.animShowCards(e);else this.lipaizhong_opt(!0)},shoot:function(e,t){this.playSound("OUT_CARD");for(var i=this.gameData.selectCards,n=this.node.getChildByName("liPaiZhong"),o=n.getChildByName("paixing"),a=0;a<i.length;a++){var c=this.getRepeatTag(parseInt(i[a]),o,function(e){return 35==e.y&&e.active});c.y=0,c.active=!1,this.gameData.myPai.removeVal(parseInt(i[a]))}if(this.gameData.selectCards=new Array,this.showCanUsePaiXing(this.gameData.myPai),3==this._dunSelected.up.length&&5==this._dunSelected.cen.length&&5==this._dunSelected.down.length)return n.getChildByName("zdlp_liangpai").active=!0,void(n.getChildByName("zdlp_quxiao").active=!0);if(!t&&this.gameData.myPai.length<=5){var s,l,r=n.getChildByName("lipai_tc");if(3-this._dunSelected.up.length==this.gameData.myPai.length?(s=r.getChildByName("t_toudao"),l="up"):5-this._dunSelected.cen.length==this.gameData.myPai.length?(s=r.getChildByName("t_zhongdao"),l="cen"):5-this._dunSelected.down.length==this.gameData.myPai.length&&(s=r.getChildByName("t_weidao"),l="down"),null!=s){for(a=0;a<this.gameData.myPai.length;a++)this.getRepeatTag(parseInt(this.gameData.myPai[a]),o,function(e){return e.active&&e.y<35}).y=35;this.onPaikuangClick(s,l)}}},chupaiEnd:function(e){var t=this.getIndex(e),i=this.node.getChildByName("game").getChildByName("player"+t),n=cc.global.room._roomData;0==t&&2==n.gameStatus&&cc.global.room._roomData.myIndex!=this._visitPlayerIndex&&(cc.find("game/yaoqing/btn_replace",this.node).active=!0),i.getChildByName("pai").active=!0;for(var o=i.getChildByName("pai").getChildByName("up").children,a=0;a<o.length;a++)this.setSpriteFrameByNum(0,o[a].getComponent(cc.Sprite),this.card_small_atlas,!0);for(var c=i.getChildByName("pai").getChildByName("cen").children,s=0;s<c.length;s++)this.setSpriteFrameByNum(0,c[s].getComponent(cc.Sprite),this.card_small_atlas,!0);for(var l=i.getChildByName("pai").getChildByName("down").children,r=0;r<l.length;r++)this.setSpriteFrameByNum(0,l[r].getComponent(cc.Sprite),this.card_small_atlas,!0);i.getChildByName("paianime").active=!1,i.getChildByName("sss_img_lipaiz").active=!1,i.getChildByName("done_ok").active=!0},onCheckMypaiClick:function(){2==cc.global.room._roomData.gameStatus&&(this.gameData.checkMyPai?this.initCheckMyPai(!1):this.sendReq("checkMypai_SSS",{account:cc.global.util.userinfo.account,room_no:cc.global.room._roomData.room_no,uuid:cc.global.util.userinfo.uuid}))},initCheckMyPai:function(e){this.gameData.checkMyPai=!1;for(var t=cc.find("Canvas/game/player0/pai/up"),i=0;i<t.children.length;i++)t.children[i].getComponent(cc.Sprite).spriteFrame=this.card_small_atlas.getSpriteFrame("card_0"),e&&(t.children[i].addComponent(cc.Button),t.children[i].on("click",this.onCheckMypaiClick,this));for(var n=cc.find("Canvas/game/player0/pai/cen"),o=0;o<n.children.length;o++)n.children[o].getComponent(cc.Sprite).spriteFrame=this.card_small_atlas.getSpriteFrame("card_0"),e&&(n.children[o].addComponent(cc.Button),n.children[o].on("click",this.onCheckMypaiClick,this));for(var a=cc.find("Canvas/game/player0/pai/down"),c=0;c<a.children.length;c++)a.children[c].getComponent(cc.Sprite).spriteFrame=this.card_small_atlas.getSpriteFrame("card_0"),e&&(a.children[c].addComponent(cc.Button),a.children[c].on("click",this.onCheckMypaiClick,this))},checkMypaiPush:function(e){this.gameData.checkMyPai=!0;var t=cc.find("Canvas/game/player0/pai/up"),i=e.headPai;this.sortCardDesc(i);for(var n=0;n<t.children.length;n++)t.children[n].getComponent(cc.Sprite).spriteFrame=this.card_small_atlas.getSpriteFrame("card_"+i[n]);var o=cc.find("Canvas/game/player0/pai/cen"),a=e.midPai;this.sortCardDesc(a);for(var c=0;c<o.children.length;c++)o.children[c].getComponent(cc.Sprite).spriteFrame=this.card_small_atlas.getSpriteFrame("card_"+a[c]);var s=cc.find("Canvas/game/player0/pai/down"),l=e.footPai;this.sortCardDesc(l);for(var r=0;r<s.children.length;r++)s.children[r].getComponent(cc.Sprite).spriteFrame=this.card_small_atlas.getSpriteFrame("card_"+l[r])},showBipai:function(){var e=cc.global.room._roomData,t=e.gameData.showIndex,i=(e.gameData.data,e.bipaiTimer?e.bipaiTimer:0);i-=1e3;this.showTeshuType(),t[0].length>0?this.showFanpai(0,0,i):this.showTeshu(i)},showTeshuType:function(){for(var e=cc.global.room._roomData,t=(e.gameData.showIndex,e.gameData.data),i=0;i<t.length;i++){var n=t[i].index,o=this.getIndex(n),a=this.node.getChildByName("game").getChildByName("player"+o);t[i].paiType>0&&(this.setSpriteFrameByName("type_"+t[i].paiType,a.getChildByName("t_teshupaixing").getComponent(cc.Sprite),this.tesupai_altas),a.getChildByName("t_teshupaixing").active=!0,this.playSound("teshu"+t[i].paiType,n))}},showFanpai:function(e,t,i){var n=this;console.log("\u6267\u884c\u7ffb\u724c: dunIndex="+e+";num="+t);var o=cc.global.room._roomData,a=o.gameData.showIndex,c=o.gameData.data;if(a&&a[e]){for(var s=a[e][t],l=this.getIndex(s),r=this.node.getChildByName("game").getChildByName("player"+l),g=null,h=0;h<c.length;h++)if(c[h].index==s){g=c[h].result[e];break}var d=r.getChildByName("bijiao").getChildByName(this.getDunName(e));this.setSpriteFrameByName("dj_type_"+g.type,d.getComponent(cc.Sprite),this.player_altas),r.getChildByName("bijiao").active=!0,d.active=!0,cc.global.util.mySetTimeout(function(){d.active=!1},1e3);var u=r.getChildByName("totalscore"),m=u.mTag?u.mTag:0;m=parseInt(m)+parseInt(g.score),u.mTag=m,m<0?this.setSpriteFrameByName("-",u.getChildByName("muins_1").getComponent(cc.Sprite),this.player_altas):this.setSpriteFrameByName("+",u.getChildByName("muins_1").getComponent(cc.Sprite),this.player_altas);var p=this.getStrNums(Math.abs(m)),f=u.getChildByName("num").getComponentsInChildren(cc.Sprite);for(h=0;h<f.length;h++)h<p.length?(this.setSpriteFrameByName(p[h],f[h],this.player_altas),f[h].node.active=!0):f[h].node.active=!1;u.active=!0,r.getChildByName("bifen").active=!0;var b=r.getChildByName("bifen").getChildByName("sss_img_"+this.getDunName(e));g.score<0?this.setSpriteFrameByName("-",b.getChildByName("muins_1").getComponent(cc.Sprite),this.player_altas):this.setSpriteFrameByName("+",b.getChildByName("muins_1").getComponent(cc.Sprite),this.player_altas);var _=Math.abs(g.score).toString(),y=b.getChildByName("score").getComponentsInChildren(cc.Sprite);for(h=0;h<y.length;h++)h<_.length?(this.setSpriteFrameByName(_.substring(h,h+1),y[h],this.player_altas),y[h].node.active=!0):y[h].node.active=!1;if(b.active=!0,i>0){var v=g.pai;for(h=0;h<v.length;h++){var C=r.getChildByName("pai").getChildByName(this.getDunName(e));cc.global.room._roomData.maPaiIndex==s&&cc.global.room._roomData.mapai==v[h]?C.children[h].getComponent(cc.Sprite).spriteFrame=this.card_mp_small_atlas.getSpriteFrame("card_"+v[h]):C.children[h].getComponent(cc.Sprite).spriteFrame=this.card_small_atlas.getSpriteFrame("card_"+v[h])}(i-=700)<0?cc.global.util.mySetTimeout(function(){i=0,t+1<a[e].length?n.showFanpai(e,t+1,i):e+1<a.length?n.showFanpai(e+1,0,i):n.showTeshu(i)},-i):t+1<a[e].length?this.showFanpai(e,t+1,i):e+1<a.length?this.showFanpai(e+1,0,i):this.showTeshu(i)}else{this.playSound("common"+g.type,s);var N=new Object;N.player=r,N.dunIndex=e,N.paiArr=g.pai,N.playerIndex=s,this.playerFinish(N,function(){console.log("\u64ad\u653e\u7ed3\u675f\uff0c\u8fdb\u5165\u56de\u8c03"),t+1<a[e].length?n.showFanpai(e,t+1,i):e+1<a.length?n.showFanpai(e+1,0,i):n.showTeshu(i)})}}else console.log("\u6570\u636e\u9519\u8bef\uff0c\u76f4\u63a5\u8fd4\u56de................")},showTeshu:function(e){for(var t=this,i=cc.global.room._roomData.gameData.data,n=0;n<i.length;n++){if(i[n].paiType>0)for(var o=i[n].index,a=this.getIndex(o),c=this.node.getChildByName("game").getChildByName("player"+a).getChildByName("pai").getComponentsInChildren(cc.Sprite),s=0,l=0;l<i[n].result.length;l++){var r=i[n].result[l].pai;this.sortCardDesc(r);for(var g=0;g<r.length;g++)cc.global.room._roomData.maPaiIndex==i[n].index&&cc.global.room._roomData.mapai==r[g]?t.setSpriteFrameByNum(r[g],c[s],t.card_mp_small_atlas,!0):t.setSpriteFrameByNum(r[g],c[s],t.card_small_atlas,!0),s++}}t.helpShowTotalScore(i),cc.global.util.mySetTimeout(function(){t._kaiqiangArray=new Array,t.showDaqiang(0,e)},500)},showDaqiang:function(e,t){var i=this,n=this.node.getChildByName("kaiqiangnode"),o=cc.global.room._roomData,a=o.gameData.data,c=o.gameData.dq;if(e>=c.length){for(var s=0;s<a.length;s++)if(1==a[s].isQld){this.showQuanleida(a[s].index,t);break}this.gameData.bipaiOver=!0}else{var l=this.getIndex(c[e][0]),r=this.getIndex(c[e][1]),g=n.getChildByName("player"+r).getChildByName("kaiqiang").getChildByName("kaiqiang"+l);if(i._kaiqiangArray.push(g),g.active=!0,t>0){t-=1100;for(s=0;s<g.getChildByName("qiangkou").children.length;s++)g.getChildByName("qiangkou").children[s].active=!0;t<0?cc.global.util.mySetTimeout(function(){t=0,i.showDaqiang(e+1,t)},-t):this.showDaqiang(e+1,t)}else{var h=g.getChildByName("kaiqiang_qiang").getComponent(cc.Animation);i.playSound("GAME_GUNREADY"),i._kqFinishBack=function(){console.log("\u8fdb\u5165\u5f00\u67aa\u7ed3\u675f\u56de\u8c03\uff0c\u5f53\u524d\u5f00\u67aa\u8282\u70b9\uff1aplayer"+l+",\u5f53\u524d\u6307\u9488\uff1a"+e),i.showDaqiang(e+1,t)},h.play()}}},showQuanleida:function(e,t){var i=this;if(t<3e3){var n=cc.global.room._roomData;cc.tween(this.node).call(function(){i.playSound("special1",n.myIndex)}).delay(.6).call(function(){i.playSound("sss_qld")}).start();var o=this.node.getChildByName("homeRun").getChildByName("player"+this.getIndex(e));o.active=!0,o.getComponent(cc.Animation).play(),cc.global.util.mySetTimeout(function(){for(var e=0;e<o.children.length;e++)o.children[e].getComponent(cc.Animation).play()},2750),cc.global.util.mySetTimeout(function(){o.active=!1},3800)}},playerFinish:function(e,t){var i=e.dunIndex,n=e.player,o=e.paiArr;this.sortCardDesc(o);var a,c,s=e.playerIndex;this.getDunName(i);(a=n.getChildByName("pai").getChildByName(this.getDunName(i))).zIndex=1,a.active=!0,c=a.getComponentsInChildren(cc.Sprite);for(var l=0;l<o.length;l++){var r=n.name+"-"+i+"-"+l;console.log("\u5f53\u524d\u52a8\u753b\u540d\u5b57\u662f:"+r);var g=c[l].node.getComponent(cc.Animation);if(null!=g.getClips()||0!=g.getClips().length){var h=g.getAnimationState(r);null!=h&&(console.log("\u5df2\u5b58\u5728\u65e7\u7684\u52a8\u753b\uff0c\u5148\u6e05\u9664,\u52a8\u753b\u957f\u5ea6"+g.getClips().length),g.removeClip(h.clip))}var d=this.getSpriteFrameByNum(0,this.card_small_atlas),u=this.getSpriteFrameByNum(o[l],this.card_small_atlas);cc.global.room._roomData.maPaiIndex==s&&cc.global.room._roomData.mapai==o[l]&&(u=this.getSpriteFrameByNum(o[l],this.card_mp_small_atlas));var m=cc.AnimationClip.createWithSpriteFrames([c[l].spriteFrame],.5);m.name=r,m.curveData={props:{scaleX:[{frame:0,value:1},{frame:.25,value:0},{frame:.5833333333333334,value:1}]},comps:{"cc.Sprite":{spriteFrame:[{frame:0,value:d},{frame:.25,value:u}]}}},m.speed=3,g.addClip(m),0==l&&(this._callbackparam={tarNode:a,backFun:t},0!=this._bindList.length&&this._bindList.hasVal(r)?this._bindList.hasVal(r)&&(console.log("\u5df2\u5b58\u5728\u4e8b\u4ef6\uff0c\u5148\u6e05\u9664\u3002\u52a8\u753b\u540d\uff1a"+r),g.off("finished",this.playerFinishBack,this)):(console.log("\u6ce8\u518c\u4e8b\u4ef6\u3002\u52a8\u753b\u540d\uff1a"+r),this._bindList.push(r)),g.on("finished",this.playerFinishBack,this)),g.play(r)}},playerFinishBack:function(e){var t=this._callbackparam;t.tarNode.zIndex=0,t.backFun()},animeEnd:function(e){for(var t=e.getChildByName("pai"),i=0;i<t.children.length;i++){console.log("\u5f3a\u5236\u505c\u6b62\u5f53\u524d\u52a8\u753b\uff0c\u9053\u6570\uff1a"+t.children[i].name);for(var n=t.children[i].children,o=0;o<n.length;o++){var a=t.children[i]+o,c=n[o].getComponent(cc.Animation);if(null!=c.getClips()||0!=c.getClips().length)null!=c.getAnimationState(a)&&c.stop()}}},setGameState:function(e){var t=this.node.getChildByName("game_state");t.getChildByName("chupai").active=!1,t.getChildByName("bipai").active=!1,1==parseInt(e)?(t.getChildByName("chupai").active=!0,t.getChildByName("chupai").getComponent(cc.Animation).play()):2==parseInt(e)&&(this.lipaizhong_opt(!0),t.getChildByName("bipai").active=!0,t.getChildByName("bipai").getComponent(cc.Animation).play(),this.playSound("start_compare",cc.global.room._roomData.myIndex))},userDisconnect:function(e,t){var i=this.getIndex(e);this.node.getChildByName("game").getChildByName("player"+i)},returnGame:function(){3==cc.global.room._roomData.gameStatus&&this.onReconnectClick(null,!0)},resetGame:function(){var e=cc.global.room._roomData;if(e.xiazhu&&(2==e.gameStatus||3==e.gameStatus||4==e.gameStatus||6==e.gameStatus))for(var t=0;t<e.xiazhu.length;t++){var i=this.getIndex(e.xiazhu[t].index),n=this.node.getChildByName("game").getChildByName("player"+i);1==e.xiazhu[t].result?(n.getChildByName("xiazhu").getComponent(cc.Label).string=e.xiazhu[t].value+"\u500d",n.getChildByName("xiazhu").active=!0):n.getChildByName("xiazhu").active=!1}this.changeGameStatus(!0),cc.global.room._roomData.jiesanData&&this.closeRoomCheck(cc.global.room._roomData.jiesanData),this.node.getChildByName("game").getChildByName("player0").getChildByName("offline").active=!1,cc.global.util.closeAlert()},getMyCollapseStatus:function(){if(cc.global.room._roomData.myIndex==this._visitPlayerIndex)return!0;for(var e=!1,t=cc.global.room._roomData,i=0;i<t.users.length;i++)if(t.users[i].index==t.myIndex){e=t.users[i].isCollapse;break}return e},intoJiesuan:function(e){var t=this,i=cc.global.room._roomData;if(this.startTimer(i),this.celarKaiQiang(),e)return this.node.getChildByName("statement").getChildByName("nz").getChildByName("str").active=!1,this.node.getChildByName("statement").getChildByName("btnzunbei").active=!1,this.node.getChildByName("statement").getChildByName("btn_likai").active=!1,this.node.getChildByName("statement").getChildByName("btn_xipai").active=!1,t.showJiesuan(),void(t.node.getChildByName("statement").active=!1);var n=!1;i.game_index==i.game_count&&(n=!0),-1==i.cutCardAccount||i.cutCardAccount!=cc.global.util.userinfo.account||n||this.showOrHideQiePaiBtn(!0,1);var o=this.getMyCollapseStatus();this.node.getChildByName("statement").getChildByName("btnzunbei").active=!o,this.node.getChildByName("game").getChildByName("yaoqing").getChildByName("sss_btn_zhunbei").active=!o&&!n,1==i.speedMode&&this.showJisuJiesuan(),i.jiesuanData&&(this.node.getChildByName("statement").getChildByName("nz").getChildByName("str").active=!1,this.node.getChildByName("statement").getChildByName("btnzunbei").active=!1,this.node.getChildByName("statement").getChildByName("btn_likai").active=!1,this.node.getChildByName("statement").getChildByName("btn_xipai").active=!1,cc.global.util.mySetTimeout(function(){t.showJiesuan(),t.node.getChildByName("statement").active=!1},3e3))},showJisuJiesuan:function(){var e=cc.global.room._roomData.gameData.data;cc.find("game/yaoqing/btn_replace",this.node).active=!1,this.lipaizhong_opt(!0),this.initCheckMyPai(!1);for(var t=0;t<e.length;t++){var i=e[t].index,n=this.getIndex(i),o=this.node.getChildByName("game").getChildByName("player"+n);this.chupaiEnd(i),e[t].paiType>0&&(this.setSpriteFrameByName("type_"+e[t].paiType,o.getChildByName("t_teshupaixing").getComponent(cc.Sprite),this.tesupai_altas),o.getChildByName("t_teshupaixing").active=!0)}for(var a=0;a<e.length;a++){var c=e[a].index,s=this.getIndex(c),l=this.node.getChildByName("game").getChildByName("player"+s);l.getChildByName("sss_img_lipaiz").active=!1,l.getChildByName("done_ok").active=!0;for(var r=e[a].result,g=0;g<3;g++){var h=l.getChildByName("totalscore"),d=e[a].sum;d<0?this.setSpriteFrameByName("-",h.getChildByName("muins_1").getComponent(cc.Sprite),this.player_altas):this.setSpriteFrameByName("+",h.getChildByName("muins_1").getComponent(cc.Sprite),this.player_altas);for(var u=this.getStrNums(Math.abs(d)),m=h.getChildByName("num").getComponentsInChildren(cc.Sprite),p=0;p<m.length;p++)p<u.length?(this.setSpriteFrameByName(u[p],m[p],this.player_altas),m[p].node.active=!0):m[p].node.active=!1;h.active=!0,l.getChildByName("bifen").active=!0;var f=l.getChildByName("bifen").getChildByName("sss_img_"+this.getDunName(g));r[g].score<0?this.setSpriteFrameByName("-",f.getChildByName("muins_1").getComponent(cc.Sprite),this.player_altas):this.setSpriteFrameByName("+",f.getChildByName("muins_1").getComponent(cc.Sprite),this.player_altas);for(var b=Math.abs(r[g].score).toString(),_=f.getChildByName("score").getComponentsInChildren(cc.Sprite),y=0;y<_.length;y++)y<b.length?(this.setSpriteFrameByName(b.substring(y,y+1),_[y],this.player_altas),_[y].node.active=!0):_[y].node.active=!1;f.active=!0;var v=r[g].pai;l.getChildByName("pai").active=!0;for(p=0;p<v.length;p++){var C=l.getChildByName("pai").getChildByName(this.getDunName(g));cc.global.room._roomData.maPaiIndex==c&&cc.global.room._roomData.mapai==v[p]?C.children[p].getComponent(cc.Sprite).spriteFrame=this.card_mp_small_atlas.getSpriteFrame("card_"+v[p]):C.children[p].getComponent(cc.Sprite).spriteFrame=this.card_small_atlas.getSpriteFrame("card_"+v[p])}}}},disconnectPush:function(){this.node.getChildByName("game").getChildByName("player0").getChildByName("offline").active=!0},closeFrm:function(e){cc.global.util.playSound_buttonClick(),e.target.parent.active=!1},showJiesuan:function(){var e="***\u6587\u660e\u5a31\u4e50\uff0c\u7981\u6b62\u8d4c\u535a***\n",t=cc.global.room._roomData,i=t.jiesuanData;this.node.getChildByName("jiesuan").active=!0;var n=cc.find("Canvas/jiesuan/zdjs_jiesuan_bg/con/jiesuan"),o=n.children,a=(this.node.getChildByName("headRight").getChildByName("daojishi"),n.parent.parent.getChildByName("Information"));a.getChildByName("fanjianhao").getComponent(cc.Label).string="\u623f\u95f4\u53f7\uff1a"+t.room_no,a.getChildByName("jushu").getComponent(cc.Label).string="\u5c40\u6570\uff1a"+t.game_count,a.getChildByName("time").getComponent(cc.Label).string=this.getNowDate(),e+="\u73a9\u6cd5\uff1a\u529f\u592b\u5341\u4e09\u6c34\n",e+="\u623f\u95f4\u53f7\uff1a"+t.room_no+"\n",e+="\u5c40\u6570\uff1a"+t.game_index+"/"+t.game_count+"\n",e+="\u65f6\u95f4\uff1a"+this.getNowDate()+"\n",e+="--------------------------------------\n";for(var c=0;c<o.length;c++)if(c<i.length){e+=c+1+"\u3001"+i[c].name+"(ID\uff1a"+i[c].account+")   "+i[c].score+"\n";var s=o[c].getChildByName("wanjia");s.getChildByName("name").getComponent(cc.Label).string=i[c].name,""!=i[c].headimg&&function(e){cc.loader.load(i[c].headimg,function(t,i){var n=new cc.SpriteFrame(i,cc.Rect(0,0,i.width,i.height));e.getChildByName("zdjs_touxiang").getComponent(cc.Sprite).spriteFrame=n})}(s),1==i[c].isFangzhu?s.getChildByName("img_fangzhu").active=!0:s.getChildByName("img_fangzhu").active=!1;var l=o[c].getChildByName("detailed");l.getChildByName("daqiang").getComponentInChildren(cc.Label).string=i[c].dqTimes,l.getChildByName("teshu").getComponentInChildren(cc.Label).string=i[c].specialTimes,l.getChildByName("putong").getComponentInChildren(cc.Label).string=i[c].ordinaryTimes,l.getChildByName("tongsha").getComponentInChildren(cc.Label).string=i[c].qldTimes,l.getChildByName("cut").active=!1,o[c].getChildByName("fenshu").getComponent(cc.Label).string=i[c].score,1==i[c].isWinner&&(o[c].getChildByName("wanjia").getChildByName("ic_dayingjia").active=!0),o[c].active=!0}else o[c].active=!1;this.node.getChildByName("jiesuan").getChildByName("zdjs_jiesuan_bg").getChildByName("btn_copy").active=cc.global.room._roomData.myIndex!=this._visitPlayerIndex,this.node.getChildByName("jiesuan").getChildByName("record_str").getComponent(cc.Label).string=e},onCopyRecordClick:function(e){cc.global.util.playSound_buttonClick(),cc.global.util.copy(this.node.getChildByName("jiesuan").getChildByName("record_str"))},showXiaojiesuan:function(){var e=this.node.getChildByName("statement"),t=cc.global.room._roomData,i=t.gameData.data;e.active=!0;var n=0;e.getChildByName("jushu").getComponent(cc.Label).string="\u7b2c  "+(t.game_index-1)+"  \u5c40",e.getChildByName("time").getComponent(cc.Label).string=this.getNowDate();for(var o=e.getChildByName("detail").getChildByName("con").getChildByName("scroller").children,a=new Array,c=0;c<o.length;c++)if(c<i.length){var s=this.getIndex(i[c].index),l=this.node.getChildByName("game").getChildByName("player"+s);a.push(l);var r=o[c].getChildByName("user");r.getChildByName("name").getComponent(cc.Label).string=l.getChildByName("touxiang").getChildByName("name").getComponent(cc.Label).string,o[c].getChildByName("xiazhu").active=l.getChildByName("xiazhu").active,o[c].getChildByName("xiazhu").getComponent(cc.Label).string=l.getChildByName("xiazhu").getComponent(cc.Label).string;var g=l.getChildByName("touxiang").getChildByName("sss_img_touxiang").getComponent(cc.Sprite).spriteFrame;"img_touxiang_moren"==g.name?cc.global.util.mySetTimeout(function(){for(var e=0;e<a.length;e++)o[e].getChildByName("user").getChildByName("img").getComponent(cc.Sprite).spriteFrame=a[e].getChildByName("touxiang").getChildByName("sss_img_touxiang").getComponent(cc.Sprite).spriteFrame},1e3):r.getChildByName("img").getComponent(cc.Sprite).spriteFrame=g,i[c].index==t.zhuang?r.getChildByName("fangzhu").active=!0:r.getChildByName("fangzhu").active=!1;var h=parseInt(i[c].sum);o[c].getChildByName("score").color=h<0?new cc.Color(255,255,255):new cc.Color(226,233,75),o[c].getChildByName("score").getComponent(cc.Label).string=h;for(var d=[],u=0;u<i[c].result.length;u++){var m=i[c].result[u].pai;this.sortCardDesc(m);for(var p=0;p<m.length;p++)d.push(m[p])}var f=o[c].getChildByName("pai").getComponentsInChildren(cc.Sprite);for(u=0;u<f.length;u++)cc.global.room._roomData.maPaiIndex==i[c].index&&cc.global.room._roomData.mapai==d[u]?this.setSpriteFrameByNum(d[u],f[u],this.card_mp_big_atlas,!0):this.setSpriteFrameByNum(d[u],f[u],this.card_big_atlas,!0);i[c].index==t.myIndex&&(n=i[c].sum>0?1:i[c].sum<0?-1:0),o[c].active=!0}else o[c].active=!1;var b=this.getMyCollapseStatus();1==parseInt(n)?(e.getChildByName("not_in").active=!1,e.getChildByName("draw").active=!1,e.getChildByName("win").active=!0,e.getChildByName("lose").active=!1):-1==parseInt(n)?(e.getChildByName("not_in").active=!1,e.getChildByName("win").active=!1,e.getChildByName("lose").active=!0,e.getChildByName("draw").active=!1):b?(e.getChildByName("not_in").active=!0,e.getChildByName("win").active=!1,e.getChildByName("lose").active=!1,e.getChildByName("draw").active=!1):(e.getChildByName("not_in").active=!1,e.getChildByName("win").active=!1,e.getChildByName("lose").active=!1,e.getChildByName("draw").active=!0),1==t.isBanker&&this.showBanker()},show_AllOver:function(){this.node.getChildByName("jiesuan").active=!1,this.node.getChildByName("newturn").active=!0},initHandle:function(){var e=this,t=this;this.node.on("disconnectPush",function(e){t.disconnectPush(e)}),this.node.on("joinUserInit",function(e){var i=e;t.initUser(i),t.initVisitor()}),this.node.on("playerReady",function(e){var i=e.index;t.gameReady(i)}),this.node.on("gameStartPush",function(e){var t=e;1==t.code?cc.find("Canvas/frm_startTip").active=!0:(cc.find("Canvas/frm_startTip").active=!1,cc.global.util.tipMsg(t.msg))}),this.node.on("gameXiaZhuPush",function(e){var i=e;t.doXiazhu(i)}),this.node.on("changeGameStatus",function(e){var i=e;cc.global.room._roomData;for(var n in i)cc.global.room._roomData[n]=i[n];t.changeGameStatus()}),this.node.on("sss_cutCardEvent_push",function(t){e.qiepaiBack(t)}),this.node.on("gameAction",function(e){console.log("gameAction",e);for(var i=cc.global.room._roomData.users,n=0;n<i.length;n++)if(i[n].index==e.index){cc.global.room._roomData.users[n].userStatus=2;break}var o=e;t.chupaiEnd(o.index),t.startTimer(o)}),this.node.on("closeRoom",function(e){if(0==e.code){t.closeTimer&&(clearInterval(t.closeTimer),t.closeTimer=null);for(var i="",n=0;n<e.names.length;n++)i+="\u3010"+e.names[n]+"\u3011";return t.node.getChildByName("tips").getChildByName("tip2").getChildByName("tishi_bg_zhong").getChildByName("label").getComponent(cc.Label).string="\u7531\u4e8e\u73a9\u5bb6"+i+"\u62d2\u7edd,\u623f\u95f4\u89e3\u6563\u5931\u8d25,\u6e38\u620f\u7ee7\u7eed",t.node.getChildByName("tips").active=!0,void(t.node.getChildByName("dissolutionApplication").active=!1)}t.closeRoomCheck(e.data)}),this.node.on("exitRoom",function(e){var i=e;t.exitRoom(i),t.startTimer(i)}),this.node.on("reconnectGame",function(e){cc.global.game._dispatchEventHandel=null;var t=e;for(var i in t)cc.global.room._roomData[i]=t[i];cc.global.util.loadTimer=Date.now(),cc.director.loadScene("hall_shisanshui")}),this.node.on("userDisconnect",function(e){var i=e.index;t.userDisconnect(i,!0)}),this.node.on("userReconnect",function(e){var i=e.index;t.userDisconnect(i,!1)}),this.node.on("startTimer",function(e){t.startTimer(e)}),this.node.on("sendMsgEvent",function(e){var i=t.getIndex(e.user),n=e.type,o=e.data;t.showMsg(i,n,o)}),this.node.on("voiceCall",function(e){console.log("[\u6267\u884c\u8bed\u97f3\u52a8\u753b]voiceCall\u56de\u8c03\u51fd\u6570\uff0cdata\uff1a"+JSON.stringify(e)),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org.cocos2dx.javascript.AppActivity","downloadRecordedFilePlay","(Ljava/lang/String;)V",e.msg):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("JsUseOcTool","downloadRecordedFilePlay:",e.msg);var i=t.getIndex(e.myIndex);if(0!=i&&-1!=i){var n=cc.find("Canvas/game/player"+i+"/speaking");n.active=!0,n.getComponent(cc.Animation).play(),cc.global.util.mySetTimeout(function(){n.active=!1,n.getComponent(cc.Animation).stop()},2e3)}}),this.node.on("xipaiMessaPush",function(e){var i=e,n=t.node.getChildByName("xipai");1==i.code?(n.active=!0,cc.global.room._roomData.xipaiData=i,n.getChildByName("tip").getChildByName("con").getComponent(cc.Label).string="\u60a8\u5f53\u524d\u4e3a\u7b2c"+i.cur+"/"+i.allCount+"\u6b21\u6d17\u724c\uff0c\u9700\u8981\u6d88\u8017"+i.sum+"\u5143\u5b9d",n.getChildByName("tip").active=!0):cc.global.util.tipMsg(i.msg)}),this.node.on("xipaiFunPush",function(e){var i=e,n=t.node.getChildByName("xipai");if(1==i.code){var o=t.getIndex(i.index);0==o&&t.onXipaiClick(null,2),t.node.getChildByName("game").getChildByName("player"+o).getChildByName("touxiang").getChildByName("score").getComponent(cc.Label).string=i.score}else n.getChildByName("tip").active=!1,cc.global.util.tipMsg(i.msg),n.active=!1}),this.node.on("tipMsg",function(e){var i=e;switch(i.type){case 0:cc.global.util.tipMsg(i.msg);break;case 1:t.showNormalTip(i.msg);break;case 2:t.showExitTip(i.msg)}}),this.node.on("getMessagePush",function(e){var i=e;t.getMessagePush(i)}),this.node.on("quickJoinClubRoomPush",function(e){t.quickJoinClubRoomPush(e)}),this.node.on("checkMypaiPush_SSS",function(e){t.checkMypaiPush(e)}),this.node.on("sss_relistEvent_push",function(e){t.sss_relistEvent_push(e)}),this.node.on("handleReviewEventPush",function(e){t.handleReviewEventPush(e)}),Notification.on("quickEntryRoomCircleEventPush",this.quickEntryRoomCircleEventPush,this),Notification.on("tea_quickJoinEvent_push",this.teaQuickJoinEventPush,this),Notification.on("memberDetailInfoEventPush",this.memberDetailInfoEventPush,this),Notification.on("tea_infoEvent_push",this.teaInfoEventPush,this),Notification.on("circleVisitListEventPush",this.circleVisitListEventPush,this),Notification.on("circleVisitJoinGameEventPush",this.circleVisitJoinGameEventPush,this);var i=this.node.getChildByName("btn_voice");i.on("touchstart",function(){t.node.getChildByName("yuyin").active=!0,cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org.cocos2dx.javascript.AppActivity","startRecord","()V"):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("JsUseOcTool","startRecord")}),i.on("touchend",function(){t.node.getChildByName("yuyin").active=!1,cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org.cocos2dx.javascript.AppActivity","stopRecording","()V"):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("JsUseOcTool","stopRecording")}),i.on("touchcancel",function(){t.node.getChildByName("yuyin").active=!1,cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org.cocos2dx.javascript.AppActivity","stopRecording","()V"):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("JsUseOcTool","stopRecording")});for(var n=0;n<this.sendBrowList.children.length;n++)this.sendBrowList.children[n].mTag=n+100,this.sendBrowList.children[n].on("touchend",function(e){var i=e.target.mTag;console.log("touchend"+i),t.sendMsg(e,i)});var o=this.node.getChildByName("liPaiZhong").getChildByName("paixing").children;for(n=0;n<o.length;n++)o[n].on("touchstart",function(e){t.playSound("GAME_CARD");var i=t.gameData.myPai.length;t.onCardClick(e.target);var n=t.getTouchNum(e.getLocationX()-t.touch_dx,i);t.gameData.startTouch=n,t.gameData.lastTouch=n,t.gameData.lastPos=e.getLocationX()-t.touch_dx}),o[n].on("touchmove",function(e){var i=t.gameData.myPai.length,n=t.gameData.startTouch,a=t.gameData.lastTouch,c=t.getTouchNum(e.getLocationX()-t.touch_dx,i),s=-1;if(c!=a&&(c>a&&a>=n||c<a&&a<=n?s=c:(c<a&&a>n||c>a&&a<n)&&(s=a),t.gameData.lastTouch=c,s>=0))for(var l=0,r=0;r<o.length;r++)if(o[r].active){if(l==s){t.onCardClick(o[r]);break}l++}t.gameData.lastPos=e.getLocationX()-t.touch_dx});console.log("\u7ed1\u5b9a\u5f00\u67aa\u4e8b\u4ef6");var a=this.node.getChildByName("kaiqiangnode").children;for(n=0;n<a.length;n++)for(var c=a[n].getChildByName("kaiqiang").children,s=0;s<c.length;s++){c[s].getComponentInChildren(cc.Animation).on("finished",this.kqFinishBack,this)}this.node.getChildByName("gunpai").children;this.node.getChildByName("gunpai").getComponent(cc.Animation).on("finished",this.gunPaiShowFun,this)},sendReq:function(e,t,i){cc.global.net.send(e,t)},nextTurn:function(){this._gameStatu=3,console.log("\u53d1\u8d77\u603b\u7ed3\u7b97\u8bf7\u6c42"),this.sendReq("gameSummary_SSS",{room_no:cc.global.room._roomData.room_no,account:cc.global.util.userinfo.account})},getIndex:function(e){if(e<0)return e;var t,i=cc.global.room._roomData.myIndex;if(t=e,i==this._visitPlayerIndex)return e;for(var n=0;n<8;n++)if(this._seatMap[n].index==e){t=this._seatMap[n].seat;break}return console.log("\u8f6c\u6362\u524dindex:"+e+";MyIndex:"+i+";\u8f6c\u6362\u540eindex:"+t),t},getDunName:function(e){return 0==e?"up":1==e?"cen":2==e?"down":void 0},setIndex:function(e){for(var t=cc.global.room._roomData.myIndex,i=0;i<8&&this._seatMap[i].index!=parseInt(e);i++)if((0!=this._seatMap[i].seat||parseInt(e)==parseInt(t))&&-1==this._seatMap[i].index){this._seatMap[i].index=e;break}},showRoomNum:function(e,t){3==cc.global.util.roomType?(this.headLeft.getChildByName("roominfo").getChildByName("info2").active=!1,this.headLeft.getChildByName("roominfo").getChildByName("info").active=!1,e.getChildByName("num").active=!1):(this.headLeft.getChildByName("roominfo").getChildByName("info2").active=!1,this.headLeft.getChildByName("roominfo").getChildByName("info").getComponent(cc.Label).string="\u529f\u592b\u5341\u4e09\u6c34  \u5e95\u5206 "+cc.global.room._roomData.di,this.headLeft.getChildByName("roominfo").getChildByName("info").active=!0,e.getChildByName("num").getComponent(cc.Label).string="\u623f\u53f7\uff1a"+t)},showJushu:function(e,t,i){t||0==t||(t=1,cc.global.room._roomData.game_index=1),i||(i=5,cc.global.room._roomData.game_count=5),e.getChildByName("jushu").getComponent(cc.Label).string="\u7b2c"+t+"/"+i+"\u5c40",cc.find("Canvas/btn_replay/game_index").getComponent(cc.Label).string=t+"/"+i},showDay:function(e){var t=this.countDown.hour,i=this.countDown.min,n=this.countDown.sec;n-1<0?(n=59,i-1<0?(i=59,t--):i--):n--,this.countDown.hour=t,this.countDown.min=i,this.countDown.sec=n;var o=t+":"+(i<10?"0"+i:i)+":"+(n<10?"0"+n:n);e.getComponent(cc.Label).string=o},startCountDown:function(e,t){if(this._countDown&&clearTimeout(this._countDown),t>=0){e.getComponentInChildren(cc.Label).string=t,cc.find("Canvas/cdNode/countdown/tip").getComponent(cc.Label).string="\u79bb\u5f3a\u5236\u6bd4\u724c\u65f6\u95f4\u8fd8\u5269"+t+"\u79d2",t--;var i=this;this._countDown=cc.global.util.mySetTimeout(function(){i.startCountDown(e,t)},1e3)}else if(this.node.getChildByName("liPaiZhong").active){console.log("\u53d1\u8d77\u5f3a\u5236\u914d\u724c");var n=new Object;n.type=1,n.room_no=cc.global.room._roomData.room_no,n.account=cc.global.util.userinfo.account,this.sendReq("gameAction_SSS",n),this.lipaizhong_opt(!0)}},animShowCards:function(e){var t=e.parent;t.getChildByName("paianime").active=!0,this.createMoveAnime(t.getChildByName("paianime"))},setSpriteFrameByName:function(e,t,i){i.getSpriteFrame(e)&&(t.spriteFrame=i.getSpriteFrame(e))},getSpriteFrameByNum:function(e,t){return t.getSpriteFrame("card_"+e)},setSpriteFrameByNum:function(e,t,i,n){if(t.spriteFrame=this.getSpriteFrameByNum(e,i),t.node.mTag=parseInt(e),n)return!1;for(var o=t.node.parent,a="",c=0;;){if(e=e.toString()+a,!o.getChildByName(e)){t.node.name=e,console.log("set num is "+e);break}a="_"+c,c++}},helpShowScore:function(e){var t=e.tmpData,i=e.player,n=t.result[e.pos],o=e.dun,a=t.index,c=i.getChildByName("totalscore"),s=c.mTag?c.mTag:0;s=parseInt(s)+parseInt(n.score),c.mTag=s,s<0?this.setSpriteFrameByName("-",c.getComponentInChildren(cc.Sprite),this.player_altas):this.setSpriteFrameByName("+",c.getComponentInChildren(cc.Sprite),this.player_altas);for(var l=this.getStrNums(Math.abs(s)),r=c.getChildByName("num").getComponentsInChildren(cc.Sprite),g=0;g<r.length;g++)g<l.length?(this.setSpriteFrameByName(l[g],r[g],this.player_altas),r[g].node.active=!0):r[g].node.active=!1;if(c.active=!0,t.myPaiType>0&&!i.getChildByName("t_teshupaixing").active)this.setSpriteFrameByName("type_"+t.myPaiType,i.getChildByName("t_teshupaixing").getComponent(cc.Sprite),this.tesupai_altas),i.getChildByName("t_teshupaixing").active=!0,this.playSound("teshu"+t.myPaiType,a);else if(0==t.myPaiType){this.playSound("common"+n.type,a);var h=i.getChildByName("bijiao").getChildByName(o);this.setSpriteFrameByName("dj_type_"+n.type,h.getComponent(cc.Sprite),this.player_altas),i.getChildByName("bijiao").active=!0,h.active=!0,cc.global.util.mySetTimeout(function(){h.active=!1},1e3)}},helpShowTotalScore:function(e){for(var t=0;t<e.length;t++){var i=this.getIndex(e[t].index),n=this.node.getChildByName("game").getChildByName("player"+i),o=n.getChildByName("totalscore"),a=o.mTag&&o.mTag;a=parseInt(e[t].sum),o.mTag=a,a<0?this.setSpriteFrameByName("-",o.getChildByName("muins_1").getComponent(cc.Sprite),this.player_altas):this.setSpriteFrameByName("+",o.getChildByName("muins_1").getComponent(cc.Sprite),this.player_altas);for(var c=this.getStrNums(Math.abs(a)),s=o.getChildByName("num").getComponentsInChildren(cc.Sprite),l=0;l<s.length;l++)l<c.length?(this.setSpriteFrameByName(c[l],s[l],this.player_altas),s[l].node.active=!0):s[l].node.active=!1;o.active=!0,n.getChildByName("touxiang").getChildByName("score").getComponent(cc.Label).string=e[t].scoreLeft}},playSound:function(e,t){var i="other/";null!=t&&(i=this.genders[t]+"/"),cc.loader.loadRes("Sounds/sss/"+i+e,function(t,n){console.log("\u64ad\u653e\u97f3\u9891:url=Sounds/sss/"+i+e+" ;\u97f3\u91cf\u5f00\u5173:"+cc.global.util.setting.soundOn+" ;\u97f3\u91cf\u8bbe\u7f6e:"+cc.global.util.setting.sound),t||1==cc.global.util.setting.soundOn&&cc.audioEngine.play(n,!1,cc.global.util.setting.sound)})},createMoveAnime:function(e){e.active=!0;for(var t=e.children,i=function(e,t,i,n){var o=e.getComponent(cc.Animation);if(null==o.getClips()||0==o.getClips().length){var a=cc.AnimationClip.createWithSpriteFrames([e.getComponent(cc.Sprite).spriteFrame],.5);a.name="anim_fapai",a.curveData={props:{position:[{frame:0+i,value:[-145,0]},{frame:1+i,value:[t,0]}]}},a.speed=3,o.addClip(a)}return i+=.2,o.play("anim_fapai"),i},n=0;n<t.length;n++){i(e=t[t.length-1-n],-145-16*(n+1),0)}},createGunPaiAinme:function(){this.node.getChildByName("gunpai").active=!0;var e=this.node.getChildByName("gunpai").getComponent(cc.Animation);this.playSound("GAME_SHUFFLE"),e.play()},gunPaiShowFun:function(){var e=cc.global.room._roomData;if(2!=e.gameStatus)return console.log("\u4e0d\u5728\u914d\u724c\u9636\u6bb5"),void this.clearGunpai();if(cc.global.room._roomData.myIndex!=this._visitPlayerIndex)for(var t=this.getSpriteFrameByNum(0,this.card_small_atlas),i=e.myPai,n=this.node.getChildByName("gunpai").children,o=0;o<n.length;o++){var a=this.getSpriteFrameByNum(i[o],this.card_small_atlas);cc.global.room._roomData.maPaiAccount==cc.global.util.userinfo.account&&cc.global.room._roomData.mapai==i[o]&&(a=this.getSpriteFrameByNum(i[o],this.card_mp_small_atlas));var c=n[o],s=c.getComponent(cc.Animation);if(null==s.getClips()||0==s.getClips().length){var l=s.getAnimationState("anim_gunpai");null!=l&&s.removeClip(l.clip)}var r=cc.AnimationClip.createWithSpriteFrames([c.getComponent(cc.Sprite).spriteFrame],.5);r.name="anim_fanpai",r.curveData={props:{scaleX:[{frame:0,value:1.1},{frame:.6,value:0},{frame:1.2,value:1.1}]},comps:{"cc.Sprite":{spriteFrame:[{frame:0,value:t},{frame:.25,value:a}]}}},r.speed=2,s.addClip(r),s.off("finished",this.clearGunpai,this),s.on("finished",this.clearGunpai,this),s.play("anim_fanpai")}else this.clearGunpai()},clearGunpai:function(){var e=this.getSpriteFrameByNum(0,this.card_small_atlas),t=this.node.getChildByName("gunpai").children,i=cc.find("Canvas/game/player0/pai");if(this.node.getChildByName("gunpai").active){this.node.getChildByName("gunpai").active=!1,this.init_handpai(i,this.card_big_atlas,this.card_mp_big_atlas);for(var n=0;n<t.length;n++)t[n].getComponent(cc.Sprite).spriteFrame=e,t[n].x=-443.5384615}},lipaizhong_opt:function(e){var t=this.node.getChildByName("liPaiZhong");if(e){t.getChildByName("zdlp_liangpai").active=!1,t.getChildByName("zdlp_quxiao").active=!1,t.getChildByName("paixing").active=!1,t.getChildByName("teshupai").active=!1,cc.find("Canvas/cdNode/countdown").active=!1,this.gameData.myPai&&this.onClearAll();for(var i=t.getChildByName("paixing").children,n=0;n<i.length;n++)i[n].y=0;this.onTeshuCancelClick(),t.active=!1}else t.active=!0,t.getChildByName("lipai_tc").getChildByName("t_toudao").getChildByName("paixing").active=!1,t.getChildByName("lipai_tc").getChildByName("t_zhongdao").getChildByName("paixing").active=!1,t.getChildByName("lipai_tc").getChildByName("t_weidao").getChildByName("paixing").active=!1,t.getChildByName("paixing").active=!0,t.getChildByName("paixing").width=1200,1==cc.global.room._roomData.sameColor&&(this.paiDefine.orderSetting=["c0","c2","c22","c3","c12345","c11111","c32","c5","c4","c6"],this.resetPaiBtnIndex(this.paiDefine.orderSetting))},resetPaiBtnIndex:function(e){for(var t=this.node.getChildByName("liPaiZhong"),i=0,n=0;n<e.length;n++)cc.find("paiBtn/"+e[n],t)&&(cc.find("paiBtn/"+e[n],t).setSiblingIndex(i),i++)},showCanUsePaiXing:function(e){for(var t in console.log("\u5f53\u524d\u724c\u578b\uff1a"+JSON.stringify(e)),this.paixing=this.paiDefine.px(e),this.paixing){var i=this.node.getChildByName("liPaiZhong").getChildByName("paiBtn");0!=this.paixing[t].length?this.setSpriteFrameByName(t+"_liang",i.getChildByName(t).getComponent(cc.Sprite),this.btn_altas):this.setSpriteFrameByName(t+"_an",i.getChildByName(t).getComponent(cc.Sprite),this.btn_altas)}},getTouchNum:function(e,t){var i=e-110-80*(13-t)/2,n=Math.floor(i/80);return n>12?12:n},paixingDefine:function(e){var t=this.deepCopy(this._dunSelected);t[e].push.apply(t[e],this.gameData.selectCards);for(var i=this.canOutDefine.pxtype(t.up,t.cen,t.down,this.paiDefine),n=this.node.getChildByName("liPaiZhong").getChildByName("tips"),o=0;o<n.children.length;o++)n.children[o].active=!1;return 1==i.code||(n.getChildByName(i.type).active=!0,cc.global.util.mySetTimeout(function(){n.getChildByName(i.type).active=!1},2e3),!1)},paiExchange:function(e){var t=this.gameData.selectCards,i=this.node.getChildByName("liPaiZhong").getChildByName("lipai_tc"),n="up"==e?3:5,o=this,a=function(t,n){var a=o.onClearSelected(i.getChildByName(t),e),c=cc.find("Canvas/liPaiZhong/lipai_tc/"+t);return o.onPaikuangClick(c,e,n),a};if(t.length==n){if("up"==e)a("t_toudao");else if("cen"==e)if(this.paixingDefine("down"))a("t_zhongdao",!0);else{for(var c=a("t_zhongdao",!0),s=0;s<c.hideNodes.length;s++)c.hideNodes[s].y=35;this.gameData.selectCards=c.selected,console.log("\u5c06\u5269\u4f59\u7684\u724c\u653e\u5165\u7406\u724c\u6846"),this.onPaikuangClick(cc.find("Canvas/liPaiZhong/lipai_tc/t_weidao"),"down",!1,!0)}else if(this.paixingDefine("cen"))a("t_weidao",!0);else{for(c=a("t_weidao",!0),s=0;s<c.hideNodes.length;s++)c.hideNodes[s].y=35;this.gameData.selectCards=c.selected,console.log("\u5c06\u5269\u4f59\u7684\u724c\u653e\u5165\u7406\u724c\u6846"),this.onPaikuangClick(cc.find("Canvas/liPaiZhong/lipai_tc/t_zhongdao"),"cen",!1,!0)}return!1}return!0},kqFinishBack:function(){this._kqFinishBack()},checkPaiKunagCon:function(e,t){var i=e.getComponent(cc.Sprite);if(null==i.spriteFrame)return!0;if(this.paiExchange(t)){var n=e.parent.parent;"t_toudao"==n.name&&(t="up"),"t_zhongdao"==n.name&&(t="cen"),"t_weidao"==n.name&&(t="down");var o=i.spriteFrame.name.replace("card_","");this._dunSelected[t].removeVal(parseInt(o)),this._dun[t]=this._dun[t]+1;var a=this.node.getChildByName("liPaiZhong").getChildByName("paixing");this.getRepeatTag(parseInt(o),a,function(e){return!e.active}).active=!0,this.gameData.myPai.push(o),i.spriteFrame=null,this.showCanUsePaiXing(this.gameData.myPai),n.getChildByName("paixing").active=!1,this.node.getChildByName("liPaiZhong").getChildByName("zdlp_liangpai").active=!1,this.node.getChildByName("liPaiZhong").getChildByName("zdlp_quxiao").active=!1}return!1},getRepeatTag:function(e,t,i){for(var n,o="",a=0;;){if(e=e.toString()+o,t.getChildByName(e)&&(null==i||i(t.getChildByName(e)))){n=t.getChildByName(e);break}if(o="_"+a,++a>13){console.log("getRepeatTag\u5f02\u5e38");break}}return n},deepCopy:function(e,t){t=t||{};for(var i in e)e.hasOwnProperty(i)&&("object"===_typeof(e[i])?(t[i]=e[i].constructor===Array?[]:{},this.deepCopy(e[i],t[i])):t[i]=e[i]);return t},btnShareClick0:function btnShareClick0(event,type){var self=this,xhr=cc.global.http.sendRequest("/zagame/global/wxShare.json",{gid:4,type:parseInt(type),room_no:cc.global.room._roomData.room_no,visitCode:"",platform:cc.global.util.gameinfo.platform},function(){var result=eval("("+xhr.responseText+")");if(1==result.code){var map={title:result.data.title,text:result.data.text,url:result.data.url,mediaType:"2",shareTo:"0",imageUrl:result.data.imagePath,thumbImage:"Icon-50.png",thumbSize:"64"};cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org.cocos2dx.javascript.AppActivity","showShare","(Ljava/lang/String;)V",JSON.stringify(map)):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("JsUseOcTool","showShare:",JSON.stringify(map))}else cc.global.util.tipMsg(result.msg)})},screenShot:function(){var e=new cc.Node;e.parent=cc.director.getScene().getChildByName("Canvas");var t=e.addComponent(cc.Camera);t.cullingMask=4294967295,t.zoomRatio=.7;var i=new cc.RenderTexture,n=cc.game._renderContext;i.initWithSize(cc.visibleRect.width,cc.visibleRect.height,n.STENCIL_INDEX8),i.setFlipY(!0),t.targetTexture=i,t.render();for(var o=i.readPixels(),a=i.width,c=i.height,s=new Uint8Array(a*c*4),l=4*a,r=0;r<c;r++)for(var g=(c-1-r)*a*4,h=r*a*4,d=0;d<l;d++)s[h+d]=o[g+d];cc.global.util.tipMsg("\u8be5\u5e73\u53f0\u4e0d\u652f\u6301\u622a\u5c4f\u5206\u4eab!")},onShareResult:function(e,t){},hidePlayer:function(e){var t=this.node.getChildByName("game").getChildByName("player"+e);t.getChildByName("pai").active=!1,t.getChildByName("zongfen").active=!1,t.getChildByName("ready_ok").active=!1,t.getChildByName("bijiao").active=!1,t.getChildByName("touxiang").getChildByName("zhuang").active=!1,t.getChildByName("t_teshupaixing").active=!1;for(var i=t.getChildByName("pai").children,n=0;n<i.length;n++){console.log("\u6e05\u7a7a\u624b\u724c");for(var o=i[n].getComponentsInChildren(cc.Sprite),a=0;a<o.length;a++)this.setSpriteFrameByNum(0,o[a],this.card_small_atlas,!0)}t.getChildByName("bifen").active=!1,t.getChildByName("t_teshupaixing").active=!1,t.getChildByName("sss_img_lipaiz").active=!1,t.active=!1,cc.global.room._roomData.myIndex==this._visitPlayerIndex&&(this.node.getChildByName("seat_node").getChildByName("player"+e).active=!0)},showCountDown:function(){cc.find("Canvas/cdNode/countdown").active=!0},closeCountDown:function(){cc.find("Canvas/cdNode/countdown").active=!1},show_Sz:function(){this.hideOptionNode(null),cc.global.util.playSound_buttonClick(),this.frmSz.active=!0},hide_Sz:function(){cc.global.util.playSound_buttonClick(),cc.sys.localStorage.setItem("volumeSetting",JSON.stringify(cc.global.util.setting)),this.frmSz.active=!1},btnTuichu:function(e,t){cc.global.util.playSound_buttonClick(),this.sendReq("exitRoom_SSS",{room_no:cc.global.room._roomData.room_no,account:cc.global.util.userinfo.account})},closeMusic_ciclk:function(e){var t=e.target.getComponent(cc.Sprite);t.spriteFrame==this.sfIcons[0]?(t.spriteFrame=this.sfIcons[1],cc.global.util.setting.musicOn=0,this.bgm.mute=!0):(t.spriteFrame=this.sfIcons[0],cc.global.util.setting.musicOn=1,this.bgm.mute=!1)},closeSounds_ciclk:function(e){var t=e.target.getComponent(cc.Sprite);t.spriteFrame==this.sfIcons[0]?(t.spriteFrame=this.sfIcons[1],cc.global.util.setting.soundOn=0):(t.spriteFrame=this.sfIcons[0],cc.global.util.setting.soundOn=1)},cb_jindutiao:function(e,t){var i=this.node.getChildByName("music").getComponent(cc.AudioSource);e.node.children[0].width=446*e.progress,"1"==t?(i.volume=e.progress,cc.global.util.setting.music=e.progress):cc.global.util.setting.sound=e.progress},cb_setting_bar:function(e,t){var i="1"==t?cc.global.util.setting.music:cc.global.util.setting.sound;console.log("\u97f3\u91cf\u4e3a\uff1a"+i),e.progress=i,e.node.children[0].width=446*i},onCloseCheckClick:function(e){var t=e.target;t.parent.getChildByName("tanchuang_bg3").getChildByName("btn").active||(t.parent.active=!1)},closeRoomAsk:function(){cc.global.util.playSound_buttonClick();this.node.getChildByName("dissolutionApplication");this.node.getChildByName("shezhi").active=!1,this.sendReq("closeRoom_SSS",{account:cc.global.util.userinfo.account,room_no:cc.global.room._roomData.room_no,type:1,platform:cc.global.util.gameinfo.platform})},btnCloseRoomClick:function(e,t){cc.global.util.playSound_buttonClick();var i=this.node.getChildByName("dissolutionApplication");"t"==t?(console.log("t"),i.getChildByName("tanchuang_bg3").getChildByName("btn").active=!1,this.sendReq("closeRoom_SSS",{account:cc.global.util.userinfo.account,room_no:cc.global.room._roomData.room_no,type:1,platform:cc.global.util.gameinfo.platform})):"f"==t?(console.log("f"),i.getChildByName("tanchuang_bg3").getChildByName("btn").active=!1,this.sendReq("closeRoom_SSS",{account:cc.global.util.userinfo.account,room_no:cc.global.room._roomData.room_no,type:-1,platform:cc.global.util.gameinfo.platform})):(console.log("cccccccc"),i.active=!1)},closeRoomCheck:function(e){var t=this;this.closeTimer||(console.log("start count"),this.closeCountdown=60,(e[0].jiesanTimer||0==e[0].jiesanTimer)&&(this.closeCountdown=e[0].jiesanTimer),t.node.getChildByName("dissolutionApplication").getChildByName("tanchuang_bg3").getChildByName("time_hint").getComponent(cc.Label).string=t.closeCountdown+"\u79d2\u540e\u623f\u95f4\u5c06\u81ea\u52a8\u89e3\u6563",this.closeTimer=cc.global.util.mySetInterval(function(){t.closeCountdown>=0?(t.node.getChildByName("dissolutionApplication").getChildByName("tanchuang_bg3").getChildByName("time_hint").getComponent(cc.Label).string=t.closeCountdown+"\u79d2\u540e\u623f\u95f4\u5c06\u81ea\u52a8\u89e3\u6563",t.closeCountdown--):t.closeTimer&&(clearInterval(t.closeTimer),t.closeTimer=null)},1e3));for(var i=!0,n=this.node.getChildByName("dissolutionApplication"),o=n.getChildByName("tanchuang_bg3").getChildByName("users").getComponentsInChildren(cc.Label),a="",c=0;c<o.length;c++)o[c].node.active=!1;for(c=0;c<e.length;c++){switch(e[c].result){case-1:a="\u5df2\u62d2\u7edd",e[c].index==cc.global.room._roomData.myIndex&&(n.getChildByName("tanchuang_bg3").getChildByName("btn").active=!1);break;case 0:a="\u5f85\u786e\u8ba4",e[c].index==cc.global.room._roomData.myIndex&&(i=!1);break;case 1:a="\u5df2\u540c\u610f",e[c].index==cc.global.room._roomData.myIndex&&(n.getChildByName("tanchuang_bg3").getChildByName("btn").active=!1)}o[c].string="["+a+"]"+e[c].name,o[c].node.active=!0}i||(n.getChildByName("tanchuang_bg3").getChildByName("btn").active=!0),cc.global.room._roomData.myIndex==this._visitPlayerIndex&&(n.getChildByName("tanchuang_bg3").getChildByName("btn").active=!1),n.active=!0},exitRoom:function(e){this.node.getChildByName("dissolutionApplication");if(console.log("\u65b9\u6cd5exitRoom,data:"+JSON.stringify(e)),this.closeTimer&&(clearInterval(this.closeTimer),this.closeTimer=null),1==e.type){if(0==e.code)e.msg&&cc.global.util.tipMsg(e.msg);else if(1==e.code&&e.index==cc.global.room._roomData.myIndex)cc.global.game.backHall();else if(1==e.code&&e.index!=cc.global.room._roomData.myIndex){for(var t=cc.global.room._roomData.users,i=-1,n=0;n<t.length;n++)t[n].index==e.index&&(i=n);cc.global.room._roomData.users.remove(i);var o=this.getIndex(e.index);this.hidePlayer(o),cc.global.room._roomData.startIndex=e.startIndex,cc.global.room._roomData.gameStatus<=1&&(cc.global.room._roomData.startIndex==cc.global.room._roomData.myIndex&&0==cc.global.room._roomData.game_index?cc.find("Canvas/game/yaoqing/btn_start").active=!0:cc.find("Canvas/game/yaoqing/btn_start").active=!1)}}else 2==e.type&&cc.global.game.backHall()},showBanker:function(){var e=cc.global.room._roomData;cc.find("Canvas/game/yaoqing/sss_btn_zhunbei").active=!1,cc.find("Canvas/statement/btnzunbei").getComponent(cc.Button).interactable=!1;var t=this.node.getChildByName("frm_banker");t.getChildByName("tip").getComponent(cc.Label).string="\u4e0a\u5e84\u9700\u8981"+e.bankerMinScore+"\u5143\u5b9d",1==e.bankerIsUse?(t.getChildByName("banker").getComponent(cc.Button).interactable=!0,cc.find("Canvas/game/yaoqing/banker").getComponent(cc.Button).interactable=!0):(t.getChildByName("banker").getComponent(cc.Button).interactable=!1,cc.find("Canvas/game/yaoqing/banker").getComponent(cc.Button).interactable=!1),t.active=!0,cc.find("Canvas/game/yaoqing/banker/tip").getComponent(cc.Label).string="\u4e0a\u5e84\u9700\u8981"+e.bankerMinScore+"\u5143\u5b9d",cc.find("Canvas/game/yaoqing/banker").active=!0},closeBanker:function(){this.node.getChildByName("frm_banker").active=!1,this.node.getChildByName("statement").active=!1},onBankerClick:function(){this.node.getChildByName("frm_banker").active=!1,cc.find("Canvas/game/yaoqing/banker").active=!1,cc.global.net.send("gameBeBanker_SSS",{account:cc.global.util.userinfo.account,room_no:cc.global.room._roomData.room_no})},hide_tips:function(){this.node.getChildByName("tips").active=!1},showRefreshTip:function(){cc.global.util.playSound_buttonClick(),this.node.getChildByName("frm_refresh").active=!0},showOptionNode:function(){cc.global.util.playSound_buttonClick();var e=this.node.getChildByName("option_node");e.x=this.optionNodeX+300,e.opacity=0,e.active=!0,cc.tween(e).by(.2,{x:-300,opacity:255}).start()},hideOptionNode:function(e){var t=this;e&&cc.global.util.playSound_buttonClick();var i=this.node.getChildByName("option_node"),n=this.optionNodeX+300;cc.tween(i).to(.2,{x:n,opacity:0}).call(function(){i.x=t.optionNodeX,i.opacity=255,i.active=!1}).start()},showWanfa:function(){this.hideOptionNode(null),cc.global.pop_mgr.showFrm({name:"frm_wanfa",customData:{gid:4}})},showNormalTip:function(e){this.node.getChildByName("normalTip").getChildByName("bg").getChildByName("title_tishi").getComponent(cc.Label).string=e,this.node.getChildByName("normalTip").active=!0},hideNormalTip:function(){cc.global.util.playSound_buttonClick(),this.node.getChildByName("normalTip").active=!1},showExitTip:function(e){this.node.getChildByName("exitTip").getChildByName("bg").getChildByName("label").getComponent(cc.Label).string=e,this.node.getChildByName("exitTip").active=!0},exitTipClick:function(){cc.global.util.playSound_buttonClick(),cc.global.game.backHall()},hide_frmMsg:function(){cc.global.util.playSound_buttonClick(),this.node.getChildByName("CommonWordsAndExpressions").active=!1},change_frmMsg_tab:function(e,t){cc.global.util.playSound_buttonClick(),"0"==t?(this.msgTab.active=!0,this.browTab.active=!1):(this.msgTab.active=!1,this.browTab.active=!0)},sendMsg:function(e,t){var i=parseInt(t),n=this.node.getChildByName("CommonWordsAndExpressions");n.active=!1;var o=new Object;o.room_no=cc.global.room._roomData.room_no,o.account=cc.global.util.userinfo.account,-1==i?(o.type=0,o.data=n.getChildByName("bg").getChildByName("top").getChildByName("text").getComponent(cc.EditBox).string):i<100?(o.type=1,o.data=i):(o.type=2,o.data=i%100),this.sendReq("sendMsgEvent",o),n.getChildByName("bg").getChildByName("top").getChildByName("text").getComponent(cc.EditBox).string=""},showMsg:function(e,t,i){cc.global.util.playSound_buttonClick();var n=this.node.getChildByName("chatnode").getChildByName("player"+e);if(2==t){var o=n.getChildByName("brow");o.getComponent(cc.Sprite).spriteFrame=this.browAtlas.getSpriteFrame("QZMJ_chat_emoj_"+i),o.getComponent(cc.Animation).play()}else{var a=n.getChildByName("chat"),c=i;1==t&&(c=this.sendMsgList.children[i].getComponentInChildren(cc.Label).string,this.playSound("msgVoice/voice_w_"+i)),a.getChildByName("label").getComponent(cc.Label).string=c;var s=a.getComponent(cc.Animation),l=cc.AnimationClip.createWithSpriteFrames([a.getComponent(cc.Sprite).spriteFrame],10);l.name="anim_sendMsg1";var r=a.x,g=a.y;l.curveData={props:{position:[{frame:0,value:[r,g]},{frame:.015,value:[r,g+20]},{frame:.09,value:[r,g+20]},{frame:.1,value:[r,g]}],opacity:[{frame:0,value:0},{frame:.015,value:255},{frame:.09,value:255},{frame:.1,value:0}]}},l.sample=60,l.speed=.05,s.addClip(l),s.play("anim_sendMsg1")}},paiSort:function(e){return e.sort(function(e,t){return e>t?1:-1})},paiSortDesc:function(e){return e.sort(function(e,t){return e>t?-1:1})},checkIp:function(e,t){if(t){var i=this.node.getChildByName("ipcheck").getChildByName("con3").getChildByName("label_val");this.node.getChildByName("ipcheck").getChildByName("con3").getChildByName("check").active=!0,this.node.getChildByName("ipcheck").getChildByName("con3").getChildByName("check2").active=!1,i.getComponent(cc.Label).string="\u6b63\u5e38",i.color=cc.color(255,31,255,255);for(var n=this.node.getChildByName("game").children,o=0;o<n.length;o++)-1!=n[o].name.indexOf("player")&&(n[o].getChildByName("QZMJ_same_ip").active=!1)}for(var a=0;a<e.length;a++){var c=e[a],s=cc.global.room._roomData;for(o=0;o<s.users.length;o++)if(c.index!=s.users[o].index&&c.ip==s.users[o].ip){i=this.node.getChildByName("ipcheck").getChildByName("con3").getChildByName("label_val");this.node.getChildByName("ipcheck").getChildByName("con3").getChildByName("check").active=!1,this.node.getChildByName("ipcheck").getChildByName("con3").getChildByName("check2").active=!0,i.getComponent(cc.Label).string="\u5f02\u5e38",i.color=cc.color(218,33,33,255);var l=this.getIndex(s.users[o].index);this.node.getChildByName("game").getChildByName("player"+l).getChildByName("QZMJ_same_ip").active=!0}}},getNowDate:function(){var e=new Date,t=e.getMonth()+1,i=e.getDate();return t>=1&&t<=9&&(t="0"+t),i>=0&&i<=9&&(i="0"+i),e.getFullYear()+"-"+t+"-"+i+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},celarKaiQiang:function(){var e=this._kaiqiangArray;console.log("\u8fdb\u5165\u5f00\u67aa\u6e05\u9664\u65b9\u6cd5\uff0c\u6570\u7ec4\u957f\u5ea6\uff1a"+e.length);for(var t=0;t<e.length;t++){var i=e[t],n=i.getChildByName("qiangkou");n.children[0].active=!1,n.children[1].active=!1,n.children[2].active=!1,i.getChildByName("kaiqiang_qiang").getComponent(cc.Animation).stop(),i.active=!1}if(4!=cc.global.room._roomData.gameStatus)for(var o=this.node.getChildByName("game").children,a=0;a<o.length;a++)-1!=o[a].name.indexOf("player")&&(o[a].getChildByName("totalscore").mTag=0,o[a].getChildByName("totalscore").active=!1)},startTimer:function(e){e.showTimer?(this.gameData.limitTime=e.timer,cc.find("Canvas/game/yaoqing/nz/str").getComponent(cc.Label).string=this.gameData.limitTime,cc.find("Canvas/liPaiZhong/nz/str").getComponent(cc.Label).string=this.gameData.limitTime,this.gameData.lastTime=Date.now(),this.gameData.startTime=this.gameData.lastTime,cc.find("Canvas/game/yaoqing/nz").active=!0,cc.find("Canvas/liPaiZhong/nz").active=!0):(this.gameData.startTime=-1,cc.find("Canvas/game/yaoqing/nz").active=!1,cc.find("Canvas/liPaiZhong/nz").active=!1)},getStrNums:function(e){var t=(e=Math.abs(e)).toString(),i=new Array;if(isNaN(t))i.push(0);else for(var n=0;n<t.length;n++)i.push(parseInt(t.substring(n,n+1)));return i},checkUserIsInGame:function(e,t){cc.global.room._roomData.users=e;for(var i=0;i<e.length;i++){var n=this.getIndex(e[i].index);this.node.getChildByName("game").getChildByName("player"+n).active||(console.log("\u5b58\u5728\u672a\u663e\u793a\u7684\u8282\u70b9\uff0c\u4e0b\u6807\uff1a"+e[i].index),this.initUser([e[i]],t))}},hide_halltip2:function(){cc.global.util.playSound_buttonClick(),this.halltip2.parent.active=!1},show_CW_And_E:function(){cc.global.util.playSound_buttonClick(),this.sendCommonWords.active=!0},hide_CW_And_E:function(){cc.global.util.playSound_buttonClick(),this.sendCommonWords.active=!1},show_cbTC:function(){cc.global.util.playSound_buttonClick(),this.cbTC.active=!0,this.cbTC2.active=!1},hide_cbTC:function(){cc.global.util.playSound_buttonClick(),this.cbTC.active=!1,this.cbTC2.active=!0},quickJoin_club:function(){cc.global.util.playSound_buttonClick(),console.log("\u5feb\u901f\u5f00\u59cb\u623f\u95f4\u7c7b\u578b\u4e3a"+cc.global.room._roomData.roomType),8==cc.global.room._roomData.roomType||9==cc.global.room._roomData.roomType?(cc.global.util.showAlert("\u6b63\u5728\u5feb\u901f\u52a0\u5165\u6e38\u620f"),cc.global.net.send("joinRoom",{room_no:cc.global.room._roomData.room_no||cc.global.room._roomData.roomNo,uuid:cc.global.util.userinfo.uuid,account:cc.global.util.userinfo.account,location:cc.global.util.LongitudeAndLatitude})):10==cc.global.room._roomData.roomType?(cc.global.util.showAlert("\u6b63\u5728\u5feb\u901f\u52a0\u5165\u6e38\u620f"),cc.global.net.send("tea_quickJoinEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,uuid:cc.global.util.userinfo.uuid,platform:cc.global.util.gameinfo.platform,teaInfoCode:cc.global.util.teaUserinfo.teaInfoCode,account:cc.global.util.userinfo.account,gid:4})):(cc.global.util.showAlert("\u6b63\u5728\u5feb\u901f\u52a0\u5165\u6e38\u620f"),cc.global.net.send("quickJoinClubRoom",{gid:cc.global.game.gid,uuid:cc.global.util.userinfo.uuid,account:cc.global.util.userinfo.account,ip:cc.global.util.ip,port:cc.global.util.port,clubCode:cc.global.room._roomData.clubCode,location:cc.global.util.LongitudeAndLatitude,room_no:cc.global.room._roomData.room_no}))},teaInfoEventPush:function(e){1==e.code?cc.global.util.teaUserinfo=e.data:e.teaName&&e.teaCode?cc.global.util.teaUserinfo={teaName:e.teaName,teaInfoCode:e.teaCode}:cc.global.util.teaUserinfo=null},memberDetailInfoEventPush:function(e){1==e.code?cc.global.util.circleUserinfo=e.data:cc.global.util.circleUserinfo=null},quickJoinClubRoomPush:function(e){1!=e.code&&(cc.global.util.closeAlert(),cc.global.util.tipMsg(e.msg))},quickEntryRoomCircleEventPush:function(e){cc.global.util.closeAlert(),cc.global.util.tipMsg(e.msg)},teaQuickJoinEventPush:function(e){cc.global.util.closeAlert(),cc.global.util.tipMsg(e.msg)},visitedCode:function(){cc.find("Canvas/mall").active=!0,cc.find("Canvas/mall/frm_yqm").active=!1,cc.find("Canvas/mall/frm_mall").active=!0,this.init_mall("",6)},visitedCodeBinded:function(){var e=this,t=cc.find("Canvas/mall/frm_yqm/con/right/lb2/Edit").getComponent(cc.Label).string;if(""!=t)cc.global.http.sendRequest("/gameproxy/doBang_sdt.json",{userId:cc.global.util.userinfo.id,code:t},function(t){console.log("[\u9080\u8bf7\u7801] result:"+JSON.stringify(t)),t?(cc.global.util.tipMsg(t.msg),null!=t.code&&(1!=t.code&&2!=t.code||(cc.find("Canvas/mall/frm_yqm").active=!1,cc.find("Canvas/mall/frm_mall").active=!0,e.init_mall("",6)))):cc.global.util.tipMsg(cc.global.util.httpErr)},null,!0);else cc.global.util.tipMsg("\u8bf7\u8f93\u5165\u9080\u8bf7\u7801")},init_mall:function(e,t){var i=this,n=(cc.find("Canvas/mall/frm_mall"),cc.find("Canvas/mall/frm_mall/con/layout"));n.removeAllChildren();cc.global.http.sendRequest("/zagame/getzamall.html",{platform:cc.global.util.gameinfo.platform,id:cc.global.util.userinfo.id,type:t},function(e){if(e){console.log("[\u5546\u57ce] result:"+JSON.stringify(e));for(var t=e,o=0;o<t.length;o++){var a=cc.instantiate(i.item);n.addChild(a),a.getChildByName("title").getComponent(cc.Label).string=t[o].title,a.getChildByName("btn").getChildByName("lb").getComponent(cc.Label).string="\u8d60\u9001"+t[o].denomination+"\u5143\u5b9d";for(var c=a.getChildByName("money").children,s=1,l=0;l<String(t[o].payMoney).split("").length;l++){var r=parseInt(String(t[o].payMoney).split("")[l]);i.setSpriteFrameByName("sc_"+r,c[s].getComponent(cc.Sprite),i.sctuji),c[s++].active=!0}var g=t[o].logo,h=new Object;h.logo=g,h.spNode=a.getChildByName("sp"),function(e){""!=e.logo&&cc.loader.load(e.logo,function(t,i){var n=new cc.SpriteFrame(i,cc.Rect(0,0,i.width,i.height));e.spNode.getComponent(cc.Sprite).spriteFrame=n})}(h),a.mTag=t[o].id,console.log("newItem.mTag:"+a.mTag+";list[i].id:"+t[o].id),n.parent.getComponent(cc.ScrollView).scrollToTop(),a.on("click",i.showAlipayWebChat,i)}}else cc.global.util.tipMsg(cc.global.util.httpErr)})},showAlipayWebChat:function(e,t){console.log("[\u663e\u793a\u652f\u4ed8\u5b9d\u6216\u5fae\u4fe1] type:"+t+"; "+e.target.mTag),this.mTag=e.target.mTag,console.log("[\u663e\u793a\u652f\u4ed8\u5b9d\u6216\u5fae\u4fe1] event.target.mTag:"+e.target.mTag),cc.find("Canvas/mall/frm_mall/frm_cz").active=0!=t},AlipayWebChat:function(e,t){this.mall_queding(this.mTag,t)},mall_queding:function(e,t){cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4"),console.log("[\u786e\u5b9a\u8d2d\u4e70] this.mTag:"+this.mTag);var i=cc.global.http.url+"/zagame/gmzamall.json?zaid="+this.mTag+"&id="+cc.global.util.userinfo.id+"&paytype="+t+"&platform="+cc.global.util.gameinfo.platform;cc.sys.openURL(i),cc.global.util.closeAlert()},dk_shuru:function(){cc.find("Canvas/mall/frm_yqm/shuru").active=!0;var e=cc.find("Canvas/mall/frm_yqm/con/right/lb2/Edit").getComponent(cc.Label).string;null==e.length&&(e=JSON.stringify(event.target.getComponent(cc.Label).string));for(var t="",i=0;i<e.length;i++)t+=e[i]+" ";cc.find("Canvas/mall/frm_yqm/shuru/text").getComponent(cc.Label).string=t},gb_shuru:function(e,t){1==t.split("/").length&&(cc.find("Canvas/mall").active=!1),cc.find("Canvas/mall/"+t).active=!1},dj_shuzi:function(e,t){var i=cc.find("Canvas/mall/frm_yqm/shuru/text").getComponent(cc.Label).string;i+=t+" ",cc.find("Canvas/mall/frm_yqm/shuru/text").getComponent(cc.Label).string=i},sc_yqingm:function(e,t){var i=cc.find("Canvas/mall/frm_yqm/shuru/text").getComponent(cc.Label).string.split(" "),n="";if(0==t){for(var o=0;o<i.length;o++)n+=i[o]+" ";cc.find("Canvas/mall/frm_yqm/shuru/text").getComponent(cc.Label).string=n.substring(0,n.length-3)}else{for(o=0;o<i.length;o++)n+=i[o];cc.find("Canvas/mall/frm_yqm/con/right/lb2/Edit").getComponent(cc.Label).string=n,this.gb_shuru("","frm_yqm/shuru")}},onDestroy:function(){Notification.off("quickEntryRoomCircleEventPush",this.quickEntryRoomCircleEventPush,this),Notification.off("tea_quickJoinEvent_push",this.teaQuickJoinEventPush,this),Notification.off("memberDetailInfoEventPush",this.memberDetailInfoEventPush,this),Notification.off("tea_infoEvent_push",this.teaInfoEventPush,this),Notification.off("circleVisitListEventPush",this.circleVisitListEventPush,this),Notification.off("circleVisitJoinGameEventPush",this.circleVisitJoinGameEventPush,this),cc.global.util.clearAllTimer()},getValue:function(e){if(e>=80)return 0;var t=e%20;return 1==t?14:t},sortCardDesc:function(e){var t=this;e.sort(function(e,i){return t.getValue(i)-t.getValue(e)})},shwoRoomInfo:function(e){cc.global.util.playSound_buttonClick(),cc.find("roomInfoTip/bg/info",this.node).getComponent(cc.Label).string=cc.global.room._roomData.roominfo,cc.find("roomInfoTip",this.node).active=!0},hideRoomInfo:function(e){cc.global.util.playSound_buttonClick(),cc.find("roomInfoTip",this.node).active=!1},showVisiterTip:function(){cc.global.util.playSound_buttonClick(),cc.global.net.send("circleVisitListEvent",{room_no:cc.global.room._roomData.room_no,account:cc.global.util.userinfo.account,uid:cc.global.util.userinfo.id})},circleVisitListEventPush:function(e){if(1==e.code){cc.find("visiterTip/bg/visit_count",this.node).getComponent(cc.Label).string="\u5f53\u524d\u89c2\u6218\u4eba\u6570\uff1a"+e.visitCount,cc.find("visiterTip",this.node).active=!0;var t=e.data||[];this.showVisiterList(cc.find("visiterTip/bg/visiter/view/content",this.node),t,this.visiter_prefab)}},circleVisitJoinGameEventPush:function(e){0==e.code&&cc.global.util.tipMsg(e.msg)},showVisiterList:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t,i,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_item_generator.item_generator.getInstance().executePreFrame(_item_generator.item_generator.getInstance()._getItemGenerator(t,i,n,function(e,t){cc.global.util.setHeadimg(e.getComponent("CircleJoinRoomUserItem").avatarSP.node,i[t].headimg),e.getComponent("CircleJoinRoomUserItem").nameLabel.string=i[t].name;var n=cc.global.util.circleUserinfo,o=!1;n&&(o="1"==n.is_admin||"1"==n.user_role),e.getComponent("CircleJoinRoomUserItem").scoreLabel.string=o?i[t].account:cc.global.util.processId(i[t].account)}),4,this);case 2:case"end":return e.stop()}},e,this)}));return function(t,i,n){return e.apply(this,arguments)}}(),hideVisiterTip:function(){cc.global.util.playSound_buttonClick(),cc.find("visiterTip",this.node).active=!1},onReplayBtnClick:function(e){e&&cc.global.util.playSound_buttonClick();var t={room_no:cc.global.room._roomData.room_no,account:cc.global.util.userinfo.account,uid:cc.global.util.userinfo.uid};this.sendReq("sss_handleReviewEvent",t)},hideReplayTip:function(e){e&&cc.global.util.playSound_buttonClick(),cc.find("replayTip",this.node).active=!1},onChangeReplayPageClick:function(e,t){e&&cc.global.util.playSound_buttonClick();var i=void 0;if("first"==t&&(console.log("\u67e5\u770b\u7b2c\u4e00\u5c40\u56de\u653e"),i=1),"lastest"==t&&(console.log("\u67e5\u770b\u6700\u540e\u4e00\u5c40\u56de\u653e"),i=0),!("last"==t&&(console.log("\u67e5\u770b\u4e0a\u4e00\u5c40\u56de\u653e"),(i=Number(this.replayGameIndex)-1)<=0)||"next"==t&&(console.log("\u67e5\u770b\u4e0b\u4e00\u5c40\u56de\u653e"),(i=Number(this.replayGameIndex)+1)>=cc.global.room._roomData.game_index))){var n={room_no:cc.global.room._roomData.room_no,account:cc.global.util.userinfo.account,uid:cc.global.util.userinfo.uid};i>0&&(n.gameCount=i),this.sendReq("sss_handleReviewEvent",n)}},getPaiType:function(e){var t={"\u4e4c\u9f99":0,"\u4e00\u5bf9":1,"\u4e24\u5bf9":2,"\u4e09\u6761":3,"\u987a\u5b50":4,"\u540c\u82b1":5,"\u846b\u82a6":6,"\u94c1\u652f":7,"\u540c\u82b1\u987a":8,"\u4e94\u540c":9,"\u4e2d\u58a9\u846b\u82a6":10,"\u51b2\u4e09":11};return console.log(t[e]),t[e]},handleReviewEventPush:function(e){console.log("\u724c\u5c40\u56de\u653e",e);for(var t=cc.find("Canvas/replayTip/bg/scroll/view/content"),i=cc.find("Canvas/replayTip/bg/game_count/game_index"),n=cc.find("Canvas/replayTip/bg/play_time"),o=0;o<t.childrenCount;o++)t.children[o].active=!1;if(0==e.code&&e.msg)cc.global.util.tipMsg(e.msg);else if(e.list&&e.gameIndex){cc.find("Canvas/replayTip").active=!0,this.replayGameIndex=e.gameIndex;var a=e.gameIndex+"/"+cc.global.room._roomData.game_count;cc.find("Canvas/replayTip/bg/page/label").getComponent(cc.Label).string=a;var c=e.list;i.getComponent(cc.Label).string=e.gameIndex;var s=-1==e.gameTime.indexOf(".")?e.gameTime:e.gameTime.substring(0,e.gameTime.indexOf("."));n.getComponent(cc.Label).string=s;for(var l=0;l<c.length;l++){var r=t.children[l];r.active=!0,r.getChildByName("name").getComponent(cc.Label).string=c[l].name,r.getChildByName("score_win").active=c[l].sum>=0,r.getChildByName("score_win").getComponent(cc.Label).string="+"+c[l].sum,r.getChildByName("score_lose").active=c[l].sum<0,r.getChildByName("score_lose").getComponent(cc.Label).string=c[l].sum;var g=r.getChildByName("head_type"),h=r.getChildByName("mid_type"),d=r.getChildByName("foot_type"),u=r.getChildByName("special_type");if(0==c[l].paiType){u.active=!1,g.active=!0,h.active=!0,d.active=!0;var m=this.getPaiType(c[l].paiTypeList[0]),p=this.getPaiType(c[l].paiTypeList[1]),f=this.getPaiType(c[l].paiTypeList[2]);this.setSpriteFrameByName("dj_type_"+m,g.getComponent(cc.Sprite),this.player_altas),this.setSpriteFrameByName("dj_type_"+p,h.getComponent(cc.Sprite),this.player_altas),this.setSpriteFrameByName("dj_type_"+f,d.getComponent(cc.Sprite),this.player_altas)}else g.active=!1,h.active=!1,d.active=!1,u.active=!0,this.setSpriteFrameByName("type_"+c[l].paiType,u.getComponent(cc.Sprite),this.tesupai_altas);for(var b=0;b<c[l].pai.length;b++)b<=2?this.setSpriteFrameByNum(c[l].pai[b],r.getChildByName("head").children[b].getComponent(cc.Sprite),this.card_small_atlas):b>=8?this.setSpriteFrameByNum(c[l].pai[b],r.getChildByName("foot").children[b-8].getComponent(cc.Sprite),this.card_small_atlas):this.setSpriteFrameByNum(c[l].pai[b],r.getChildByName("mid").children[b-3].getComponent(cc.Sprite),this.card_small_atlas)}}},setBg:function(e){},saveBg:function(e){cc.global.util.gameBgSet.sss=e,cc.sys.localStorage.setItem("gameBgSet",JSON.stringify(cc.global.util.gameBgSet))},savePokerBg:function(e){cc.global.util.pokerBgSet=e,cc.sys.localStorage.setItem("pokerBgSet",JSON.stringify(cc.global.util.pokerBgSet))},qpProgress:function(e){e.node.parent.getChildByName("card_mask").width=954*(1-e.progress),e.node.getChildByName("bar").width=954*e.progress;var t=Math.ceil(68*e.progress);t!=this.nowCutCard&&(this.playSound("OUT_CARD"),this.nowCutCard=t)},resetQiepaiPositions:function(){this.nowCutCard=Math.ceil(34);var e=cc.find("Canvas/qiepai/barcon").getComponent(cc.Slider);e.node.parent.getChildByName("card_mask").width=477,e.node.getChildByName("bar").width=477,cc.find("Canvas/qiepai/barcon").getComponent(cc.Slider).progress=.5;for(var t=cc.find("Canvas/qiepai/cards").children,i=0;i<t.length;i++)t[i].position=this.qiepaiStartPositions[i],t[i].opacity=255},showOrHideQiePaiBtn:function(e,t){this.qiepaiBtnType=t,cc.find("Canvas/qiepai/btn_qiepai").active=e&&1==t,cc.find("Canvas/qiepai/btn_ok").active=e&&2==t},showOrHideQiePai:function(e,t){cc.find("Canvas/qiepai/mask").active=e&&t,cc.find("Canvas/qiepai/barcon").active=e&&t,cc.find("Canvas/qiepai/card_mask").active=e&&t,cc.find("Canvas/qiepai/btn_qiepai").active=e&&t,cc.find("Canvas/qiepai/cards").active=e},onQiePaiClick:function(e){e&&cc.global.util.playSound_buttonClick(),this.sendQiepaiReq(!1)},sendQiepaiReq:function(e){var t=cc.find("Canvas/qiepai/barcon").getComponent(cc.Slider),i=cc.find("Canvas/qiepai/cards").children.length,n=e?.5:t.progress,o=Math.ceil(i*n);this.sendReq("sss_cutCardEvent",{room_no:cc.global.room._roomData.room_no,account:cc.global.util.userinfo.account,cutRatio:o,type:this.qiepaiBtnType})},qiepaiBack:function(e){var t=this;if(1==e.code)if(1==e.type){this.resetQiepaiPositions(),this.isStartCounting=!0;var i=cc.global.room._roomData;i.timer=e.cutTime,i.showTimer=1,this.startTimer(i),-1!=e.cutCardAccount&&(this.showOrHideQpzIcon(!0,e.cutCardAccount),e.cutCardAccount==cc.global.util.userinfo.account&&(this.showOrHideQiePai(!0,!0),this.showOrHideQiePaiBtn(!0,2),cc.find("Canvas/game/yaoqing/sss_btn_zhunbei").active=!1))}else if(2==e.type){this.showOrHideQpzIcon(!1),this.showOrHideQiePai(!0),this.showOrHideQiePaiBtn(!1);for(var n=cc.find("Canvas/qiepai/cards").children,o=e.cutRatio,a=n[0].position,c=n[n.length-1].position,s=o;s<n.length;s++)cc.tween(n[s]).to(.1,{position:c}).delay(.2).to(.1,{x:0,y:180}).delay(.8).to(.1,{opacity:0}).start();for(var l=0;l<o;l++)cc.tween(n[l]).delay(.5).to(.1,{position:a}).delay(.2).to(.1,{x:0,y:180}).delay(.3).to(.1,{opacity:0}).start();cc.global.util.mySetTimeout(function(){4==cc.global.room._roomData.gameStatus&&t.onBeginClick()},2700)}},showOrHideQpzIcon:function(e,t){for(var i=cc.global.room._roomData.users,n=0;n<i.length;n++){var o=this.getIndex(i[n].index),a=this.node.getChildByName("game").getChildByName("player"+o);a.getChildByName("sss_img_qpz").active=e&&i[n].account==t,a.getChildByName("done_ok").active=!1}},getCardTypeName:function(e,t){var i="";switch(e){case"c0":i=0;break;case"c2":i=1;break;case"c22":i=2;break;case"c3":i="up"==t?11:3;break;case"c12345":i=4;break;case"c11111":i=5;break;case"c32":i="cen"==t?10:6;break;case"c4":i=7;break;case"c5":i=8;break;case"c6":i=9}return i},onTestButtonClick:function(){if(cc.find("Canvas/testContent").active=!0,cc.global.room._roomData.testPais&&cc.global.room._roomData.testPais.length>0)for(var e=0;e<cc.global.room._roomData.testPais.length;e++){var t=this.gameData.arr[e].split("-");this.testHolds.children[e].getComponent(cc.Sprite).spriteFrame=this.card_small_atlas.getSpriteFrame("card_"+t[1])}for(e=0;e<13;e++)this.testHolds.children[e].getComponent(cc.Sprite).spriteFrame=this.card_small_atlas.getSpriteFrame("card_0")},onCloseTestPanel:function(){cc.find("Canvas/testContent").active=!1},onCancelTestClick:function(){cc.find("Canvas/testContent").active=!1,(!cc.global.room._roomData.testPais||cc.global.room._roomData.testPais.length>0)&&(cc.global.room._roomData.testPais=[]),(!this.gameData.arr||this.gameData.arr.length>0)&&(this.gameData.arr=[]);for(var e=0;e<this.sclectPais.childrenCount;e++){var t=this.sclectPais.children[e];(!t.clickNum||t.clickNum>0)&&(t.clickNum=0)}},onTestPaiClick:function(e,t){if(e.target.clickNum+=1,!(e.target.clickNum>2)){cc.global.room._roomData.testPais||(cc.global.room._roomData.testPais=[]),this.gameData.arr||(this.gameData.arr=[]),this.gameData.arr.push(parseInt(t)),this.gameData.arr.length>13&&this.gameData.arr.splice(0,1),cc.global.room._roomData.testPais.push(e.target.name),cc.global.room._roomData.testPais.length>13&&cc.global.room._roomData.testPais.splice(0,1);cc.find("Canvas/testContent/sce").children;if(cc.global.room._roomData.testPais.length>0&&cc.global.room._roomData.testPais.length<=13)for(var i=0;i<cc.global.room._roomData.testPais.length;i++)this.testHolds.children[i].getComponent(cc.Sprite).spriteFrame=this.card_small_atlas.getSpriteFrame("card_"+this.gameData.arr[i])}}}),cc._RF.pop()},{"./global/item_generator":"item_generator",assert:1,sssPxUtil:"sssPxUtil"}],initSetting:[function(e,t,i){"use strict";cc._RF.push(t,"34e96AXZmVN+49hUKgE5yfb","initSetting"),cc.Class({extends:cc.Component,properties:{loading:{default:null,type:cc.Prefab},msg_hint:{default:null,type:cc.Prefab},frm_tip:{default:null,type:cc.Prefab}},onLoad:function(){var e=this;cc.global||(this.initGlobalSet(),cc.global.util.initProperties(),cc.sys.isNative?this.checkVersion(function(){e.node.getComponent("HotUpdate").startHotUpdate(e.progressFun,e.msgFun)}):this.goLogin())},start:function(){cc.global.util.resize()},checkVersion:function(e){var t=this;cc.global.http?cc.global.http.sendRequest("/zagame/global/getAppVersionInfo_new.json",{platform:cc.global.util.gameinfo.platform,version:cc.global.util.gameinfo.version},function(i){if(i)if(1==i.code&&i.data)e&&e();else if(i.data){var n=cc.sys.localStorage.getItem("HotUpdateSearchPaths");if(n)jsb.fileUtils.removeDirectory(n),cc.sys.localStorage.removeItem("HotUpdateSearchPaths"),cc.audioEngine.stopAll(),cc.game.restart();else{var o=cc.instantiate(cc.global.util.frm_tip);o.getComponent("frm_tip").initView({name:"frm_versionUpdate",msg:"\u5ba2\u6237\u7aef\u7248\u672c\u5df2\u8fc7\u65f6\uff0c\n\n\u8bf7\u4e0b\u8f7d\u6700\u65b0\u5ba2\u6237\u7aef",showAnim:!0,btns:[{name:"\u786e\u5b9a",onClick:function(){cc.sys.openURL(i.data.url)}}]}),t.node.addChild(o)}}else{var a=cc.instantiate(cc.global.util.frm_tip);a.getComponent("frm_tip").initView({name:"frm_connectErr",msg:"\u65e0\u6cd5\u8fde\u63a5\u81f3\u670d\u52a1\u5668,\u8bf7\u91cd\u8bd5\n(code:1001)",showAnim:!0,btns:[{name:"\u786e\u5b9a",onClick:function(){a.getComponent("frm_tip").onCloseClick(),t.checkVersion()}}]}),t.node.addChild(a)}else{var c=cc.instantiate(cc.global.util.frm_tip);c.getComponent("frm_tip").initView({name:"frm_connectErr",msg:"\u65e0\u6cd5\u8fde\u63a5\u81f3\u670d\u52a1\u5668,\u8bf7\u91cd\u8bd5",showAnim:!0,btns:[{name:"\u786e\u5b9a",onClick:function(){c.getComponent("frm_tip").onCloseClick(),t.checkVersion()}}]}),t.node.addChild(c)}},null,!0):setTimeout(function(){t.checkVersion()},1e3)},goLogin:function(){var e=cc.sys.localStorage.getItem("restartData");if(e){var t=JSON.parse(e);if(t&&Date.now()-t.time<18e4)return cc.global.net.ip=t.ip,cc.global.util.setting=t.setting,cc.global.util.userinfo=t.userinfo,cc.global.util.isShowNotice=1,cc.sys.localStorage.removeItem("restartData"),void cc.director.loadScene("dating")}cc.director.loadScene("login")},msgFun:function(e,t,i){var n=this,o=this.node.getChildByName("tip");if(o.active=!0,console.log("m:"+e+"; code:"+t),e&&(o.getComponent(cc.Label).string=e),2==t){var a=cc.instantiate(cc.global.util.frm_tip);a.getComponent("frm_tip").initView({name:"frm_hotUpdateTip",msg:"\u68c0\u6d4b\u5230\u65b0\u7248\u672c\uff0c\u8bf7\u7acb\u5373\u66f4\u65b0",btns:[{name:"\u7acb\u5373\u66f4\u65b0",onClick:function(){n.node.getComponent("HotUpdate").hotUpdate(),a.getComponent("frm_tip").onCloseClick()}}]}),this.node.addChild(a)}else if(-1==t){o.getComponent(cc.Label).string="\u66f4\u65b0\u5931\u8d25!";var c=cc.instantiate(cc.global.util.frm_tip);c.getComponent("frm_tip").initView({msg:"\u66f4\u65b0\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5",btns:[{name:"\u786e\u5b9a",onClick:function(){cc.game.restart()}}]}),this.node.addChild(c)}else 1==t&&setTimeout(function(){o.getComponent(cc.Label).string="\u6570\u636e\u521d\u59cb\u5316\u5b8c\u6bd5",n.node.getComponent("initSetting").goLogin()},1e3)},progressFun:function(e){if(console.log("p:"+JSON.stringify(e)),e.filePercent>=0){var t=this.node.getChildByName("progress");t.active=!0,t.getComponent(cc.ProgressBar).progress=e.filePercent,this.node.getChildByName("value").getComponent(cc.Label).string=Math.floor(100*parseFloat(e.filePercent).toFixed(2))+"%("+e.fileMsg+")"}},initGlobalSet:function(){cc.global={},cc.global.net=e("Net"),cc.global.http=e("Http");var t=e("util");cc.global.util=new t;var i=e("pop_mgr");cc.global.pop_mgr=new i;var n=e("room");cc.global.room=new n,cc.global.room.initHandle();var o=e("game");cc.global.game=new o,cc.global.game.initHandle(),cc.global.util.loading=this.loading,cc.global.util.msg_hint=this.msg_hint,cc.global.util.frm_tip=this.frm_tip;var a=e("item_generator").item_generator;cc.global.item_generator=function(e){var t=e.listWrap,i=e.data,n=e.baseNode,o=e.backFun,c=e.begin,s=void 0===c?0:c,l=e.duration,r=void 0===l?4:l,g=e.target;return a.getInstance().executePreFrame(a.getInstance()._getItemGenerator(t,i,n,o,s),r,g)}}}),cc._RF.pop()},{Http:"Http",Net:"Net",game:"game",item_generator:"item_generator",pop_mgr:"pop_mgr",room:"room",util:"util"}],item_generator:[function(e,t,i){"use strict";cc._RF.push(t,"313f6NBz+pKIK7Ikmzwtk1v","item_generator"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.item_generator=function(){function e(){o(this,e)}return n(e,[{key:"_getItemGenerator",value:regeneratorRuntime.mark(function e(t,i,n,o){var a,c,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(a=i.length;a<t.children.length;a++)t.children[a].active=!1;c=s;case 2:if(!(c<i.length)){e.next=8;break}return e.next=5,this._initItem(t,c,n,o);case 5:c++,e.next=2;break;case 8:case"end":return e.stop()}},e,this)})},{key:"_initItem",value:function(e,t,i,n){var o=null;t<e.children.length?o=e.children[t]:(o=cc.instantiate(i),e.addChild(o)),o.active=!0,n&&n(o,t)}},{key:"executePreFrame",value:function(e,t,i){return new Promise(function(n,o){var a=e;(function e(){for(var o=(new Date).getTime(),c=a.next();;c=a.next()){if(null==c||c.done)return void n();if((new Date).getTime()-o>t)return void i.scheduleOnce(function(){e()})}})()})}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();cc._RF.pop()},{}],loading:[function(e,t,i){"use strict";cc._RF.push(t,"986echwfgNCA7yyvCxQw5o8","loading"),cc.Class({extends:cc.Component,properties:{},showLoading:function(){cc.find("layout",this.node).active||(cc.find("layout",this.node).active=!0)},hideLoading:function(){cc.find("layout",this.node).active=!1}}),cc._RF.pop()},{}],login:[function(e,t,i){"use strict";cc._RF.push(t,"0091aQiqeNFy4M1xEX8oMMp","login"),cc.Class({extends:cc.Component,properties:{},start:function(){cc.global.util.resize(),this.playMusic(),cc.global.util._isRestartLoginTip=!1,cc.find("Canvas/btns/btn_login_tel").active=cc.global.util.gameinfo.login_tel,cc.find("Canvas/btns/btn_login_wx").active=cc.global.util.gameinfo.login_wx,cc.sys.isNative&&cc.global.util.gameinfo.login_wx&&this.wxLogin()},playMusic:function(){var e=this.node.getChildByName("music").getComponent(cc.AudioSource);e.volume=cc.global.util.setting.music,0==cc.global.util.setting.musicOn?e.mute=!0:e.mute=!1,e.play()},wxLogin:function(){cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","weChatLogin","()V"):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("JsUseOcTool","weChatLogin")},onUserLogin:function(e){cc.global.util.showAlert("\u6b63\u5728\u767b\u5f55");var t=JSON.parse(e),i={status:"ok",data:{}};i.data.user_info={},i.data.user_info.token=null,i.data.user_info.refresh_token=null,t.openid&&(i.data.user_info.openid=t.openid),t.unionid&&(i.data.user_info.unionid=t.unionid),t.nickname&&(i.data.user_info.nickname=t.nickname),(t.gender||0==t.gender)&&(i.data.user_info.sex=t.gender),i.data.user_info.headimgurl=t.headimgurl,t.icon&&(i.data.user_info.headimgurl=t.icon,i.data.user_info.icon=t.icon),cc.global.http.sendRequest("/zagame/user/wxLogin_mob.json",{data:JSON.stringify(i),version:cc.global.util.gameinfo.version,platform:cc.global.util.gameinfo.platform},function(e){if(!e)return cc.global.util.closeAlert(),void cc.global.util.tipMsg_connectErr();1==e.code?(cc.global.net.ip=e.data.ip+":"+e.data.port,cc.global.util.userinfo=e.data.userinfo,cc.global.util.userinfo.uid=e.uid,cc.global.util.userinfo.token=e.token,cc.director.loadScene("dating")):(cc.global.util.closeAlert(),cc.global.util.tipMsg(e.msg))},null,!0)},btnLoginClick:function(){cc.global.util.showAlert("\u767b\u5f55\u4e2d,\u8bf7\u7a0d\u7b49",!0),this.userPlugin?this.userPlugin.login():(cc.global.util.closeAlert(),cc.global.util.tipMsg("\u767b\u5f55\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5"))},userTelLogin:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=cc.find("Canvas/frm_login_tel/bg"),o=t||cc.find("tel/edit",n).getComponent(cc.EditBox).string,a=i||cc.find("pwd/edit",n).getComponent(cc.EditBox).string;""!=o?""!=a?(cc.global.util.showAlert("\u767b\u5f55\u4e2d,\u8bf7\u7a0d\u7b49",!0),cc.global.http.sendRequest("/zagame/userLoginByTel.json",{password:a,username:o},function(e){if(!e)return cc.global.util.closeAlert(),void cc.global.util.tipMsg_connectErr();1==e.code?(cc.global.util.showAlert("\u6b63\u5728\u52a0\u8f7d\u573a\u666f"),cc.global.net.ip=e.data.ip+":"+e.data.port,cc.global.util.userinfo=e.data.userinfo,cc.global.util.userinfo.uid=e.uid,cc.global.util.userinfo.token=e.token,cc.director.loadScene("dating")):(cc.global.util.closeAlert(),cc.global.util.tipMsg(e.msg))})):cc.global.util.tipMsg("\u8bf7\u8f93\u5165\u7528\u6237\u5bc6\u7801"):cc.global.util.tipMsg("\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801")},onUserLogin_tel:function(){cc.global.util.showFrm(cc.find("Canvas/frm_login_tel"),!0)},showRegister:function(){var e=cc.find("Canvas/register");cc.global.util.showFrm(e,!0),cc.find("bg/tel/edit",e).getComponent(cc.EditBox).string="",cc.find("bg/pwd/edit",e).getComponent(cc.EditBox).string="",cc.find("bg/code/edit",e).getComponent(cc.EditBox).string=""},showForget:function(){var e=cc.find("Canvas/forget");cc.global.util.showFrm(e,!0),cc.find("bg/tel/edit",e).getComponent(cc.EditBox).string="",cc.find("bg/pwd/edit",e).getComponent(cc.EditBox).string="",cc.find("bg/code/edit",e).getComponent(cc.EditBox).string=""},userTelRegister:function(){var e=cc.find("Canvas/register/bg"),t=cc.find("tel/edit",e).getComponent(cc.EditBox).string,i=cc.find("pwd/edit",e).getComponent(cc.EditBox).string,n=cc.find("code/edit",e).getComponent(cc.EditBox).string;""!=t&&""!=i?""!=n?(cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u6ce8\u518c\u4fe1\u606f",!0),cc.global.http.sendRequest("/zagame/doUserRegister.json",{pwd:i,tel:t,code:n,codeKey:this._uuid},function(e){cc.global.util.closeAlert(),e?(cc.global.util.tipMsg(e.msg),1==e.code&&(cc.global.util.showAlert("\u6b63\u5728\u52a0\u8f7d\u573a\u666f",!0),cc.global.net.ip=e.data.ip+":"+e.data.port,cc.global.util.userinfo=e.data.userinfo,cc.global.util.userinfo.uid=e.uid,cc.global.util.userinfo.token=e.token,cc.director.loadScene("dating"))):cc.global.util.tipMsg_connectErr()})):cc.global.util.tipMsg("\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"):cc.global.util.tipMsg("\u8bf7\u5c06\u4fe1\u606f\u586b\u5199\u5b8c\u6574")},userTelUpdate:function(){var e=cc.find("Canvas/forget/bg"),t=cc.find("tel/edit",e).getComponent(cc.EditBox).string,i=cc.find("pwd/edit",e).getComponent(cc.EditBox).string,n=cc.find("code/edit",e).getComponent(cc.EditBox).string;if(""!=t&&""!=i)if(""!=n){cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u4fee\u6539",!0);var o=this;cc.global.http.sendRequest("/zagame/updateZaUserPass.json",{pwd:i,tel:t,code:n,codeKey:this._uuid},function(e){cc.global.util.closeAlert(),e?(cc.global.util.tipMsg(e.msg),1==e.code&&(o.node.getChildByName("forget").active=!1)):cc.global.util.tipMsg_connectErr()})}else cc.global.util.tipMsg("\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801");else cc.global.util.tipMsg("\u8bf7\u5c06\u4fe1\u606f\u586b\u5199\u5b8c\u6574")},sendMail:function(e,t){var i=this,n=cc.find("Canvas/"+t+"/bg");var o=cc.find("tel/edit",n).getComponent(cc.EditBox).string;""!=o?(cc.global.util.showAlert("\u6b63\u5728\u53d1\u9001\u8bf7\u6c42"),this._uuid=this.guid(),cc.global.http.sendRequest("/zagame/getRegisetCode.json",{tel:o,codeKey:this._uuid,platform:cc.global.util.gameinfo.platform},function(e){if(cc.global.util.closeAlert(),e){if(cc.global.util.tipMsg(e.msg),1==e.code){var t=n.getChildByName("getCode"),o=t.getChildByName("lb");t.getComponent(cc.Button).interactable=!1;var a=60;o.getComponent(cc.Label).string=a+"\u79d2\u540e\u91cd\u65b0\u83b7\u53d6\u9a8c\u8bc1\u7801",o.active=!0;var c=setInterval(function(){i.node?(a--,o.getComponent(cc.Label).string=a+"\u79d2\u540e\u91cd\u65b0\u83b7\u53d6\u9a8c\u8bc1\u7801",a<=0&&(o.active=!1,t.getComponent(cc.Button).interactable=!0,clearInterval(c))):clearInterval(c)},1e3)}}else cc.global.util.tipMsg_connectErr()})):cc.global.util.tipMsg("\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801")},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},check_userxy:function(e){e.target.getComponent(cc.Toggle).isChecked?(cc.find("Canvas/btns/btn_login_tel").getComponent(cc.Button).interactable=!0,cc.find("Canvas/btns/btn_login_wx").getComponent(cc.Button).interactable=!0):(cc.find("Canvas/btns/btn_login_tel").getComponent(cc.Button).interactable=!1,cc.find("Canvas/btns/btn_login_wx").getComponent(cc.Button).interactable=!1)},show_userxy:function(){cc.global.util.showFrm(cc.find("Canvas/frm_userxy"),!0)},closeFrm:function(e){e.target.parent.parent.active=!1}}),cc._RF.pop()},{}],main_hall_douniu:[function(e,t,i){"use strict";cc._RF.push(t,"51e2ebiKY1L7Z4mYC1umC5m","main_hall_douniu"),cc.Class({extends:cc.Component,properties:{card_atlas:{default:null,type:cc.SpriteAtlas}},onLoad:function(){this.initHandle(),cc.global.game._dispatchEventHandel=this.node,this.node.getChildByName("game").active=!1,this.node.getChildByName("playing").active=!1,this._index=[{pos:0,index:-1},{pos:5,index:-1},{pos:3,index:-1},{pos:7,index:-1},{pos:1,index:-1},{pos:8,index:-1},{pos:6,index:-1},{pos:2,index:-1},{pos:4,index:-1},{pos:9,index:-1}],this._timer=0,this._countDown=0,this._timerNode=null,this._timerCallBack=null,this._rightPai=0},start:function(){console.log("start!!!"),cc.global.util.resize(),this.touch_dx=this.node.width/2-640,this.touch_dy=this.node.height/2-360,cc.audioEngine.setMaxAudioInstance(6),this.showGameNode(),this.setGameInfo(),this.playMusic()},playMusic:function(){var e=this.node.getChildByName("music").getComponent(cc.AudioSource);e.volume=cc.global.util.setting.music,0==cc.global.util.setting.musicOn?e.mute=!0:e.mute=!1,e.play()},onclick_exit:function(){this.sendReq("exitRoom_NN",{room_no:cc.global.room._roomData.room_no,account:cc.global.util.userinfo.account})},onclick_ready:function(){this.node.getChildByName("init").getChildByName("ready").active=!1,this.setReadyStatus(0),this.sendReq("gameReady_NN",{room_no:cc.global.room._roomData.room_no,account:cc.global.util.userinfo.account})},onclick_xz:function(e,t){if(!t){var i=e.target.getComponent(cc.Label).string;t=parseInt(i)}this.closeView_XZ(),this.unschedule(this.timer),this.sendReq("gameXiaZhu_NN",{room_no:cc.global.room._roomData.room_no,account:cc.global.util.userinfo.account,money:t})},onclick_qz:function(e,t){if(0!=t){var i=e.target.getComponent(cc.Label).string;t=parseInt(i.charAt(0))}this.closeView_QZ(),this.unschedule(this.timer),this.sendReq("qiangZhuang_NN",{room_no:cc.global.room._roomData.room_no,account:cc.global.util.userinfo.account,value:t})},onclick_fp:function(){},onclick_lp:function(){this.sendReq("gameEvent_NN",{room_no:cc.global.room._roomData.room_no,account:cc.global.util.userinfo.account})},exitRoom:function(e){if(e)if(e.index==cc.global.room._roomData.myIndex)cc.global.game.backHall();else for(var t=1;t<this._index.length;t++){if(e.index==this._index[t].index)return this._index[t].index=-1,void(this.node.getChildByName("game").getChildByName("player"+this._index[t].pos).active=!1)}},joinUserInit:function(e){e&&this.setGameInfo(e)},playerReady:function(e){var t={};if(e<0)return t.error=-1,t.data={index:e},void this.callback("playerReady",t);if(e!=cc.global.room._roomData.myIndex){var i=this.getPosForIndex(e);this.setReadyStatus(i)}else cc.global.room._roomData.gameStatus=1,this.node.getChildByName("init").getChildByName("ready").active=!1,this.setReadyStatus(0)},setGameInfo:function(e){var t={error:0,data:null},i=cc.global.room._roomData.myIndex;e||(e=cc.global.room._roomData.users);for(var n=0;n<e.length;n++){var o=null;if(i!=e[n].index){for(var a=1;a<this._index.length;a++)if(-1==this._index[a].index){o=this._index[a].pos,this._index[a].index=e[n].index;break}t.data={index:e[n].index,"name ":e[n].name},this.setHeadInfo(o,e[n].name),1==e[n].userStatus&&this.setReadyStatus(o),this.callback("setGameInfo",t)}else o=0,this._index[o].index=i,this.node.getChildByName("init").getChildByName("ready").active=!0,this.setHeadInfo(o,e[n].name),1==e[n].userStatus&&(this.node.getChildByName("init").getChildByName("ready").active=!1,this.setReadyStatus(o))}},getIndexForPos:function(e){for(var t=0;t<this._index.length;t++)if(this._index[t].pos==e)return this._index[t].index},getPosForIndex:function(e){for(var t=0;t<this._index.length;t++)if(this._index[t].index==e)return this._index[t].pos},setReadyStatus:function(e){this.node.getChildByName("game").getChildByName("player"+e).getChildByName("info").active=!0},setHeadInfo:function(e,t,i){var n={error:0};if(n.data={index:e,name:t},!(e<0)){var o=this.node.getChildByName("game").getChildByName("player"+e);console.error(o.position),o.active=!0,o.getChildByName("head").getChildByName("name").getComponent(cc.Label).string=t,this.callback("setHeadInfo",n)}},showGameNode:function(){var e=this.node.getChildByName("game");e.active=!0;for(var t=0;t<e.children.length;t++)e.children[t].active=!1,e.children[t].getChildByName("pai").active=!1,e.children[t].getChildByName("info").active=!1,e.children[t].getChildByName("head").getChildByName("img").active=!1,e.children[t].getChildByName("head").getChildByName("score").active=!1},changeGameStatus:function(e){if(e)switch(console.error(JSON.stringify(e)),1!=e.gameStatus&&this.closeReadyView(),this.closeReadyView(),e.gameStatus){case 2:cc.global.room._roomData.gameStatus=2,this.showView_QZ(e.gameBankerType,e);break;case 4:cc.global.room._roomData.gameStatus=4,e.zhuang!=cc.global.room._roomData.myIndex&&this.showView_XZ(e);break;case 5:cc.global.room._roomData.gameStatus=5,this.showBtn_fanpai(e);break;case 6:cc.global.room._roomData.gameStatus=6,this.showView_score(e)}else{this.callback({error:-1,data:null})}},showView_score:function(e){},showBtn_fanpai:function(e){if(e.gameData)this._rightPai=e.gameData[cc.global.room._roomData.myIndex].pai[4];else{this.callback({error:"showBtn_fanpai",data:null})}},showView_XZ:function(e){var t=this;if(e.baseNum){for(var i=e.baseNum,n=t.node.getChildByName("playing").getChildByName("xiazhu"),o=0;o<i.length;o++)n.children[o].getChildByName("New Label").getComponent(cc.Label).string=i[o].val;n.getChildByName("timer").getChildByName("New Label").getComponent(cc.Label).string=e.timer,t._timer=1,t._countDown=e.timer,t._timerNode=n.getChildByName("timer").children[0],t._timerCallBack=function(){console.error("\u8ba1\u65f6\u7ed3\u675f\u56de\u8c03"),t.closeView_XZ()},t.schedule(t.timer,1),n.active=!0}else{t.callback({error:"showView_XZ",data:null})}},closeReadyView:function(){for(var e=this.node.getChildByName("game"),t=0;t<e.children.length;t++)e.children[t].getChildByName("info").active=!1},closeView_XZ:function(){this.node.getChildByName("playing").getChildByName("xiazhu").active=!1},closeView_QZ:function(){this.node.getChildByName("playing").getChildByName("qiangzhuang").active=!1},showView_QZ:function(e,t){var i=this;switch(e){case 30:for(var n=i.node.getChildByName("game").getChildByName("player0").getChildByName("pai"),o=t.gameData[cc.global.room._roomData.myIndex].pai,a=0;a<o.length-1;a++)n.children[a].getComponent(cc.Sprite).spriteFrame=i.card_atlas.getSpriteFrame("card_"+o[a]);n.children[o.length-1].getComponent(cc.Sprite).spriteFrame=i.card_atlas.getSpriteFrame("card_0"),n.active=!0;var c=t.baseNum;i.node.getChildByName("playing").active=!0;var s=i.node.getChildByName("playing").getChildByName("qiangzhuang");for(a=0;a<c.length;a++)s.children[a+1].getComponent(cc.Label).string=c[a].val+"\u500d";s.getChildByName("timer").getComponent(cc.Label).string=t.timer,i._timer=1,i._countDown=t.timer,i._timerNode=s.getChildByName("timer"),i._timerCallBack=function(){console.error("\u8ba1\u65f6\u7ed3\u675f\u56de\u8c03"),i.closeView_QZ(),i.onclick_qz(null,0)},i.schedule(i.timer,1),s.active=!0}console.log("\u6e38\u620f\u7c7b\u578b\uff1a"+e)},SC_qiangzhuang:function(e){var t=this;if(e){console.error("SC_qiangzhuang:"+JSON.stringify(e));var i=t.getPosForIndex(e.index),n=t.node.getChildByName("game").getChildByName("player"+i).getChildByName("head").getChildByName("score");if(n.getComponent(cc.Label).string=e.value,cc.tween(n).to(1,{opacity:255}).to(1.5,{opacity:0}).call(function(){}).start(),e.gameStatus){var o=[],a=e.maxZhuang;if(a.length>1){for(var c=0;c<a.length;c++){c!=e.index&&o.push(c),i=t.getPosForIndex(c);var s=t.node.getChildByName("game").getChildByName("player"+i).getChildByName("head").getChildByName("img"),l=cc.blink(3,10);s.active=!0,s.runAction(l)}t.scheduleOnce(function(){for(var e in o){var i=t.getPosForIndex(o[e]);t.node.getChildByName("game").getChildByName("player"+i).getChildByName("head").getChildByName("img").active=!1}},3)}else{i=t.getPosForIndex(e.zhuang);(s=t.node.getChildByName("game").getChildByName("player"+i).getChildByName("head").getChildByName("img")).active=!0}cc.global.room._roomData.gameStatus=3}}else{t.callback({error:"SC_qiangzhuang",data:null})}},SC_xiaZhu:function(e){if(e)console.error("SC_xiaZhu"+JSON.stringify(e));else{this.callback({error:"SC_xiaZhu",data:null})}},SC_showPai:function(e){if(e)console.error("SC_showPai"+JSON.stringify(e));else{this.callback({error:"SC_showPai",data:null})}},initHandle:function(){var e=this,t={};e.node.on("exitRoom",function(t){e.exitRoom(t)}),e.node.on("joinUserInit",function(t){e.joinUserInit(t)}),e.node.on("playerReady",function(i){i||(t.error=-1,t.data={data:i},e.callback("on.playerReady",t)),e.playerReady(i.index)}),e.node.on("changeGameStatus",function(i){i||(t.error=-1,t.data={data:i},e.callback("on.changeGameStatus",t)),e.changeGameStatus(i)}),e.node.on("qiangZhuang",function(i){i||(t.error=-1,t.data={data:i},e.callback("on.qiangZhuang",t)),e.SC_qiangzhuang(i)}),e.node.on("XiaZhu",function(i){i||(t.error=-1,t.data={data:i},e.callback("on.XiaZhu",t)),e.SC_xiaZhu(i)}),e.node.on("showPai",function(i){i||(t.error=-1,t.data={data:i},e.callback("on.showPai",t)),e.SC_showPai(i)})},sendReq:function(e,t,i){cc.global.net.send(e,t)},timer:function(){this._timer<this._countDown?(this._timerNode.getComponent(cc.Label).string=this._countDown-this._timer,this._timer++,console.error("timer:"+this._timer)):(this.unschedule(this.timer),this._timer=0,this._countDown=0,this._timerNode=null,this._timerCallBack())},callback:function(e,t){t&&e&&console.error(e+" : "+t.error+'   "'+JSON.stringify(t.data)+'" ')}}),cc._RF.pop()},{}],mjGameUtil:[function(e,t,i){"use strict";cc._RF.push(t,"bed7bCn2UFO0qnDQoSpZiyl","mjGameUtil"),cc.Class({extends:cc.Component,properties:{_ticktime:0,_sumtime:0,_timer:null,_pointer:null,_holdMap:null,_holdNode:null,right_num:0,top_num:0,left_num:0,my_penggangGroup:0,right_penggangGroup:0,top_penggangGroup:0,left_penggangGroup:0,lastBiaoji:null,biaoji:null,foldsNum:18,paiBgAtlas:null,defTimer:20},playSound:function(e){cc.loader.loadRes(e,function(t,i){console.log("\u64ad\u653e\u97f3\u9891:url="+e+" ;\u97f3\u91cf\u5f00\u5173:"+cc.global.util.setting.soundOn+" ;\u97f3\u91cf\u8bbe\u7f6e:"+cc.global.util.setting.sound),t||1==cc.global.util.setting.soundOn&&cc.global.util.setting.sound>0&&cc.audioEngine.play(i,!1,cc.global.util.setting.sound)})},initHoldNodes:function(e){var t=e.children.sort(function(e,t){return e.x>t.x?1:-1});this._holdNode=new Array;for(var i=0;i<t.length;i++)this._holdNode.push(t[i].getChildByName("tex").getComponent(cc.Sprite))},getFoldNum:function(e,t){switch(e){case"l":case"b":return t<6?t+12:t>11?t-12:t;case"r":return 17-t;case"m":return t}},hideFlod:function(e){for(var t=e.children,i=0;i<t.length;i++){var n=t[i];n.active=!1,n.getChildByName("tex").getComponent(cc.Sprite).spriteFrame=null,n.getChildByName("jin")&&(n.getChildByName("jin").active=!1)}},hidePenggang:function(e){for(var t=e.children,i=0;i<t.length;i++)for(var n=t[i].children,o=0;o<n.length;o++){var a=n[o];a.getChildByName("tex").getComponent(cc.Sprite).spriteFrame=null,a.getChildByName("jin").active=!1}},initTime:function(e,t){this._timer=e,this._pointer=t,this._pointer.getChildByName("lblTime").getComponent(cc.Label).string=""},startCount:function(e){console.log("rec pointName is "+e);for(var t=this._pointer.getChildByName("points").children,i=0;i<4;i++)t[i].active=!1;if(e){var n=this._pointer.getChildByName("points").getChildByName(e);n.opacity=255,n.active=!0,this._pointer.getChildByName("lblTime").getComponent(cc.Label).string=this.defTimer,this._ticktime=this.defTimer,this._sumtime=0}else console.log("pointName:"+e)},paiSort:function(e,t){return e.sort(function(e,i){if(t){if(e==t)return-1;if(i==t)return 1}return e>i?1:-1})},paiSortDesc:function(e,t){return e.sort(function(e,i){if(t){if(e==t)return 1;if(i==t)return-1}return e>i?-1:1})},changeSpriteByNode:function(e,t,i){var n=this.definePai(e);i.spriteFrame=this.setSpriteFrameByName(n.name,e,t)},setSpriteFrameByName:function(e,t,i){return null!=t?(console.log(e+t),i.getSpriteFrame(e+t)):(console.log(e),i.getSpriteFrame(e))},definePai:function(e){var t=new Object;return t.name="handmah_",t.val=e,t},createPaiView:function(e,t,i,n,o){for(var a=15,c=e.length-1;c>=0;c--)e[c]==n?t[a].node.parent.getChildByName("jin").active=!0:t[a].node.parent.getChildByName("jin").active=!1,t[a].spriteFrame=this.setSpriteFrameByName("handmah_",e[c],i),t[a].node.parent.mTag=a,t[a].node.mTag=e[c],o||(t[a].node.parent.y=13),this._holdMap[a]=e[c],a--;return e.length},pengDeal:function(e,t,i,n,o){for(var a=cc.global.game._game.myPai,c=(o[0],i.getChildByName("penggangs").children),s=0;s<c.length;s++)if(!c[s].active){c[s].active=!0;var l=c[s].children;2==t&&console.log("\u8fd9\u662f\u6697\u6760");for(var r=0;r<o.length;r++){if(4==t&&o[r]==e.lastValue[0]?l[r].opacity=204:l[r].opacity=255,2==t&&3==r){var g=l[r].getComponent(cc.Sprite).spriteFrame.name.replace("a","b");console.log("bgname:"+g),l[r].getComponent(cc.Sprite).spriteFrame=this.setSpriteFrameByName(g,null,this.paiBgAtlas),l[r].getChildByName("tex").active=!1,l[r].mTag=-1}else l[r].getChildByName("tex").getComponent(cc.Sprite).spriteFrame=this.setSpriteFrameByName("handmah_",o[r],n),l[r].getChildByName("tex").active=!0,l[r].mTag=o[r];o[r]==cc.global.game._game.jin?l[r].getChildByName("jin").active=!0:l[r].getChildByName("jin").active=!1,l[r].active=!0}break}var h=i.getChildByName("pt_eff_box").getChildByName("pt_eff"),d=i.getChildByName("pt_eff_box").getChildByName("sp_eff");h.x=c[s].x-c[0].x,d.x=c[s].x-c[0].x,d.getComponent(cc.Animation).play(),h.getComponent(cc.ParticleSystem).resetSystem(),console.log("pengdata:"),console.log(o),5==t?o=o.slice(0,2):6==t?o=o.slice(0,3):2==t?o=o.slice(0,4):4==t&&o.removeVal(e.lastValue[0]),console.log("pengdata:"),console.log(o),console.log("now hold is\uff1a"+JSON.stringify(a));for(s=0;s<o.length;s++)a.removeVal(o[s]);console.log("now hold is\uff1a"+JSON.stringify(a)),this.my_penggangGroup++,console.log("\u78b0\u6760\u503c::::::::"+this.my_penggangGroup)},showChiOps:function(e,t,i,n){for(var o=t.getChildByName("chiop"),a=e.chivalue,c=e.lastValue,s=o.children,l=0;l<s.length;l++)s[l].active=!1;for(l=0;l<a.length;l++){var r=s[a.length-1-l];r.active=!0;for(var g=0,h=0;h<a[l].length;h++){var d=a[l][h];h==g&&d>c[0]&&(r.getChildByName("hop"+g).opacity=178,this.changeSpriteByNode(c[0],i,r.getChildByName("hop"+g).getChildByName("tex").getComponent(cc.Sprite)),c[0]==n?r.getChildByName("hop"+g).getChildByName("jin").active=!0:r.getChildByName("hop"+g).getChildByName("jin").active=!1,g++),r.getChildByName("hop"+g).opacity=255,this.changeSpriteByNode(d,i,r.getChildByName("hop"+g).getChildByName("tex").getComponent(cc.Sprite)),r.getChildByName("hop"+g).getChildByName("jin").active=d==n,g++,h+1==a[l].length&&h+1==g&&(this.changeSpriteByNode(c[0],i,r.getChildByName("hop"+g).getChildByName("tex").getComponent(cc.Sprite)),r.getChildByName("hop"+g).opacity=178,c[0]==n?r.getChildByName("hop"+g).getChildByName("jin").active=!0:r.getChildByName("hop"+g).getChildByName("jin").active=!1)}r.mTag=l}1==a.length&&(o.active=!0);var u=t.getChildByName("opm0").getChildByName("hop1");this.changeSpriteByNode(c[0],i,u.getChildByName("tex").getComponent(cc.Sprite)),c[0]==n?u.getChildByName("jin").active=!0:u.getChildByName("jin").active=!1},showActionResult:function(e,t,i,n,o,a,c){console.log("\u5176\u4ed6\u4eba\u64cd\u4f5c\u7ed3\u679c!!!!!!!!!!!!!!!!!!!");var s=t.lastChiValue||t.lastPengValue||t.lastGangValue;console.log(s);var l=t.lastValue,r=t.lastType,g=n.getChildByName("holds").children,h=n.getChildByName("seat").getChildByName("event"),d=null,u="",m=a.voiceType,p=null;if(-4==r&&(d=h.getChildByName("eff_chi"),u="chi"),-5==r&&(d=h.getChildByName("eff_peng"),u="peng"),-2!=r&&-6!=r&&-9!=r||(d=h.getChildByName("eff_gang"),u="gang"),-3==r&&(d=h.getChildByName("hu-"+t.huType)),-7==r&&(d=h.getChildByName("hu-1")),null!==d&&(d.active=!0,d.getComponent(cc.Animation).play("anim_mjEvent"),cc.global.util.mySetTimeout(function(){d.active=!1},1e3)),-4==r&&(s.push(l[0]),s="R"==e?this.paiSortDesc(s):this.paiSort(s)),-3!=r&&-7!=r){for(var f=n.getChildByName("penggangs").children,b=0;b<f.length;b++)if(!f[b].active){f[b].active=!0;for(var _=f[b].children,y=0;y<s.length;y++)if(-2==r){var v=_[y].getComponent(cc.Sprite).spriteFrame.name.replace("a","b");console.log("\u66ff\u6362\u540e\u7684\u6750\u8d28\u540d:"+v),_[y].getComponent(cc.Sprite).spriteFrame=this.setSpriteFrameByName(v,null,this.paiBgAtlas),_[y].getChildByName("tex").active=!1,_[y].getChildByName("jin").active=!1,_[y].active=!0,_[y].mTag=-1}else-4==r&&s[y]==l[0]?_[y].opacity=204:_[y].opacity=255,_[y].getChildByName("tex").getComponent(cc.Sprite).spriteFrame=this.setSpriteFrameByName("handmah_",s[y],o),_[y].getChildByName("tex").active=!0,s[y]==cc.global.game._game.jin?_[y].getChildByName("jin").active=!0:_[y].getChildByName("jin").active=!1,_[y].active=!0,_[y].mTag=s[y];var C=n.getChildByName("pt_eff_box").getChildByName("pt_eff"),N=n.getChildByName("pt_eff_box").getChildByName("sp_eff");C.x=f[b].x-f[0].x,C.y=f[b].y-f[0].y,N.x=f[b].x-f[0].x,N.y=f[b].y-f[0].y,N.getComponent(cc.Animation).play(),C.getComponent(cc.ParticleSystem).resetSystem();break}var S=0;if("L"==e)for(b=0;b<g.length&&(g[b].active&&(g[b].active=!1,S++),S!=i);b++);else for(b=g.length-1;b>=0&&(g[b].active&&(g[b].active=!1,S++),S!=i);b--);}switch("L"==e?p=a.lf_gender:"R"==e?p=a.rh_gender:"B"==e&&(p=a.bt_gender),null!=p&&u.length>0&&this.playSound("Sounds/mjgame/"+m+"/op_"+p+"_"+u),console.log("\u8f6e\u5230\u5176\u4ed6\u4eba\u51fa\u724c!::::"+e),e){case"R":c.rh.getChildByName("holds").children[0].active=!0,c.bt.getChildByName("holds").children[0].active=!1,c.lf.getChildByName("holds").children[16].active=!1;break;case"L":c.rh.getChildByName("holds").children[0].active=!1,c.bt.getChildByName("holds").children[0].active=!1,c.lf.getChildByName("holds").children[16].active=!0;break;case"B":c.rh.getChildByName("holds").children[0].active=!1,c.bt.getChildByName("holds").children[0].active=!0,c.lf.getChildByName("holds").children[16].active=!1}},showLastValue:function(e,t,i,n,o){console.log("\u5c55\u793a\u4e0a\u6b21\u51fa\u7684\u724c!");var a,c=t["s_"+e.focus],s=e.lastValue,l=null,r=null,g=null,h=o.voiceType,d=null,u=null;switch(c){case"right_point":a=this.getFoldNum("r",this.right_num++),l=i.rh.getChildByName("folds").children[a],u=i.rh.getChildByName("youjin"),this.right_num>=this.foldsNum&&(this.right_num=0),g=i.rh.getChildByName("biaoji").getChildByName("biaoji_node"),r=n.right,i.rh.getChildByName("holds").children[0].active=!1,d=o.rh_gender;break;case"left_point":a=this.getFoldNum("l",this.left_num++),l=i.lf.getChildByName("folds").children[a],u=i.lf.getChildByName("youjin"),this.left_num>=this.foldsNum&&(this.left_num=0),g=i.lf.getChildByName("biaoji").getChildByName("biaoji_node"),r=n.left,i.lf.getChildByName("holds").children[16].active=!1,d=o.bt_gender;break;case"up_point":a=this.getFoldNum("b",this.top_num++),l=i.bt.getChildByName("folds").children[a],u=i.bt.getChildByName("youjin"),this.top_num>=this.foldsNum&&(this.top_num=0),g=i.bt.getChildByName("biaoji").getChildByName("biaoji_node"),r=n.top,i.bt.getChildByName("holds").children[0].active=!1,d=o.bt_gender;break;default:u=i.my.getChildByName("youjin"),console.log("my_point!!")}null!==l&&(l.getChildByName("tex").getComponent(cc.Sprite).spriteFrame=this.setSpriteFrameByName("handmah_",s,r),s==cc.global.game._game.jin?l.getChildByName("jin").active=!0:l.getChildByName("jin").active=!1,l.active=!0,l.mTag=s,this.biaoji&&(this.biaoji.active=!1),this.biaoji=g,this.biaoji.x=l.x,this.biaoji.y=l.y,this.biaoji.active=!0,null!=d&&(this.playSound("Sounds/mjgame/"+h+"/card_"+d+"_"+s),this.playSound("Sounds/mjgame/game_p_discard"))),u.getChildByName("youjin1").active=!1,u.getChildByName("youjin2").active=!1,u.getChildByName("youjin3").active=!1,e.youjin>0&&(u.getChildByName("youjin"+e.youjin).active=!0)},hideAllBiaoji:function(e){e.my.getChildByName("biaoji").getChildByName("biaoji_node").action=!1,e.lf.getChildByName("biaoji").getChildByName("biaoji_node").action=!1,e.bt.getChildByName("biaoji").getChildByName("biaoji_node").action=!1,e.rh.getChildByName("biaoji").getChildByName("biaoji_node").action=!1},showZhuaGang:function(e,t,i,n,o){console.log("\u6293\u6760\u4e8b\u4ef6\u6570\u636e\u4e3a\uff1a"+JSON.stringify(t));var a=t.gangvalue;void 0===t.gangvalue&&(a=t.lastGangValue);for(var c=i.getChildByName("penggangs").children,s=0;s<c.length;s++)if(c[s].children[0].mTag==a[0]){c[s].children[3].getChildByName("tex").getComponent(cc.Sprite).spriteFrame=this.setSpriteFrameByName("handmah_",a[0],n),c[s].children[3].getChildByName("jin").active=!1,c[s].children[3].active=!0,c[s].children[3].mTag=-1;break}if("M"==e){var l=cc.global.game._game.value;null!=l&&l.length>0&&l[0]!=a[0]&&cc.global.game._game.myPai.removeVal(a[0]),cc.global.game._game.value=[]}switch(console.log("\u8f6e\u5230\u5176\u4ed6\u4eba\u51fa\u724c!::::"+e),e){case"R":o.rh.getChildByName("holds").children[0].active=!0,o.bt.getChildByName("holds").children[0].active=!1,o.lf.getChildByName("holds").children[16].active=!1;break;case"L":o.rh.getChildByName("holds").children[0].active=!1,o.bt.getChildByName("holds").children[0].active=!1,o.lf.getChildByName("holds").children[16].active=!0;break;case"B":o.rh.getChildByName("holds").children[0].active=!1,o.bt.getChildByName("holds").children[0].active=!0,o.lf.getChildByName("holds").children[16].active=!1}},buhua_pre:function(e,t,i,n){console.log("\u51c6\u5907\u8865\u82b1");t.huaValue.length,e.getChildByName("holds").children;var o=cc.global.game._game.myPai;if(console.log("\u8865\u82b1\u524d\u7684\u724c\u7ec4:"+JSON.stringify(o)),n){for(var a=0;a<o.length;a++){for(var c=-1,s=0;s<t.huaValue.length;s++)if(o[a]==t.huaValue[s]){this._holdNode[a].node.parent.y=50,o[a]=t.lastValue[s],c=s;for(l=e.getChildByName("hua").children,r=0;r<l.length;r++)if(!l[r].active){l[r].getComponent(cc.Sprite).spriteFrame=i.getSpriteFrame("handmah_"+t.huaValue[s]),l[r].active=!0;g=e.getChildByName("holdsHua").getChildByName("hua");this.showAnimHua(g,this._holdNode[a].node.parent,l[r]);break}break}if(c>-1&&(t.huaValue.splice(c,1),t.lastValue.splice(c,1)),t.huaValue.length<=0)break}console.log("\u8865\u82b1\u540e\u7684\u724c\u7ec4:"+JSON.stringify(o))}else{this._holdNode[this._holdNode.length-1].node.parent.y=50;for(var l=e.getChildByName("hua").children,r=0;r<l.length;r++)if(!l[r].active){l[r].getComponent(cc.Sprite).spriteFrame=i.getSpriteFrame("handmah_"+t.huaValue[0]),l[r].active=!0;var g=e.getChildByName("holdsHua").getChildByName("hua");this.showAnimHua(g,this._holdNode[this._holdNode.length-1].node.parent,l[r]);break}}},showAnimHua:function(e,t,i){var n=e,o=cc.instantiate(n);e.parent.addChild(o),o.x=n.x+t.x-48,o.y=n.y,o.active=!0;var a=o.getComponent(cc.Animation),c=o.getComponent(cc.Sprite).spriteFrame,s=cc.AnimationClip.createWithSpriteFrames([c,c,c],.66);s.name="anim_buhua",s.curveData={props:{position:[{frame:0,value:[o.x,o.y],curve:null},{frame:.5,value:[i.x,i.y],curve:null},{frame:1,value:[i.x,i.y],curve:null},{frame:1,value:[i.x,i.y],curve:null}],opacity:[{frame:0,value:255},{frame:.5,value:255},{frame:1,value:255},{frame:1.5,value:0}],rotation:[{frame:0,value:0},{frame:.5,value:360},{frame:1,value:720},{frame:1.5,value:1080}],scaleX:[{frame:0,value:2},{frame:.5,value:1},{frame:1,value:1},{frame:1.5,value:0}],scaleY:[{frame:0,value:2},{frame:.5,value:1},{frame:1,value:1},{frame:1.5,value:0}]}},s.speed=1,a.addClip(s),a.play("anim_buhua")},buhua:function(e,t,i,n,o){t.huaValue.length,e.getChildByName("holds").children;var a=cc.global.game._game.myPai;if(console.log("\u8865\u82b1\u524d\u7684\u724c\u7ec4:"+JSON.stringify(a)),!o){if(this._holdNode[this._holdNode.length-1].node.mTag==t.huaValue[0])return console.log("resultData:"+JSON.stringify(t)),this._holdNode[this._holdNode.length-1].spriteFrame=this.setSpriteFrameByName("handmah_",t.lastValue[0],i),this._holdNode[this._holdNode.length-1].node.mTag=t.lastValue[0],t.lastValue[0]==n?this._holdNode[this._holdNode.length-1].node.parent.getChildByName("jin").active=!0:this._holdNode[this._holdNode.length-1].node.parent.getChildByName("jin").active=!1,cc.global.game._game.value=t.lastValue,void this.createPaiView(a,this._holdNode,i,n,!0);console.log("\u8865\u82b1\u5f02\u5e38,\u6700\u540e\u4e00\u5f20\u724c\u662f:"+this._holdNode[this._holdNode.length-1].node.mTag)}this.createPaiView(a,this._holdNode,i,n,!0),console.log("\u8865\u82b1\u540e\u7684\u724c\u7ec4:"+JSON.stringify(a))},closeOps:function(e){for(var t=0;t<4;t++){var i=e.getChildByName("opm"+t);if(i.active){console.log("opm"+t);for(var n=1;n<i.children.length;n++)i.children[n].active=!1;i.active=!1}}e.active=!1,e.getChildByName("chiop").active=!1}}),cc._RF.pop()},{}],mjReplay:[function(e,t,i){"use strict";cc._RF.push(t,"7768bmjJXVOvKD/po95rRGO","mjReplay"),Array.prototype.remove=function(e){if(console.log("\u5220\u9664\u6570\u7ec4\u8282\u70b9,dx="+e),isNaN(e)||e>this.length)return!1;this.splice(e,1)},Array.prototype.removeVal=function(e){for(var t=0;t<this.length;t++)if(this[t]==e){this.splice(t,1);break}},Array.prototype.contains=function(e){for(var t in this)if(this[t]==e)return!0;return!1},Array.prototype.contains2=function(e,t){for(var i in this){if(this[i]==e)return!0;if(this[i]==t)return!0}return!1},cc.Class({extends:cc.Component,properties:{readyNode:cc.Node,gameNode:{default:null,type:cc.Node},gameoverNode:cc.Node,frm_config:cc.Node,flowerCard:cc.Node,myNode:cc.Node,lfNode:cc.Node,rhNode:cc.Node,upNode:cc.Node,timer:cc.Node,actOps:cc.Node,chupai_big_box:cc.Node,gamecount:cc.Label,jinpai:cc.Sprite,mjSelected:cc.Node,tinghint:cc.Prefab,geregxx:cc.Node,myHoldAtlas:{default:null,type:cc.SpriteAtlas},lfChiAtlas:{default:null,type:cc.SpriteAtlas},rhChiAtlas:{default:null,type:cc.SpriteAtlas},upChiAtlas:{default:null,type:cc.SpriteAtlas},browAtlas:{default:null,type:cc.SpriteAtlas},huTypeAtlas:{default:null,type:cc.SpriteAtlas},paiBgAtlas:{default:null,type:cc.SpriteAtlas},huaAtlas:{default:null,type:cc.SpriteAtlas},numAtlas:{default:null,type:cc.SpriteAtlas},sfIcons:{default:[],type:cc.SpriteFrame},sendMsgList:{default:null,type:cc.Node},sendBrowList:{default:null,type:cc.Node},qzGameAnimaAtlas:{default:null,type:cc.SpriteAtlas},AtlasList:null,_holdMap:null,_gameFun:null,_timePointer:null,_seats:null,chipeng:!1,chipengOver:!1,myIndex:0,rightIndex:0,topIndex:0,leftIndex:0,chupai_num:0,soundSetting:null,voiceType:"fy",my_soundGender:"gir",rh_soundGender:"gir",bt_soundGender:"gir",lf_soundGender:"gir",replayData:null,gameData:null},onLoad:function(){this.replayData=cc.global.util.mjReplayData,console.log("\u56de\u653e\u6570\u636e:"+JSON.stringify(this.replayData)),this.gameData=new Object,this.gameData.pause=!1,this.gameData.i=0,this.gameData.state=0,this.gameData.zpaishu=144,this.gameData.focus=-1,this.gameData.jin=this.replayData.jin,this.gameData.isDingjin=!1,this.gameData.userCount=this.replayData.users.length,this.gameData.myPai=[[],[],[],[]],this.gameData.lastPai=[-1,-1,-1,-1],this.gameData._holdNode=[[],[],[],[]],this.gameData.userCountdown=this.replayData.users.length,this.gameData.eventPai=-1,this.gameData.eventIndex=-1,this.gameData.groupidx=new Object;for(var t=0;t<this.replayData.data.length;t++)if(this.replayData.data[t].type<10){this.node.getChildByName("replay").getChildByName("state").getChildByName("count").getComponent(cc.Label).string=this.replayData.data.length-t,this.node.getChildByName("replay").getChildByName("state").getChildByName("index").getComponent(cc.Label).string="0";break}var i=e("mjGameUtil");this._gameFun=new i,console.log(this._gameFun),this._gameFun.paiBgAtlas=this.paiBgAtlas,this.voiceType=1==cc.global.util.setting.dialect?"pt":"fy",this.my_soundGender="\u7537"==cc.global.util.userinfo.sex?"boy":"gir",console.log("\u8bed\u97f3\u6027\u522b\u8bbe\u7f6e:"+this.my_soundGender),this.soundSetting=new Object,this.soundSetting.voiceType=this.voiceType,this.soundSetting.rh_gender=this.rh_soundGender,this.soundSetting.bt_gender=this.bt_soundGender,this.soundSetting.lf_gender=this.lf_soundGender,this._holdMap=new Object,this.initView(),this._seats=new Object,this._seats.rh=this.rhNode,this._seats.lf=this.lfNode,this._seats.bt=this.upNode,this._seats.my=this.myNode,this.AtlasList=new Object,this.AtlasList.left=this.lfChiAtlas,this.AtlasList.right=this.rhChiAtlas,this.AtlasList.top=this.upChiAtlas,cc.find("Canvas").getChildByName("room_no").getComponentInChildren(cc.Label).string="\u623f\u95f4\u53f7:"+cc.global.util.room_no;var n=this;cc.global.util.mySetTimeout(function(){n._gameFun.playSound("Sounds/mjgame/game_p_dice"),n.timer.getChildByName("shaizi").active=!0;var e=n.timer.getChildByName("shaizi").getComponent(cc.Animation);e.on("finished",n.doInitPaiView,n),e.play()},500)},start:function(){var e=this.node.getChildByName("music").getComponent(cc.AudioSource);e.volume=cc.global.util.setting.music,0==cc.global.util.setting.musicOn?e.mute=!0:e.mute=!1,e.play()},hideShaizi:function(){this.timer.getChildByName("shaizi_1").active=!1,this.timer.getChildByName("shaizi_2").active=!1},initView:function(){this._gameFun.hideFlod(this.myNode.getChildByName("folds")),this._gameFun.hideFlod(this.lfNode.getChildByName("folds")),this._gameFun.hideFlod(this.rhNode.getChildByName("folds")),this._gameFun.hideFlod(this.upNode.getChildByName("folds")),this.readyNode.getChildByName("left_head").active=!1,this.readyNode.getChildByName("up_head").active=!1,this.readyNode.getChildByName("right_head").active=!1,this._gameFun.initHoldNodes(this.myNode.getChildByName("holds"));for(var e=0;e<this.replayData.users.length;e++)this.replayData.users[e].account==cc.global.util.userinfo.account&&(this.myIndex=this.replayData.users[e].index);this.leftIndex=parseInt(this.myIndex)-1<0?3:parseInt(this.myIndex)-1,this.rightIndex=parseInt(this.myIndex)+1>3?0:parseInt(this.myIndex)+1,this.topIndex=parseInt(this.myIndex)+2,5==this.topIndex?this.topIndex=1:4==this.topIndex&&(this.topIndex=0);for(var t=0;t<4;t++)this.timer.getChildByName("pointer-"+t).active=!1;this.timer.getChildByName("pointer-"+this.myIndex).active=!0,this._timePointer=new Object,this._timePointer["s_"+this.myIndex]="my_point",this._timePointer["s_"+this.leftIndex]="left_point",this._timePointer["s_"+this.rightIndex]="right_point",this._timePointer["s_"+this.topIndex]="up_point",this._gameFun.initTime(this.timer,this.timer.getChildByName("pointer-"+this.myIndex)),this.initUsers(this.replayData.users,this.replayData.zhuang),this.timer.getChildByName("gamecount").getChildByName("count").getComponent(cc.Label).string=this.replayData.game_index+"/"+this.replayData.game_count;for(t=0;t<17;t++)this.myNode.getChildByName("holds").children[t].active=!1,this.rhNode.getChildByName("holds").children[t].active=!1,this.upNode.getChildByName("holds").children[t].active=!1,this.lfNode.getChildByName("holds").children[t].active=!1},play:function(){if(console.log("\u5f53\u524d\u64ad\u653e\u7684\u6b65\u9aa4\u4e3a:"+this.gameData.i+";\u5f53\u524d\u5b9e\u9645\u8fdb\u5ea6\u4e3a:"+this.gameData.state),this.gameData.i>=this.replayData.data.length)console.log("\u64ad\u653e\u5b8c\u6bd5,\u5f53\u524d\u6b65\u9aa4\u4e3a:"+this.gameData.i);else{var e=this.node.getChildByName("replay");1==this.gameData.state&&(e.getChildByName("back").getComponent(cc.Button).interactable=!1,this.gameData.pause||(e.getChildByName("pause").getComponent(cc.Button).interactable=!0));var t=this.replayData.data[this.gameData.i];switch(console.log("\u5f53\u524d\u6b65\u9aa4\u7684\u6570\u636e\u662f:"+JSON.stringify(t)),e.getChildByName("state").getChildByName("index").getComponent(cc.Label).string=this.gameData.state,this.gameData.state>0&&(this.gameData.focus=t.index),t.type){case 0:if(t.index==this.myIndex){for(var i=this._gameFun._holdNode,n=i.length-1;n>=0;n--)if(i[n].node.mTag==t.values[0]){this.mjSelected=i[n].node.parent,this.onMjClick();break}}else this.othChupai(t.index,t.values);1==t.showType&&(this.gameData.eventIndex=t.index,this.gameData.eventPai=t.values[0]);break;case 1:this.gameData.lastPai[t.index]=t.values[0],this.initGame(null,null,t.index),this.gameData.zpaishu--,this.updateZpaishu();break;case 2:case 4:case 5:case 6:case 9:this.doAction(t.index,t.type,t.values);break;case 8:this.node.getChildByName("replay").active=!1;var o=this.replayData.result.data;0==o[0].huType?this.jiesuan(o,!0):this.doJieSuan(o);break;case 999:this.node.getChildByName("replay").active=!1;var a=this.replayData.result.data,c=this;cc.global.util.mySetTimeout(function(){c.jiesuan(a,!0)},500);break;case 10:return this.gameData.myPai[t.index]=t.values,this.doFapai(t.index),void(10==this.replayData.data[this.gameData.i+1].type&&(this.gameData.i++,this.play()));case 11:this.doBuhua(t.index,t.values,!1)}(c=this).gameData.pause?(e.getChildByName("next").getComponent(cc.Button).interactable=!0,e.getChildByName("pause").active=!1,e.getChildByName("play").active=!0):cc.global.util.mySetTimeout(function(){c.gameData.pause?(e.getChildByName("next").getComponent(cc.Button).interactable=!0,e.getChildByName("pause").active=!1,e.getChildByName("play").active=!0):(c.gameData.i++,c.gameData.state++,c.play())},1e3)}},initGame:function(e,t,i){this.gameData.focus>-1&&this._gameFun.startCount(this._timePointer["s_"+this.gameData.focus]);switch(i){case this.myIndex:this.myNode;break;case this.rightIndex:this.rhNode;break;case this.topIndex:this.upNode;break;case this.leftIndex:this.lfNode}null==e&&(i==this.myIndex?t>0?this.initHandMj(!0,null):this.initHandMj(null,null):t>0?this.othInitHandMj(i,!0):this.othInitHandMj(i,null)),this.updateZpaishu()},createPaiView:function(e,t,i,n,o){for(var a=15,c=e.length-1;c>=0;c--)e[c]==n?t[a].node.parent.getChildByName("jin").active=!0:t[a].node.parent.getChildByName("jin").active=!1,t[a].node.active=!0,t[a].spriteFrame=this._gameFun.setSpriteFrameByName("handmah_",e[c],i),t[a].node.parent.mTag=a,t[a].node.mTag=e[c],o||(t[a].node.parent.y=13),this._gameFun._holdMap[a]=e[c],a--;return e.length},initHandMj:function(e,t){this.myNode.getChildByName("holds").children;this._gameFun.initHoldNodes(this.myNode.getChildByName("holds"));var i=this._gameFun._holdNode;this._gameFun._holdMap=new Object,console.log(this.gameData.myPai[this.myIndex]);var n=!1,o=null;if(e)o=this.gameData.myPai[this.myIndex];else{var a=this.gameNode.getChildByName("jinpaiinfo");a.active?o=this._gameFun.paiSort(this.gameData.myPai[this.myIndex],this.gameData.jin):(a.active=!0,n=!0,o=this.gameData.myPai[this.myIndex],this.jinpai.spriteFrame=this.myHoldAtlas.getSpriteFrame("handmah_"+this.gameData.jin),this.jinpai.node.parent.mTag=this.gameData.jin,a.getChildByName("hp1-hide").getChildByName("tex").getComponent(cc.Sprite).spriteFrame=this.myHoldAtlas.getSpriteFrame("handmah_"+this.gameData.jin),a.getComponent(cc.Animation).playAdditive("anim_dingjin"),this.gameData.zpaishu--,this.updateZpaishu())}var c=this.gameData.lastPai[this.myIndex];c>0&&this._gameFun.playSound("Sounds/mjgame/game_p_move"),console.log("\u5f00\u59cb\u7ec4\u7ec7\u624b\u724c\uff0c\u5f53\u524d\u724c\u7ec4\uff1a"+JSON.stringify(o)+",\u6700\u540e\u4e00\u5f20\uff1a"+c),(e||t)&&(o=this.gameData.myPai[this.myIndex]);var s=0;if(s=e||n?this.createPaiView(o,i,this.myHoldAtlas,-1,!1):this.createPaiView(o,i,this.myHoldAtlas,this.gameData.jin,!1),!e)for(var l=0;l<4;l++)if(l!=this.myIndex){var r=null;switch(l){case this.rightIndex:r=this.rhNode.getChildByName("holds").children;break;case this.topIndex:r=this.upNode.getChildByName("holds").children;break;case this.leftIndex:r=this.lfNode.getChildByName("holds").children}for(var g=0;g<r.length;g++)r[g].getChildByName("tex").mTag==this.gameData.jin?r[g].getChildByName("jin").active=!0:r[g].getChildByName("jin").active=!1}if(t&&(this.othInitHandMj(this.rightIndex),this.othInitHandMj(this.topIndex),this.othInitHandMj(this.leftIndex)),console.log("index:"+s),i.length-1>s){var h=3*this._gameFun.my_penggangGroup;console.log("cc\u78b0\u6760\u503c::::::::"+this._gameFun.my_penggangGroup);for(g=0;g<h-1;g++)i[g].node.parent.active=!1,i[g].node.mTag=-1,i[g].node.parent.mTag=-1;if(console.log("chipeng:"+this.chipeng),this.chipeng)for(g=0;g<i.length;g++){var d=i[g].node.parent;if(d.active)if(this.gameData.pause)d.x+=69,15==d.mTag&&(d.x+=28);else{var u=d.x,m=d.getComponent(cc.Animation),p=69,f=cc.AnimationClip.createWithSpriteFrames([d.getComponent(cc.Sprite).spriteFrame],8);f.name="anim_move",15==d.mTag&&(p+=28),f.curveData={props:{x:[{frame:0,value:u,curve:null},{frame:.125,value:u+p,curve:null}]}},f.speed=1,m.addClip(f),m.play("anim_move")}}else console.log("\u9690\u85cf\u989d\u5916\u7684\u724c,over:"+this.chipengOver+";ready:"+this.chipengReady+";chipeng:"+this.chipeng),h>0&&(this.chipeng||(this.chipengOver?this.chipengOver=!1:i[h-1].node.parent.active=!1))}var b=i[i.length-1];i.length>s&&c>0&&!t?(console.log("\u5c55\u793a\u65b0\u6478\u7684\u724c\uff1a"+c),b.spriteFrame=this._gameFun.setSpriteFrameByName("handmah_",c,this.myHoldAtlas),b.node.mTag=c,c==this.gameData.jin?b.node.parent.getChildByName("jin").active=!0:b.node.parent.getChildByName("jin").active=!1,this._gameFun._holdMap[s]=c[0],c<50?(this.gameData.pause?b.node.parent.y=13:b.node.parent.getComponent(cc.Animation).play("anim_shouhui"),b.node.parent.active=!0):b.node.parent.active=!0):b.node.parent.active=!1,this.chipeng&&(this.chipeng=!1,this.chipengOver=!0),t&&this.play()},othInitHandMj:function(e,t){console.log("oth"),console.log(e),console.log(this.gameData.myPai[e]);var i=null;switch(e){case this.rightIndex:i=this.rhNode;break;case this.topIndex:i=this.upNode;break;case this.leftIndex:i=this.lfNode;break;case this.myIndex:i=this.myIndex}console.log(e);var n=this.gameData.myPai[e];if(0!=n.length){t||(n=this._gameFun.paiSort(n,this.gameData.jin));var o=i.getChildByName("holds").children,a=0;if(e==this.leftIndex||e==this.myIndex){for(var c=n.length-1,s=15;s>=0;s--)c>=0?(n[c]==this.gameData.jin?o[s].getChildByName("jin").active=!0:o[s].getChildByName("jin").active=!1,o[s].getChildByName("tex").mTag=n[c],this._gameFun.changeSpriteByNode(n[c--],this.myHoldAtlas,o[s].getChildByName("tex").getComponent(cc.Sprite)),t||(o[s].active=!0)):o[s].active=!1;a=16}else{for(c=n.length-1,s=1;s<17;s++)c>=0?(n[c]==this.gameData.jin?o[s].getChildByName("jin").active=!0:o[s].getChildByName("jin").active=!1,o[s].getChildByName("tex").mTag=n[c],this._gameFun.changeSpriteByNode(n[c--],this.myHoldAtlas,o[s].getChildByName("tex").getComponent(cc.Sprite)),o[s].active=!t):o[s].active=!1;a=0}var l=this.gameData.lastPai[e];this.gameData.lastPai[e]>0?(l==this.gameData.jin?o[a].getChildByName("jin").active=!0:o[a].getChildByName("jin").active=!1,this._gameFun.changeSpriteByNode(this.gameData.lastPai[e],this.myHoldAtlas,o[a].getChildByName("tex").getComponent(cc.Sprite)),o[a].active=!0):o[a].active=!1}},othChupai:function(e,t){console.log("\u5176\u4ed6\u4eba\u51fa\u724c!");var i,n=this._timePointer["s_"+e],o=null,a=null,c=this.soundSetting.voiceType,s=null;switch(n){case"right_point":i=this._gameFun.getFoldNum("r",this._gameFun.right_num++),o=this.rhNode.getChildByName("folds").children[i],this._gameFun.right_num>=this._gameFun.foldsNum&&(this._gameFun.right_num=0),a=this.rhNode.getChildByName("biaoji").getChildByName("biaoji_node"),this.rhNode.getChildByName("holds").children[0].active=!1,s=this.rh_soundGender;break;case"left_point":i=this._gameFun.getFoldNum("l",this._gameFun.left_num++),o=this.lfNode.getChildByName("folds").children[i],this._gameFun.left_num>=this._gameFun.foldsNum&&(this._gameFun.left_num=0),a=this.lfNode.getChildByName("biaoji").getChildByName("biaoji_node"),this.lfNode.getChildByName("holds").children[16].active=!1,s=this.lf_soundGender;break;case"up_point":i=this._gameFun.getFoldNum("b",this._gameFun.top_num++),o=this.upNode.getChildByName("folds").children[i],this._gameFun.top_num>=this._gameFun.foldsNum&&(this._gameFun.top_num=0),a=this.upNode.getChildByName("biaoji").getChildByName("biaoji_node"),this.upNode.getChildByName("holds").children[0].active=!1,s=this.bt_soundGender;break;default:return void console.log("my_point!!")}null!==o&&(o.getChildByName("tex").getComponent(cc.Sprite).spriteFrame=this._gameFun.setSpriteFrameByName("handmah_",t[0],this.myHoldAtlas),o.active=!0,o.mTag=t[0],null!=this._gameFun.biaoji&&(this._gameFun.lastBiaoji=this._gameFun.biaoji,this._gameFun.biaoji.active=!1),this._gameFun.biaoji=a,this._gameFun.biaoji.x=o.x,this._gameFun.biaoji.y=o.y,this._gameFun.biaoji.active=!0),null!=s&&(this._gameFun.playSound("Sounds/mjgame/"+c+"/card_"+s+"_"+t[0]),this._gameFun.playSound("Sounds/mjgame/game_p_discard")),t[0]!=this.gameData.lastPai[e]&&(this.gameData.myPai[e].removeVal(t[0]),this.gameData.myPai[e].push(this.gameData.lastPai[e])),this.gameData.lastPai[e]=-1,this.initGame(null,null,e)},onMjClick:function(){var e=this.mjSelected,t=(e.getComponent(cc.Animation),e.getChildByName("tex").mTag);console.log("\u70b9\u4e2d\u7684\u724c\u4e3a\uff1a"+t);var i=this._gameFun.setSpriteFrameByName("handmah_",e.getChildByName("tex").getComponent(cc.Sprite).spriteFrame._name.substring(8),this.myHoldAtlas);if(this.chupai_big_box.getChildByName("MyMahJong").getChildByName("tex").getComponent(cc.Sprite).spriteFrame=i,this.gameData.pause){for(var n=this._gameFun._holdNode,o=0;o<n.length;o++){var a=n[o].node.parent;a.x>this.mjSelected.x&&a.active&&(1180==a.x?a.x-=97:a.x-=69)}this.onChupaiCompleted()}else{this.chupai_big_box.active=!0,e.getChildByName("jin").active=!1;this.mj_anim_chupai(e),n=this._gameFun._holdNode;console.log(n),this.mj_anim_move(n,this.mjSelected,69)}this._gameFun.playSound("Sounds/mjgame/"+this.voiceType+"/card_"+this.my_soundGender+"_"+t)},showEventAnim:function(e,t,i){var n=e.getChildByName("seat").getChildByName("event"),o=null;4==t&&(o=n.getChildByName("eff_chi")),5==t&&(o=n.getChildByName("eff_peng")),2!=t&&6!=t&&9!=t||(o=n.getChildByName("eff_gang")),7==t&&(o=n.getChildByName("hu-1")),3==t&&(o=n.getChildByName("hu-"+i)),null!==o&&(o.active=!0,o.getComponent(cc.Animation).play("anim_mjEvent"),cc.global.util.mySetTimeout(function(){o.active=!1},1e3))},mj_anim_chupai:function(e){var t=this.myNode.getChildByName("biaoji").getChildByName("chuNode");console.log(this.chupai_num);var i=this.myNode.getChildByName("folds").children[this.chupai_num];t.x=e.x-482,t.y=-171,t.getChildByName("tex").getComponent(cc.Sprite).spriteFrame=e.getChildByName("tex").getComponent(cc.Sprite).spriteFrame,e.getComponent(cc.Animation).stop(),e.active=!1,t.active=!0;var n=t.getComponent(cc.Animation),o=cc.AnimationClip.createWithSpriteFrames([t.getComponent(cc.Sprite).spriteFrame],10);return o.name="anim_chupai",o.curveData={props:{position:[{frame:0,value:[t.x,t.y]},{frame:.1,value:[i.x,i.y+15]}]}},o.speed=1,n.addClip(o),n.on("finished",this.ChupaiCompleted,this),n.play("anim_chupai"),o},checkChupaiCompleted:function(){for(var e=0;e<this._gameFun._holdNode.length;e++){var t=this._gameFun._holdNode[e].node.parent.getComponent(cc.Animation).getAnimationState("anim_move");if(console.log(t),t&&t.isPlaying&&!t.isPaused)return!1;t&&t.isPlaying&&t.isPaused&&t.stop()}return!0},ChupaiCompleted:function(){if(console.log("--\u51fa\u724c\u68c0\u6d4b--"),this.checkChupaiCompleted())this.onChupaiCompleted();else{var e=this;cc.global.util.mySetTimeout(function(){e.ChupaiCompleted()},100)}},mj_anim_move:function(e,t,i){var n=-1,o=-1,a=e[e.length-1].node;if(void 0===t.mTag&&(t.mTag=-1),16!=t.mTag){if(!this.chipengOver)for(var c=0;c<e.length;c++){var s=e[c].node.parent;if(console.log("i="+c+";x="+s.x),a.mTag==this.gameData.jin){if(s.active&&s.getChildByName("tex").mTag!=a.mTag){n=s.mTag,o=s.x;break}}else if(s.active&&s.getChildByName("tex").mTag!=this.gameData.jin&&s.mTag!=t.mTag&&s.getChildByName("tex").mTag>a.mTag&&-1==n){n=s.mTag,o=s.x;break}}if(console.log("newI:"+n),this.chipengOver||-1==n)for(c=0;c<e.length;c++){if((s=e[c].node.parent).x>t.x&&s.active){var l=s.x,r=s.getComponent(cc.Animation),g=i;(u=cc.AnimationClip.createWithSpriteFrames([s.getComponent(cc.Sprite).spriteFrame],8)).name="anim_move",1180==s.x&&(g+=28),u.curveData={props:{x:[{frame:0,value:l,curve:null},{frame:.125,value:l-g,curve:null}]}},u.speed=1,r.addClip(u),r.play("anim_move")}}else{var h=-1,d=-1;g=i;if(t.getChildByName("tex").mTag==a.mTag)n=t.mTag,o=t.x;else{t.mTag>n?(h=n,d=t.mTag):t.mTag<=n&&(h=t.mTag+1,d=n,g=-i),t.mTag<n&&n--,console.log("start:"+h+";over"+d),console.log("newI after:"+n+";newX:"+o);for(c=h;c<d;c++)if(e[c].node.mTag!=a.mTag){l=e[c].node.parent.x,r=e[c].node.parent.getComponent(cc.Animation);(u=cc.AnimationClip.createWithSpriteFrames([e[c].node.parent.getComponent(cc.Sprite).spriteFrame],8)).name="anim_move",u.curveData={props:{x:[{frame:0,value:l,curve:null},{frame:.125,value:l+g,curve:null}]}},u.speed=1,r.addClip(u),r.play("anim_move")}else n--}r=e[e.length-1].node.parent.getComponent(cc.Animation);var u=cc.AnimationClip.createWithSpriteFrames([e[e.length-1].node.parent.getComponent(cc.Sprite).spriteFrame],8);n<0?(n=0,o=48):o=e[n].node.parent.x,u.name="anim_move";var m=a.parent.x,p=a.parent.y;u.curveData={props:{x:[{frame:0,value:m},{frame:.025,value:m},{frame:.1,value:o},{frame:.125,value:o}],y:[{frame:0,value:p},{frame:.025,value:110},{frame:.1,value:110},{frame:.125,value:13}]}},u.speed=1,r.addClip(u),r.play("anim_move")}}else console.log("\u6253\u51fa\u7684\u662f\u6700\u540e\u4e00\u5f20\u724c,\u4e0d\u6267\u884c\u624b\u724c\u4f4d\u79fb")},onChupaiCompleted:function(e){console.log("111=====================animCompleted!======================"),this.chupai_big_box.active=!1;var t=this.mjSelected.getChildByName("tex").mTag,i=this.myNode.getChildByName("folds").children[this.chupai_num];i.getChildByName("tex").getComponent(cc.Sprite).spriteFrame=this.chupai_big_box.getChildByName("MyMahJong").getChildByName("tex").getComponent(cc.Sprite).spriteFrame,i.active=!0,i.mTag=t,this.myNode.getChildByName("biaoji").getChildByName("chuNode").active=!1,this.chipengOver?(this.mjSelected.x=-1,this.mjSelected.y=13,this.mjSelected.mTag=-1,this.mjSelected.getChildByName("tex").mTag=-1,this.mjSelected=null):(this.mjSelected.x=1180,this.mjSelected.y=13,this.mjSelected=null),this.chupai_num++,this.chupai_num>=this._gameFun.foldsNum&&(this.chupai_num=0),this.shoot(t,i)},show_frm_config:function(){var e=this.frm_config.getComponentsInChildren(cc.Slider)[0];e.progress=cc.global.util.setting.music,e.node.children[0].width=400*e.progress,this.frm_config.getChildByName("frm").getChildByName("tanchuang_bg1").getChildByName("shezhi_bg").getChildByName("on").getComponent(cc.Sprite).spriteFrame=1==cc.global.util.setting.musicOn?this.sfIcons[1]:this.sfIcons[0];var t=this.frm_config.getComponentsInChildren(cc.Slider)[1];t.progress=cc.global.util.setting.sound,t.node.children[0].width=400*t.progress,this.frm_config.getChildByName("frm").getChildByName("tanchuang_bg1").getChildByName("shezhi_bg").getChildByName("off").getComponent(cc.Sprite).spriteFrame=1==cc.global.util.setting.soundOn?this.sfIcons[1]:this.sfIcons[0];var i=this.frm_config.getComponentInChildren(cc.ToggleGroup);i.node.children[0].getComponent(cc.Toggle).isChecked=!1,i.node.children[cc.global.util.setting.dialect].getComponent(cc.Toggle).check(),console.log(i.node.getChildByName("toggle"+cc.global.util.setting.dialect).getComponent(cc.Toggle)),this.frm_config.active=!0},hide_frm_config:function(){cc.sys.localStorage.setItem("volumeSetting",JSON.stringify(cc.global.util.setting)),this.frm_config.active=!1},onBtnMusicClick:function(e){var t=e.target.getComponent(cc.Sprite);t.spriteFrame==this.sfIcons[0]?(t.spriteFrame=this.sfIcons[1],cc.global.util.setting.musicOn=1,this.node.getChildByName("music").getComponent(cc.AudioSource).mute=!1):(t.spriteFrame=this.sfIcons[0],cc.global.util.setting.musicOn=0,this.node.getChildByName("music").getComponent(cc.AudioSource).mute=!0)},onBtnVolumClick:function(e){var t=e.target.getComponent(cc.Sprite);t.spriteFrame==this.sfIcons[0]?(t.spriteFrame=this.sfIcons[1],cc.global.util.setting.soundOn=1):(t.spriteFrame=this.sfIcons[0],cc.global.util.setting.soundOn=0)},cbClick:function(e,t){cc.global.util.setting.dialect=t,this.voiceType=1==t?"pt":"fy",this.soundSetting.voiceType=this.voiceType,console.log("voiceType:"+this.voiceType)},cb_jindutiao:function(e,t){e.node.children[0].width=400*e.progress,"1"==t?(cc.global.util.setting.music=e.progress,this.node.getChildByName("music").getComponent(cc.AudioSource).volume=e.progress):cc.global.util.setting.sound=e.progress},shoot:function(e,t){var i=this.gameData.myPai[this.myIndex],n=this.gameData.lastPai[this.myIndex],o=i.length;this.chipengOver=!1,null!==this._gameFun.biaoji&&(this._gameFun.lastBiaoji=this._gameFun.biaoji,this._gameFun.biaoji.active=!1),this._gameFun.biaoji=this.myNode.getChildByName("biaoji").getChildByName("biaoji_node"),this._gameFun.biaoji.x=t.x,this._gameFun.biaoji.y=t.y,this._gameFun.biaoji.active=!0,console.log("\u624b\u724c\u79fb\u9664\u524d\uff1a"+JSON.stringify(i)),i.removeVal(e),console.log("\u624b\u724c\u79fb\u9664\u540e\uff1a"+JSON.stringify(i)),i.length!=o&&n>0&&i.push(n),this.gameData.lastPai[this.myIndex]=-1,this.initHandMj(),this._gameFun.playSound("Sounds/mjgame/game_p_discard")},doAction:function(e,t,i){var n=null,o=null;switch(e){case this.myIndex:n=this.myNode,this.my_soundGender,o="M";break;case this.rightIndex:n=this.rhNode,this.rh_soundGender,o="R";break;case this.topIndex:n=this.upNode,this.bt_soundGender,o="B";break;case this.leftIndex:n=this.lfNode,this.lf_soundGender,o="L"}if(3!=t&&7!=t&&11!=t){var a=i[0];if(2!=t&&9!=t||(console.log("\u6760:\u6478\u724c\u52a0\u5165\u524d:"+JSON.stringify(this.gameData.myPai[e])),this.gameData.lastPai[e]!=a?this.gameData.myPai[e].push(this.gameData.lastPai[e]):this.gameData.lastPai[e]=-1,console.log("\u6760:\u6478\u724c\u52a0\u5165\u540e:"+JSON.stringify(this.gameData.myPai[e]))),4!=t&&5!=t&&6!=t||this.hideLastFlod(this.gameData.eventIndex),9==t){var c=i[i.length-1];console.log("zgindex="+c),this.showZhuaGang(e,i,c),this.initGame(null,null,e)}else{if(this.pengAction(e,n,o,t,i),4==t||5==t)if(e==this.myIndex)this.chipeng=!0;else{var s=this._gameFun.paiSort(this.gameData.myPai[e],this.gameData.jin),l=s[s.length-1];console.log("\u5176\u4ed6\u4eba\u5403\u78b0,\u6700\u540e\u4e00\u5f20\u724c\u662f:"+l),this.gameData.lastPai[e]=l,this.gameData.myPai[e].removeVal(l)}this.initGame(null,null,e)}}var r=null;3==t&&(r=i[1]),this.showEventAnim(n,t,r);var g="";4==t?g="chi":5==t?g="peng":2==t||6==t||9==t?g="gang":3==t?g="zimo":7==t&&(g="hu"),g.length>0&&this._gameFun.playSound("Sounds/mjgame/"+this.voiceType+"/op_"+this.my_soundGender+"_"+g)},pengAction:function(e,t,i,n,o){var a=this.gameData.myPai[e];o[0];o=this._gameFun.paiSort(o);for(var c=t.getChildByName("penggangs").children,s=0;s<c.length;s++)if(!c[s].active){c[s].active=!0;var l=c[s].children;2==n&&console.log("\u8fd9\u662f\u6697\u6760");for(var r=0;r<o.length;r++){if(4==n&&o[r]==this.gameData.eventPai?l[r].opacity=204:l[r].opacity=255,2==n&&3==r){var g=l[r].getComponent(cc.Sprite).spriteFrame.name.replace("a","b");console.log("bgname:"+g),l[r].getComponent(cc.Sprite).spriteFrame=this._gameFun.setSpriteFrameByName(g,null,this.paiBgAtlas),l[r].getChildByName("tex").active=!1,l[r].mTag=-1}else l[r].getChildByName("tex").getComponent(cc.Sprite).spriteFrame=this._gameFun.setSpriteFrameByName("handmah_",o[r],this.myHoldAtlas),l[r].getChildByName("tex").active=!0,l[r].mTag=o[r];l[r].active=!0}var h="type_"+i+"_"+Math.abs(n),d=this.gameData.groupidx[h];null!=d&&0!=d.length||(d=new Array),d.push(s),this.gameData.groupidx[h]=d;break}var u=t.getChildByName("pt_eff_box").getChildByName("pt_eff"),m=t.getChildByName("pt_eff_box").getChildByName("sp_eff");u.x=c[s].x-c[0].x,u.y=c[s].y-c[0].y,m.x=c[s].x-c[0].x,m.y=c[s].y-c[0].y,m.getComponent(cc.Animation).play(),u.getComponent(cc.ParticleSystem).resetSystem(),5==n?o=o.slice(0,2):6==n?o=o.slice(0,3):2==n?o=o.slice(0,4):4==n&&o.removeVal(this.gameData.eventPai),console.log("now hold is\uff1a"+JSON.stringify(a));for(s=0;s<o.length;s++)a.removeVal(o[s]);switch(console.log("now hold is\uff1a"+JSON.stringify(a)),e){case this.myIndex:this._gameFun.my_penggangGroup++,console.log("\u78b0\u6760\u503c::::::::"+this._gameFun.my_penggangGroup);break;case this.rightIndex:this._gameFun.right_penggangGroup++,console.log("\u78b0\u6760\u503c::::::::"+this._gameFun.right_penggangGroup);break;case this.topIndex:this._gameFun.top_penggangGroup++,console.log("\u78b0\u6760\u503c::::::::"+this._gameFun.top_penggangGroup);break;case this.leftIndex:this._gameFun.left_penggangGroup++,console.log("\u78b0\u6760\u503c::::::::"+this._gameFun.left_penggangGroup)}},showZhuaGang:function(e,t,i){var n=null,o=null;switch(e){case this.myIndex:o=this.myNode,n="M";break;case this.rightIndex:o=this.rhNode,n="R";break;case this.topIndex:o=this.upNode,n="B";break;case this.leftIndex:o=this.lfNode,n="L"}var a="type_"+n+"_5",c=o.getChildByName("penggangs").children;console.log(" groupidx is "+JSON.stringify(this.gameData.groupidx));var s=this.gameData.groupidx[a];console.log("\u5f53\u524d\u8282\u70b9\u5e8f\u53f7\u4e3a:"+i+"\uff0c\u5b58\u50a8\u8bb0\u5f55\u4e3a:"+JSON.stringify(s));var l=c[s[i]].children;l[3].getChildByName("tex").getComponent(cc.Sprite).spriteFrame=this._gameFun.setSpriteFrameByName("handmah_",t[0],this.myHoldAtlas),l[3].active=!0,l[3].mTag=-1,this.gameData.myPai[e].removeVal(t[0]),this.gameData.lastPai[e]=-1},initUsers:function(e,t){var i=this;console.log("roomData11:"+JSON.stringify(e)),this.gameNode.getChildByName("left").active=!1,this.gameNode.getChildByName("right").active=!1,this.gameNode.getChildByName("up").active=!1;for(var n=0;n<e.length;n++){if(e[n].index==this.myIndex){var o=this.myNode.getChildByName("seat").getChildByName("zhuangjia");e[n].index==t?o.active=!0:o.active=!1,this.myNode.getChildByName("seat").getChildByName("my_head_box").mTag=e[n].index,this.myNode.getChildByName("seat").getChildByName("my_name").getComponent(cc.Label).string=e[n].name,this.myNode.getChildByName("seat").getChildByName("my_head_box").getChildByName("my_integration_num").getComponent(cc.Label).string=e[n].score,""!=e[n].headimg&&cc.loader.load(e[n].headimg,function(e,t){var n=new cc.SpriteFrame(t,cc.Rect(0,0,t.width,t.height));i.myNode.getChildByName("seat").getChildByName("my_head_box").getChildByName("my_head_img").getComponent(cc.Sprite).spriteFrame=n})}if(e[n].index==this.rightIndex){this.soundSetting.rh_gender="\u7537"==e[n].sex?"boy":"gir",this.rhNode.active=!0;o=this.rhNode.getChildByName("seat").getChildByName("zhuangjia");e[n].index==t?o.active=!0:o.active=!1,this.rhNode.getChildByName("seat").getChildByName("right_head_box").mTag=e[n].index,this.rhNode.getChildByName("seat").getChildByName("right_name").getComponent(cc.Label).string=e[n].name,this.rhNode.getChildByName("seat").getChildByName("right_head_box").getChildByName("right_integration_num").getComponent(cc.Label).string=e[n].score,""!=e[n].headimg&&cc.loader.load(e[n].headimg,function(e,t){var n=new cc.SpriteFrame(t,cc.Rect(0,0,t.width,t.height));i.rhNode.getChildByName("seat").getChildByName("right_head_box").getChildByName("right_head_img").getComponent(cc.Sprite).spriteFrame=n})}if(e[n].index==this.topIndex){this.soundSetting.bt_gender="\u7537"==e[n].sex?"boy":"gir",this.upNode.active=!0;o=this.upNode.getChildByName("seat").getChildByName("zhuangjia");e[n].index==t?o.active=!0:o.active=!1,this.upNode.getChildByName("seat").getChildByName("up_head_box").mTag=e[n].index,this.upNode.getChildByName("seat").getChildByName("up_name").getComponent(cc.Label).string=e[n].name,this.upNode.getChildByName("seat").getChildByName("up_head_box").getChildByName("up_integration_num").getComponent(cc.Label).string=e[n].score,""!=e[n].headimg&&cc.loader.load(e[n].headimg,function(e,t){var n=new cc.SpriteFrame(t,cc.Rect(0,0,t.width,t.height));i.upNode.getChildByName("seat").getChildByName("up_head_box").getChildByName("up_head_img").getComponent(cc.Sprite).spriteFrame=n})}if(e[n].index==this.leftIndex){this.soundSetting.bt_gender="\u7537"==e[n].sex?"boy":"gir",this.lfNode.active=!0;o=this.lfNode.getChildByName("seat").getChildByName("zhuangjia");e[n].index==t?o.active=!0:o.active=!1,this.lfNode.getChildByName("seat").getChildByName("left_head_box").mTag=e[n].index,this.lfNode.getChildByName("seat").getChildByName("left_name").getComponent(cc.Label).string=e[n].name,this.lfNode.getChildByName("seat").getChildByName("left_head_box").getChildByName("left_integration_num").getComponent(cc.Label).string=e[n].score,""!=e[n].headimg&&cc.loader.load(e[n].headimg,function(e,t){var n=new cc.SpriteFrame(t,cc.Rect(0,0,t.width,t.height));i.lfNode.getChildByName("seat").getChildByName("left_head_box").getChildByName("left_head_img").getComponent(cc.Sprite).spriteFrame=n})}}},show_geregxx:function(e){var t=this.geregxx.getChildByName("bg"),i=this.replayData.users,n=null,o=e.target.parent.mTag;console.log("tag:"+o);for(var a=0;a<i.length;a++)if(i[a].index==o){n=i[a];break}null!=n&&(t.getChildByName("name").getChildByName("Label").getComponent(cc.Label).string=n.name,t.getChildByName("wj-jf").getChildByName("jf").getComponent(cc.Label).string=n.score,""!=n.headimg&&cc.loader.load(n.headimg,function(e,i){var n=new cc.SpriteFrame(i,cc.Rect(0,0,i.width,i.height));t.getChildByName("touxiangkuang").getChildByName("touxiang_img").getComponent(cc.Sprite).spriteFrame=n}),this.geregxx.active=!0)},hide_geregxx:function(){this.geregxx.active=!1},hideLastFlod:function(e){var t,i;switch(console.log("---\u9690\u85cf\u81ea\u5df1\u4e0a\u4e00\u6b21\u51fa\u724c--"),console.log("index:"+e),e){case this.myIndex:t=this.myNode,this.chupai_num--,-1==this.chupai_num&&(this.chupai_num=0),i=this.chupai_num;break;case this.rightIndex:t=this.rhNode,this._gameFun.right_num--,-1==this._gameFun.right_num&&(this._gameFun.right_num=0),i=this._gameFun.right_num,i=this._gameFun.getFoldNum("r",i);break;case this.topIndex:t=this.upNode,this._gameFun.top_num--,-1==this._gameFun.top_num&&(this._gameFun.top_num=0),i=this._gameFun.top_num,i=this._gameFun.getFoldNum("b",i);break;case this.leftIndex:t=this.lfNode,this._gameFun.left_num--,-1==this._gameFun.left_num&&(this._gameFun.left_num=0),i=this._gameFun.left_num,i=this._gameFun.getFoldNum("l",i);break;default:console.log("hidelastflod-break:index:"+e)}var n=t.getChildByName("folds").children[i];console.log("\u9690\u85cfnum:"+i),console.log("\u9690\u85cfnode:"),console.log(n),n.active=!1,this._gameFun.biaoji.active=!1,null!=this._gameFun.lastBiaoji?(this._gameFun.biaoji=this._gameFun.lastBiaoji,this._gameFun.biaoji.active=!0):this._gameFun.biaoji=null},updateZpaishu:function(){this.timer.getChildByName("mjcount").getChildByName("count").getComponent(cc.Label).string=this.gameData.zpaishu},doBuhua:function(e,t,i){var n=null;switch(e){case this.myIndex:n=this.myNode;break;case this.rightIndex:n=this.rhNode;break;case this.topIndex:n=this.upNode;break;case this.leftIndex:n=this.lfNode}var o=n.getChildByName("seat").getChildByName("event").getChildByName("btn_bu");o.active=!0,o.getComponent(cc.Animation).play("anim_mjEvent");var a=this,c=500;this.gameData.pause&&(c=0),cc.global.util.mySetTimeout(function(){if(o.active=!1,i){for(var c=n.getChildByName("holds").children,s=0,l=0;l<t.length;l++){for(var r=s;r<c.length;r++){var g=c[r].getChildByName("tex");if(g.mTag>=50){console.log("\u88ab\u66ff\u6362\u7684\u82b1\u724c\u5e8f\u53f7:"+r);for(var h=n.getChildByName("hua").children,d=0;d<h.length;d++)if(!h[d].active){h[d].getComponent(cc.Sprite).spriteFrame=a.huaAtlas.getSpriteFrame("handmah_"+g.mTag),h[d].active=!0;break}g.mTag=t[l],a._gameFun.changeSpriteByNode(t[l],a.myHoldAtlas,g.getComponent(cc.Sprite)),console.log("\u8865\u82b1\u7684index:"+e),e==a.rightIndex||e==a.topIndex?(console.log(a.gameData.myPai[e][16-r]),a.gameData.myPai[e][16-r]=t[l],console.log(a.gameData.myPai[e][16-r])):(console.log(a.gameData.myPai[e][r]),a.gameData.myPai[e][r]=t[l],console.log(a.gameData.myPai[e][r])),a.gameData.zpaishu--,a.updateZpaishu();break}}s=r+1,console.log("holdStart:"+s)}if(a.gameData.i++,11==a.replayData.data[a.gameData.i].type){var u=a.replayData.data[a.gameData.i];a.doBuhua(u.index,u.values,i)}else a.gameData.state++,a.initHandMj()}else{for(h=n.getChildByName("hua").children,d=0;d<h.length;d++)if(!h[d].active){h[d].getComponent(cc.Sprite).spriteFrame=a.huaAtlas.getSpriteFrame("handmah_"+a.gameData.lastPai[e]),h[d].active=!0;break}a.gameData.lastPai[e]=t[0],a.gameData.zpaishu--,a.updateZpaishu(),a.initGame(null,null,e)}},c)},animInitPaiView:function(e,t,i,n){var o=this;if(console.log("\u521d\u59cb\u5316\u624b\u724c\u52a8\u753b,\u53c2\u6570:start="+t+"group="+i),t>=16){if(this.gameData.userCountdown--,console.log("\u5f53\u524dcountdown\u8ba1\u6570\u4e3a:"+this.gameData.userCountdown),this.gameData.userCountdown<=0)if(this.gameData.i++,11==this.replayData.data[this.gameData.i].type){console.log("\u5f00\u5c40\u8865\u82b1:"+this.gameData.i);var a=this.replayData.data[this.gameData.i];this.doBuhua(a.index,a.values,!0)}else console.log("\u53d1\u724c\u540e\u4e0b\u4e00\u6b65\u7684type\u662f:"+this.replayData.data[this.gameData.i].type),this.gameData.state++,o.initHandMj()}else{if(this._gameFun.playSound("Sounds/mjgame/game_p_select_card"),n)for(var c=16-t;c>16-t-i;c--)e[c].active=!0;else for(c=t;c<t+i;c++)e[c].active=!0;this.gameData.zpaishu-=i,this.updateZpaishu(),cc.global.util.mySetTimeout(function(){o.animInitPaiView(e,t+i,i,n)},500)}},showDetail:function(e,t){var i=this.node.getChildByName("game_over").getChildByName("content"),n=i.getChildByName("con");if("s"==t){i.getChildByName("btn_shoupai").active=!0,i.getChildByName("btn_fenxiang").active=!1;for(var o=1;o<n.children.length;o++)n.children[o].getChildByName("mahjong").active=!1,n.children[o].getChildByName("mingxi").active=!0}else{i.getChildByName("btn_shoupai").active=!1,i.getChildByName("btn_fenxiang").active=!0;for(o=1;o<n.children.length;o++)n.children[o].getChildByName("mahjong").active=!0,n.children[o].getChildByName("mingxi").active=!1}},jiesuan:function(e,t){console.log("\u7ed3\u7b97\u4e8b\u4ef6\uff0c\u4f20\u5165\u53c2\u6570\uff1a"+JSON.stringify(e)),this.gameoverNode.active=!0;for(var i=this.gameoverNode.getChildByName("content").getChildByName("con").children,n=this.gameoverNode.getChildByName("FlowerCard").getChildByName("con").children,o=0;o<i.length;o++)i[o].active=!1,n[o].active=!1;t?(this.gameoverNode.getChildByName("top").getChildByName("bg_lose").active=!0,this.gameoverNode.getChildByName("top").getChildByName("liuju").active=!0,i[0].getChildByName("mahjong").getChildByName("mobg").active=!1,i[0].getChildByName("mahjong").getChildByName("layout").children[16].active=!1):(this.gameoverNode.getChildByName("top").getChildByName("bg_win").active=!0,this.gameoverNode.getChildByName("top").getChildByName("hu-"+e[0].huType).active=!0);for(o=0;o<e.length;o++){i[o].active=!0,n[o].active=!0,1==e[o].zhuang&&(i[o].getChildByName("zhuang").active=!0),i[o].getChildByName("labels").getChildByName("name").getComponent(cc.Label).string=e[o].player,i[o].getChildByName("labels").getChildByName("di").getComponent(cc.Label).string=e[o].difen+"\u5e95",i[o].getChildByName("labels").getChildByName("fan").getComponent(cc.Label).string=e[o].fan+"\u756a",1==e[o].isWinner?(i[o].getChildByName("labels").getChildByName("score").getComponent(cc.Label).string=e[o].score,i[o].getChildByName("labels").getChildByName("score-lose").active=!1,i[o].getChildByName("labels").getChildByName("score").active=!0):(i[o].getChildByName("labels").getChildByName("score-lose").getComponent(cc.Label).string=e[o].score,i[o].getChildByName("labels").getChildByName("score").active=!1,i[o].getChildByName("labels").getChildByName("score-lose").active=!0),function(e,t){""!=e&&cc.loader.load(e,function(e,i){var n=new cc.SpriteFrame(i,cc.Rect(0,0,i.width,i.height));t.getChildByName("head").getComponent(cc.Sprite).spriteFrame=n})}(e[o].headimg,i[o].getChildByName("labels")),i[o].getChildByName("mingxi").getComponent(cc.Label).string=e[o].fanDetail;var a=i[o].getChildByName("mahjong").getChildByName("layout").children,c=-1;t||0!=o||(console.log("\u53bb\u9664\u6700\u540e\u4e00\u5f20\u724c,\u53bb\u9664\u524dmypai:"+JSON.stringify(e[o].myPai)),c=e[o].myPai[e[o].myPai.length-1],e[o].myPai.remove(e[o].myPai.length-1),console.log("\u53bb\u9664\u540emypai:"+JSON.stringify(e[o].myPai)),a[16].getChildByName("tex").getComponent(cc.Sprite).spriteFrame=this._gameFun.setSpriteFrameByName("handmah_",c,this.myHoldAtlas),c==this.gameData.jin?a[16].getChildByName("jin").active=!0:a[16].getChildByName("jin").active=!1),console.log("\u7ed3\u7b97\u624b\u724c:"+JSON.stringify(e[o].myPai));for(var s=i[o].getChildByName("mahjong").getChildByName("gang").children,l=0,r=0;r<e[o].myPai.length;r++){for(var g=-1,h=0;h<e[o].gangValue.length;h++)if(e[o].gangValue[h]==e[o].myPai[r]){g=h;break}if(g>=0)s[l+1].getChildByName("tex").getComponent(cc.Sprite).spriteFrame=this._gameFun.setSpriteFrameByName("handmah_",e[o].myPai[r],this.myHoldAtlas),e[o].myPai[r]==this.gameData.jin?s[l+1].getChildByName("jin").active=!0:s[l+1].getChildByName("jin").active=!1,s[l+1].active=!0,e[o].gangValue[g]=-1;else{if(l>=17){console.log("\u7ed3\u7b97\u6570\u636e\u6709\u8bef!");break}a[l].getChildByName("tex").getComponent(cc.Sprite).spriteFrame=this._gameFun.setSpriteFrameByName("handmah_",e[o].myPai[r],this.myHoldAtlas),e[o].myPai[r]==this.gameData.jin?a[l].getChildByName("jin").active=!0:a[l].getChildByName("jin").active=!1,l++}}console.log("j="+r),console.log("paiI"+l),n[o].getChildByName("labels").getChildByName("name").getComponent(cc.Label).string=e[o].player,n[o].getChildByName("labels").getChildByName("hua").getComponent(cc.Label).string="\u82b1x"+e[o].hua;var d=n[o].getChildByName("huaNodes").children;for(r=0;r<e[o].huaValue.length;r++)d[r].getChildByName("tex").getComponent(cc.Sprite).spriteFrame=this._gameFun.setSpriteFrameByName("handmah_",e[o].huaValue[r],this.myHoldAtlas),d[r].active=!0}},doFapai:function(e){var t=this;t.initGame(null,1,e);var i=null;switch(e){case this.myIndex:i=this.myNode;break;case this.rightIndex:i=this.rhNode;break;case this.topIndex:i=this.upNode;break;case this.leftIndex:i=this.lfNode}var n=i.getChildByName("holds").children;cc.global.util.mySetTimeout(function(){console.log("fapai"),e==t.rightIndex||e==t.topIndex?t.animInitPaiView(n,0,4,!0):t.animInitPaiView(n,0,4)},500)},doInitPaiView:function(){var e=this,t=e.timer.getChildByName("shaizi_1"),i=e.timer.getChildByName("shaizi_2");e.timer.getChildByName("shaizi").active=!1;var n=parseInt(6*Math.random())+1,o=parseInt(6*Math.random())+1;console.log(n+";"+o),n>6&&(n=6),o>6&&(o=6),t.getComponent(cc.Sprite).spriteFrame=e.qzGameAnimaAtlas.getSpriteFrame("ThrowDiceResult_0"+n),i.getComponent(cc.Sprite).spriteFrame=e.qzGameAnimaAtlas.getSpriteFrame("ThrowDiceResult_0"+o),t.active=!0,i.active=!0,cc.global.util.mySetTimeout(function(){e.play()},1e3)},doJieSuan:function(e){var t=this;t.gameNode.runAction(cc.repeat(cc.sequence(cc.moveBy(.05,cc.v2(2,2)),cc.moveBy(.1,cc.v2(-4,-4)),cc.moveBy(.05,cc.v2(2,2))),5)),t.node.getChildByName("Back").runAction(cc.repeat(cc.sequence(cc.moveBy(.05,cc.v2(2,2)),cc.moveBy(.1,cc.v2(-4,-4)),cc.moveBy(.05,cc.v2(2,2))),5));for(var i=0;i<e.length;i++){var n=e[i].myIndex;if(1==e[i].isWinner){var o=t.myNode.getChildByName("biaoji").getChildByName("hu_dian");if(n!=t.myIndex){var a=null;n==t.leftIndex&&(a=t.lfNode.getChildByName("seat").getChildByName("event"),o=t.lfNode.getChildByName("biaoji").getChildByName("hu_dian")),n==t.topIndex&&(a=t.upNode.getChildByName("seat").getChildByName("event"),o=t.upNode.getChildByName("biaoji").getChildByName("hu_dian")),n==t.rightIndex&&(a=t.rhNode.getChildByName("seat").getChildByName("event"),o=t.rhNode.getChildByName("biaoji").getChildByName("hu_dian"));var c=a.getChildByName("hu-"+e[0].huType);c.active=!0,c.getComponent(cc.Animation).play("anim_mjEvent"),console.log(c),console.log(n),cc.global.util.mySetTimeout(function(){c.active=!1},2e3),console.log("\u51c6\u5907\u64ad\u653e\u5e73\u80e1\u52a8\u753b"),null!=t._gameFun.biaoji?(o.active=!0,o.getComponent(cc.Animation).play(),t._gameFun.biaoji.active=!1,t._gameFun.playSound("Sounds/mjgame/game_p_dian")):console.log("\u9519\u8bef:\u627e\u4e0d\u5230\u6807\u8bb0\u4f4d\u7f6e")}else{console.log("\u51c6\u5907\u64ad\u653e\u81ea\u6478\u52a8\u753b");var s=t.myNode.getChildByName("HuPai");console.log("\u8c03\u6574\u524d\u7684\u5bbd\u5ea6:"+s.getChildByName("dian").width);for(var l=0;l<t._gameFun._holdNode.length;l++)t._gameFun._holdNode[l].node.parent.active||(console.log("-1"),s.getChildByName("dian").width-=69);console.log("\u8c03\u6574\u540e\u7684\u5bbd\u5ea6:"+s.getChildByName("dian").width),s.active=!0,s.getComponent(cc.Animation).play()}}}(function(e){cc.global.util.mySetTimeout(function(){t.jiesuan(e)},3e3)})(e)},doBackChupai:function(e){console.log("\u6062\u590d\u88ab\u5403\u7684\u724c");var t,i=null,n=null;switch(e){case this.rightIndex:t=this._gameFun.getFoldNum("r",this._gameFun.right_num++),i=this.rhNode.getChildByName("folds").children[t],this._gameFun.right_num>=this._gameFun.foldsNum&&(this._gameFun.right_num=0),n=this.rhNode.getChildByName("biaoji").getChildByName("biaoji_node");break;case this.leftIndex:t=this._gameFun.getFoldNum("l",this._gameFun.left_num++),i=this.lfNode.getChildByName("folds").children[t],this._gameFun.left_num>=this._gameFun.foldsNum&&(this._gameFun.left_num=0),n=this.lfNode.getChildByName("biaoji").getChildByName("biaoji_node");break;case this.topIndex:t=this._gameFun.getFoldNum("b",this._gameFun.top_num++),i=this.upNode.getChildByName("folds").children[t],this._gameFun.top_num>=this._gameFun.foldsNum&&(this._gameFun.top_num=0),n=this.upNode.getChildByName("biaoji").getChildByName("biaoji_node");break;case this.myIndex:return t=this._gameFun.getFoldNum("m",this.chupai_num++),i=this.myNode.getChildByName("folds").children[t],this._gameFun.chupai_num>=this._gameFun.foldsNum&&(this._gameFun.chupai_num=0),void(n=this.myNode.getChildByName("biaoji").getChildByName("biaoji_node"))}null!==i&&(i.getChildByName("tex").getComponent(cc.Sprite).spriteFrame=this._gameFun.setSpriteFrameByName("handmah_",this.gameData.eventPai,this.myHoldAtlas),i.active=!0,i.mTag=this.gameData.eventPai,null!=this._gameFun.biaoji&&(this._gameFun.lastBiaoji=this._gameFun.biaoji,this._gameFun.biaoji.active=!1),this._gameFun.biaoji=n,this._gameFun.biaoji.x=i.x,this._gameFun.biaoji.y=i.y,this._gameFun.biaoji.active=!0)},doBackAction:function(e,t,i){var n=null;switch(e){case this.myIndex:n=this.myNode;break;case this.rightIndex:n=this.rhNode;break;case this.topIndex:n=this.upNode;break;case this.leftIndex:n=this.lfNode}for(var o=n.getChildByName("penggangs").children,a=o.length-1;a>=0;a--)if(o[a].active){o[a].active=!1;var c="type_"+name+"_"+Math.abs(t),s=this.gameData.groupidx[c];null!=s&&0!=s.length||(s=new Array),s.removeVal(a),this.gameData.groupidx[c]=s;break}switch(e){case this.myIndex:this._gameFun.my_penggangGroup--,console.log("\u78b0\u6760\u503c::::::::"+this._gameFun.my_penggangGroup);break;case this.rightIndex:this._gameFun.right_penggangGroup--,console.log("\u78b0\u6760\u503c::::::::"+this._gameFun.right_penggangGroup);break;case this.topIndex:this._gameFun.top_penggangGroup--,console.log("\u78b0\u6760\u503c::::::::"+this._gameFun.top_penggangGroup);break;case this.leftIndex:this._gameFun.left_penggangGroup--,console.log("\u78b0\u6760\u503c::::::::"+this._gameFun.left_penggangGroup)}5==t?i=i.slice(0,2):6==t?i=i.slice(0,3):2==t?i=i.slice(0,4):4==t&&i.removeVal(this.gameData.eventPai),console.log("now hold is\uff1a"+JSON.stringify(this.gameData.myPai[e]));for(a=0;a<i.length;a++)this.gameData.myPai[e].push(i[a]);console.log("now hold is\uff1a"+JSON.stringify(this.gameData.myPai[e]))},doBackZhuaGang:function(e,t,i){var n=null,o=null;switch(e){case this.myIndex:o=this.myNode,n="M";break;case this.rightIndex:o=this.rhNode,n="R";break;case this.topIndex:o=this.upNode,n="B";break;case this.leftIndex:o=this.lfNode,n="L"}var a="type_"+n+"_5",c=o.getChildByName("penggangs").children;console.log(" groupidx is "+JSON.stringify(this.gameData.groupidx));var s=this.gameData.groupidx[a];console.log("\u5f53\u524d\u8282\u70b9\u5e8f\u53f7\u4e3a:"+i+"\uff0c\u5b58\u50a8\u8bb0\u5f55\u4e3a:"+JSON.stringify(s)),c[s[i]].children[3].active=!1,this.gameData.myPai[e].push(t[0])},lastState:function(){console.log("\u70b9\u51fb:\u4e0a\u4e00\u6b65");var e=this.node.getChildByName("replay").getChildByName("back").getComponent(cc.Button);e.interactable=!1,this.gameData.focus=this.replayData.data[this.gameData.i-1].index;var t=this.replayData.data[this.gameData.i];switch(t.type){case 0:this.hideLastFlod(t.index);for(var i=this.gameData.i-2;i>0;i--)if(0==this.replayData.data[i].type&&0==this.replayData.data[i].showType){console.log("i"+i+";data:"+JSON.stringify(this.replayData.data[i]));var n=null;switch(this.replayData.data[i].index){case this.myIndex:n=this.myNode;break;case this.rightIndex:n=this.rhNode;break;case this.topIndex:n=this.upNode;break;case this.leftIndex:n=this.lfNode}this._gameFun.lastBiaoji=n.getChildByName("biaoji").getChildByName("biaoji_node");break}this.gameData.myPai[t.index].push(t.values[0]);var o=this.replayData.data[this.gameData.i-1];switch(o.type){case 1:case 11:var a=o.values[0];this.gameData.lastPai[o.index]=a,this.gameData.myPai[o.index].removeVal(a),this.initGame(null,null,o.index);break;case 4:case 5:if(t.index==this.myIndex)this.chipeng=!0;else{var c=this._gameFun.paiSort(this.gameData.myPai[t.index],this.gameData.jin),s=c[c.length-1];console.log("\u5176\u4ed6\u4eba\u5403\u78b0,\u6700\u540e\u4e00\u5f20\u724c\u662f:"+s),this.gameData.lastPai[t.index]=s,this.gameData.myPai[t.index].removeVal(s)}this.initGame(null,null,t.index);break;default:console.log("\u56de\u9000\u5f02\u5e38:\u51fa\u724c\u7684\u524d\u4e00\u6b65\u64cd\u4f5ctype="+o.type)}1==t.showType&&(this.gameData.eventIndex=-1,this.gameData.eventPai=-1);break;case 1:this.gameData.lastPai[t.index]=-1,this.initGame(null,null,t.index),this.gameData.zpaishu++,this.updateZpaishu();break;case 4:case 5:t.index==this.myIndex?(this.chipeng=!1,this.chipengOver=!1):(this.gameData.myPai[t.index].push(this.gameData.lastPai[t.index]),this.gameData.lastPai[t.index]=-1);case 6:var l=this.replayData.data[this.gameData.i-1];console.log("\u56de\u9000\u5403\u4e8b\u4ef6,\u4e0a\u4e00\u6b65\u64cd\u4f5c\u662f:"+JSON.stringify(l)),this.gameData.eventIndex=l.index,this.gameData.eventPai=l.values[0],this.doBackChupai(l.index),this.doBackAction(t.index,t.type,t.values),this.initGame(null,null,t.index);break;case 2:case 9:2==t.type?this.doBackAction(t.index,t.type,t.values):this.doBackZhuaGang(t.index,t.values,t.values[t.values.length-1]);var r=this.replayData.data[this.gameData.i-1];console.log("\u56de\u9000\u6697\u6760\u4e8b\u4ef6,\u4e0a\u4e00\u6b65\u64cd\u4f5c\u662f:"+JSON.stringify(r));a=r.values[0];this.gameData.myPai[r.index].removeVal(a),this.gameData.lastPai[r.index]=a,this.initGame(null,null,r.index);break;case 11:n=null;switch(t.index){case this.myIndex:n=this.myNode;break;case this.rightIndex:n=this.rhNode;break;case this.topIndex:n=this.upNode;break;case this.leftIndex:n=this.lfNode}var g=this.replayData.data[this.gameData.i-1].values[0];this.gameData.lastPai[t.index]=g;for(var h=n.getChildByName("hua").children,d=h.length-1;d>=0;d--)if(h[d].active){h[d].active=!1;break}this.initGame(null,null,t.index);break;case 8:case 999:case 10:return void console.log("\u56de\u9000\u5f02\u5e38:type="+t.type)}this.gameData.i--,this.gameData.state--,this.node.getChildByName("replay").getChildByName("state").getChildByName("index").getComponent(cc.Label).string=this.gameData.state,this.gameData.state>1&&(e.interactable=!0)},pauseState:function(){console.log("\u70b9\u51fb:\u6682\u505c"),this.node.getChildByName("replay").getChildByName("pause").getComponent(cc.Button).interactable=!1,this.gameData.pause=!0},playState:function(){console.log("\u70b9\u51fb:\u64ad\u653e");var e=this.node.getChildByName("replay");e.getChildByName("play").active=!1,e.getChildByName("pause").active=!0,e.getChildByName("pause").getComponent(cc.Button).interactable=!0,e.getChildByName("back").getComponent(cc.Button).interactable=!1,e.getChildByName("next").getComponent(cc.Button).interactable=!1,this.gameData.pause=!1,this.gameData.i++,this.gameData.state++,this.play()},nextState:function(){console.log("\u70b9\u51fb:\u4e0b\u4e00\u6b65"),this.gameData.i++,this.gameData.state++,this.play()},btnShareClick0:function(e){console.log("\u70b9\u51fb:\u6682\u505c"),this.node.getChildByName("replay").getChildByName("pause").getComponent(cc.Button).interactable=!1,this.gameData.pause=!0;var t=this;cc.global.http.sendRequest("/zagame/global/wxShare.json",{gid:3,type:3,id:cc.global.util.mjReplayData.id,platform:cc.global.util.gameinfo.platform},function(e){if(e)if(1==e.code){var i=anysdk.agentManager;t.sharePlugin=i.getSharePlugin(),t.sharePlugin.setListener(t.onShareResult,t);var n={title:e.data.title,text:e.data.text,url:e.data.url,mediaType:"2",shareTo:"0",imagePath:e.data.imagePath,thumbImage:"Icon-50.png",thumbSize:"64"};t.sharePlugin.share(n)}else cc.global.util.tipMsg(e.msg);else cc.global.util.tipMsg_connectErr()})},backDating:function(){cc.global.util.showAlert("\u6b63\u5728\u52a0\u8f7d"),cc.director.loadScene("dating"),cc.global.util.showReplayCustomData=!0},show_flowerCard:function(){this.flowerCard.active=!0},hide_flowerCard:function(){this.flowerCard.active=!1},replayAgain:function(){cc.global.util.showAlert("\u6b63\u5728\u52a0\u8f7d");var e=this.replayData.glog_id,t=this.replayData.id,i=this.replayData.visitCode;cc.global.http.sendRequest("/zagame/global/visitMJGameRoom.json",{gid:3,glog_id:e,room_no:cc.global.util.room_no,uid:cc.global.util.userinfo.id,visitCode:i},function(i){if(!i)return cc.global.util.closeAlert(),void cc.global.util.tipMsg_connectErr();1==i.code?(cc.global.util.mjReplayData=i.data,cc.global.util.mjReplayData.glog_id=e,cc.global.util.mjReplayData.id=t,cc.director.loadScene("replay_mj")):(cc.global.util.closeAlert(),cc.global.util.tipMsg(i.msg))},null,!0)},update:function(e){var t=this.timer.getChildByName("pointer-"+this.myIndex).getChildByName("lblTime").getComponent(cc.Label);if(null!=this._gameFun._timer&&0!=this._gameFun._ticktime&&(this._gameFun._ticktime=parseInt(t.string),this._gameFun._sumtime+=e,this._gameFun._sumtime>1&&this._gameFun._ticktime>0)){this._gameFun._ticktime--,t.string=this._gameFun._ticktime,this._gameFun._sumtime=0;cc.global.game._game;this._gameFun._ticktime<=3&&this.gameData.focus>=0&&this._gameFun.playSound("Sounds/mjgame/game_p_time_non")}},onDestroy:function(){cc.global.util.clearAllTimer()}}),cc._RF.pop()},{mjGameUtil:"mjGameUtil"}],mjgame:[function(e,t,i){"use strict";cc._RF.push(t,"6d817Mnk95NorYjMvVMxSD7","mjgame"),Array.prototype.remove=function(e){if(console.log("\u5220\u9664\u6570\u7ec4\u8282\u70b9,dx="+e),isNaN(e)||e>this.length)return!1;this.splice(e,1)},Array.prototype.removeVal=function(e){for(var t=0;t<this.length;t++)if(this[t]==e){this.splice(t,1);break}},Array.prototype.contains=function(e){for(var t in this)if(this[t]==e)return!0;return!1},Array.prototype.contains2=function(e,t){for(var i in this){if(this[i]==e)return!0;if(this[i]==t)return!0}return!1},cc.Class({extends:cc.Component,properties:{readyNode:cc.Node,gameNode:{default:null,type:cc.Node},gameoverNode:cc.Node,frm_config:cc.Node,myNode:cc.Node,lfNode:cc.Node,rhNode:cc.Node,upNode:cc.Node,timer:cc.Node,actOps:cc.Node,chupai_big_box:cc.Node,jinpai:cc.Sprite,mjSelected:cc.Node,tinghint:cc.Prefab,geregxx:cc.Node,closeCountdown:-1,closeTimer:null,myHoldAtlas:{default:null,type:cc.SpriteAtlas},lfChiAtlas:{default:null,type:cc.SpriteAtlas},rhChiAtlas:{default:null,type:cc.SpriteAtlas},upChiAtlas:{default:null,type:cc.SpriteAtlas},browAtlas:{default:null,type:cc.SpriteAtlas},huTypeAtlas:{default:null,type:cc.SpriteAtlas},paiBgAtlas:{default:null,type:cc.SpriteAtlas},huaAtlas:{default:null,type:cc.SpriteAtlas},numAtlas:{default:null,type:cc.SpriteAtlas},sfIcons:{default:[],type:cc.SpriteFrame},sendMsgList:{default:null,type:cc.Node},sendBrowList:{default:null,type:cc.Node},qzGameAnimaAtlas:{default:null,type:cc.SpriteAtlas},item:{default:null,type:cc.Prefab,tooltip:"\u5546\u57ce\u9884\u5236"},sctuji:{type:cc.SpriteAtlas,default:null,tooltip:"\u5546\u57ce\u56fe\u96c6"},cbTC:cc.Node,cbTC2:cc.Node,AtlasList:null,_holdMap:null,_gameFun:null,_nowAction:null,_timePointer:null,_seats:null,_initHua:!1,chipengReady:!1,chipeng:!1,chipengOver:!1,chuState:!1,myIndex:0,rightIndex:0,topIndex:0,leftIndex:0,mjSelectedX:0,chupai_num:0,soundSetting:null,voiceType:"fy",my_soundGender:"gir",rh_soundGender:"gir",bt_soundGender:"gir",lf_soundGender:"gir",tingTip:null,youjinType:0,samePaiColor:null,oriPaiColor:null,samePaiArr:[],lastTouch:-1,startTouch:-1,touchNode:null,dice:null,refreshTime:3,actState:!0,nowAnim:null,focusIndex:-1,chupaiAnimState:!1,buhuaAnimState:!1,moveAct:!0},onLoad:function(){console.log("onload"),cc.global.game._stopRepeate=!1;var t=(i=cc.global.room._roomData).roomType;4==t&&(t=1),2!=t&&6!=t&&9!=t||(t=0),8==t&&(t=3),cc.global.util.roomType=t,this.gameNode.getChildByName("jinpaiinfo").active=!1,this.myNode.getChildByName("holds").children[16].active=!1,0==cc.global.util.roomType||10==cc.global.util.roomType?(this.node.getChildByName("roominfo").getChildByName("roominfo1").getChildByName("label1").getComponent(cc.Label).string="\u6cc9\u5dde\u9ebb\u5c06   \u623f\u95f4\u53f7:"+cc.global.room._roomData.room_no,this.node.getChildByName("roominfo").getChildByName("roominfo2").getChildByName("label").getComponent(cc.Label).string=cc.global.room._roomData.roominfo,this.node.getChildByName("roominfo").getChildByName("roominfo1").active=!0,this.node.getChildByName("roominfo").getChildByName("roominfo1").getChildByName("label2").active=!1,this.node.getChildByName("roominfo").getChildByName("roominfo2").active=!0):1==cc.global.util.roomType?(cc.global.room._roomData.roominfo?(this.node.getChildByName("roominfo").getChildByName("roominfo1").getChildByName("label1").getComponent(cc.Label).string=cc.global.room._roomData.roominfo,this.node.getChildByName("roominfo").getChildByName("roominfo1").getChildByName("label2").active=!1,this.node.getChildByName("roominfo").getChildByName("roominfo1").active=!0):this.node.getChildByName("roominfo").active=!1,this.timer.getChildByName("gamecount").active=!1,this.timer.getChildByName("mjcount").x=0):3==cc.global.util.roomType&&(this.node.getChildByName("roominfo").getChildByName("roominfo1").getChildByName("label1").getComponent(cc.Label).string="\u623f\u95f4\u53f7:"+cc.global.room._roomData.room_no,this.node.getChildByName("roominfo").getChildByName("roominfo1").getChildByName("label2").getComponent(cc.Label).string=cc.global.room._roomData.roominfo,this.node.getChildByName("roominfo").getChildByName("roominfo1").active=!0,this.timer.getChildByName("gamecount").active=!1,this.timer.getChildByName("mjcount").x=0),this.node.getChildByName("roominfo").getChildByName("roominfo3").getChildByName("label2").active=!1,this.node.getChildByName("roominfo").getChildByName("roominfo3").getChildByName("label1").active=!0,cc.find("roominfo/roominfo3/label1",this.node).getComponent(cc.Label).string="\u756a\u500d:"+i.fanMultiple+"  \u5e95\u5206:"+i.score,cc.find("roominfo/current_time/label",this.node).getComponent(cc.Label).string=cc.global.util.getCurrentTime(),cc.global.game._dispatchEventHandel=this.node;var i,n=e("mjGameUtil");this._gameFun=new n,console.log(this._gameFun),this.gameData=new Object,this.gameData.limitTime=cc.global.room._roomData.timeArray,this.gameData.limitTime||(this.gameData.limitTime=[15,90]),this.gameData.startTime=-1,this.gameData.lastTime=-1,this.gameData.countType=1,this._gameFun.defTimer=this.gameData.limitTime[1],cc.global.util.isTrustee=0;for(var o=this.myNode.getChildByName("holds"),a=0;a<o.children.length;a++)o.children[a].getChildByName("tex").getComponent(cc.Sprite).spriteFrame=null,o.children[a].getChildByName("jin").active=!1;if(this._gameFun.hidePenggang(this.myNode.getChildByName("penggangs")),this._gameFun.hidePenggang(this.lfNode.getChildByName("penggangs")),this._gameFun.hidePenggang(this.rhNode.getChildByName("penggangs")),this._gameFun.hidePenggang(this.upNode.getChildByName("penggangs")),cc.global.game.gid=3,this._gameFun.paiBgAtlas=this.paiBgAtlas,this.voiceType=1==cc.global.util.setting.dialect?"fy":"pt",this.my_soundGender="\u7537"==cc.global.util.userinfo.sex?"boy":"gir",console.log("\u8bed\u97f3\u6027\u522b\u8bbe\u7f6e:"+this.my_soundGender),this.soundSetting=new Object,this.soundSetting.voiceType=this.voiceType,this.soundSetting.rh_gender=this.rh_soundGender,this.soundSetting.bt_gender=this.bt_soundGender,this.soundSetting.lf_gender=this.lf_soundGender,this.samePaiColor=cc.color(249,255,107,255),this.oriPaiColor=cc.color(255,255,255,255),this._holdMap=new Object,this.initView(),this.optionNodeX=this.node.getChildByName("option_node").x,this.initHandle(),this._seats=new Object,this._seats.rh=this.rhNode,this._seats.lf=this.lfNode,this._seats.bt=this.upNode,this._seats.my=this.myNode,this.AtlasList=new Object,this.AtlasList.left=this.lfChiAtlas,this.AtlasList.right=this.rhChiAtlas,this.AtlasList.top=this.upChiAtlas,this.tingTip=[],10==(i=cc.global.room._roomData).roomType&&(cc.global.util.datingType="tea",!cc.global.util.teaUserinfo)){var c=cc.sys.localStorage.getItem("teaInfoCode");c&&cc.global.net.send("tea_infoEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,teaInfoCode:c})}if((8==i.roomType||9==i.roomType)&&(cc.global.util.datingType="circle",cc.global.util.circleRoomFilterGid=3,!cc.global.util.circleUserinfo)){var s=cc.sys.localStorage.getItem("circleId");s&&cc.global.net.send("memberDetailInfoEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,user_id:cc.global.util.userinfo.uid,circle_id:s})}if(cc.global.game._isRecon&&this.resetGame(cc.global.game.reconData),cc.global.game._isRecon)console.log("\u6765\u81ea\u91cd\u8fde\u7684start,\u4e0d\u53d1\u9001\u51c6\u5907\u8bf7\u6c42"),cc.global.game._isRecon=!1,cc.global.game.reconData=null;else{if(cc.global.room._isnext)cc.global.net.send("gameReady",{room_no:cc.global.room._roomData.room_no,account:cc.global.util.userinfo.account,type:2}),cc.global.room._isnext=!1;else{cc.global.net.send("gameReady",{room_no:cc.global.room._roomData.room_no,account:cc.global.util.userinfo.account,type:3});for(a=0;a<i.users.length;a++)i.users[a].index==i.myIndex&&0==i.users[a].userStatus&&(this.readyNode.getChildByName("btn_ready").active=!0)}if(!(1!=cc.global.util.roomType&&3!=cc.global.util.roomType||0!=cc.global.room._roomData.gameStatus&&1!=cc.global.room._roomData.gameStatus))for(a=0;a<cc.global.room._roomData.users.length;a++)cc.global.room._roomData.users[a].index==this.myIndex&&1!=cc.global.room._roomData.users[a].userStatus&&(this.readyNode.getChildByName("btn_ready").active=!0)}cc.sys.os==cc.sys.OS_ANDROID?(console.log("\u5b89\u5353:\u8bed\u97f3\u521d\u59cb\u5316"),jsb.reflection.callStaticMethod("org.cocos2dx.javascript.AppActivity","joinGame","(Ljava/lang/String;)V",cc.global.util.userinfo.openid)):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("JsUseOcTool","joinGame:",String(cc.global.util.userinfo.openid)),cc.global.util.userinfo.jkg&&1==cc.global.util.userinfo.jkg?(this.node.getChildByName("New Button").active=!0,this.node.getChildByName("New Button2").active=!0):(this.node.getChildByName("New Button").active=!1,this.node.getChildByName("New Button2").active=!1)},start:function(){cc.global.util.resize(),this.touch_dx=this.node.width/2-640,this.touch_dy=this.node.height/2-360,this.playMusic()},playMusic:function(){var e=this,t=this.node.getChildByName("music").getComponent(cc.AudioSource);t.volume=cc.global.util.setting.music,0==cc.global.util.setting.musicOn?t.mute=!0:t.mute=!1,t.play(),cc.global.util.mySetTimeout(function(){e.node&&e.playMusic()},39e3)},getMessagePush:function(e){var t=cc.find("Canvas/in_gg");2==e.type&&(1==e.code?(t.mTag?t.mTag=t.mTag+1:t.mTag=1,t.getChildByName("mask").getChildByName("lb").getComponent(cc.Label).string=e.content,t.active=!0,cc.global.util.mySetTimeout(function(){t.mTag=t.mTag-1,t.mTag<=0&&(t.active=!1)},5e4)):t.active=!1)},gameReady:function(){this.readyNode.getChildByName("btn_ready").active=!1,cc.global.net.send("gameReady",{room_no:cc.global.room._roomData.room_no,account:cc.global.util.userinfo.account,type:2})},onReconnectClick:function(){cc.global.util.playSound_buttonClick(),console.log("\u53d1\u9001\u91cd\u8fde\u8bf7\u6c42"),cc.global.util.showAlert("\u6b63\u5728\u52a0\u8f7d"),cc.global.net.send("reconnectGame",{room_no:cc.global.room._roomData.room_no,account:cc.global.util.userinfo.account,uuid:cc.global.util.userinfo.uuid})},returnGame:function(){console.log("\u56de\u5230\u6e38\u620f:\u5224\u65ad\u72b6\u6001"),this.gameNode.active&&!this.node.getChildByName("game_over").active&&(console.log("\u6e38\u620f\u4e2d\u975e\u7ed3\u7b97,\u5f3a\u5236\u91cd\u8fde"),cc.global.util.showAlert("\u6b63\u5728\u52a0\u8f7d"),cc.global.net.send("reconnectGame",{room_no:cc.global.room._roomData.room_no,account:cc.global.util.userinfo.account,uuid:cc.global.util.userinfo.uuid}))},onTrusteeClick:function(e,t){cc.global.util.playSound_buttonClick(),cc.global.net.send("gameTrustee",{room_no:cc.global.room._roomData.room_no,account:cc.global.util.userinfo.account,type:t})},doTrustee:function(e,t){for(var i=null,n=cc.global.room._roomData.users,o=0;o<n.length;o++)n[o].index==e&&(n[o].isTrustee=t);switch(e){case this.myIndex:i=this.myNode,1==t&&this._gameFun.closeOps(this.actOps),cc.global.util.isTrustee=t;break;case this.rightIndex:i=this.rhNode;break;case this.topIndex:i=this.upNode;break;case this.leftIndex:i=this.lfNode;break;default:return void console.log("\u6258\u7ba1\u901a\u77e5\u5f02\u5e38,index="+e)}i.getChildByName("trustee").active=1==t},onChiClick:function(e,t){cc.global.util.playSound_buttonClick();var i=e.target.parent.mTag,n=this._nowAction.chivalue;if("b"==t){if(1!=n.length)return void(this.actOps.getChildByName("chiop").active=!0);i=0}if(this.actState){var o=new Object;o.room_no=cc.global.room._roomData.room_no,o.account=cc.global.util.userinfo.account,o.type=4,o.chivalue=n[i],this.actState=!1,cc.global.net.send("gameEvent",o)}},doChiAction:function(){this.youjinType=0;var e=this.actResult.lastChiValue;e.push(this._nowAction.lastValue[0]),e=this._gameFun.paiSort(e),this.chipengReady=!0,this._gameFun.pengDeal(this._nowAction,4,this.myNode,this.myHoldAtlas,e),this.initHandMj("hide"),this._gameFun.closeOps(this.actOps),this.showEventAnim(4),this._gameFun.playSound("Sounds/mjgame/"+this.voiceType+"/op_"+this.my_soundGender+"_chi"),this.actState=!0},onPassClick:function(){if(cc.global.util.playSound_buttonClick(),this.actState){var e=new Object;e.room_no=cc.global.room._roomData.room_no,e.account=cc.global.util.userinfo.account,e.type=1,this._gameFun.closeOps(this.actOps),console.log("pass!"),console.log(this._nowAction),this._nowAction.type.contains(3)&&this.tingpaiHint(this.tingTip),cc.global.net.send("gameEvent",e)}},onActionClick:function(e,t){if(this.actState&&null!=this._nowAction){console.log(" this._nowAction is "+JSON.stringify(this._nowAction)),this.youjinType=0;var i=new Object;i.room_no=cc.global.room._roomData.room_no,i.account=cc.global.util.userinfo.account,i.type=t;for(var n=0;n<this._nowAction.type.length&&5!=t;n++){if(6==t&&(2==this._nowAction.type[n]||6==this._nowAction.type[n]||9==this._nowAction.type[n])){i.type=this._nowAction.type[n];break}if(7==t&&(3==this._nowAction.type[n]||7==this._nowAction.type[n])){i.type=this._nowAction.type[n];break}}3==i.type&&(i.type=11),this.actState=!1,cc.global.net.send("gameEvent",i)}},doAction:function(){var e=new Object;if(e.type=-this.actResult.lastType,console.log(this.actResult),3!=e.type&&7!=e.type&&11!=e.type){var t=this._nowAction.pengvalue;2!=e.type&&6!=e.type&&9!=e.type||(t=this._nowAction.gangvalue);var i=t[0];4!=e.type&&5!=e.type||(this.chipengReady=!0),2!=e.type&&9!=e.type||(console.log("\u6760:\u6478\u724c\u52a0\u5165\u524d:"+JSON.stringify(cc.global.game._game.myPai)),cc.global.game._game.value[0]!=i?cc.global.game._game.myPai.push(cc.global.game._game.value[0]):cc.global.game._game.value=null,console.log("\u6760:\u6478\u724c\u52a0\u5165\u540e:"+JSON.stringify(cc.global.game._game.myPai))),9==e.type?(this._gameFun.showZhuaGang("M",this._nowAction,this.myNode,this.myHoldAtlas,this._seats),this.initHandMj()):(this._gameFun.pengDeal(this._nowAction,e.type,this.myNode,this.myHoldAtlas,t),this.initHandMj("hide"))}this._gameFun.closeOps(this.actOps),this.showEventAnim(e.type,this._nowAction.huType);var n="";4==e.type?n="chi":5==e.type?n="peng":2==e.type||6==e.type||9==e.type?n="gang":3==e.type||11==e.type?n=this._nowAction.huType<=6?"hu"+this._nowAction.huType:"hu1":7==e.type&&(n="hu1"),n.length>0&&this._gameFun.playSound("Sounds/mjgame/"+this.voiceType+"/op_"+this.my_soundGender+"_"+n),this.actState=!0},showEventAnim:function(e,t){var i=this.myNode.getChildByName("seat").getChildByName("event"),n=null;4==e&&(n=i.getChildByName("eff_chi")),5==e&&(n=i.getChildByName("eff_peng")),2!=e&&6!=e&&9!=e||(n=i.getChildByName("eff_gang")),7==e&&(n=i.getChildByName("hu-1")),3!=e&&11!=e||(n=i.getChildByName("hu-"+t)),null!==n&&(n.active=!0,n.getComponent(cc.Animation).play("anim_mjEvent"),cc.global.util.mySetTimeout(function(){n.active=!1},1e3))},onMjSelected:function(e,t){console.log("x:"+e.x),console.log(this.actState);var i=cc.global.game._game;if(i.focus==i.myIndex&&this.chuState&&this.actState){for(var n=0;n<this.samePaiArr.length;n++)this.samePaiArr[n].color=this.oriPaiColor;this.samePaiArr=[];var o=e.getComponent(cc.Animation);console.log(" mjSelected is "+this.mjSelected);var a=o.getAnimationState("anim_move");if(console.log(a),null!=a&&a.isPlaying)console.log("\u4f4d\u79fb\u52a8\u753b\u5c1a\u672a\u64ad\u653e\u5b8c\u6bd5");else if(null===this.mjSelected||this.mjSelected!=e){null!==this.mjSelected&&this.mjSelected.getComponent(cc.Animation).play("anim_shouhui"),this.mjSelected=e,this.mjSelectedX=e.x,o.play("anim_xuanpai"),this._gameFun.playSound("Sounds/mjgame/game_p_select_card");var c=this.myNode.getChildByName("tinghint");if(e.getChildByName("tingpai").active){console.log("0.\u6709\u542c\u724c\u63d0\u793a,tingtip:"+JSON.stringify(this.tingTip));for(n=0;n<this.tingTip.length;n++)if(this.tingTip[n].pai==e.getChildByName("tex").mTag){var s=c.getChildByName("list"),l=s.children.length,r=this.tingTip[n].values;if(console.log("3.0.\u9700\u8981\u7684\u8282\u70b9\u6570\u91cf\u662f:"+r.length),console.log("3.1.\u5904\u7406\u524d\u7684list\u8282\u70b9\u6570\u91cf\u4e3a:"+l),l>r.length)for(var g=r.length;g<l;g++)s.removeChild(s.children[r.length]);else if(l<r.length)for(g=l;g<r.length;g++)s.addChild(cc.instantiate(this.tinghint));console.log("3.2.\u5904\u7406\u540e\u7684list\u8282\u70b9\u6570\u91cf\u4e3a:"+s.children.length);var h=e.x-60-60*r.length;c.x=h,console.log("1.\u627e\u5230\u542c\u7684\u724c,\u5916\u6846\u7684x="+h);var d=e.x+25-h;c.getChildByName("arrow").x=d,console.log("2.\u7bad\u5934\u7684x="+d),function(e){cc.global.util.mySetTimeout(function(){c.width=100+120*e},20)}(r.length);for(g=0;g<s.children.length;g++){var u=s.children[g].getChildByName("mingmah");u.getChildByName("tex").getComponent(cc.Sprite).spriteFrame=this._gameFun.setSpriteFrameByName("handmah_",r[g].val,this.myHoldAtlas),r[g].val==cc.global.game._game.jin?u.getChildByName("jin").active=!0:u.getChildByName("jin").active=!1,s.children[g].getChildByName("num").getComponent(cc.Sprite).spriteFrame=this.numAtlas.getSpriteFrame("plus_num_"+r[g].count)}var m=c.x+120+120*r.length;console.log("\u9884\u8ba1\u5bbd\u5ea6:"+m),m>1270&&(c.x=c.x-m+1270,c.getChildByName("arrow").x=c.getChildByName("arrow").x+m-1270),c.x<0&&(c.getChildByName("arrow").x=c.getChildByName("arrow").x+c.x,c.x=0),c.active=!0}}else c.active=!1;var p=e.getChildByName("tex").mTag,f=this._gameFun._holdNode;for(n=0;n<f.length;n++){var b=f[n].node;if(b.parent.active&&b.mTag==p){if(b.parent.mTag==e.mTag)continue;b.parent.color=this.samePaiColor,this.samePaiArr.push(b.parent)}}for(n=0;n<4;n++){var _=null;switch(n){case 0:_=this.myNode;break;case 1:_=this.rhNode;break;case 2:_=this.upNode;break;case 3:_=this.lfNode}var y=_.getChildByName("penggangs").children;for(g=0;g<y.length&&y[g].active;g++)for(var v=y[g].children,C=0;C<v.length;C++)v[C].active&&v[C].mTag==p&&(v[C].color=this.samePaiColor,this.samePaiArr.push(v[C]));var N=_.getChildByName("folds").children;for(g=0;g<N.length;g++)N[g].active&&N[g].mTag==p&&(N[g].color=this.samePaiColor,this.samePaiArr.push(N[g]))}this.jinpai.node.parent.mTag==p&&(this.jinpai.node.parent.color=this.samePaiColor,this.samePaiArr.push(this.jinpai.node.parent))}else{if(0==t)return;if(this.myNode.getChildByName("tinghint").active=!1,-1==t)return void(null!==this.mjSelected&&(this.mjSelected.getComponent(cc.Animation).play("anim_shouhui"),this.mjSelected=null));this.chuState=!1,this.actState=!1;var S=new Object;S.room_no=cc.global.room._roomData.room_no,S.account=cc.global.util.userinfo.account,S.pai=e.getChildByName("tex").mTag,cc.global.net.send("gameChupai",S)}}else console.log("\u4e0d\u662f\u4f60\u7684\u56de\u5408\uff0c\u8bf7\u8fd4\u56de")},doChupai:function(e){this.chupaiAnimState=!0;for(var t=this.mjSelected,i=0;i<this.samePaiArr.length;i++)this.samePaiArr[i].color=this.oriPaiColor;if(this.samePaiArr=[],!this.mjSelected||this.mjSelected.getChildByName("tex").mTag!=e){console.log("\u51fa\u7684\u724c\u4e0d\u662f\u9009\u4e2d\u724c"),this.mjSelected&&this.mjSelected.getComponent(cc.Animation).play("anim_shouhui"),this.myNode.getChildByName("tinghint").active=!1;for(i=this._gameFun._holdNode.length-1;i>=0;i--)if(this._gameFun._holdNode[i].node.mTag==e){t=this._gameFun._holdNode[i].node.parent,this.mjSelected=t,this.mjSelectedX=t.x;break}}var n=t.getChildByName("tex").mTag;console.log("\u70b9\u4e2d\u7684\u724c\u4e3a\uff1a"+n),t.getChildByName("jin").active=!1,t.getChildByName("tingpai").active=!1,t.getChildByName("youjin").active=!1;var o=this._gameFun.setSpriteFrameByName("handmah_",t.getChildByName("tex").getComponent(cc.Sprite).spriteFrame._name.substring(8),this.myHoldAtlas);this.chupai_big_box.getChildByName("MyMahJong").getChildByName("tex").getComponent(cc.Sprite).spriteFrame=o;this.mj_anim_chupai(t);var a=this._gameFun._holdNode;console.log(a),this.mj_anim_move(a,this.mjSelected,69),this._gameFun.playSound("Sounds/mjgame/"+this.voiceType+"/card_"+this.my_soundGender+"_"+n)},cancelSelected:function(){this.mjSelected=null},onMjClick:function(e){},checkChupaiCompleted:function(){for(var e=0;e<this._gameFun._holdNode.length;e++){var t=this._gameFun._holdNode[e].node.parent.getComponent(cc.Animation).getAnimationState("anim_move");if(t&&t.isPlaying&&!t.isPaused)return!1;t&&t.isPlaying&&t.isPaused&&t.stop()}return!0},ChupaiCompleted:function(){if(console.log("--\u51fa\u724c\u68c0\u6d4b--"),this.checkChupaiCompleted())this.onChupaiCompleted();else{var e=this;cc.global.util.mySetTimeout(function(){e.ChupaiCompleted()},100)}},mj_anim_chupai:function(e){var t=this.myNode.getChildByName("biaoji").getChildByName("chuNode");console.log(this.chupai_num);var i=this.myNode.getChildByName("folds").children[this.chupai_num];t.x=e.x-482,t.y=-171,t.getChildByName("tex").getComponent(cc.Sprite).spriteFrame=e.getChildByName("tex").getComponent(cc.Sprite).spriteFrame,e.getComponent(cc.Animation).stop(),e.active=!1,t.active=!0;var n=t.getComponent(cc.Animation),o=cc.AnimationClip.createWithSpriteFrames([t.getComponent(cc.Sprite).spriteFrame],10);return o.name="anim_chupai",o.curveData={props:{position:[{frame:0,value:[t.x,t.y]},{frame:.1,value:[i.x,i.y+15]}]}},o.speed=1,n.addClip(o),n.on("finished",this.ChupaiCompleted,this),n.play("anim_chupai"),o},mj_anim_move:function(e,t,i){var n=-1,o=-1,a=e[e.length-1].node;if(void 0===t.mTag&&(t.mTag=-1),16!=t.mTag){if(!this.chipengOver)for(var c=0;c<e.length;c++){var s=e[c].node.parent;if(a.mTag==cc.global.game._game.jin){if(s.active&&s.getChildByName("tex").mTag!=a.mTag){n=s.mTag,o=s.x;break}}else if(s.active&&s.getChildByName("tex").mTag!=cc.global.game._game.jin&&s.mTag!=t.mTag&&s.getChildByName("tex").mTag>a.mTag&&-1==n){n=s.mTag,o=s.x;break}}if(console.log("newI:"+n),this.chipengOver||-1==n)for(c=0;c<e.length;c++){if((s=e[c].node.parent).x>t.x&&s.active){var l=s.x,r=s.getComponent(cc.Animation),g=i;(u=cc.AnimationClip.createWithSpriteFrames([s.getComponent(cc.Sprite).spriteFrame],8)).name="anim_move",1180==s.x&&(g+=28),u.curveData={props:{x:[{frame:0,value:l,curve:null},{frame:.125,value:l-g,curve:null}]}},u.speed=1,r.addClip(u),r.play("anim_move")}}else{var h=-1,d=-1;g=i;if(t.getChildByName("tex").mTag==a.mTag)n=t.mTag,o=t.x;else{t.mTag>n?(h=n,d=t.mTag):t.mTag<=n&&(h=t.mTag+1,d=n,g=-i),t.mTag<n&&n--,console.log("start:"+h+";over"+d),console.log("newI after:"+n+";newX:"+o);for(c=h;c<d;c++)if(e[c].node.mTag!=a.mTag){l=e[c].node.parent.x,r=e[c].node.parent.getComponent(cc.Animation);(u=cc.AnimationClip.createWithSpriteFrames([e[c].node.parent.getComponent(cc.Sprite).spriteFrame],8)).name="anim_move",u.curveData={props:{x:[{frame:0,value:l,curve:null},{frame:.125,value:l+g,curve:null}]}},u.speed=1,r.addClip(u),r.play("anim_move")}else n--}r=e[e.length-1].node.parent.getComponent(cc.Animation);var u=cc.AnimationClip.createWithSpriteFrames([e[e.length-1].node.parent.getComponent(cc.Sprite).spriteFrame],8);n<0?(n=0,o=48):o=e[n].node.parent.x,u.name="anim_move";var m=a.parent.x,p=a.parent.y;u.curveData={props:{x:[{frame:0,value:m},{frame:.025,value:m},{frame:.1,value:o},{frame:.125,value:o}],y:[{frame:0,value:p},{frame:.025,value:110},{frame:.1,value:110},{frame:.125,value:13}]}},u.speed=1,r.addClip(u),r.play("anim_move")}}else console.log("\u6253\u51fa\u7684\u662f\u6700\u540e\u4e00\u5f20\u724c,\u4e0d\u6267\u884c\u624b\u724c\u4f4d\u79fb")},onChupaiCompleted:function(e){console.log("111=====================animCompleted!======================"),this.chupai_big_box.active=!1;var t=this.mjSelected.getChildByName("tex").mTag,i=this.myNode.getChildByName("folds").children[this.chupai_num];i.getChildByName("tex").getComponent(cc.Sprite).spriteFrame=this.chupai_big_box.getChildByName("MyMahJong").getChildByName("tex").getComponent(cc.Sprite).spriteFrame,t==cc.global.game._game.jin?i.getChildByName("jin").active=!0:i.getChildByName("jin").active=!1,i.active=!0,i.mTag=t,this.myNode.getChildByName("biaoji").getChildByName("chuNode").active=!1,this.chipengOver?(this.mjSelected.x=-1,this.mjSelected.y=13,this.mjSelected.mTag=-1,this.mjSelected.getChildByName("tex").mTag=-1,this.mjSelected=null):(this.mjSelected.x=1180,this.mjSelected.y=13,this.mjSelected=null),this.chupai_num++,this.chupai_num>=this._gameFun.foldsNum&&(this.chupai_num=0),this.shoot(t,i)},show_frm_config:function(){cc.global.util.playSound_buttonClick(),this.hideOptionNode(null);var e=this.frm_config.getComponentsInChildren(cc.Slider)[0];e.progress=cc.global.util.setting.music,e.node.children[0].width=400*e.progress,this.frm_config.getChildByName("frm").getChildByName("tanchuang_bg1").getChildByName("shezhi_bg").getChildByName("on").getComponent(cc.Sprite).spriteFrame=1==cc.global.util.setting.musicOn?this.sfIcons[1]:this.sfIcons[0];var t=this.frm_config.getComponentsInChildren(cc.Slider)[1];t.progress=cc.global.util.setting.sound,t.node.children[0].width=400*t.progress,this.frm_config.getChildByName("frm").getChildByName("tanchuang_bg1").getChildByName("shezhi_bg").getChildByName("off").getComponent(cc.Sprite).spriteFrame=1==cc.global.util.setting.soundOn?this.sfIcons[1]:this.sfIcons[0],this.frm_config.active=!0,this.frm_config.getComponentInChildren(cc.ToggleGroup).node.getChildByName("toggle"+cc.global.util.setting.dialect).getComponent(cc.Toggle).isChecked=!0},hide_frm_config:function(){cc.global.util.playSound_buttonClick(),cc.sys.localStorage.setItem("volumeSetting",JSON.stringify(cc.global.util.setting)),this.frm_config.active=!1},onBtnMusicClick:function(e){cc.global.util.playSound_buttonClick();var t=e.target.getComponent(cc.Sprite);t.spriteFrame==this.sfIcons[0]?(t.spriteFrame=this.sfIcons[1],cc.global.util.setting.musicOn=1,this.node.getChildByName("music").getComponent(cc.AudioSource).mute=!1):(t.spriteFrame=this.sfIcons[0],cc.global.util.setting.musicOn=0,this.node.getChildByName("music").getComponent(cc.AudioSource).mute=!0)},onBtnVolumClick:function(e){cc.global.util.playSound_buttonClick();var t=e.target.getComponent(cc.Sprite);t.spriteFrame==this.sfIcons[0]?(t.spriteFrame=this.sfIcons[1],cc.global.util.setting.soundOn=1):(t.spriteFrame=this.sfIcons[0],cc.global.util.setting.soundOn=0)},cbClick:function(e,t){cc.global.util.playSound_buttonClick(),void 0!=t&&(cc.global.util.setting.dialect=t,this.voiceType=1==t?"fy":"pt",this.soundSetting.voiceType=this.voiceType,console.log("voiceType:"+this.voiceType))},cb_jindutiao:function(e,t){e.node.children[0].width=400*e.progress,"1"==t?(cc.global.util.setting.music=e.progress,this.node.getChildByName("music").getComponent(cc.AudioSource).volume=e.progress):cc.global.util.setting.sound=e.progress},initView:function(){this._gameFun.hideFlod(this.myNode.getChildByName("folds")),this._gameFun.hideFlod(this.lfNode.getChildByName("folds")),this._gameFun.hideFlod(this.rhNode.getChildByName("folds")),this._gameFun.hideFlod(this.upNode.getChildByName("folds")),this.readyNode.active=!0,this.gameNode.active=!1,this.readyNode.getChildByName("left_head").active=!1,this.readyNode.getChildByName("up_head").active=!1,this.readyNode.getChildByName("right_head").active=!1,this.node.getChildByName("game_guize").active=!0,this._gameFun.initHoldNodes(this.myNode.getChildByName("holds"));for(var e=this.myNode.getChildByName("holds"),t=0;t<e.length;t++)e[t].active=!1;var i=cc.global.room._roomData;null==i&&cc.global.game.backHall(),this.myIndex=i.myIndex,this.leftIndex=parseInt(this.myIndex)-1<0?3:parseInt(this.myIndex)-1,this.rightIndex=parseInt(this.myIndex)+1>3?0:parseInt(this.myIndex)+1,this.topIndex=parseInt(this.myIndex)+2,5==this.topIndex?this.topIndex=1:4==this.topIndex&&(this.topIndex=0);for(t=0;t<4;t++)this.timer.getChildByName("pointer-"+t).active=!1;this.timer.getChildByName("pointer-"+this.myIndex).active=!0,this._gameFun.initTime(this.timer,this.timer.getChildByName("pointer-"+this.myIndex)),this.joinUser(i.users),this.timer.getChildByName("gamecount").getChildByName("count").getComponent(cc.Label).string=i.game_index,this.node.getChildByName("game_guize").getChildByName("beishu").getComponent(cc.Label).string=i.youjin},initGame:function(e,t){var i=cc.global.game._game;if(null==e&&(this._timePointer=new Object,this._timePointer["s_"+this.myIndex]="my_point",this._timePointer["s_"+this.leftIndex]="left_point",this._timePointer["s_"+this.rightIndex]="right_point",this._timePointer["s_"+this.topIndex]="up_point",this.readyNode.getChildByName("right_head").getChildByName("right_status_ready").active=!1,this.readyNode.getChildByName("up_head").getChildByName("up_status_ready").active=!1,this.readyNode.getChildByName("left_head").getChildByName("left_status_ready").active=!1),1==t)for(var n=this.myNode.getChildByName("holds").children,o=this.lfNode.getChildByName("holds").children,a=this.upNode.getChildByName("holds").children,c=this.rhNode.getChildByName("holds").children,s=0;s<n.length;s++)n[s].active=!1,s<o.length&&(o[s].active=!1),s<a.length&&(a[s].active=!1),s<c.length&&(c[s].active=!1);this.readyNode.active=!1,this.gameNode.active=!0,i.isDingjin&&this.focusIndex>=0?(this.gameData.countType=1,this.gameData.lastTime=Date.now(),this.gameData.startTime=this.gameData.lastTime,this._gameFun.startCount(this._timePointer["s_"+this.focusIndex])):this._gameFun.startCount(null),null==e&&(t>0?this.initHandMj(null,!0):this.initHandMj()),this.timer.getChildByName("mjcount").getChildByName("count").getComponent(cc.Label).string=i.zpaishu,this.initUsers(cc.global.room._roomData.users)},initHandMj:function(e,t,i){for(var n=this.myNode.getChildByName("holds").children,o=0;o<n.length;o++)n[o].getChildByName("tingpai").active=!1,n[o].getChildByName("youjin").active=!1;this._gameFun.initHoldNodes(this.myNode.getChildByName("holds"));var a=this._gameFun._holdNode;console.log("\u7ec4\u7ec7\u624b\u724c---------------------------"),console.log(this._nowAction),this._gameFun._holdMap=new Object;var c=!1,s=cc.global.game._game,l=null;if(t)l=s.myPai;else{var r=this.gameNode.getChildByName("jinpaiinfo");r.active?l=this._gameFun.paiSort(s.myPai,s.jin):(c=!0,l=s.myPai,s.isDingjin&&(r.getChildByName("beijing").active=!0,r.getChildByName("hp1").active=!0,console.log("test!@#"),this.hideShaizi(!0),this.focusIndex>=0?(this.gameData.countType=1,this.gameData.lastTime=Date.now(),this.gameData.startTime=this.gameData.lastTime,this._gameFun.startCount(this._timePointer["s_"+this.focusIndex])):this._gameFun.startCount(null),l=this._gameFun.paiSort(s.myPai,s.jin),c=!1))}var g=s.value;null!=g&&g.length>0&&this._gameFun.playSound("Sounds/mjgame/game_p_move"),console.log("\u5f00\u59cb\u7ec4\u7ec7\u624b\u724c\uff0c\u5f53\u524d\u724c\u7ec4\uff1a"+JSON.stringify(l)+",\u6700\u540e\u4e00\u5f20\uff1a"+JSON.stringify(g)),(t||i)&&(l=s.myPai);var h=0;if(h=t||c?this._gameFun.createPaiView(l,a,this.myHoldAtlas,-1,!1):this._gameFun.createPaiView(l,a,this.myHoldAtlas,s.jin,!1),console.log("index:"+h),a.length-1>h){var d=3*this._gameFun.my_penggangGroup;console.log("cc\u78b0\u6760\u503c::::::::"+this._gameFun.my_penggangGroup);for(o=0;o<d-1;o++)a[o].node.parent.active=!1,a[o].node.mTag=-1,a[o].node.parent.mTag=-1;if(console.log("chipeng:"+this.chipeng),this.chipeng){for(o=a.length-1;o>=0;o--){if((u=a[o].node.parent).active&&u.x>=1170)return}for(o=0;o<a.length;o++){var u;if((u=a[o].node.parent).active){var m=u.x,p=u.getComponent(cc.Animation),f=69,b=cc.AnimationClip.createWithSpriteFrames([u.getComponent(cc.Sprite).spriteFrame],8);b.name="anim_move",15==u.mTag&&(f+=28),b.curveData={props:{x:[{frame:0,value:m,curve:null},{frame:.125,value:m+f,curve:null}]}},b.speed=1,p.addClip(b),p.play("anim_move")}}}else console.log("\u9690\u85cf\u989d\u5916\u7684\u724c,over:"+this.chipengOver+";ready:"+this.chipengReady+";chipeng:"+this.chipeng),d>0&&(this.chipeng||(this.chipengOver?this.chipengOver=!1:this.chipengReady?this.chipengReady=!1:a[d-1].node.parent.active=!1))}console.log("handPos lehgth is "+(a.length-1));var _=a[a.length-1];if(a.length>h&&null!=g&&0!=g.length&&!i){console.log("\u5c55\u793a\u65b0\u6478\u7684\u724c\uff1a"+g[0]),this._initHua=!0;var y=this._gameFun.definePai(g[0]),v=g[0];console.log("lastNode::-------------"),console.log(_),_.spriteFrame=this._gameFun.setSpriteFrameByName(y.name,v,this.myHoldAtlas),_.node.mTag=v,v==s.jin?_.node.parent.getChildByName("jin").active=!0:_.node.parent.getChildByName("jin").active=!1,this._gameFun._holdMap[h]=g[0],v<50?(_.node.parent.getComponent(cc.Animation).play("anim_shouhui"),_.node.parent.active=!0):_.node.parent.active=!0}else i||(_.node.parent.active=!1);this.chipeng&&(this.chipeng=!1,this.chipengOver=!0)},shoot:function(e,t){var i=cc.global.game._game,n=i.myPai,o=i.value,a=n.length;this._gameFun.biaoji&&(this._gameFun.biaoji.active=!1),this._gameFun.biaoji=this.myNode.getChildByName("biaoji").getChildByName("biaoji_node"),this._gameFun.biaoji.x=t.x,this._gameFun.biaoji.y=t.y,this._gameFun.biaoji.active=!0,console.log("\u624b\u724c\u79fb\u9664\u524d\uff1a"+JSON.stringify(n)),n.removeVal(e),console.log("\u624b\u724c\u79fb\u9664\u540e\uff1a"+JSON.stringify(n)),n.length!=a&&null!=o&&0!=o.length&&n.push(o[0]),i.value=[],this.initHandMj(),this._gameFun.playSound("Sounds/mjgame/game_p_discard"),this.actState=!0,this.chupaiAnimState=!1},pengAction:function(e){},huAction:function(e){},gameAction:function(e){console.log("gameAction:"),console.log(e);var t=e.type;if(t.contains2(2,9)&&(cc.global.game._game.value=e.value,cc.global.game._game.focus=e.focus,this.initGame()),t.contains(1))return console.log("chu-state:"+this.chuState),this.tingpaiHint(e.tingTip),void(this.chuState=!0);this.actOps.active=!0;var i=this.actOps;this._nowAction=e;var n=!1;i.getChildByName("btnGuo").active=!0,i.getChildByName("btnGuo2").active=!1,i.getChildByName("btnGuo3").active=!1;for(var o=0;o<t.length;o++){var a=i.getChildByName("opm"+o),c=null;switch(t[t.length-1-o]){case 2:a.getChildByName("Button_GangAction").active=!0,a.active=!0,c=e.gangvalue[0];break;case 3:a.getChildByName("Button_HuAction_"+e.huType).active=!0,a.active=!0,c=e.value[0],e.huType>3&&e.huType<6&&(2==e.youjin?(i.getChildByName("btnGuo").active=!1,i.getChildByName("btnGuo2").active=!0,i.getChildByName("btnGuo3").active=!1):3==e.youjin&&(i.getChildByName("btnGuo").active=!1,i.getChildByName("btnGuo2").active=!1,i.getChildByName("btnGuo3").active=!0));break;case 5:a.getChildByName("Button_PengAction").active=!0,a.active=!0,c=e.pengvalue[0];break;case 6:a.getChildByName("Button_GangAction").active=!0,a.active=!0,c=e.gangvalue[0];break;case 7:a.getChildByName("Button_HuAction_1").active=!0,a.active=!0,c=e.huvalue;break;case 9:a.getChildByName("Button_GangAction").active=!0,a.active=!0,c=e.gangvalue[0];break;case 4:a.getChildByName("Button_ChiAction").active=!0,this._gameFun.showChiOps(e,this.actOps,this.myHoldAtlas,cc.global.game._game.jin),a.active=!0}if(!n&&4!=t[t.length-1-o]){var s=i.getChildByName("opm0").getChildByName("hop1");this._gameFun.changeSpriteByNode(c,this.myHoldAtlas,s.getChildByName("tex").getComponent(cc.Sprite)),c==cc.global.game._game.jin?s.getChildByName("jin").active=!0:s.getChildByName("jin").active=!1,n=!0}}},checkIp:function(e,t){if(t){var i=this.node.getChildByName("ipcheck").getChildByName("con3").getChildByName("label_val");this.node.getChildByName("ipcheck").getChildByName("con3").getChildByName("check").active=!0,this.node.getChildByName("ipcheck").getChildByName("con3").getChildByName("check2").active=!1,i.getComponent(cc.Label).string="\u6b63\u5e38",i.color=cc.color(255,31,255,255),this.myNode.getChildByName("seat").getChildByName("my_head_box").getChildByName("sameip").active=!1,this.readyNode.getChildByName("my_head").getChildByName("my_head_box").getChildByName("sameip").active=!1,this.lfNode.getChildByName("seat").getChildByName("left_head_box").getChildByName("sameip").active=!1,this.readyNode.getChildByName("left_head").getChildByName("left_head_box").getChildByName("sameip").active=!1,this.upNode.getChildByName("seat").getChildByName("up_head_box").getChildByName("sameip").active=!1,this.readyNode.getChildByName("up_head").getChildByName("up_head_box").getChildByName("sameip").active=!1,this.rhNode.getChildByName("seat").getChildByName("right_head_box").getChildByName("sameip").active=!1,this.readyNode.getChildByName("right_head").getChildByName("right_head_box").getChildByName("sameip").active=!1}for(var n=0;n<e.length;n++)for(var o=e[n],a=cc.global.room._roomData,c=0;c<a.users.length;c++)if(o.index!=a.users[c].index&&o.ip==a.users[c].ip){i=this.node.getChildByName("ipcheck").getChildByName("con3").getChildByName("label_val");this.node.getChildByName("ipcheck").getChildByName("con3").getChildByName("check").active=!1,this.node.getChildByName("ipcheck").getChildByName("con3").getChildByName("check2").active=!0,i.getComponent(cc.Label).string="\u5f02\u5e38",i.color=cc.color(218,33,33,255);for(var s=0;s<4;s++)if(s==o.index||s==a.users[c].index)switch(s){case this.myIndex:this.myNode.getChildByName("seat").getChildByName("my_head_box").getChildByName("sameip").active=!0,this.readyNode.getChildByName("my_head").getChildByName("my_head_box").getChildByName("sameip").active=!0;break;case this.leftIndex:this.lfNode.getChildByName("seat").getChildByName("left_head_box").getChildByName("sameip").active=!0,this.readyNode.getChildByName("left_head").getChildByName("left_head_box").getChildByName("sameip").active=!0;break;case this.topIndex:this.upNode.getChildByName("seat").getChildByName("up_head_box").getChildByName("sameip").active=!0,this.readyNode.getChildByName("up_head").getChildByName("up_head_box").getChildByName("sameip").active=!0;break;case this.rightIndex:this.rhNode.getChildByName("seat").getChildByName("right_head_box").getChildByName("sameip").active=!0,this.readyNode.getChildByName("right_head").getChildByName("right_head_box").getChildByName("sameip").active=!0}}},initUsers:function(e){var t=cc.global.game._game;this.gameNode.getChildByName("left").active=!1,this.gameNode.getChildByName("right").active=!1,this.gameNode.getChildByName("up").active=!1;for(var i=0;i<e.length;i++){if(this.doTrustee(e[i].index,e[i].isTrustee),e[i].index==this.myIndex){this.gameNode.getChildByName("myself").active=!0;var n=this.gameNode.getChildByName("myself").getChildByName("seat").getChildByName("zhuangjia"),o=this.gameNode.getChildByName("myself").getChildByName("seat").getChildByName("zhuang_num");e[i].index==t.zhuang?(n.active=!0,t.lianzhuang>1&&(o.getComponentInChildren(cc.Label).string=t.lianzhuang,o.active=!0)):(n.active=!1,o.active=!1),this.gameNode.getChildByName("myself").getChildByName("seat").getChildByName("my_head_box").mTag=e[i].index,this.gameNode.getChildByName("myself").getChildByName("seat").getChildByName("my_name").getComponent(cc.Label).string=e[i].name,this.gameNode.getChildByName("myself").getChildByName("seat").getChildByName("my_head_box").getChildByName("my_integration_num").getComponent(cc.Label).string=e[i].score,cc.global.util.setHeadimg(this.gameNode.getChildByName("myself").getChildByName("seat").getChildByName("my_head_box").getChildByName("my_head_img"),e[i].headimg)}if(e[i].index==this.rightIndex){this.gameNode.getChildByName("right").active=!0;n=this.gameNode.getChildByName("right").getChildByName("seat").getChildByName("zhuangjia");var a=this.gameNode.getChildByName("right").getChildByName("seat").getChildByName("zhuang_num");e[i].index==t.zhuang?(n.active=!0,t.lianzhuang>1&&(a.getComponentInChildren(cc.Label).string=t.lianzhuang,a.active=!0)):(n.active=!1,a.active=!1),this.gameNode.getChildByName("right").getChildByName("seat").getChildByName("right_head_box").mTag=e[i].index,this.gameNode.getChildByName("right").getChildByName("seat").getChildByName("right_name").getComponent(cc.Label).string=e[i].name,this.gameNode.getChildByName("right").getChildByName("seat").getChildByName("right_head_box").getChildByName("right_integration_num").getComponent(cc.Label).string=e[i].score,cc.global.util.setHeadimg(this.gameNode.getChildByName("right").getChildByName("seat").getChildByName("right_head_box").getChildByName("right_head_img"),e[i].headimg)}if(e[i].index==this.topIndex){this.gameNode.getChildByName("up").active=!0;n=this.gameNode.getChildByName("up").getChildByName("seat").getChildByName("zhuangjia");var c=this.gameNode.getChildByName("up").getChildByName("seat").getChildByName("zhuang_num");e[i].index==t.zhuang?(n.active=!0,t.lianzhuang>1&&(c.getComponentInChildren(cc.Label).string=t.lianzhuang,c.active=!0)):(n.active=!1,c.active=!1),this.gameNode.getChildByName("up").getChildByName("seat").getChildByName("up_head_box").mTag=e[i].index,this.gameNode.getChildByName("up").getChildByName("seat").getChildByName("up_name").getComponent(cc.Label).string=e[i].name,this.gameNode.getChildByName("up").getChildByName("seat").getChildByName("up_head_box").getChildByName("up_integration_num").getComponent(cc.Label).string=e[i].score,cc.global.util.setHeadimg(this.gameNode.getChildByName("up").getChildByName("seat").getChildByName("up_head_box").getChildByName("up_head_img"),e[i].headimg)}if(e[i].index==this.leftIndex){this.gameNode.getChildByName("left").active=!0;n=this.gameNode.getChildByName("left").getChildByName("seat").getChildByName("zhuangjia");var s=this.gameNode.getChildByName("left").getChildByName("seat").getChildByName("zhuang_num");e[i].index==t.zhuang?(n.active=!0,t.lianzhuang>1&&(s.getComponentInChildren(cc.Label).string=t.lianzhuang,s.active=!0)):(n.active=!1,s.active=!1),this.gameNode.getChildByName("left").getChildByName("seat").getChildByName("left_head_box").mTag=e[i].index,this.gameNode.getChildByName("left").getChildByName("seat").getChildByName("left_name").getComponent(cc.Label).string=e[i].name,this.gameNode.getChildByName("left").getChildByName("seat").getChildByName("left_head_box").getChildByName("left_integration_num").getComponent(cc.Label).string=e[i].score,cc.global.util.setHeadimg(this.gameNode.getChildByName("left").getChildByName("seat").getChildByName("left_head_box").getChildByName("left_head_img"),e[i].headimg)}}},joinUser:function(e){this.checkIp(e);for(var t=0;t<e.length;t++){var i=!1;0==e[t].status&&(i=!0),this.userDisconnect(e[t].index,i),e[t].index==this.myIndex&&(this.readyNode.getChildByName("my_head").getChildByName("my_head_box").mTag=e[t].index,this.readyNode.getChildByName("my_head").getChildByName("my_name").getComponent(cc.Label).string=e[t].name,1==e[t].userStatus?this.readyNode.getChildByName("my_head").getChildByName("my_status_ready").active=!0:this.readyNode.getChildByName("my_head").getChildByName("my_status_ready").active=!1,this.readyNode.getChildByName("my_head").getChildByName("my_head_box").getChildByName("my_integration_num").getComponent(cc.Label).string=e[t].score,cc.global.util.setHeadimg(this.readyNode.getChildByName("my_head").getChildByName("my_head_box").getChildByName("my_head_img"),e[t].headimg)),e[t].index==this.rightIndex&&(this.soundSetting.rh_gender="\u7537"==e[t].sex?"boy":"gir",this.readyNode.getChildByName("right_head").getChildByName("right_head_box").mTag=e[t].index,this.readyNode.getChildByName("right_head").getChildByName("right_name").getComponent(cc.Label).string=e[t].name,1==e[t].userStatus?this.readyNode.getChildByName("right_head").getChildByName("right_status_ready").active=!0:this.readyNode.getChildByName("right_head").getChildByName("right_status_ready").active=!1,this.readyNode.getChildByName("right_head").getChildByName("right_head_box").getChildByName("right_integration_num").getComponent(cc.Label).string=e[t].score,cc.global.util.setHeadimg(this.readyNode.getChildByName("right_head").getChildByName("right_head_box").getChildByName("right_head_img"),e[t].headimg),this.readyNode.getChildByName("right_head").active=!0),e[t].index==this.topIndex&&(this.soundSetting.bt_gender="\u7537"==e[t].sex?"boy":"gir",this.readyNode.getChildByName("up_head").getChildByName("up_head_box").mTag=e[t].index,this.readyNode.getChildByName("up_head").getChildByName("up_name").getComponent(cc.Label).string=e[t].name,1==e[t].userStatus?this.readyNode.getChildByName("up_head").getChildByName("up_status_ready").active=!0:this.readyNode.getChildByName("up_head").getChildByName("up_status_ready").active=!1,this.readyNode.getChildByName("up_head").getChildByName("up_head_box").getChildByName("up_integration_num").getComponent(cc.Label).string=e[t].score,cc.global.util.setHeadimg(this.readyNode.getChildByName("up_head").getChildByName("up_head_box").getChildByName("up_head_img"),e[t].headimg),this.readyNode.getChildByName("up_head").active=!0),e[t].index==this.leftIndex&&(this.soundSetting.lf_gender="\u7537"==e[t].sex?"boy":"gir",this.readyNode.getChildByName("left_head").getChildByName("left_head_box").mTag=e[t].index,this.readyNode.getChildByName("left_head").getChildByName("left_name").getComponent(cc.Label).string=e[t].name,1==e[t].userStatus?this.readyNode.getChildByName("left_head").getChildByName("left_status_ready").active=!0:this.readyNode.getChildByName("left_head").getChildByName("left_status_ready").active=!1,this.readyNode.getChildByName("left_head").getChildByName("left_head_box").getChildByName("left_integration_num").getComponent(cc.Label).string=e[t].score,cc.global.util.setHeadimg(this.readyNode.getChildByName("left_head").getChildByName("left_head_box").getChildByName("left_head_img"),e[t].headimg),this.readyNode.getChildByName("left_head").active=!0)}},show_geregxx:function(e){cc.global.util.playSound_buttonClick();var t=this.geregxx.getChildByName("bg"),i=cc.global.room._roomData.users;console.log("susers",i);var n=null,o=e.target.parent.mTag,a=null;console.log("tag:"+o);for(var c=0;c<i.length;c++)i[c].index==o&&(n=i[c]),i[c].index==this.myIndex&&(a=i[c]);if(null!=n){var s=cc.global.util.circleUserinfo,l=!1;s&&(l="1"==s.is_admin||"1"==s.user_role);var r=cc.global.util.processId(n.account),g=void 0;g=a.index==o?n.account:l?n.account:r,t.getChildByName("name").getChildByName("Label").getComponent(cc.Label).string=g,t.getChildByName("wj-jf").getChildByName("jf").getComponent(cc.Label).string=n.score,t.getChildByName("ip").active=!1,t.getChildByName("distance").active=!1,cc.global.util.setHeadimg(t.getChildByName("touxiangkuang").getChildByName("touxiang_img"),n.headimg),this.geregxx.active=!0}},hide_geregxx:function(){cc.global.util.playSound_buttonClick(),this.geregxx.active=!1},backHall:function(e,t){cc.global.util.playSound_buttonClick(),"jiesuan"==t?cc.global.net.send("exitRoom",{account:cc.global.util.userinfo.account,room_no:cc.global.room._roomData.room_no,gameover:1}):cc.global.net.send("exitRoom",{account:cc.global.util.userinfo.account,room_no:cc.global.room._roomData.room_no})},hideLastFlod:function(e,t){var i,n;switch(console.log("---\u9690\u85cf\u81ea\u5df1\u4e0a\u4e00\u6b21\u51fa\u724c--"),console.log("index:"+e),e){case this.myIndex:i=this.myNode,this.chupai_num--,-1==this.chupai_num&&(this.chupai_num=this._gameFun.foldsNum-1),n=this.chupai_num;break;case this.rightIndex:i=this.rhNode,this._gameFun.right_num--,-1==this._gameFun.right_num&&(this._gameFun.right_num=this._gameFun.foldsNum-1),n=this._gameFun.right_num,n=this._gameFun.getFoldNum("r",n);break;case this.topIndex:i=this.upNode,this._gameFun.top_num--,-1==this._gameFun.top_num&&(this._gameFun.top_num=this._gameFun.foldsNum-1),n=this._gameFun.top_num,n=this._gameFun.getFoldNum("b",n);break;case this.leftIndex:i=this.lfNode,this._gameFun.left_num--,-1==this._gameFun.left_num&&(this._gameFun.left_num=this._gameFun.foldsNum-1),n=this._gameFun.left_num,n=this._gameFun.getFoldNum("l",n);break;default:console.log("hidelastflod-break:index:"+e)}var o=i.getChildByName("folds").children[n];console.log("\u9690\u85cfnum:"+n),console.log("\u9690\u85cfnode:"),console.log(o),o.mTag==t?o.active=!1:console.log("\u5f02\u5e38:\u627e\u4e0d\u5230\u9700\u8981\u9690\u85cf\u7684\u88ab\u5403\u724c:"+t+";\u724ctag\u4e3a"+o.mTag),this._gameFun.biaoji&&(this._gameFun.biaoji.active=!1,this._gameFun.biaoji=null)},reStart:function(){cc.global.util.playSound_buttonClick(),cc.global.util.showAlert("\u6b63\u5728\u52a0\u8f7d"),cc.global.room._isnext=!0,cc.director.loadScene("hall_mj")},closeRoomAsk:function(){cc.global.util.playSound_buttonClick();cc.global.room._roomData.users;this.node.getChildByName("config").active=!1,cc.global.net.send("closeRoom",{account:cc.global.util.userinfo.account,room_no:cc.global.room._roomData.room_no,type:1,platform:cc.global.util.gameinfo.platform})},btnCloseRoomClick:function(e,t){cc.global.util.playSound_buttonClick(),console.log("xxx:"+t),e.target.parent.active=!1,"t"==t?(console.log("t"),cc.global.net.send("closeRoom",{account:cc.global.util.userinfo.account,room_no:cc.global.room._roomData.room_no,type:1})):(console.log("f"),cc.global.net.send("closeRoom",{account:cc.global.util.userinfo.account,room_no:cc.global.room._roomData.room_no,type:-1}))},closeRoomCheck:function(e){var t=this;this.closeTimer||(console.log("start count"),this.closeCountdown=60,(e[0].jiesanTimer||0==e[0].jiesanTimer)&&(this.closeCountdown=e[0].jiesanTimer),t.node.getChildByName("dissolutionApplication").getChildByName("tanchuang_bg3").getChildByName("time_hint").getComponent(cc.Label).string=t.closeCountdown+"\u79d2\u540e\u623f\u95f4\u5c06\u81ea\u52a8\u89e3\u6563",this.closeTimer=cc.global.util.mySetInterval(function(){t.node?t.closeCountdown>=0?(t.node.getChildByName("dissolutionApplication").getChildByName("tanchuang_bg3").getChildByName("time_hint").getComponent(cc.Label).string=t.closeCountdown+"\u79d2\u540e\u623f\u95f4\u5c06\u81ea\u52a8\u89e3\u6563",t.closeCountdown--):t.closeTimer&&(clearInterval(t.closeTimer),t.closeTimer=null):clearInterval(t.closeTimer)},1e3));for(var i=!0,n=this.node.getChildByName("dissolutionApplication"),o=n.getChildByName("tanchuang_bg3").getChildByName("users").getComponentsInChildren(cc.Label),a="",c=0;c<o.length;c++)o[c].node.active=!1;for(c=0;c<e.length;c++){switch(e[c].result){case-1:a="\u5df2\u62d2\u7edd";break;case 0:a="\u5f85\u786e\u8ba4",e[c].index==this.myIndex&&(i=!1);break;case 1:a="\u5df2\u540c\u610f"}o[c].string="["+a+"]"+e[c].name,o[c].node.active=!0}n.getChildByName("tanchuang_bg3").getChildByName("btn").active=!i,n.active=!0},exitRoom:function(e){if(console.log("\u65b9\u6cd5exitRoom,data:"+console.log(JSON.stringify(e))),this.closeTimer&&(clearInterval(this.closeTimer),this.closeTimer=null),1==e.type)if(0==e.code)cc.global.util.tipMsg(e.msg);else if(e.index==cc.global.room._roomData.myIndex)cc.global.game.backHall();else{for(var t=cc.global.room._roomData.users,i=-1,n=0;n<t.length;n++)t[n].index==e.index&&(i=n);switch(cc.global.room._roomData.users.remove(i),this.checkIp(cc.global.room._roomData.users,!0),e.index){case this.rightIndex:this.readyNode.getChildByName("right_head").active=!1,this.readyNode.getChildByName("right_head").getChildByName("right_status_ready").active=!1;break;case this.topIndex:this.readyNode.getChildByName("up_head").active=!1,this.readyNode.getChildByName("up_head").getChildByName("up_status_ready").active=!1;break;case this.leftIndex:this.readyNode.getChildByName("left_head").active=!1,this.readyNode.getChildByName("left_head").getChildByName("left_status_ready").active=!1;break;case this.myIndex:cc.global.game.backHall()}}else 2==e.type&&cc.global.game.backHall()},resetGame:function(e){if(null!=e.game_index&&(cc.global.room._roomData.game_index=e.game_index,this.timer.getChildByName("gamecount").getChildByName("count").getComponent(cc.Label).string=e.game_index),this.myNode.getChildByName("seat").getChildByName("my_head_box").getChildByName("off_line_sign").active=!1,this.readyNode.getChildByName("my_head").getChildByName("my_head_box").getChildByName("off_line_sign").active=!1,1==e.jiesan&&this.closeRoomCheck(e.jiesanData),1!=e.gameStatus&&0!=e.gameStatus){if(3==e.gameStatus||4==e.gameStatus)return e.users&&(cc.global.room._roomData.users=e.users),2==e.type?(this.jiesuan2(e.data1),this.node.getChildByName("game_over2").active=!0):this.jiesuan(e,e.isLiuju),void cc.global.util.closeAlert();var t=e.userInfos;if(cc.global.game._game=e,this.focusIndex=e.focusIndex,this.initUsers(t),this.checkIp(t),cc.global.game._game.dice=e.dice,this.dice=cc.global.game._game.dice,e.kjtype>0){if(this.resetKaiju(e.kjtype),e.kjtype<3)return this.mjSelected=null,this.mjSelectedX=-1,this.initGame(null,1),void cc.global.util.closeAlert();if(5==e.kjtype){var i=this.gameNode.getChildByName("jinpaiinfo");this.jinpai.spriteFrame=this.myHoldAtlas.getSpriteFrame("handmah_"+e.jin),this.jinpai.node.parent.mTag=e.jin,i.getChildByName("hp1-hide").getChildByName("tex").getComponent(cc.Sprite).spriteFrame=this.myHoldAtlas.getSpriteFrame("handmah_"+e.jin),i.getChildByName("beijing").active=!0,i.getChildByName("hp1").active=!0,i.active=!0,cc.global.game._game.isDingjin=!0,this.hideShaizi()}}else{i=this.gameNode.getChildByName("jinpaiinfo");this.jinpai.spriteFrame=this.myHoldAtlas.getSpriteFrame("handmah_"+e.jin),this.jinpai.node.parent.mTag=e.jin,i.getChildByName("hp1-hide").getChildByName("tex").getComponent(cc.Sprite).spriteFrame=this.myHoldAtlas.getSpriteFrame("handmah_"+e.jin),i.getChildByName("beijing").active=!0,i.getChildByName("hp1").active=!0,i.active=!0,cc.global.game._game.isDingjin=!0,this.hideShaizi()}this._gameFun.hideFlod(this.myNode.getChildByName("folds")),this._gameFun.hideFlod(this.lfNode.getChildByName("folds")),this._gameFun.hideFlod(this.rhNode.getChildByName("folds")),this._gameFun.hideFlod(this.upNode.getChildByName("folds"));var n=new Object;for(v=0;v<t.length;v++){var o=null,a=null,c=null,s=null,l=null;C=!1;if(0==e.userInfos[v].status&&(C=!0),this.userDisconnect(e.userInfos[v].myIndex,C),t[v].myIndex==this.myIndex){a=(o=this.myNode).getChildByName("holds").children,c=o.getChildByName("folds").children,s=o.getChildByName("penggangs").children,l=this.myHoldAtlas,"type_M_5";for(var r=0;r<s.length;r++){s[r].active=!1;for(var g=0;g<s[r].children.length;g++)s[r].children[g].active=!1}this.chupai_num=0;for(r=0;r<t[v].chupai.length;r++)c[this.chupai_num].getChildByName("tex").getComponent(cc.Sprite).spriteFrame=this._gameFun.setSpriteFrameByName("handmah_",t[v].chupai[r],l),t[v].chupai[r]==cc.global.game._game.jin?c[this.chupai_num].getChildByName("jin").active=!0:c[this.chupai_num].getChildByName("jin").active=!1,c[this.chupai_num].active=!0,c[this.chupai_num].mTag=t[v].chupai[r],r==t[v].chupai.length-1&&(n.my=c[this.chupai_num]),this.chupai_num++,this.chupai_num>=this._gameFun.foldsNum&&(this.chupai_num=0)}else{var h=!1;switch((t[v].paicount-1)%3!=0&&(h=!0,t[v].paicount--),t[v].myIndex){case this.rightIndex:a=(o=this.rhNode).getChildByName("holds").children,c=o.getChildByName("folds").children,s=o.getChildByName("penggangs").children,l=this.rhChiAtlas,"type_R_5",a[0].active=!!h;for(r=1;r<17;r++)r>t[v].paicount?a[r].active=!1:a[r].active=!0;this._gameFun.right_num=0;for(r=0;r<t[v].chupai.length;r++){c[d=this._gameFun.getFoldNum("r",this._gameFun.right_num)].getChildByName("tex").getComponent(cc.Sprite).spriteFrame=this._gameFun.setSpriteFrameByName("handmah_",t[v].chupai[r],l),t[v].chupai[r]==cc.global.game._game.jin?c[d].getChildByName("jin").active=!0:c[d].getChildByName("jin").active=!1,c[d].active=!0,c[d].mTag=t[v].chupai[r],r==t[v].chupai.length-1&&(n.rh=c[d]),this._gameFun.right_num++,this._gameFun.right_num>=this._gameFun.foldsNum&&(this._gameFun.right_num=0)}this._gameFun.right_penggangGroup=t[v].mingpai.length;break;case this.topIndex:a=(o=this.upNode).getChildByName("holds").children,c=o.getChildByName("folds").children,s=o.getChildByName("penggangs").children,l=this.upChiAtlas,"type_B_5",a[0].active=!!h;for(r=1;r<17;r++)r>t[v].paicount?a[r].active=!1:a[r].active=!0;this._gameFun.top_num=0;for(r=0;r<t[v].chupai.length;r++){c[d=this._gameFun.getFoldNum("b",this._gameFun.top_num)].getChildByName("tex").getComponent(cc.Sprite).spriteFrame=this._gameFun.setSpriteFrameByName("handmah_",t[v].chupai[r],l),t[v].chupai[r]==cc.global.game._game.jin?c[d].getChildByName("jin").active=!0:c[d].getChildByName("jin").active=!1,c[d].active=!0,c[d].mTag=t[v].chupai[r],r==t[v].chupai.length-1&&(n.bt=c[d]),this._gameFun.top_num++,this._gameFun.top_num>=this._gameFun.foldsNum&&(this._gameFun.top_num=0)}this._gameFun.top_penggangGroup=t[v].mingpai.length;break;case this.leftIndex:a=(o=this.lfNode).getChildByName("holds").children,c=o.getChildByName("folds").children,s=o.getChildByName("penggangs").children,l=this.lfChiAtlas,"type_L_5",a[16].active=!!h;for(r=0;r<16;r++)r<17-t[v].paicount?a[r].active=!1:a[r].active=!0;this._gameFun.left_num=0;for(r=0;r<t[v].chupai.length;r++){var d;c[d=this._gameFun.getFoldNum("l",this._gameFun.left_num)].getChildByName("tex").getComponent(cc.Sprite).spriteFrame=this._gameFun.setSpriteFrameByName("handmah_",t[v].chupai[r],l),t[v].chupai[r]==cc.global.game._game.jin?c[d].getChildByName("jin").active=!0:c[d].getChildByName("jin").active=!1,c[d].active=!0,c[d].mTag=t[v].chupai[r],r==t[v].chupai.length-1&&(n.lf=c[d]),this._gameFun.left_num++,this._gameFun.left_num>=this._gameFun.foldsNum&&(this._gameFun.left_num=0)}this._gameFun.left_penggangGroup=t[v].mingpai.length}}var u=0;for(r=0;r<t[v].mingpai.length;r++){var m="";u++,1==(f=t[v].mingpai[r].type)&&(t[v].myIndex==this.rightIndex?t[v].mingpai[r].pai=this._gameFun.paiSortDesc(t[v].mingpai[r].pai):t[v].mingpai[r].pai=this._gameFun.paiSort(t[v].mingpai[r].pai)),3==f&&(m=s[r].children[3].getComponent(cc.Sprite).spriteFrame.name.replace("a","b"),console.log("\u66ff\u6362\u540e\u7684\u6750\u8d28\u540d:"+m)),s[r].active=!0;for(g=0;g<t[v].mingpai[r].pai.length;g++)3==f&&t[v].myIndex!=this.myIndex&&(t[v].mingpai[r].pai[g]=0),1==f&&t[v].mingpai[r].pai[g]==t[v].mingpai[r].foucsPai?s[r].children[g].opacity=204:s[r].children[g].opacity=255,3!=f||t[v].myIndex==this.myIndex&&3!=g?(s[r].children[g].getChildByName("tex").getComponent(cc.Sprite).spriteFrame=this._gameFun.setSpriteFrameByName("handmah_",t[v].mingpai[r].pai[g],l),s[r].children[g].getChildByName("tex").active=!0,s[r].children[g].mTag=t[v].mingpai[r].pai[g],t[v].mingpai[r].pai[g]==cc.global.game._game.jin?s[r].children[g].getChildByName("jin").active=!0:s[r].children[g].getChildByName("jin").active=!1):(s[r].children[g].getComponent(cc.Sprite).spriteFrame=this._gameFun.setSpriteFrameByName(m,null,this.paiBgAtlas),s[r].children[g].getChildByName("tex").active=!1,s[r].children[g].mTag=-1,s[r].children[g].getChildByName("jin").active=!1),s[r].children[g].active=!0}switch(t[v].myIndex){case this.myIndex:console.log("\u91cd\u8fde\u524d\u78b0\u6760\u503cmy:"+this._gameFun.my_penggangGroup),this._gameFun.my_penggangGroup=u,console.log("\u91cd\u8fde\u540e\u78b0\u6760\u503cmy:"+u);break;case this.rightIndex:console.log("\u91cd\u8fde\u524d\u78b0\u6760\u503cright:"+this._gameFun.right_penggangGroup),this._gameFun.right_penggangGroup=u,console.log("\u91cd\u8fde\u540e\u78b0\u6760\u503cright:"+u);break;case this.topIndex:console.log("\u91cd\u8fde\u524d\u78b0\u6760\u503ctop:"+this._gameFun.top_penggangGroup),this._gameFun.top_penggangGroup=u,console.log("\u91cd\u8fde\u540e\u78b0\u6760\u503ctop:"+u);break;case this.leftIndex:console.log("\u91cd\u8fde\u524d\u78b0\u6760\u503cleft:"+this._gameFun.left_penggangGroup),this._gameFun.left_penggangGroup=u,console.log("\u91cd\u8fde\u540e\u78b0\u6760\u503cleft:"+u)}console.log(v+"\u5f53\u524d\u73a9\u5bb6\u7684huaValue\u662f:"+JSON.stringify(t[v].huaValue));for(r=0;r<t[v].huaValue.length;r++)o.getChildByName("hua").children[r].getComponent(cc.Sprite).spriteFrame=this.huaAtlas.getSpriteFrame("handmah_"+t[v].huaValue[r]),o.getChildByName("hua").children[r].active=!0;var p=o.getChildByName("youjin");p.getChildByName("youjin1").active=!1,p.getChildByName("youjin2").active=!1,p.getChildByName("youjin3").active=!1,t[v].youjinType>0&&(p.getChildByName("youjin"+t[v].youjinType).active=!0)}this._gameFun.biaoji&&(this._gameFun.biaoji.active=!1);var f,b=null;switch(e.nowPoint){case-1:this._gameFun.biaoji=null;break;case this.myIndex:this._gameFun.biaoji=this.myNode.getChildByName("biaoji").getChildByName("biaoji_node"),b=n.my;break;case this.rightIndex:this._gameFun.biaoji=this.rhNode.getChildByName("biaoji").getChildByName("biaoji_node"),b=n.rh;break;case this.topIndex:this._gameFun.biaoji=this.upNode.getChildByName("biaoji").getChildByName("biaoji_node"),b=n.bt;break;case this.leftIndex:this._gameFun.biaoji=this.lfNode.getChildByName("biaoji").getChildByName("biaoji_node"),b=n.lf}if(this._gameFun.biaoji&&(this._gameFun.biaoji.x=b.x,this._gameFun.biaoji.y=b.y,this._gameFun.biaoji.active=!0),this.chipeng=!1,this.chipengOver=!1,(f=cc.global.game._game.type).contains(10)&&console.log("\u8865\u82b1"),cc.global.game._game.focus==this.myIndex)if(f.contains(1))console.log("\u91cd\u8fde-\u51fa\u724c"),this.chuState=!0;else if(f[0]>1&&10!=f[0])(f.contains2(4,5)||f.contains2(6,7))&&(cc.global.game._game.focus=e.lastFocus),this.gameAction(e.actData);else if(f[0]<0){if(f.contains2(-4,-5)&&(console.log("chipeng=true"),this.chipeng=!0,this.chipengOver=!1),(f.contains2(-2,-6)||f.contains(-9))&&(console.log("\u6760\u8bf7\u6c42\u51fa\u724cgangChupai"),cc.global.net.send("gangChupaiEvent",{room_no:cc.global.room._roomData.room_no,account:cc.global.util.userinfo.account})),f.contains2(-3,-7)){var _=new Object;return _.room_no=cc.global.room._roomData.room_no,_.account=cc.global.util.userinfo.account,_.type=8,cc.global.net.send("gameEvent",_),void cc.global.util.closeAlert()}this.chuState=!0}if(this.chipeng||(console.log("resetUseless=true"),this.resetUseless=!0),this.mjSelected=null,this.mjSelectedX=-1,this.initGame(),f.contains(3)?this.tingTip=e.tingTip:this.tingpaiHint(e.tingTip),1==e.showTimer){var y=e.time;this.gameData.lastTime=Date.now(),y<0&&(y=0),this.gameData.countType=1,this.gameData.startTime=this.gameData.lastTime-1e3*(this.gameData.limitTime[this.gameData.countType]-y),this.gameData.lastTime-=1010}cc.global.util.closeAlert()}else{this.joinUser(e.users),cc.global.room._roomData.users=e.users;for(var v=0;v<e.users.length;v++){var C=!1;0==e.users[v].status&&(C=!0),this.userDisconnect(e.users[v].index,C),e.users[v].index==this.myIndex&&1!=e.users[v].userStatus&&(1==cc.global.util.roomType||3==cc.global.util.roomType?this.readyNode.getChildByName("btn_ready").active=!0:(cc.global.net.send("gameReady",{room_no:cc.global.room._roomData.room_no,account:cc.global.util.userinfo.account,type:3}),0==e.users[v].userStatus&&(this.readyNode.getChildByName("btn_ready").active=!0)))}cc.global.util.closeAlert()}},disconnectPush:function(){console.log("showDisconnect"),this.myNode.getChildByName("seat").getChildByName("my_head_box").getChildByName("off_line_sign").active=!0,this.readyNode.getChildByName("my_head").getChildByName("my_head_box").getChildByName("off_line_sign").active=!0},userDisconnect:function(e,t){switch(e){case this.myIndex:break;case this.rightIndex:this.rhNode.getChildByName("seat").getChildByName("right_head_box").getChildByName("off_line_sign").active=t,this.readyNode.getChildByName("right_head").getChildByName("right_head_box").getChildByName("off_line_sign").active=t;break;case this.topIndex:this.upNode.getChildByName("seat").getChildByName("up_head_box").getChildByName("off_line_sign").active=t,this.readyNode.getChildByName("up_head").getChildByName("up_head_box").getChildByName("off_line_sign").active=t;break;case this.leftIndex:this.lfNode.getChildByName("seat").getChildByName("left_head_box").getChildByName("off_line_sign").active=t,this.readyNode.getChildByName("left_head").getChildByName("left_head_box").getChildByName("off_line_sign").active=t}},btnShareClick0:function(e){cc.global.util.playSound_buttonClick();cc.global.http.sendRequest("/zagame/global/wxShare.json",{gid:3,type:1,room_no:cc.global.room._roomData.room_no,visitCode:"",platform:cc.global.util.gameinfo.platform},function(e){if(e)if(1==e.code){var t={title:e.data.title,text:e.data.text,url:e.data.url,mediaType:"2",shareTo:"0",imageUrl:e.data.imagePath,thumbImage:"Icon-50.png",thumbSize:"64"};cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org.cocos2dx.javascript.AppActivity","showShare","(Ljava/lang/String;)V",JSON.stringify(t)):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("JsUseOcTool","showShare:",JSON.stringify(t))}else cc.global.util.tipMsg(e.msg);else cc.global.util.tipMsg_connectErr()})},screenShot:function(){cc.global.util.playSound_buttonClick();var e=new cc.Node;e.parent=cc.director.getScene().getChildByName("Canvas");var t=e.addComponent(cc.Camera);t.cullingMask=4294967295;var i=new cc.RenderTexture,n=cc.game._renderContext;i.initWithSize(cc.visibleRect.width,cc.visibleRect.height,n.STENCIL_INDEX8),i.setFlipY(!0),t.targetTexture=i,t.render();for(var o=i.readPixels(),a=i.width,c=i.height,s=new Uint8Array(a*c*4),l=4*a,r=0;r<c;r++)for(var g=(c-1-r)*a*4,h=r*a*4,d=0;d<l;d++)s[h+d]=o[g+d];cc.global.util.tipMsg("\u8be5\u5e73\u53f0\u4e0d\u652f\u6301\u622a\u5c4f\u5206\u4eab!")},onShareResult:function(e,t){},animInitPaiView:function(e,t,i){var n=this;if(console.log("\u521d\u59cb\u5316\u624b\u724c\u52a8\u753b,\u53c2\u6570:start="+t+"group="+i),!(t>=16)){this._gameFun.playSound("Sounds/mjgame/game_p_select_card");for(var o=this.lfNode.getChildByName("holds").children,a=this.upNode.getChildByName("holds").children,c=this.rhNode.getChildByName("holds").children,s=t;s<t+i;s++)e[s].active=!0,o[s].active=!0,a[16-s].active=!0,c[16-s].active=!0;cc.global.util.mySetTimeout(function(){n.animInitPaiView(e,t+i,i)},200)}},sendMsg:function(e,t){var i=parseInt(t),n=this.node.getChildByName("CommonWordsAndExpressions");n.active=!1;var o=new Object;o.room_no=cc.global.room._roomData.room_no,o.account=cc.global.util.userinfo.account,o.gid=3,-1==i?(o.type=0,o.data=n.getChildByName("bg").getChildByName("top").getChildByName("text").getComponent(cc.EditBox).string):i<100?(o.type=1,o.data=i):(o.type=2,o.data=i%100),cc.global.net.send("sendMsgEvent",o),n.getChildByName("bg").getChildByName("top").getChildByName("text").getComponent(cc.EditBox).string=""},showMsg:function(e,t,i){var n=null;if(this.readyNode.active)switch(e){case this.myIndex:n=this.readyNode.getChildByName("my_head");break;case this.rightIndex:n=this.readyNode.getChildByName("right_head");break;case this.topIndex:n=this.readyNode.getChildByName("up_head");break;case this.leftIndex:n=this.readyNode.getChildByName("left_head")}else switch(e){case this.myIndex:n=this.myNode.getChildByName("seat");break;case this.rightIndex:n=this.rhNode.getChildByName("seat");break;case this.topIndex:n=this.upNode.getChildByName("seat");break;case this.leftIndex:n=this.lfNode.getChildByName("seat")}if(2==t){var o=n.getChildByName("brow");o.getComponent(cc.Sprite).spriteFrame=this.browAtlas.getSpriteFrame("QZMJ_chat_emoj_"+i),o.getComponent(cc.Animation).play()}else{var a=n.getChildByName("chat"),c=i;1==t&&(c=this.sendMsgList.children[i].getComponent(cc.Label).string,this._gameFun.playSound("Sounds/msgVoice/voice_w_"+i)),a.getComponent(cc.Label).string=c,a.getChildByName("label").getComponent(cc.Label).string=c,a.getComponent(cc.Animation).play()}},tingpaiHint:function(e){if(this.tingTip=e,null!=e&&e.length>0){var t=cc.global.game._game,i=this._gameFun.paiSort(t.myPai,t.jin);console.log("sortData:"+JSON.stringify(i)),console.log(this._gameFun._holdNode);for(var n=0;n<e.length;n++){this.myNode.getChildByName("holds").children;for(var o=e[n].type,a=i.length-1;a>=0;a--)if(i[a]==e[n].pai){var c=16-i.length+a;console.log(c),1==o?this._gameFun._holdNode[c].node.parent.getChildByName("youjin").active=!0:this._gameFun._holdNode[c].node.parent.getChildByName("tingpai").active=!0}var s=this._gameFun._holdNode[16];s.node.parent.active&&s.node.mTag==e[n].pai&&(1==o?s.node.parent.getChildByName("youjin").active=!0:s.node.parent.getChildByName("tingpai").active=!0)}}},showDetail:function(e,t){cc.global.util.playSound_buttonClick();var i=this.node.getChildByName("game_over").getChildByName("content"),n=i.getChildByName("con");if("s"==t){i.getChildByName("btn_shoupai").active=!0,i.getChildByName("btn_fenxiang").active=!1;for(var o=1;o<n.children.length;o++)n.children[o].getChildByName("mahjong").active=!1,n.children[o].getChildByName("mingxi").active=!0}else{i.getChildByName("btn_shoupai").active=!1,i.getChildByName("btn_fenxiang").active=!0;for(o=1;o<n.children.length;o++)n.children[o].getChildByName("mahjong").active=!0,n.children[o].getChildByName("mingxi").active=!1}},jiesuan:function(e,t){var i=e.data,n=(cc.global.game._game,i[0].jin);console.log("\u7ed3\u7b97\u4e8b\u4ef6\uff0c\u4f20\u5165\u53c2\u6570\uff1a"+JSON.stringify(i)),1==e.type?(this.gameoverNode.getChildByName("content").getChildByName("btn_chakanchengji").active=!0,this.gameoverNode.getChildByName("content").getChildByName("btn_kaishiyouxi").active=!1,this.gameoverNode.getChildByName("content").getChildByName("btn_tuichu").active=!0,this.jiesuan2(e.data1)):this.gameoverNode.getChildByName("content").getChildByName("btn_tuichu").active=!1,this.gameoverNode.active=!0;for(var o=this.gameoverNode.getChildByName("content").getChildByName("con").children,a=this.gameoverNode.getChildByName("FlowerCard").getChildByName("con").children,c=0;c<o.length;c++)o[c].active=!1,a[c].active=!1;t?(this.gameoverNode.getChildByName("top").getChildByName("bg_lose").active=!0,this.gameoverNode.getChildByName("top").getChildByName("liuju").active=!0,o[0].getChildByName("mahjong").getChildByName("mobg").active=!1,o[0].getChildByName("mahjong").getChildByName("layout").children[16].active=!1):(this.gameoverNode.getChildByName("top").getChildByName("bg_win").active=!0,this.gameoverNode.getChildByName("top").getChildByName("hu-"+i[0].huType).active=!0);for(c=0;c<i.length;c++){o[c].active=!0,a[c].active=!0,1==i[c].zhuang&&(o[c].getChildByName("zhuang").active=!0),o[c].getChildByName("labels").getChildByName("name").getComponent(cc.Label).string=i[c].player,o[c].getChildByName("labels").getChildByName("di").getComponent(cc.Label).string=i[c].difen+"\u5e95",o[c].getChildByName("labels").getChildByName("fan").getComponent(cc.Label).string=i[c].fan+"\u756a",o[c].getChildByName("labels").getChildByName("fandi").getComponent(cc.Label).string="x"+e.fanMultiple,1==i[c].isWinner?(o[c].getChildByName("labels").getChildByName("score").getComponent(cc.Label).string=i[c].score,o[c].getChildByName("labels").getChildByName("score-lose").active=!1,o[c].getChildByName("labels").getChildByName("score").active=!0):(o[c].getChildByName("labels").getChildByName("score-lose").getComponent(cc.Label).string=i[c].score,o[c].getChildByName("labels").getChildByName("score").active=!1,o[c].getChildByName("labels").getChildByName("score-lose").active=!0),cc.global.util.setHeadimg(o[c].getChildByName("labels").getChildByName("head"),i[c].headimg),o[c].getChildByName("mingxi").getComponent(cc.Label).string=i[c].fanDetail;var s=o[c].getChildByName("mahjong").getChildByName("layout").children,l=-1;t||0!=c||(console.log("\u53bb\u9664\u6700\u540e\u4e00\u5f20\u724c,\u53bb\u9664\u524dmypai:"+JSON.stringify(i[c].myPai)),l=i[c].myPai[i[c].myPai.length-1],i[c].myPai.remove(i[c].myPai.length-1),console.log("\u53bb\u9664\u540emypai:"+JSON.stringify(i[c].myPai)),s[16].getChildByName("tex").getComponent(cc.Sprite).spriteFrame=this._gameFun.setSpriteFrameByName("handmah_",l,this.myHoldAtlas),s[16].getChildByName("jin").active=l==n),console.log("\u7ed3\u7b97\u624b\u724c:"+JSON.stringify(i[c].myPai));for(var r=o[c].getChildByName("mahjong").getChildByName("gang").children,g=0,h=0;h<i[c].myPai.length;h++){for(var d=-1,u=0;u<i[c].gangValue.length;u++)if(i[c].gangValue[u]==i[c].myPai[h]){d=u;break}if(d>=0)r[g+1].getChildByName("tex").getComponent(cc.Sprite).spriteFrame=this._gameFun.setSpriteFrameByName("handmah_",i[c].myPai[h],this.myHoldAtlas),i[c].myPai[h]==n?r[g+1].getChildByName("jin").active=!0:r[g+1].getChildByName("jin").active=!1,r[g+1].active=!0,i[c].gangValue[d]=-1;else{if(g>=17){console.log("\u7ed3\u7b97\u6570\u636e\u6709\u8bef!");break}s[g].getChildByName("tex").getComponent(cc.Sprite).spriteFrame=this._gameFun.setSpriteFrameByName("handmah_",i[c].myPai[h],this.myHoldAtlas),i[c].myPai[h]==n?s[g].getChildByName("jin").active=!0:s[g].getChildByName("jin").active=!1,g++}}a[c].getChildByName("labels").getChildByName("name").getComponent(cc.Label).string=i[c].player,a[c].getChildByName("labels").getChildByName("hua").getComponent(cc.Label).string="\u82b1x"+i[c].hua;var m=a[c].getChildByName("huaNodes").children;for(h=0;h<i[c].huaValue.length;h++)m[h].getChildByName("tex").getComponent(cc.Sprite).spriteFrame=this._gameFun.setSpriteFrameByName("handmah_",i[c].huaValue[h],this.myHoldAtlas),m[h].active=!0}},jiesuan2:function(e){cc.global.game._game;console.log("\u603b\u7ed3\u7b97\u4e8b\u4ef6\uff0c\u4f20\u5165\u53c2\u6570\uff1a"+JSON.stringify(e));for(var t=this.node.getChildByName("game_over2").getChildByName("con").children,i=0;i<t.length;i++)t[i].active=!1;var n=0;e.length<3&&(n=1);for(i=0;i<e.length;i++){var o=t[i+n];o.active=!0,o.getChildByName("top").getChildByName("name").getComponent(cc.Label).string=e[i].name,o.getChildByName("top").getChildByName("id").getComponent(cc.Label).string="ID:"+e[i].account,o.getChildByName("bottom").getChildByName("score").getComponent(cc.Label).string=e[i].score,cc.global.util.setHeadimg(o.getChildByName("head"),e[i].headimg);var a,c=o.getChildByName("middle").getComponentsInChildren(cc.Label);for(a=0;a<e[i].huTypeTimes.length;a++)a<4&&(c[a].string=e[i].huTypeTimes[a].name+e[i].huTypeTimes[a].val);for(var s=a;s<4;s++)c[s].node.active=!1;1==e[i].isWinner?o.getChildByName("middle").getChildByName("win").active=!0:o.getChildByName("middle").getChildByName("win").active=!1}},showJiesuan2:function(){cc.global.util.playSound_buttonClick(),this.node.getChildByName("game_over2").active=!0},hideJiesuan2:function(){},getTouchNum:function(e){var t=e-38;return t<0?t=-1:t<1104?t/=69:t=t>=1132&&t<=1201?16:-1,t=parseInt(t),this.chipengOver&&t>=0&&(t-=1),console.log("x="+e+"; num="+t),t},gameChupaiInit:function(e){var t=this;if(e.type.contains(11))return e.focus==this.myIndex&&t.doChupai(e.lastValue),void t._gameFun.showLastValue(e,t._timePointer,t._seats,t.AtlasList,t.soundSetting);if(t.buhuaAnimState)cc.global.util.mySetTimeout(function(){t.node&&(console.log("\u8865\u82b1\u5f02\u5e38\u5904\u7406:\u7ee7\u7eed\u5c1d\u8bd5\u6478\u724c"),t.gameChupaiInit(e))},500);else{e.type.contains2(3,9)&&t.gameAction(e);var i=cc.global.game._game;if(i.focus==i.myIndex){if(t.initGame(),e.type.contains(10))return;e.focus==t.myIndex&&(console.log("1747chupaiaa"+i.focus),e.type.contains(3)?t.tingTip=e.tingTip:t.tingpaiHint(e.tingTip),t.chuState=!0)}else switch(t.initGame("stopUpdate"),console.log("\u8f6e\u5230\u5176\u4ed6\u4eba\u51fa\u724c!::::"+t._timePointer["s_"+cc.global.game._game.focus]),t._timePointer["s_"+cc.global.game._game.focus]){case"right_point":t.rhNode.getChildByName("holds").children[0].active=!0,t.upNode.getChildByName("holds").children[0].active=!1,t.lfNode.getChildByName("holds").children[16].active=!1;break;case"left_point":t.rhNode.getChildByName("holds").children[0].active=!1,t.upNode.getChildByName("holds").children[0].active=!1,t.lfNode.getChildByName("holds").children[16].active=!0;break;case"up_point":t.rhNode.getChildByName("holds").children[0].active=!1,t.upNode.getChildByName("holds").children[0].active=!0,t.lfNode.getChildByName("holds").children[16].active=!1}}},hideShaizi:function(e){this.timer.getChildByName("shaizi_1").active=!1,this.timer.getChildByName("shaizi_2").active=!1,e&&(this.timer.getChildByName("shaizi_1").opacity=0,this.timer.getChildByName("shaizi_2").opacity=0)},doInitPaiView:function(){var e=this.timer.getChildByName("shaizi_1"),t=this.timer.getChildByName("shaizi_2");this.timer.getChildByName("shaizi").active=!1;var i=this.dice[0],n=this.dice[1];e.getComponent(cc.Sprite).spriteFrame=this.qzGameAnimaAtlas.getSpriteFrame("ThrowDiceResult_0"+i),t.getComponent(cc.Sprite).spriteFrame=this.qzGameAnimaAtlas.getSpriteFrame("ThrowDiceResult_0"+n),e.active=!0,t.active=!0},doStartAnim:function(){this._gameFun.playSound("Sounds/mjgame/game_p_dice"),this.timer.getChildByName("shaizi").active=!0;var e=this.timer.getChildByName("shaizi").getComponent(cc.Animation);e.on("finished",this.doInitPaiView,this),this.nowAnim=e.play()},updateZpaishu:function(e){cc.global.game._game.zpaishu=e,this.timer.getChildByName("mjcount").getChildByName("count").getComponent(cc.Label).string=e},doBuhua:function(e,t,i){var n=this;if(e.length<=t)return console.log("\u8865\u82b1\u5b8c\u6bd5"),void(this.buhuaAnimState=!1);var o=e[t];n._gameFun.playSound("Sounds/mjgame/op_"+n.my_soundGender+"_buhua");var a=n.myNode.getChildByName("seat").getChildByName("event").getChildByName("btn_bu");a.active=!0,a.getComponent(cc.Animation).play("anim_mjEvent"),n._gameFun.buhua_pre(n.myNode,o,n.huaAtlas,i),cc.global.util.mySetTimeout(function(){a.active=!1;var c=cc.global.game._game.jin;i&&(c=-1),n._gameFun.buhua(n.myNode,o,n.myHoldAtlas,c,i),cc.global.util.mySetTimeout(function(){i&&n.initGame(null,2),n.doBuhua(e,t+1,i)},250)},500)},otherBuhua:function(e,t,i){var n=this;if(!(e.length<=t)){var o=e[t],a=null;switch(i){case n.rightIndex:console.log("right\u8865\u82b1\u7ed3\u679c:"+o),a=n.rhNode,n._gameFun.playSound("Sounds/mjgame/op_"+n.rh_soundGender+"_buhua");break;case n.topIndex:console.log("top\u8865\u82b1\u7ed3\u679c:"+o),a=n.upNode,n._gameFun.playSound("Sounds/mjgame/op_"+n.bt_soundGender+"_buhua");break;case n.leftIndex:console.log("left\u8865\u82b1\u7ed3\u679c:"+o),a=n.lfNode,n._gameFun.playSound("Sounds/mjgame/op_"+n.lf_soundGender+"_buhua")}for(var c=a.getChildByName("hua").children,s=0;s<o.huaValue.length;s++)for(var l=0;l<c.length;l++)if(!c[l].active){c[l].getComponent(cc.Sprite).spriteFrame=n.huaAtlas.getSpriteFrame("handmah_"+o.huaValue[s]),c[l].active=!0;break}var r=a.getChildByName("seat").getChildByName("event").getChildByName("btn_bu");r.active=!0,r.getComponent(cc.Animation).play("anim_mjEvent"),cc.global.util.mySetTimeout(function(){r.active=!1,cc.global.util.mySetTimeout(function(){n.otherBuhua(e,t+1,i)},250)},500)}},resetKaiju:function(e){if(e>1&&(this.nowAnim&&this.nowAnim.isPlaying&&(this.nowAnim.stop(),this.nowAnim=null),this.node.getChildByName("ipcheck").opacity=0),e>2&&this.doInitPaiView(),e>3)for(var t=this.myNode.getChildByName("holds").children,i=this.lfNode.getChildByName("holds").children,n=this.upNode.getChildByName("holds").children,o=this.rhNode.getChildByName("holds").children,a=0;a<16;a++)t[a].active=!0,i[a].active=!0,n[16-a].active=!0,o[16-a].active=!0},initHandle:function(){var e=this;Notification.on("memberDetailInfoEventPush",this.memberDetailInfoEventPush,this),Notification.on("tea_infoEvent_push",this.teaInfoEventPush,this),Notification.on("tea_quickJoinEvent_push",this.teaQuickJoinEventPush,this),this.node.on("disconnectPush",function(t){e.disconnectPush(t)}),this.node.on("joinUserInit",function(t){e.joinUser(t)}),this.node.on("readyTimerPush",function(e){var t=e,i=cc.find("Canvas/ready_scene/timer/num");t.readyTimerPush>0?(i.getComponent(cc.Label).string=t.readyTimerPush,i.parent.active=!0):i.parent.active=!1}),this.node.on("gameReady",function(t){for(var i=t.data,n=cc.global.room._roomData,o=0;o<i.length;o++){var a=!1;switch(1==i[o].ready&&(a=!0),i[o].index){case e.myIndex:e.readyNode.getChildByName("my_head").getChildByName("my_status_ready").active=a,cc.find("Canvas/ready_scene/my_head/my_head_box/my_integration_num").getComponent(cc.Label).string=i[o].score,a&&(e.readyNode.getChildByName("btn_ready").active=!1);break;case e.rightIndex:e.readyNode.getChildByName("right_head").getChildByName("right_status_ready").active=a,cc.find("Canvas/ready_scene/right_head/right_head_box/right_integration_num").getComponent(cc.Label).string=i[o].score;break;case e.topIndex:e.readyNode.getChildByName("up_head").getChildByName("up_status_ready").active=a,cc.find("Canvas/ready_scene/up_head/up_head_box/up_integration_num").getComponent(cc.Label).string=i[o].score;break;case e.leftIndex:e.readyNode.getChildByName("left_head").getChildByName("left_status_ready").active=a,cc.find("Canvas/ready_scene/left_head/left_head_box/left_integration_num").getComponent(cc.Label).string=i[o].score}for(var c=0;c<n.users.length;c++)if(n.users[c].index==i[o].index){n.users[c].score=i[o].score;break}}}),this.node.on("gameStartInit",function(t){e.gameoverNode.active=!1,cc.global.room._isnext=!1,cc.director.loadScene("hall_mj"),t.users&&(cc.global.room._roomData.users=t.users),cc.global.room._roomData.game_index=t.game_index,e.timer.getChildByName("gamecount").getChildByName("count").getComponent(cc.Label).string=t.game_index,cc.global.game._game=t,e.dice=cc.global.game._game.dice,cc.global.game._game.isDingjin=!1,e.initGame(null,1)}),this.node.on("gameKaiju",function(t){var i=t,n=i.type;switch(console.log(e.nowAnim),e.resetKaiju(n),n){case 1:e.nowAnim=e.node.getChildByName("ipcheck").getComponent(cc.Animation).play();break;case 2:e.doStartAnim();break;case 3:var o=e.myNode.getChildByName("holds").children;e.animInitPaiView(o,0,4),e.updateZpaishu(i.zpaishu);break;case 4:i.buhua.index==e.myIndex?e.doBuhua(i.buhua.huavals,0,"isStart"):e.otherBuhua(i.buhua.huavals,0,i.buhua.index),i.buhua.zpaishu<cc.global.game._game.zpaishu&&e.updateZpaishu(i.buhua.zpaishu);break;case 5:console.log("\u6062\u590d\u524d\u7684mypai:"+JSON.stringify(cc.global.game._game.myPai)),cc.global.game._game.myPai=i.myPai,console.log("\u6062\u590d\u540e\u7684mypai:"+JSON.stringify(cc.global.game._game.myPai));for(var a=0;a<i.huaValue.length;a++)e.myNode.getChildByName("hua").children[a].getComponent(cc.Sprite).spriteFrame=e.huaAtlas.getSpriteFrame("handmah_"+i.huaValue[a]),e.myNode.getChildByName("hua").children[a].active=!0;var c=e.gameNode.getChildByName("jinpaiinfo");c.active=!0;var s=cc.global.game._game;e.jinpai.spriteFrame=e.myHoldAtlas.getSpriteFrame("handmah_"+s.jin),e.jinpai.node.parent.mTag=s.jin,c.getChildByName("hp1-hide").getChildByName("tex").getComponent(cc.Sprite).spriteFrame=e.myHoldAtlas.getSpriteFrame("handmah_"+s.jin),c.getComponent(cc.Animation).playAdditive("anim_dingjin")}}),this.node.on("gameBuhua",function(t){var i=t;i.index==e.myIndex?(e.buhuaAnimState=!0,e.doBuhua(i.huavals,0),e.tingpaiHint(i.tingTip)):e.otherBuhua(i.huavals,0,i.index),e.updateZpaishu(i.zpaishu)}),this.node.on("gameChupaiReadyInit",function(e){console.log("\u51fa\u724c\u51c6\u5907\u8bf7\u6c42..")}),this.node.on("gameTrusteePush",function(t){var i=t;e.doTrustee(i.index,i.type)}),this.node.on("gameChupaiInit",function(t){console.log("\u51fa\u724c\u8bf7\u6c42,\u63a5\u6536\u53c2\u6570\u4e3a:"+JSON.stringify(t)+",\u6e38\u620f\u53c2\u6570\uff1a"+JSON.stringify(cc.global.game._game));var i=cc.global.game._game,n=t,o=n.duishouPai;if(o&&o.length>0&&e.changeTestSprite(o),e.focusIndex=n.focusIndex,-10==t.lastType){n.value&&(cc.global.game._game.value=n.value),cc.global.game._game.focus=n.focus,cc.global.game._game.zpaishu=n.zpaishu,e._gameFun.playSound("Sounds/mjgame/op_"+e.my_soundGender+"_buhua");var a=e.myNode.getChildByName("seat").getChildByName("event").getChildByName("btn_bu");a.active=!0,a.getComponent(cc.Animation).play("anim_mjEvent"),e._gameFun.buhua_pre(e.myNode,n,e.huaAtlas),cc.global.util.mySetTimeout(function(){a.active=!1,e._gameFun.buhua(e.myNode,n,e.myHoldAtlas,i.jin),cc.global.util.mySetTimeout(function(){e.initGame(null,2),n.type.contains(10)||(console.log("1917chupaiaa"),e.initHandMj(),e.gameChupaiInit(n))},250)},500)}else if(!n.type.contains2(3,9)&&!n.type.contains2(1,10)||n.focus!=e.myIndex||e.actState)n.value&&(cc.global.game._game.value=n.value),cc.global.game._game.focus=n.focus,cc.global.game._game.zpaishu=n.zpaishu,e.gameChupaiInit(n);else{console.log("\u6478\u724c\u9650\u5236\u5f00\u59cb..."+JSON.stringify(n));var c=cc.global.util.mySetInterval(function(){e.node?(console.log("\u6478\u724c\u9650\u5236\u4e2d..."+JSON.stringify(n)),e.actState&&(clearInterval(c),n.value&&(cc.global.game._game.value=n.value),cc.global.game._game.focus=n.focus,cc.global.game._game.zpaishu=n.zpaishu,e.gameChupaiInit(n))):clearInterval(c)},100)}}),this.node.on("gameAction",function(t){var i=t,n=i;if(e.focusIndex=n.focusIndex,console.log("\u6e38\u620f\u4e8b\u4ef6\uff0c\u4f20\u5165\u53c2\u6570\uff1a"+JSON.stringify(i)),-10==t.lastType){e._gameFun.playSound("Sounds/mjgame/op_"+e.my_soundGender+"_buhua");var o=e.myNode.getChildByName("seat").getChildByName("event").getChildByName("btn_bu");o.active=!0,o.getComponent(cc.Animation).play("anim_mjEvent"),e._gameFun.buhua_pre(e.myNode,n,e.huaAtlas),cc.global.util.mySetTimeout(function(){o.active=!1,e._gameFun.buhua(e.myNode,n,e.myHoldAtlas,cc.global.game._game.jin),cc.global.util.mySetTimeout(function(){e.initGame(null,2),n.type.contains(10)||(console.log("1917chupaiaa"),e.initHandMj(),e.gameAction(i))},250)},500)}else if((n.type.contains2(3,9)||n.type.contains2(1,10)||n.type.contains(2))&&n.focus==e.myIndex&&!e.actState)var a=cc.global.util.mySetInterval(function(){e.node?(console.log("\u6478\u724c\u9650\u5236\u4e2d2..."),e.actState&&(clearInterval(a),e.gameAction(i))):clearInterval(a)},100);else e.gameAction(i)}),this.node.on("gameActReult",function(t){var i=t,n=cc.global.game._game,o=i.focus;if(e.focusIndex=i.focusIndex,e.actResult=i,-10==i.lastType&&o!=n.myIndex){var a=null;switch(o){case e.rightIndex:console.log("right\u8865\u82b1\u7ed3\u679c:"+i),a=e.rhNode,e._gameFun.playSound("Sounds/mjgame/op_"+e.rh_soundGender+"_buhua");break;case e.topIndex:console.log("top\u8865\u82b1\u7ed3\u679c:"+i),a=e.upNode,e._gameFun.playSound("Sounds/mjgame/op_"+e.bt_soundGender+"_buhua");break;case e.leftIndex:console.log("left\u8865\u82b1\u7ed3\u679c:"+i),a=e.lfNode,e._gameFun.playSound("Sounds/mjgame/op_"+e.lf_soundGender+"_buhua")}for(var c=a.getChildByName("hua").children,s=0;s<i.huaValue.length;s++)for(var l=0;l<c.length;l++)if(!c[l].active){c[l].getComponent(cc.Sprite).spriteFrame=e.huaAtlas.getSpriteFrame("handmah_"+i.huaValue[s]),c[l].active=!0;break}return(h=a.getChildByName("seat").getChildByName("event").getChildByName("btn_bu")).active=!0,h.getComponent(cc.Animation).play("anim_mjEvent"),void cc.global.util.mySetTimeout(function(){h.active=!1},1e3)}n.lastValue=i.lastValue,n.focus=o;var r=e._timePointer["s_"+o],g=3;switch("-3"!=i.lastType&&"-7"!=i.lastType||(g=0),r){case"right_point":-9==i.lastType?e._gameFun.showZhuaGang("R",i,e.rhNode,e.rhChiAtlas,e._seats):e._gameFun.showActionResult("R",i,g,e.rhNode,e.rhChiAtlas,e.soundSetting,e._seats);break;case"left_point":-9==i.lastType?e._gameFun.showZhuaGang("L",i,e.lfNode,e.lfChiAtlas,e._seats):e._gameFun.showActionResult("L",i,g,e.lfNode,e.lfChiAtlas,e.soundSetting,e._seats);break;case"up_point":-9==i.lastType?e._gameFun.showZhuaGang("B",i,e.upNode,e.upChiAtlas,e._seats):e._gameFun.showActionResult("B",i,g,e.upNode,e.upChiAtlas,e.soundSetting,e._seats)}if(-4!=i.lastType&&-5!=i.lastType&&-6!=i.lastType||e.hideLastFlod(i.lastFocus,i.lastValue[0]),-3!=i.lastType&&-7!=i.lastType){if(-2!=i.lastType&&-9!=i.lastType)switch(e._timePointer){case"right_point":e._gameFun.right_penggangGroup++;break;case"left_point":e._gameFun.left_penggangGroup++;break;case"up_point":e._gameFun.top_penggangGroup++}if(o==n.myIndex)if(-10==i.lastType){var h;e._gameFun.playSound("Sounds/mjgame/op_"+e.my_soundGender+"_buhua"),(h=e.myNode.getChildByName("seat").getChildByName("event").getChildByName("btn_bu")).active=!0,h.getComponent(cc.Animation).play("anim_mjEvent"),e._gameFun.buhua_pre(e.myNode,i,e.huaAtlas),cc.global.util.mySetTimeout(function(){h.active=!1;var t=-1;n.isDingjin&&(t=n.jin),e._gameFun.buhua(e.myNode,i,e.myHoldAtlas,t),cc.global.util.mySetTimeout(function(){e._initHua?e.initGame():e.initGame(null,2),10==i.type||(e._initHua?(console.log("1917chupaiaa"),e.initHandMj(),e.tingpaiHint(i.tingTip),e.chuState=!0):e._initHua=!0)},250)},500)}else{switch(i.lastType){case-4:e.doChiAction();break;case-5:case-2:case-6:case-9:e.doAction()}-4!=i.lastType&&-5!=i.lastType||(e.chipeng=!0),-2!=i.lastType&&-6!=i.lastType&&-9!=i.lastType?(e.initGame(),console.log("1930chupaiaa"),e.tingpaiHint(i.tingTip),e.chuState=!0):(console.log("\u6760\u8bf7\u6c42\u51fa\u724cgangChupai"),cc.global.net.send("gangChupaiEvent",{room_no:cc.global.room._roomData.room_no,account:cc.global.util.userinfo.account}))}else e.initGame("stopUpdate")}else if(1!=cc.global.util.isTrustee){var d=new Object;d.room_no=cc.global.room._roomData.room_no,d.account=cc.global.util.userinfo.account,d.type=8,cc.global.net.send("gameEvent",d)}}),this.node.on("gameJieSuan",function(t){if(2==t.type)return e.node.getChildByName("dissolutionApplication").active=!1,e.jiesuan2(t.data1),void(e.node.getChildByName("game_over2").active=!0);e.myNode.getChildByName("tinghint").active=!1,e._gameFun.closeOps(e.actOps),e.gameNode.runAction(cc.repeat(cc.sequence(cc.moveBy(.05,cc.v2(2,2)),cc.moveBy(.1,cc.v2(-4,-4)),cc.moveBy(.05,cc.v2(2,2))),5)),e.node.getChildByName("Back").runAction(cc.repeat(cc.sequence(cc.moveBy(.05,cc.v2(2,2)),cc.moveBy(.1,cc.v2(-4,-4)),cc.moveBy(.05,cc.v2(2,2))),5));for(var i=0;i<t.data.length;i++){var n=t.data[i].myIndex;if(1==t.data[i].isWinner){var o=e.myNode.getChildByName("biaoji").getChildByName("hu_dian"),a=null,c=null,s="hu"+t.data[0].huType;n==e.leftIndex&&(c=e.lf_soundGender,a=e.lfNode.getChildByName("seat").getChildByName("event"),o=e.lfNode.getChildByName("biaoji").getChildByName("hu_dian")),n==e.topIndex&&(c=e.bt_soundGender,a=e.upNode.getChildByName("seat").getChildByName("event"),o=e.upNode.getChildByName("biaoji").getChildByName("hu_dian")),n==e.rightIndex&&(c=e.rh_soundGender,a=e.rhNode.getChildByName("seat").getChildByName("event"),o=e.rhNode.getChildByName("biaoji").getChildByName("hu_dian")),n==e.myIndex&&(c=e.my_soundGender,a=e.myNode.getChildByName("seat").getChildByName("event"));var l=a.getChildByName("hu-"+t.data[0].huType);if(l.active=!0,l.getComponent(cc.Animation).play("anim_mjEvent"),console.log(l),console.log(n),t.data[0].huType<=6?e._gameFun.playSound("Sounds/mjgame/"+e.voiceType+"/op_"+c+"_"+s):e._gameFun.playSound("Sounds/mjgame/"+e.voiceType+"/op_"+c+"_hu1"),cc.global.util.mySetTimeout(function(){l.active=!1},2e3),n!=e.myIndex)console.log("\u51c6\u5907\u64ad\u653e\u5e73\u80e1\u52a8\u753b"),e._gameFun.biaoji?(o.active=!0,o.getComponent(cc.Animation).play(),e._gameFun.biaoji&&(e._gameFun.biaoji.active=!1),e._gameFun.playSound("Sounds/mjgame/game_p_dian")):console.log("\u9519\u8bef:\u627e\u4e0d\u5230\u6807\u8bb0\u4f4d\u7f6e");else{console.log("\u51c6\u5907\u64ad\u653e\u81ea\u6478\u52a8\u753b");var r=e.myNode.getChildByName("HuPai");console.log("\u8c03\u6574\u524d\u7684\u5bbd\u5ea6:"+r.getChildByName("dian").width);for(var g=0;g<e._gameFun._holdNode.length&&!e._gameFun._holdNode[g].node.parent.active;g++)console.log("-1"),r.getChildByName("dian").width-=69;console.log("\u8c03\u6574\u540e\u7684\u5bbd\u5ea6:"+r.getChildByName("dian").width),r.active=!0,r.getComponent(cc.Animation).play()}}}(function(t){cc.global.util.mySetTimeout(function(){e.jiesuan(t)},3e3)})(t)}),this.node.on("gameLiuJu",function(t){e.jiesuan(t,!0)}),this.node.on("closeRoom",function(t){if(0==t.code){e.closeTimer&&(clearInterval(e.closeTimer),e.closeTimer=null);for(var i="",n=0;n<t.names.length;n++)i+="\u3010"+t.names[n]+"\u3011";return e.node.getChildByName("tips").getChildByName("tip2").getComponentInChildren(cc.Label).string="\u7531\u4e8e\u73a9\u5bb6"+i+"\u62d2\u7edd,\u623f\u95f4\u89e3\u6563\u5931\u8d25,\u6e38\u620f\u7ee7\u7eed",e.node.getChildByName("tips").active=!0,void(e.node.getChildByName("dissolutionApplication").active=!1)}e.closeRoomCheck(t.data)}),this.node.on("exitRoom",function(t){e.exitRoom(t)}),this.node.on("reconnectGame",function(t){console.log("\u91cd\u65b0\u8fde\u63a5\uff0c\u4f20\u5165\u53c2\u6570\uff1a"+JSON.stringify(t)),e.resetGame(t)}),this.node.on("userDisconnect",function(t){var i=t.index;e.userDisconnect(i,!0)}),this.node.on("userReconnect",function(t){var i=t.index;e.userDisconnect(i,!1)}),this.node.on("tipMsg",function(t){var i=t;switch(i.type){case 0:cc.global.util.tipMsg(i.msg);break;case 1:e.showNormalTip(i.msg);break;case 2:e.showExitTip(i.msg)}}),this.node.on("getMessagePush",function(t){var i=t;e.getMessagePush(i)}),this.node.on("sendMsgEvent",function(t){var i=t.user,n=t.type,o=t.data;e.showMsg(i,n,o)}),this.node.on("quickJoinClubRoomPush",function(t){e.quickJoinClubRoomPush(t)}),this.node.on("qzmj_readyTimer",function(t){t&&(e.jiesuanTime=t.time)}),this.node.getChildByName("btn_voice").on("touchstart",function(t){cc.global.util.playSound_buttonClick(),console.log("[\u6267\u884c\u8bed\u97f3\u52a8\u753b]anim_voice,touchstart"),e.node.getChildByName("voice").getComponent(cc.Animation).play(),e.node.getChildByName("voice").active=!0,cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org.cocos2dx.javascript.AppActivity","startRecord","()V"):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("JsUseOcTool","startRecord"),console.log("[\u6267\u884c\u8bed\u97f3\u52a8\u753b]\u624b\u6307\u89e6\u6478\u6309\u94ae\u6267\u884cstartRecord")}),this.node.getChildByName("btn_voice").on("touchend",function(t){console.log("[\u6267\u884c\u8bed\u97f3\u52a8\u753b][\u5173\u95ed\u8bed\u97f3\u52a8\u753b]anim_voice,touchend"),e.node.getChildByName("voice").getComponent(cc.Animation).stop(),e.node.getChildByName("voice").active=!1,e.myNode.getChildByName("seat").getChildByName("yyDialog").getComponent(cc.Animation).play(),e.readyNode.getChildByName("my_head").getChildByName("yyDialog").getComponent(cc.Animation).play(),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org.cocos2dx.javascript.AppActivity","stopRecording","()V"):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("JsUseOcTool","stopRecording"),console.log("[\u6267\u884c\u8bed\u97f3\u52a8\u753b]\u624b\u6307\u79bb\u5f00\u6309\u94ae")}),this.node.getChildByName("btn_voice").on("touchcancel",function(t){console.log("touchcancel"),e.node.getChildByName("voice").getComponent(cc.Animation).stop(),e.node.getChildByName("voice").active=!1,e.myNode.getChildByName("seat").getChildByName("yyDialog").getComponent(cc.Animation).play(),e.readyNode.getChildByName("my_head").getChildByName("yyDialog").getComponent(cc.Animation).play(),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org.cocos2dx.javascript.AppActivity","stopRecording","()V"):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("JsUseOcTool","stopRecording"),console.log("[\u6267\u884c\u8bed\u97f3\u52a8\u753b]\u624b\u6307\u79bb\u5f00\u6309\u94ae")}),this.node.on("voiceCall",function(t){switch(console.log("[\u6267\u884c\u8bed\u97f3\u52a8\u753b]voiceCall\u56de\u8c03\u51fd\u6570\uff0cdata\uff1a"+JSON.stringify(t)),t.myIndex){case e.leftIndex:e.lfNode.getChildByName("seat").getChildByName("yyDialog").getComponent(cc.Animation).play(),e.readyNode.getChildByName("left_head").getChildByName("yyDialog").getComponent(cc.Animation).play();break;case e.topIndex:e.upNode.getChildByName("seat").getChildByName("yyDialog").getComponent(cc.Animation).play(),e.readyNode.getChildByName("up_head").getChildByName("yyDialog").getComponent(cc.Animation).play();break;case e.rightIndex:e.rhNode.getChildByName("seat").getChildByName("yyDialog").getComponent(cc.Animation).play(),e.readyNode.getChildByName("right_head").getChildByName("yyDialog").getComponent(cc.Animation).play();break;case e.myIndex:}cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org.cocos2dx.javascript.AppActivity","downloadRecordedFilePlay","(Ljava/lang/String;)V",t.msg):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("JsUseOcTool","downloadRecordedFilePlay:",t.msg)});for(var t=0;t<this.sendBrowList.children.length;t++)this.sendBrowList.children[t].mTag=t+100,this.sendBrowList.children[t].on("touchend",function(t){var i=t.target.mTag;console.log("touchend"+i),e.sendMsg(t,i)});var i=this.myNode.getChildByName("holds").children;for(t=0;t<i.length;t++)i[t].on("touchstart",function(t){if(console.log("!!"+e.chipengReady+";"+e.chipeng+";"+e.chipengOver),e.chuState&&!e.touchNode){e.moveAct=!0,console.log("touchstart!");var i=e.getTouchNum(e.getTouchX(t));if(-1==i)return;e._gameFun._holdNode[i].node.parent==e.mjSelected?(console.log("\u5f53\u524d\u70b9\u51fb\u7684\u724c\u5df2\u7ecf\u9009\u4e2d\u4e86"),e.startTouch=i,e.startY=e.getTouchY(t)):e.startTouch=-1,e.lastTouch=i,-1!=i&&e._gameFun._holdNode[i].node.parent.active?e.onMjSelected(e._gameFun._holdNode[i].node.parent,0):console.log("\u4e0d\u5728\u533a\u57df\u5185")}}),i[t].on("touchmove",function(t){if(!e.actOps.active&&e.chuState&&e.moveAct)if(console.log("touchmove"),e.touchNode)e.touchNode.x=e.getTouchX(t)-.5*e.touchNode.width,e.touchNode.y=e.getTouchY(t)-.5*e.touchNode.height;else if(e.getTouchY(t)<=115){var i=e.getTouchNum(e.getTouchX(t));i!=e.lastTouch&&(e.startTouch=-1,e.lastTouch=i,-1!=i&&e._gameFun._holdNode[i].node.parent.active?e.onMjSelected(e._gameFun._holdNode[i].node.parent,0):console.log("\u4e0d\u5728\u533a\u57df\u5185"))}else console.log("y\u8f74\u4e0d\u5728\u533a\u57df\u5185"),e.mjSelected&&(e.touchNode=cc.instantiate(e.mjSelected),e.myNode.addChild(e.touchNode),e.touchNode.x=e.getTouchX(t)-.5*e.touchNode.width,e.touchNode.y=e.getTouchY(t)-.5*e.touchNode.height,e.mjSelected.opacity=127)}),i[t].on("touchend",function(t){if(!e.actOps.active&&e.chuState)if(console.log("touchend!"),e.lastTouch=-1,e.touchNode)console.log(e.getTouchY(t)),e.mjSelected.opacity=255,e.getTouchY(t)>130&&(e.moveAct=!1,e.onMjSelected(e.mjSelected,1),e.moveAct=!0),e.touchNode.destroy(),e.touchNode=null;else{var i=e.getTouchNum(e.getTouchX(t));-1!=i&&e._gameFun._holdNode[i].node.parent.active&&i==e.startTouch?e.startY-e.getTouchY(t)>=10?e.onMjSelected(e._gameFun._holdNode[i].node.parent,-1):e.onMjSelected(e._gameFun._holdNode[i].node.parent,1):console.log("\u4e0d\u5728\u533a\u57df\u5185")}}),i[t].on("touchcancel",function(t){if(!e.actOps.active&&e.chuState)if(console.log("touchcancel!"),e.lastTouch=-1,e.touchNode)console.log(e.getTouchY(t)),console.log(e.mjSelected.opacity),e.mjSelected.opacity=255,console.log(e.mjSelected.opacity),e.getTouchY(t)>130&&(e.moveAct=!1,e.onMjSelected(e.mjSelected,1),e.moveAct=!0),e.touchNode.destroy(),e.touchNode=null;else{var i=e.getTouchNum(e.getTouchX(t));-1!=i&&e._gameFun._holdNode[i].node.parent.active&&i==e.startTouch?e.startY-e.getTouchY(t)>=10?e.onMjSelected(e._gameFun._holdNode[i].node.parent,-1):e.onMjSelected(e._gameFun._holdNode[i].node.parent,1):console.log("\u4e0d\u5728\u533a\u57df\u5185")}})},getTouchX:function(e){return e.getLocationX()-this.touch_dx},getTouchY:function(e){return e.getLocationY()-this.touch_dy},hide_dissolutionApplication:function(){this.node.getChildByName("dissolutionApplication").active=!1},hide_halltip2:function(){this.node.getChildByName("tips").active=!1},show_CW_And_E:function(){cc.global.util.playSound_buttonClick(),this.node.getChildByName("CommonWordsAndExpressions").active=!0},hide_CW_And_E:function(){cc.global.util.playSound_buttonClick(),this.node.getChildByName("CommonWordsAndExpressions").active=!1},show_cbTC:function(){cc.global.util.playSound_buttonClick(),this.cbTC.active=!0,this.cbTC2.active=!1},hide_cbTC:function(){cc.global.util.playSound_buttonClick(),this.cbTC.active=!1,this.cbTC2.active=!0},showRefreshTip:function(){cc.global.util.playSound_buttonClick(),cc.find("refreshTip",this.node).active=!0},hideRefreshTip:function(){cc.global.util.playSound_buttonClick(),cc.find("refreshTip",this.node).active=!1},showNormalTip:function(e){this.node.getChildByName("normalTip").getChildByName("bg").getComponentInChildren(cc.Label).string=e,this.node.getChildByName("normalTip").active=!0},hideNormalTip:function(){this.node.getChildByName("normalTip").active=!1},showExitTip:function(e){this.node.getChildByName("exitTip").getChildByName("bg").getComponentInChildren(cc.Label).string=e,this.node.getChildByName("exitTip").active=!0},exitTipClick:function(){cc.global.util.playSound_buttonClick(),cc.global.game.backHall()},showOptionNode:function(){cc.global.util.playSound_buttonClick();var e=this.node.getChildByName("option_node");e.x=this.optionNodeX+300,e.opacity=0,e.active=!0,cc.tween(e).by(.2,{x:-300,opacity:255}).start()},hideOptionNode:function(e){var t=this;e&&cc.global.util.playSound_buttonClick();var i=this.node.getChildByName("option_node"),n=this.optionNodeX+300;cc.tween(i).to(.2,{x:n,opacity:0}).call(function(){i.x=t.optionNodeX,i.opacity=255,i.active=!1}).start()},showWanfa:function(){this.hideOptionNode(null),cc.global.pop_mgr.showFrm({name:"frm_wanfa",customData:{gid:3}})},quickJoin_club:function(){cc.global.util.playSound_buttonClick(),console.log("\u5feb\u901f\u5f00\u59cb\u623f\u95f4\u7c7b\u578b\u4e3a"+cc.global.room._roomData.roomType),8==cc.global.room._roomData.roomType||9==cc.global.room._roomData.roomType?(cc.global.util.showAlert("\u6b63\u5728\u5feb\u901f\u52a0\u5165\u6e38\u620f"),cc.global.net.send("joinRoom",{room_no:cc.global.room._roomData.room_no||cc.global.room._roomData.roomNo,uuid:cc.global.util.userinfo.uuid,account:cc.global.util.userinfo.account,location:cc.global.util.LongitudeAndLatitude})):10==cc.global.room._roomData.roomType?(cc.global.util.showAlert("\u6b63\u5728\u5feb\u901f\u52a0\u5165\u6e38\u620f"),cc.global.net.send("tea_quickJoinEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,uuid:cc.global.util.userinfo.uuid,platform:cc.global.util.gameinfo.platform,teaInfoCode:cc.global.util.teaUserinfo.teaInfoCode,account:cc.global.util.userinfo.account,gid:3})):(cc.global.util.showAlert("\u6b63\u5728\u5feb\u901f\u52a0\u5165\u6e38\u620f"),cc.global.net.send("quickJoinClubRoom",{gid:cc.global.game.gid,uuid:cc.global.util.userinfo.uuid,account:cc.global.util.userinfo.account,ip:cc.global.util.ip,port:cc.global.util.port,clubCode:cc.global.room._roomData.clubCode,location:cc.global.util.LongitudeAndLatitude,room_no:cc.global.room._roomData.room_no}))},memberDetailInfoEventPush:function(e){1==e.code?cc.global.util.circleUserinfo=e.data:cc.global.util.circleUserinfo=null},teaInfoEventPush:function(e){1==e.code?cc.global.util.teaUserinfo=e.data:e.teaName&&e.teaCode?cc.global.util.teaUserinfo={teaName:e.teaName,teaInfoCode:e.teaCode}:cc.global.util.teaUserinfo=null},teaQuickJoinEventPush:function(e){cc.global.util.closeAlert(),cc.global.util.tipMsg(e.msg)},quickJoinClubRoomPush:function(e){1!=e.code&&(cc.global.util.closeAlert(),cc.global.util.tipMsg(e.msg))},update:function(e){var t=cc.global.util.getCurrentTime();if(this.currentTime!=t&&(cc.find("roominfo/current_time/label",this.node).getComponent(cc.Label).string=t),cc.global.game._game&&cc.global.game._game.isDingjin){var i=this.timer.getChildByName("pointer-"+this.myIndex).getChildByName("lblTime").getComponent(cc.Label),n=cc.global.game._game,o=cc.find("Canvas/game_over/timer"),a=5;this.jiesuanTime>0&&(this.jiesuanTime-=e,this.jiesuanTime<5&&(a=Math.floor(this.jiesuanTime)),o.active=!0,a>=0&&(o.getChildByName("num").getComponent(cc.Label).string=a));var c=Date.now();if(this.gameData.startTime>0&&c-1e3*Math.floor(this.gameData.lastTime/1e3)>=1e3){this.gameData.lastTime=c;var s=Math.floor((c-this.gameData.startTime)/1e3);if(this.gameData.countType<0)return;var l=this.gameData.limitTime[this.gameData.countType];s<=l?(i.string=l-s,this._gameFun._ticktime<=3&&n.focus>=0&&this._gameFun.playSound("Sounds/mjgame/game_p_time_non")):(console.log("\u8ba1\u65f6type:"+this.gameData.countType),i.string="0",this.gameData.startTime=-1)}}},onDestroy:function(){console.log("ondestroy!"),Notification.off("memberDetailInfoEventPush",this.memberDetailInfoEventPush,this),Notification.off("tea_infoEvent_push",this.teaInfoEventPush,this),Notification.off("tea_quickJoinEvent_push",this.teaQuickJoinEventPush,this),cc.global.game._dispatchEventHandel=null,cc.global.game._stopRepeate=!0,cc.global.util.clearAllTimer()},visitedCode:function(){cc.find("Canvas/mall").active=!0,cc.find("Canvas/mall/frm_mall").active=!0,this.init_mall("",4)},init_mall:function(e,t){var i=this,n=(cc.find("Canvas/mall/frm_mall"),cc.find("Canvas/mall/frm_mall/con/layout"));n.removeAllChildren(),cc.global.http.sendRequest("/zagame/getzamall.html",{platform:cc.global.util.gameinfo.platform,id:cc.global.util.userinfo.id,type:t},function(e){if(e){console.log("[\u5546\u57ce] result:"+JSON.stringify(e));for(var t=e,o=0;o<t.length;o++){var a=cc.instantiate(i.item);n.addChild(a),a.getChildByName("title").getComponent(cc.Label).string=t[o].title,a.getChildByName("btn").getChildByName("lb").getComponent(cc.Label).string="\u8d60\u9001"+t[o].denomination+"\u5143\u5b9d";for(var c=a.getChildByName("money").children,s=1,l=0;l<String(t[o].payMoney).split("").length;l++){var r=parseInt(String(t[o].payMoney).split("")[l]);c[s].getComponent(cc.Sprite).spriteFrame=i.sctuji.getSpriteFrame("sc_"+r),c[s++].active=!0}var g=t[o].logo,h=new Object;h.logo=g,h.spNode=a.getChildByName("sp"),function(e){""!=e.logo&&cc.loader.load(e.logo,function(t,i){var n=new cc.SpriteFrame(i,cc.Rect(0,0,i.width,i.height));e.spNode.getComponent(cc.Sprite).spriteFrame=n})}(h),a.mTag=t[o].id,console.log("newItem.mTag:"+a.mTag+";list[i].id:"+t[o].id),n.parent.getComponent(cc.ScrollView).scrollToTop(),a.on("click",i.showAlipayWebChat,i)}}else i.tipMsg_connectErr()})},showAlipayWebChat:function(e,t){console.log("[\u663e\u793a\u652f\u4ed8\u5b9d\u6216\u5fae\u4fe1] type:"+t+"; "+e.target.mTag),this.mTag=e.target.mTag,console.log("[\u663e\u793a\u652f\u4ed8\u5b9d\u6216\u5fae\u4fe1] event.target.mTag:"+e.target.mTag),cc.find("Canvas/mall/frm_mall/frm_cz").active=0!=t},AlipayWebChat:function(e,t){this.mall_queding(this.mTag,t)},mall_queding:function(e,t){cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4"),console.log("[\u786e\u5b9a\u8d2d\u4e70] this.mTag:"+this.mTag);var i=cc.global.http.url+"/zagame/gmzamall.json?zaid="+this.mTag+"&id="+cc.global.util.userinfo.id+"&paytype="+t+"&platform="+cc.global.util.gameinfo.platform;cc.sys.openURL(i),cc.global.util.closeAlert()},gb_shuru:function(e,t){1==t.split("/").length&&(cc.find("Canvas/mall").active=!1),cc.find("Canvas/mall/"+t).active=!1},changeTestSprite:function(e){var t=this.node.getChildByName("test").getChildByName("holds"),i=e.length;if(e.length>0){e.sort();for(var n=0;n<e.length;n++)t.children[n].opacity=255,t.children[n].getChildByName("New Sprite").getComponent(cc.Sprite).spriteFrame=this._gameFun.setSpriteFrameByName("handmah_",e[n],this.myHoldAtlas);for(n=i;i<t.children.length;n++){if(console.log("==================="+n),n>=16)return;t.children[n].opacity=0}}},onOrOffTestSprite:function(){var e=this.node.getChildByName("test");e.opacity=e.opacity>0?0:255},onOrOff:function(){var e=this.node.getChildByName("New Button2").getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string,t={};t.account=cc.global.util.userinfo.account,"\u5f00"==e?(t.status=1,e="\u5173"):(t.status=0,e="\u5f00"),this.node.getChildByName("New Button2").getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=e,cc.global.net.send("asfrsgsdz",t)}}),cc._RF.pop()},{mjGameUtil:"mjGameUtil"}],mjreplay_kaijin:[function(e,t,i){"use strict";cc._RF.push(t,"00fc5ugsDFPdJL0IdMeV5Jf","mjreplay_kaijin"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},showKaijinPs:function(){console.log("show:\u8fd9\u662f\u52a8\u753b\u56de\u8c03\u51fd\u65701"),this.node.getChildByName("kaijin_bg").getComponent(cc.ParticleSystem).resetSystem(),this.node.getChildByName("txt_bg").getComponent(cc.ParticleSystem).resetSystem(),this.node.getChildByName("kaijin_quan").getComponent(cc.ParticleSystem).resetSystem();var e="Sounds/mjgame/game_p_gold_action";cc.loader.loadRes(e,function(t,i){console.log("(\u52a8\u753b\u56de\u8c03)\u64ad\u653e\u97f3\u9891:url="+e+" ;\u97f3\u91cf\u5f00\u5173:"+cc.global.util.setting.soundOn+" ;\u97f3\u91cf\u8bbe\u7f6e:"+cc.global.util.setting.sound),1==cc.global.util.setting.soundOn&&cc.audioEngine.play(i,!1,cc.global.util.setting.sound)})},hideKaijinPs:function(){console.log("hide:\u8fd9\u662f\u52a8\u753b\u56de\u8c03\u51fd\u65702"),this.node.getChildByName("kaijin_bg").getComponent(cc.ParticleSystem).stopSystem(),this.node.getChildByName("kaijin_bg").active=!1,this.node.getChildByName("txt_bg").getComponent(cc.ParticleSystem).stopSystem(),this.node.getChildByName("txt_bg").active=!1,this.node.getChildByName("kaijin_quan").getComponent(cc.ParticleSystem).stopSystem(),this.node.getChildByName("kaijin_quan").active=!1},animKaijinComp:function(){console.log("completed:\u8fd9\u662f\u52a8\u753b\u56de\u8c03\u51fd\u65703");var e=cc.find("Canvas").getComponent("mjReplay");e.hideShaizi(),e.initHandMj(null,!0)}}),cc._RF.pop()},{}],moneyController:[function(e,t,i){"use strict";cc._RF.push(t,"7e97fOUhO5Ph4xpzYf2KzCF","moneyController");var n=cc.Enum({roomcard:1,coins:2,score:3,yuanbao:4});cc.Class({extends:cc.Component,properties:{moneyType:{default:n.roomcard,type:n}}}),cc._RF.pop()},{}],new_hall_pdk:[function(e,t,i){"use strict";cc._RF.push(t,"4b626GsseZBf48fZ//vJu9m","new_hall_pdk");var n=e("./global/PdkConstant"),o=e("./global/NotificationNames");Array.prototype.remove=function(e){if(console.log("\u5220\u9664\u6570\u7ec4\u8282\u70b9,dx="+e),isNaN(e)||e>this.length)return!1;this.splice(e,1)},Array.prototype.removeVal=function(e){for(var t=0;t<this.length;t++)if(this[t]==e){this.splice(t,1);break}},Array.prototype.hasVal=function(e){var t=!1;"number"==typeof e&&(e=e.toString());for(var i=0;i<this.length;i++)if(this[i].toString()==e){t=!0;break}return t},cc.Class({extends:cc.Component,properties:{bigCardAtlas:{type:cc.SpriteAtlas,default:null,tooltip:"\u624b\u724c\u56fe\u96c6"},middleCardAtlas:{type:cc.SpriteAtlas,default:null,tooltip:"\u624b\u724c\u56fe\u96c6"},cardNumAtlas:{type:cc.SpriteAtlas,default:null,tooltip:"\u724c\u6570\u56fe\u96c6"},MusicSprite:{type:cc.SpriteFrame,default:[],tooltip:"\u97f3\u6548\u56fe\u6807"},browAtlas:{type:cc.SpriteAtlas,default:null,tooltip:"\u8868\u60c5\u56fe\u96c6"}},onLoad:function(){var e=this;if(this.eventList={},this.eventList[o.NotificationNames.PDK_PLAYERENTER_PUSH]=this.refreshUser,this.eventList[o.NotificationNames.PDK_GAMEREADYEVENT_PUSH]=this.pdkGameReadyEventPush,this.eventList[o.NotificationNames.PDK_EXITROOMEEVENT_PUSH]=this.pdkExitRoomeEventPush,this.eventList[o.NotificationNames.PDK_GAMEEVENT_PUSH]=this.pdkGameEventPush,this.eventList[o.NotificationNames.PDK_RECONNECTGAMEEVENT_PUSH]=this.pdkReconnectGameEventPush,this.eventList[o.NotificationNames.PDK_GAMETRUSTEEEVENT_PUSH]=this.pdkGameTrusteeEventPush,this.eventList[o.NotificationNames.PDK_CLOSEROOMEVENT_PUSH]=this.pdkCloseRoomEventPush,this.eventList[o.NotificationNames.PDK_SETTLEACCOUNTS_PUSH]=this.pdkSettleAccountsPush,this.eventList[o.NotificationNames.TEA_QUICKJOINEVENT_PUSH]=this.teaQuickJoinEventPush,this.eventList[o.NotificationNames.PDK_GAMETIPEVENT_PUSH]=this.pdkGameTipEventPush,this.eventList.quickEntryRoomCircleEventPush=this.quickEntryRoomCircleEventPush,this.eventList.memberDetailInfoEventPush=this.memberDetailInfoEventPush,this.registerObserver(),this.gameData=new Object,this.gameData.myIndex=cc.global.room._roomData.myIndex,this.setGameData(cc.global.room._roomData),this.gameData.limitTime=cc.global.room._roomData.playerTime,this.genders=["W","W","W"],this.selectedColor=cc.color(135,132,201,255),this.unselectedColor=cc.color(255,255,255,255),this.startTouch=null,this.endTouch=null,this.optionNodeX=this.node.getChildByName("option_node").x,this.initView(),this.refreshUser(),this.resetGame(!1),this.msgNodeBinding(),this.voiceNodeBinding(),this.gameTimer=null,this.summaryTimer=null,cc.global.room._roomData.gameStatus==n.PdkConstant.GAME_STATUS_START&&null==this.gameTimer&&(this.gameTimer=cc.global.util.mySetInterval(function(){e.refreshGameTimer()},1e3)),(8==cc.global.room._roomData.roomType||9==cc.global.room._roomData.roomType)&&(cc.global.util.datingType="circle",cc.global.util.circleRoomFilterGid=21,!cc.global.util.circleUserinfo)){var t=cc.sys.localStorage.getItem("circleId");t&&cc.global.net.send("memberDetailInfoEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,user_id:cc.global.util.userinfo.uid,circle_id:t})}cc.global.util.pdkGameEventCache&&this.pdkGameEventPush(cc.global.util.pdkGameEventCache),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org.cocos2dx.javascript.AppActivity","joinGame","(Ljava/lang/String;)V",cc.global.util.userinfo.openid):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("JsUseOcTool","joinGame:",String(cc.global.util.userinfo.openid)),cc.global.util.userinfo.pdk&&1==cc.global.util.userinfo.pdk?this.node.getChildByName("New Button").active=!0:this.node.getChildByName("New Button").active=!1},memberDetailInfoEventPush:function(e){1==e.code?cc.global.util.circleUserinfo=e.data:cc.global.util.circleUserinfo=null},msgNodeBinding:function(){for(var e=this,t=cc.find("bg/CommonWordsAndExpressions/bg/con/bg/browTab/scroll/view/content",this.node),i=0;i<t.children.length;i++)t.children[i].m_tag=i+100,t.children[i].on("touchend",function(t){e.sendMsg(t.target.m_tag)});for(var n=cc.find("bg/CommonWordsAndExpressions/bg/con/bg/msgTab/scroll/view/content",this.node),o=0;o<n.children.length;o++)n.children[o].m_tag=o,n.children[o].on("touchend",function(t){e.sendMsg(t.target.m_tag)})},voiceNodeBinding:function(){var e=this;cc.find("bg/voice",this.node).on("touchstart",function(t){cc.find("bg/voice/voice",e.node).getComponent(cc.Animation).play(),cc.find("bg/voice/voice",e.node).active=!0,cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org.cocos2dx.javascript.AppActivity","startRecord","()V"):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("JsUseOcTool","startRecord")}),cc.find("bg/voice",this.node).on("touchend",function(t){cc.find("bg/voice/voice",e.node).getComponent(cc.Animation).stop(),cc.find("bg/voice/voice",e.node).active=!1,cc.find("bg/player0/yyDialog",e.node).getComponent(cc.Animation).play(),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org.cocos2dx.javascript.AppActivity","stopRecording","()V"):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("JsUseOcTool","stopRecording")}),cc.find("bg/voice",this.node).on("touchcancel",function(t){cc.find("bg/voice/voice",e.node).getComponent(cc.Animation).stop(),cc.find("bg/voice/voice",e.node).active=!1,cc.find("bg/player0/yyDialog",e.node).getComponent(cc.Animation).play(),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org.cocos2dx.javascript.AppActivity","stopRecording","()V"):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("JsUseOcTool","stopRecording")}),this.node.on("voiceCall",function(t){console.log("\u6536\u5230\u8bed\u97f3\u56de\u8c03");var i=e.getIndex(t.myIndex);0!=i&&cc.find("bg/player"+i,e.node).getChildByName("yyDialog").getComponent(cc.Animation).play();cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org.cocos2dx.javascript.AppActivity","downloadRecordedFilePlay","(Ljava/lang/String;)V",t.msg):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("JsUseOcTool","downloadRecordedFilePlay:",t.msg)})},setGameData:function(e){this.gameData.focusIndex=e.focusIndex,this.gameData.lastOperateIndex=e.lastOperateIndex,this.gameData.lastCardList=e.lastCardList,this.gameData.lastCardType=e.lastCardType,this.gameData.isPlay=e.isPlay,this.gameData.isLastPlayCard=e.isLastPlayCard,this.gameData.lastPlayIndex=e.lastPlayIndex,this.gameData.tipCount=0,this.gameData.time=e.time},start:function(){this.playMusic(),cc.global.util.resize()},registerObserver:function(){var e=this;if(cc.global.game._dispatchEventHandel=this.node,this.node.on("tipMsg",function(t){var i=t;switch(i.type){case 0:cc.global.util.tipMsg(i.msg);break;case 1:e.showNormalTip(i.msg);break;case 2:e.showExitTip(i.msg)}}),this.node.on("sendMsgEvent",function(t){e.showMsg(t)}),this.eventList)for(var t in this.eventList)Notification.on(t,this.eventList[t],this)},removeObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.off(e,this.eventList[e],this)},initView:function(){cc.find("bg",this.node).active=!0;var e=new Array;e.push("btn_liaotian"),e.push("btn_option"),e.push("bomb"),e.push("plane"),e.push("top"),e.push("chuntian");for(var t=cc.find("bg",this.node).children,i=0;i<t.length;i++)t[i].active=e.hasVal(t[i].name);cc.find("exitTip",this.node).active=!1,cc.find("normalTip",this.node).active=!1,cc.find("in_gg",this.node).active=!1,this.initMusicAndSound(),cc.find("bg/top/room_no",this.node).getComponent(cc.Label).string="\u8dd1\u5f97\u5feb  \u623f\u95f4\u53f7:"+cc.global.room._roomData.roomNo,cc.find("bg/top/game_count",this.node).getComponent(cc.Label).string="\u7b2c"+cc.global.room._roomData.gameIndex+"/"+cc.global.room._roomData.gameCount+"\u5c40";var n=0;switch(cc.global.room._roomData.multiple){case 1:n=0;break;case 2:n=10;break;case 4:n=20;break;case 8:n=30;break;case 16:n=40;break;case 32:n=50;break;default:n=0}cc.find("bg/top/multiple",this.node).getComponent(cc.Label).string="\u5f53\u524d\u70b8\u5f39\u5206\u6570:"+n+"  \u5e95\u5206:"+cc.global.room._roomData.score,cc.find("bg/top/current_time",this.node).getComponent(cc.Label).string=cc.global.util.getCurrentTime()},refreshUser:function(){for(var e=cc.global.room._roomData.users,t=cc.global.room._roomData.gameStatus,i=0;i<e.length;i++){var o=this.getIndex(e[i].index),a=cc.find("bg/player"+o,this.node);cc.global.util.setHeadimg(a.getChildByName("head_mask").getChildByName("head"),e[i].headimg),a.getChildByName("name").getComponent(cc.Label).string=e[i].name,a.getChildByName("score").getChildByName("label").getComponent(cc.Label).string=e[i].score,a.getChildByName("score_win").opacity=0,a.getChildByName("score_lose").opacity=0,t==n.PdkConstant.GAME_STATUS_INIT||t==n.PdkConstant.GAME_STATUS_READY?a.getChildByName("ready").active=e[i].userStatus==n.PdkConstant.USER_STATUS_READY:a.getChildByName("ready").active=!1,a.active=!0}},refreshGameData:function(){for(var e=cc.global.room._roomData.gameData,t=0;t<e.length;t++)if(this.gameData.myIndex==e[t].index)this.gameData.myPai=e[t].pai,this.drawMyCard(e[t].pai),cc.find("bg/player0/dongh",this.node).active=e[t].trusteeStatus,cc.find("bg/tuoguan",this.node).active=e[t].trusteeStatus,1!=e[t].cardNum&&2!=e[t].cardNum||cc.find("bg/player0/bell",this.node).active||(cc.find("bg/player0/bell",this.node).active=!0,cc.find("bg/player0/bell",this.node).getComponent(cc.Animation).play());else{var i=this.getIndex(e[t].index);cc.find("bg/player"+i+"/paishu_card/paishu",this.node).getComponent(cc.Sprite).spriteFrame=this.cardNumAtlas.getSpriteFrame("card_"+e[t].cardNum),cc.find("bg/player"+i+"/paishu_card",this.node).active=!0,cc.find("bg/player"+i+"/dongh",this.node).active=e[t].trusteeStatus,1!=e[t].cardNum&&2!=e[t].cardNum||cc.find("bg/player"+i+"/bell",this.node).active||(cc.find("bg/player"+i+"/bell",this.node).active=!0,cc.find("bg/player"+i+"/bell",this.node).getComponent(cc.Animation).play())}},resetGame:function(e){var t=0;if(2==cc.global.room._roomData.bombsScore)switch(cc.global.room._roomData.multiple){case 1:t=0;break;case 2:t=10;break;case 4:t=20;break;case 8:t=30;break;case 16:t=40;break;case 32:t=50;break;default:t=0}else switch(cc.global.room._roomData.multiple){case 1:t=0;break;case 4:t=5;break;case 16:t=10;break;case 64:t=15;break;case 256:t=20;break;case 1024:t=25;break;default:t=0}cc.find("bg/top/multiple",this.node).getComponent(cc.Label).string="\u5f53\u524d\u70b8\u5f39\u5206\u6570:"+t+"  \u5e95\u5206:"+cc.global.room._roomData.score;var i=cc.global.room._roomData.gameStatus,o=cc.global.room._roomData.users;if(i==n.PdkConstant.GAME_STATUS_INIT||i==n.PdkConstant.GAME_STATUS_READY)for(var a=0;a<o.length;a++)if(cc.global.util.userinfo.account==o[a].account){cc.find("bg/ready",this.node).active=o[a].userStatus!=n.PdkConstant.USER_STATUS_READY;break}i==n.PdkConstant.GAME_STATUS_START&&(this.refreshGameData(),-1!=this.gameData.lastPlayIndex&&(cc.find("bg/player"+this.getIndex(this.gameData.lastPlayIndex)+"/pass",this.node).active=!this.gameData.isLastPlayCard,this.gameData.isLastPlayCard||this.hidePlayerFoldsByIndex(this.gameData.lastPlayIndex)),-1!=this.gameData.lastOperateIndex&&this.drawPlayerFoldsByIndex(this.gameData.lastOperateIndex,this.gameData.lastCardList),cc.find("bg/btn",this.node).active=this.gameData.focusIndex==this.gameData.myIndex&&this.gameData.isPlay,-1!=this.gameData.focusIndex&&(cc.find("bg/player"+this.getIndex(this.gameData.focusIndex)+"/pass",this.node).active=!1,this.hidePlayerFoldsByIndex(this.gameData.focusIndex)),this.startTouch=null,this.refreshGameTimer(),e&&this.doGameEventAnimation())},doGameEventAnimation:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.gameData.isLastPlayCard||e){var t=this.getIndex(this.gameData.lastOperateIndex),i=cc.find("bg/player"+t,this.node);switch(this.gameData.lastCardType){case n.PdkConstant.CARD_TYPE_DANPAI:this.playSound("Sounds/PDKgame/c1"+this.getLastCardNum()+this.genders[this.gameData.lastOperateIndex]);break;case n.PdkConstant.CARD_TYPE_DUIZI:this.playSound("Sounds/PDKgame/c2"+this.getLastCardNum()+this.genders[this.gameData.lastOperateIndex]);break;case n.PdkConstant.CARD_TYPE_SANTIAO:break;case n.PdkConstant.CARD_TYPE_SANDAI:i.getChildByName("3with2").getComponent(cc.Animation).play(),this.playSound("Sounds/PDKgame/c32"+this.genders[this.gameData.lastPlayIndex]);break;case n.PdkConstant.CARD_TYPE_SHUNZI:i.getChildByName("shunzi").getComponent(cc.Animation).play(),this.playSound("Sounds/PDKgame/c123"+this.genders[this.gameData.lastPlayIndex]);break;case n.PdkConstant.CARD_TYPE_LIANDUI:i.getChildByName("lianshun").getComponent(cc.Animation).play(),this.playSound("Sounds/PDKgame/c1122"+this.genders[this.gameData.lastPlayIndex]);break;case n.PdkConstant.CARD_TYPE_SANSHUN:break;case n.PdkConstant.CARD_TYPE_FEIJI:i.getChildByName("plane").getComponent(cc.Animation).play(),cc.find("bg/plane",this.node).getComponent(cc.Animation).play(),this.playSound("Sounds/PDKgame/c111222"+this.genders[this.gameData.lastPlayIndex]);break;case n.PdkConstant.CARD_TYPE_SIDAI:i.getChildByName("4with3").getComponent(cc.Animation).play(),this.playSound("Sounds/PDKgame/c43"+this.genders[this.gameData.lastPlayIndex]);break;case n.PdkConstant.CARD_TYPE_ZHADAN:i.getChildByName("bomb").getComponent(cc.Animation).play(),cc.find("bg/bomb",this.node).getComponent(cc.Animation).play("anim_bomb"+t),this.playSound("Sounds/PDKgame/c4"+this.genders[this.gameData.lastPlayIndex])}}else this.playSound("Sounds/PDKgame/buchu"+this.genders[this.gameData.lastPlayIndex])},getLastCardNum:function(){return this.gameData.lastCardList.length>0?this.gameData.lastCardList[0].split("-")[1]:0},refreshGameTimer:function(){this.gameData.time<0&&(this.gameData.time=0);for(var e=0;e<3;e++)cc.find("bg/player"+e,this.node).getChildByName("timer").active=!1;cc.global.room._roomData.gameStatus==n.PdkConstant.GAME_STATUS_START&&-1!=this.gameData.focusIndex&&(cc.find("bg/player"+this.getIndex(this.gameData.focusIndex)+"/timer",this.node).active=!0,cc.find("bg/player"+this.getIndex(this.gameData.focusIndex)+"/timer",this.node).getComponent(cc.ProgressBar).progress=this.gameData.time/this.gameData.limitTime,cc.find("bg/player"+this.getIndex(this.gameData.focusIndex)+"/timer/num",this.node).getComponent(cc.Label).string=this.gameData.time),this.gameData.time--},hidePlayerFoldsByIndex:function(e){for(var t=cc.find("bg/player"+this.getIndex(e),this.node).getChildByName("folds"),i=0;i<t.children.length;i++)t.children[i].active=!1},drawPlayerFoldsByIndex:function(e,t){cc.find("bg/player"+this.getIndex(e),this.node).getChildByName("pass").active=!1;for(var i=cc.find("bg/player"+this.getIndex(e),this.node).getChildByName("folds"),n=0;n<i.children.length;n++)n<t.length?(i.children[n].getComponent(cc.Sprite).spriteFrame=this.getCardAtlasByName(t[n],this.middleCardAtlas),i.children[n].active=!0):i.children[n].active=!1},drawMyCard:function(e){var t=this,i=cc.find("bg/holds",this.node);i.active=!0;for(var n=0;n<i.children.length;n++)n<e.length?(i.children[n].getComponent(cc.Sprite).spriteFrame=this.getCardAtlasByName(e[n],this.bigCardAtlas),i.children[n].active=!0,i.children[n].m_cardName=e[n],i.children[n].off("touchstart"),i.children[n].off("touchmove"),i.children[n].on("touchstart",function(e){t.onCardClick(e);var i=t.getTouchNum(e.getLocationX());t.startTouch=i,t.endTouch=i}),i.children[n].on("touchmove",function(e){var n=t.startTouch,o=t.endTouch,a=t.getTouchNum(e.getLocationX()),c=-1;if(a!=o&&(a>o&&o>=n||a<o&&o<=n?c=a:(a<o&&o>n||a>o&&o<n)&&(c=o),t.endTouch=a,c>=0))for(var s=0;s<i.children.length;s++)if(i.children[s].active&&s==c){t.onCardClick(i.children[s]);break}})):(i.children[n].y=0,i.children[n].color=this.unselectedColor,i.children[n].active=!1)},onCardClick:function(e){if(null!=e){var t=e.target?e.target:e;this.playSound("Sounds/sss/other/GAME_CARD"),t.y>0?cc.tween(t).to(.05,{y:0,color:this.unselectedColor}).start():cc.tween(t).to(.05,{y:n.PdkConstant.SELECTED_CARD_Y,color:this.selectedColor}).start()}},getTouchNum:function(e){var t=cc.find("bg/holds",this.node),i=59*t.scaleX,n=e-(t.x-t.width*t.scaleX/2+cc.view.getVisibleSize().width/2);return n<0&&(n=0),n>=this.gameData.myPai.length*i&&(n=this.gameData.myPai.length*i),Math.floor(n/i)},onReadyBtnClick:function(){cc.global.util.playSound_buttonClick(),cc.find("bg/ready",this.node).active=!1,cc.global.net.send("pdk_gameReadyEvent",{room_no:cc.global.room._roomData.roomNo,account:cc.global.util.userinfo.account,pdk:cc.global.room._roomData.cPai}),cc.global.room._roomData.cPai=[];for(var e=this.node.getChildByName("New Node"),t=e.getChildByName("mask").getChildByName("New Layout"),i=0;i<t.children.length;i++)t.children[i].opacity=255,t.children[i].getComponent(cc.Button).interactable=!0;var n=e.getChildByName("mask").getChildByName("holds");for(i=0;i<n.children.length;i++)n.children[i].getComponent(cc.Sprite).spriteFrame=this.bigCardAtlas.getSpriteFrame("0-0")},pdkGameReadyEventPush:function(e){if(1==e.code){for(var t=cc.global.room._roomData.users,i=0;i<t.length;i++)e.index==t[i].index&&(t[i].userStatus=n.PdkConstant.USER_STATUS_READY,cc.find("bg/player"+this.getIndex(e.index)+"/ready",this.node).active=!0);e.index==this.gameData.myIndex&&this.initDealView(!1)}else cc.global.util.tipMsg(e.msg)},doDealAnimation:function(){for(var e=this,t=cc.find("bg/holds",this.node),i=0;i<t.children.length;i++)t.children[i].y=0,t.children[i].color=this.unselectedColor,t.children[i].getComponent(cc.Sprite).spriteFrame=this.bigCardAtlas.getSpriteFrame("0-0"),t.children[i].active=i<this.gameData.myPai.length;t.getComponent(cc.Layout).spacingX=-164,this.playSound("Sounds/sss/other/GAME_SHUFFLE");for(var n=cc.tween(t.getComponent(cc.Layout)).to(.4,{spacingX:-105}).to(.2,{spacingX:-144}).to(.2,{spacingX:-105}),o=cc.tween(t.getComponent(cc.Layout)),a=function(t){o.then(cc.tween().delay(.05).call(function(){var i=t+1;cc.find("bg/player1/paishu_card/paishu",e.node).getComponent(cc.Sprite).spriteFrame=e.cardNumAtlas.getSpriteFrame("card_"+i),cc.find("bg/player1/paishu_card",e.node).active=!0,cc.find("bg/player2/paishu_card/paishu",e.node).getComponent(cc.Sprite).spriteFrame=e.cardNumAtlas.getSpriteFrame("card_"+i),cc.find("bg/player2/paishu_card",e.node).active=!0}))},c=0;c<this.gameData.myPai.length;c++)a(c);cc.tween(t.getComponent(cc.Layout)).parallel(n,o).call(function(){e.refreshGameData()}).delay(.2).call(function(){e.doFirstPlayerAction()}).start()},doFirstPlayerAction:function(){var e=this,t=cc.find("bg/card_3",this.node),i=t.x,n=t.y,o=this.getIndex(this.gameData.focusIndex),a=this.getPlayerRealPosition(this.gameData.focusIndex),c=1==o?90:2==o?-90:0;cc.tween(t).call(function(){t.active=!0}).to(.3,{rotation:c}).to(.5,{position:a}).call(function(){t.active=!1,t.x=i,t.y=n,t.rotation=0,e.gameTimer=cc.global.util.mySetInterval(function(){e.refreshGameTimer()},1e3),e.resetGame(!1)}).start()},onShowNodeClick:function(e,t){e&&cc.global.util.playSound_buttonClick(),"CommonWordsAndExpressions"==t&&this.onChangeMsgTabClick(),"config"==t&&this.hideOptionNode(null),cc.find("bg/"+t,this.node).active=!0},onHideNodeClick:function(e,t){e&&cc.global.util.playSound_buttonClick(),cc.find("bg/"+t,this.node).active=!1},onCloseBtnClick:function(e,t){cc.global.util.playSound_buttonClick(),this.onHideNodeClick(null,"config"),cc.global.net.send("pdk_closeRoomEvent",{room_no:cc.global.room._roomData.roomNo,account:cc.global.util.userinfo.account,type:t})},pdkCloseRoomEventPush:function(e){if(1==e.type){cc.find("bg/dissolutionApplication",this.node).active=!0,cc.find("bg/dissolutionApplication/hint",this.node).getComponent(cc.Label).string=e.jieSanTime+"\u79d2\u540e\u623f\u95f4\u5c06\u81ea\u52a8\u89e3\u6563";for(var t=cc.find("bg/dissolutionApplication/users",this.node),i=0;i<t.children.length;i++)i<e.array.length?(t.children[i].getComponent(cc.Label).string=(1==e.array[i].type?"[\u5df2\u540c\u610f]":"[\u5f85\u786e\u8ba4]")+e.array[i].name,t.children[i].active=!0,e.array[i].index==this.gameData.myIndex&&(cc.find("bg/dissolutionApplication/btn",this.node).active=1!=e.array[i].type)):t.children[i].active=!1}else-1==e.type?(cc.find("bg/tips/label",this.node).getComponent(cc.Label).string=e.msg,this.onHideNodeClick(null,"dissolutionApplication"),this.onShowNodeClick(null,"tips")):2==e.type&&(null!=this.gameTimer&&clearInterval(this.gameTimer),this.onHideNodeClick(null,"dissolutionApplication"),this.showExitTip(e.msg?e.msg:"\u623f\u95f4\u5df2\u89e3\u6563"))},onExitBtnClick:function(e){cc.global.util.playSound_buttonClick(),cc.global.net.send("pdk_exitRoomeEvent",{room_no:cc.global.room._roomData.roomNo,account:cc.global.util.userinfo.account})},pdkExitRoomeEventPush:function(e){if(0!=e.code){if(1==e.code){if(e.index==this.gameData.myIndex||2==e.type)return void cc.global.game.backHall();for(var t=cc.global.room._roomData.users,i=-1,n=0;n<t.length;n++)if(e.index==t[n].index){i=n;break}-1!=i&&(cc.global.room._roomData.users.remove(i),cc.find("bg/player"+this.getIndex(e.index),this.node).active=!1)}}else cc.global.util.tipMsg(e.msg)},onGameTipClick:function(e){cc.global.util.playSound_buttonClick();for(var t=cc.global.room._roomData.gameData,i=0;i<t.length;i++)this.gameData.myIndex==t[i].index&&t[i].trusteeStatus&&this.onTrusteeBtnClick(null,0);cc.global.net.send("pdk_gameTipEvent",{room_no:cc.global.room._roomData.roomNo,account:cc.global.util.userinfo.account,count:this.gameData.tipCount})},pdkGameTipEventPush:function(e){if(1==e.code){this.playSound("Sounds/sss/other/OUT_CARD"),this.gameData.tipCount++;for(var t=cc.find("bg/holds",this.node),i=0;i<t.children.length;i++){var o=e.data.cardList.hasVal(t.children[i].m_cardName)&&t.children[i].active?n.PdkConstant.SELECTED_CARD_Y:0,a=e.data.cardList.hasVal(t.children[i].m_cardName)&&t.children[i].active?this.selectedColor:this.unselectedColor;cc.tween(t.children[i]).to(.05,{y:o,color:a}).start()}}},onGameEventBtnClick:function(e){cc.global.util.playSound_buttonClick();for(var t=new Array,i=cc.find("bg/holds",this.node),o=0;o<i.children.length;o++)i.children[o].y==n.PdkConstant.SELECTED_CARD_Y&&i.children[o].active&&(t.push(i.children[o].m_cardName),i.children[o].y=0,i.children[o].color=this.unselectedColor);0!=t.length?(cc.find("bg/btn",this.node).active=!1,cc.global.net.send("pdk_gameEvent",{room_no:cc.global.room._roomData.roomNo,account:cc.global.util.userinfo.account,cardList:t}),this.startTouch=null,this.endTouch=null):cc.global.util.tipMsg("\u6240\u9009\u724c\u578b\u4e0d\u7b26\u5408\u89c4\u8303")},pdkGameEventPush:function(e){if(cc.global.util.pdkGameEventCache&&(cc.global.util.pdkGameEventCache=null),1==e.code){cc.global.room._roomData.gameData=e.data.gameData,cc.global.room._roomData.gameStatus=e.data.gameStatus,cc.global.room._roomData.gameIndex=e.data.gameIndex,cc.global.room._roomData.multiple=e.data.multiple;for(var t=e.data.gameData,i=0;i<t.length;i++)if(this.gameData.myIndex==t[i].index){this.gameData.myPai=t[i].pai;break}this.setGameData(e.data),0==e.data.cardProcessNum?(this.initDealView(!0),this.doDealAnimation()):(this.resetGame(!0),this.checkBellAction())}else cc.global.util.tipMsg(e.msg),cc.find("bg/btn",this.node).active=!0},checkBellAction:function(){var e,t=this;this.gameData.isLastPlayCard&&-1!=this.gameData.lastPlayIndex&&function(){for(var i=cc.global.room._roomData.gameData,n=function(n){if(i[n].index==t.gameData.lastPlayIndex){if(1==i[n].cardNum||2==i[n].cardNum){var o=t.getIndex(t.gameData.lastPlayIndex),a=cc.find("bg/player"+o,t.node);a.getChildByName("bell").active=!0,a.getChildByName("bell").getComponent(cc.Animation).play(),e=t,cc.global.util.mySetTimeout(function(){e.playSound("Sounds/PDKgame/last"+i[n].cardNum+e.genders[e.gameData.lastPlayIndex])},1e3)}return"break"}},o=0;o<i.length;o++){if("break"===n(o))break}}()},initDealView:function(e){cc.find("bg/gameover",this.node).active=!1,cc.find("bg/summary",this.node).active=!1,null!=this.summaryTimer&&clearInterval(this.summaryTimer),cc.find("bg/btn",this.node).active=!1,cc.find("bg/tuoguan",this.node).active=!1;var t=cc.find("bg/holds",this.node);t.active=!0,cc.find("bg/top/game_count",this.node).getComponent(cc.Label).string="\u7b2c"+cc.global.room._roomData.gameIndex+"/"+cc.global.room._roomData.gameCount+"\u5c40";for(var i=0;i<t.children.length;i++)t.children[i].y=0,t.children[i].color=this.unselectedColor,t.children[i].active=!1;for(var n=0;n<3;n++){e&&(cc.find("bg/player"+n+"/ready",this.node).active=!1),cc.find("bg/player"+n+"/pass",this.node).active=!1,cc.find("bg/player"+n+"/score_win",this.node).opacity=0,cc.find("bg/player"+n+"/score_lose",this.node).opacity=0;for(var o=cc.find("bg/player"+n+"/folds",this.node),a=0;a<o.children.length;a++)o.children[a].active=!1}},onReconnectBtnClick:function(e){cc.global.util.playSound_buttonClick(),cc.global.util.showAlert("\u6b63\u5728\u52a0\u8f7d"),cc.global.net.send("pdk_reconnectGameEvent",{room_no:cc.global.room._roomData.roomNo,account:cc.global.util.userinfo.account,uuid:cc.global.util.userinfo.uuid})},pdkReconnectGameEventPush:function(e){cc.global.util.closeAlert(),this.hideRefreshTip(),1==e.code?(this.gameData=new Object,this.gameData.myIndex=e.data.myIndex,this.setGameData(e.data),cc.global.room._roomData=e.data,this.gameData.limitTime=cc.global.room._roomData.playerTime,this.initView(),this.refreshUser(),this.resetGame(!1)):cc.global.game.backHall()},onTrusteeBtnClick:function(e,t){cc.global.util.playSound_buttonClick(),cc.find("bg/tuoguan",this.node).active=!1,cc.global.net.send("pdk_gameTrusteeEvent",{room_no:cc.global.room._roomData.roomNo,account:cc.global.util.userinfo.account,isTrustee:1==t})},pdkGameTrusteeEventPush:function(e){for(var t=cc.global.room._roomData.gameData,i=0;i<t.length;i++)e.index==t[i].index&&(t[i].trusteeStatus=e.isTrustee,cc.find("bg/player"+this.getIndex(e.index)+"/dongh",this.node).active=t[i].trusteeStatus)},pdkSettleAccountsPush:function(e){var t=this;if(cc.global.room._roomData.gameStatus,e.gameStatus,this.onHideNodeClick(null,"dissolutionApplication"),null!=this.gameTimer&&clearInterval(this.gameTimer),-2==e.isClose)return this.gameData.finalSummaryData=e.finalSummaryData,void this.doFinalSummary();this.gameData.lastOperateIndex=e.lastOperateIndex,this.gameData.lastCardList=e.lastCardList,this.gameData.lastCardType=e.lastCardType,this.doGameEventAnimation(!0),cc.find("bg/holds",this.node).active=!1,cc.find("bg/btn",this.node).active=!1,cc.find("bg/tuoguan",this.node).active=!1;for(var i=0;i<3;i++)cc.find("bg/player"+i,this.node).getChildByName("timer").active=!1,cc.find("bg/player"+i,this.node).getChildByName("bell").active=!1,cc.find("bg/player"+i,this.node).getChildByName("bell").getComponent(cc.Animation).stop();this.drawPlayerFoldsByIndex(this.gameData.lastOperateIndex,this.gameData.lastCardList);for(var n=e.summaryData.array,o=!1,a=!1,c=0;c<n.length;c++)if(n[c].isSpring&&n[c].index==this.gameData.myIndex){o=!0;break}for(var s=0;s<n.length;s++)if(n[s].score>0){a=n[s].index==this.gameData.myIndex,cc.find("bg/player"+this.getIndex(n[s].index)+"/paishu_card/paishu",this.node).getComponent(cc.Sprite).spriteFrame=this.cardNumAtlas.getSpriteFrame("card_0");break}a?this.playSound("Sounds/sss/other/win"):this.playSound("Sounds/sss/other/lose"),o?(cc.find("bg/chuntian",this.node).getComponent(cc.Animation).play(),cc.global.util.mySetTimeout(function(){t.doSummaryWithNoFrm(e)},2500)):cc.global.util.mySetTimeout(function(){t.doSummaryWithNoFrm(e)},1e3)},doSummaryWithNoFrm:function(e){var t=this;this.initDealView();var i=cc.find("bg/summary",this.node);cc.find("bg/summary/btn",this.node).active=!1,i.getChildByName("timer").active=!1;for(var o=0;o<2;o++){cc.find("bg/summary/bg"+o,this.node).active=!1;for(var a=cc.find("bg/summary/bg"+o,this.node).getChildByName("folds"),c=0;c<a.children.length;c++)a.children[c].active=!1;a.active=!0}for(var s=e.summaryData.array,l=0,r=0;r<s.length;r++){var g=cc.find("bg/player"+this.getIndex(s[r].index),this.node).getChildByName("score_lose");if(s[r].score>0&&(g=cc.find("bg/player"+this.getIndex(s[r].index),this.node).getChildByName("score_win")),g.getComponent(cc.Label).string=s[r].score>0?"+"+s[r].score:s[r].score,g.x=g.parent.getChildByName("head_frame").x,g.y=g.parent.getChildByName("head_frame").y-100,cc.tween(g).by(.2,{opacity:255,y:100}).start(),s[r].pai.length>0){for(var h=i.getChildByName("bg"+l,this.node).getChildByName("folds"),d=0;d<s[r].pai.length;d++)h.children[d].getComponent(cc.Sprite).spriteFrame=this.getCardAtlasByName(s[r].pai[d],this.middleCardAtlas),h.children[d].active=!0;s[r].name&&(i.getChildByName("bg"+l,this.node).getChildByName("name").getComponent(cc.Label).string=s[r].name),h.parent.active=!0,l++}s[r].scoreAll&&(cc.find("bg/player"+this.getIndex(s[r].index)+"/score/label",this.node).getComponent(cc.Label).string=s[r].scoreAll)}i.active=!0,cc.tween(i).call(function(){i.y=i.y-50,i.opacity=0}).by(.2,{y:50,opacity:255}).call(function(){if(e.gameStatus==n.PdkConstant.GAME_STATUS_SUMMARY){cc.find("bg/summary/btn",t.node).active=!0,cc.find("bg/summary/btn/btn_again",t.node).active=!0,i.getChildByName("timer").active=!0,i.getChildByName("timer").getChildByName("num").getComponent(cc.Label).string=5,i.getChildByName("timer").getComponent(cc.ProgressBar).progress=1;var o=t;t.summaryTimer=cc.global.util.mySetInterval(function(){var e=cc.find("bg/summary/timer/num",o.node).getComponent(cc.Label).string;parseInt(e)<=0||(cc.find("bg/summary/timer/num",o.node).getComponent(cc.Label).string=e-1,cc.find("bg/summary/timer",o.node).getComponent(cc.ProgressBar).progress=(e-1)/5)},1e3)}}).start(),e.gameStatus==n.PdkConstant.GAME_STATUS_FINAL_SUMMARY&&(this.gameData.finalSummaryData=e.finalSummaryData,cc.global.util.mySetTimeout(function(){t.doFinalSummary()},2e3))},getPlayerRealPosition:function(e){var t=this.getIndex(e),i=cc.find("bg/player"+t+"/head_frame",this.node),n=i.x+i.parent.x,o=i.y+i.parent.y;return cc.v2(n,o)},doSummary:function(e){for(var t=this,i=cc.find("bg/gameover",this.node),o=0;o<3;o++){i.getChildByName("player"+o).active=!1,i.getChildByName("player"+o).getChildByName("bomb2").active=!1,i.getChildByName("player"+o).getChildByName("bomb4").active=!1,i.getChildByName("player"+o).getChildByName("bomb8").active=!1,i.getChildByName("player"+o).getChildByName("bomb16").active=!1,i.getChildByName("player"+o).getChildByName("closedCount").active=!1,i.getChildByName("player"+o).getChildByName("winner").active=!1,i.getChildByName("player"+o).getChildByName("closed").active=!1,i.getChildByName("player"+o).getChildByName("score_win").active=!1,i.getChildByName("player"+o).getChildByName("score_lose").active=!1;for(var a=i.getChildByName("player"+o).getChildByName("folds"),c=0;c<a.children.length;c++)a.children[c].active=!1;a.active=!1;var s=cc.find("bg/player"+o+"/folds",this.node);cc.find("bg/player"+o,this.node).getChildByName("pass").active=!1;for(var l=0;l<s.children.length;l++)s.children[l].active=!1}for(var r=e.summaryData.array,g=0;g<r.length;g++){for(var h=i.getChildByName("player"+this.getIndex(r[g].index)),d=h.getChildByName("folds"),u=0;u<d.children.length;u++)u<r[g].pai.length&&(d.children[u].getComponent(cc.Sprite).spriteFrame=this.getCardAtlasByName(r[g].pai[u],this.middleCardAtlas),d.children[u].active=!0);d.active=!0,h.getChildByName("leave").getComponent(cc.Label).string=r[g].pai.length,r[g].score>0?(h.getChildByName("score_win").getComponent(cc.Label).string=r[g].score,h.getChildByName("score_win").active=!0):(h.getChildByName("score_lose").getComponent(cc.Label).string=r[g].score,h.getChildByName("score_lose").active=!0),h.getChildByName("closedCount").active=r[g].isSpring,h.getChildByName("closed").active=r[g].isSpring,h.getChildByName("winner").active=r[g].score>0,2!=r[g].multiple&&4!=r[g].multiple&&8!=r[g].multiple&&16!=r[g].multiple||(h.getChildByName("bomb"+r[g].multiple).active=!0),h.active=!0,r[g].scoreAll&&(cc.find("bg/player"+this.getIndex(r[g].index)+"/score/label",this.node).getComponent(cc.Label).string=r[g].scoreAll)}cc.find("bg/gameover/btn",this.node).active=e.gameStatus==n.PdkConstant.GAME_STATUS_SUMMARY,i.active=!0,e.gameStatus==n.PdkConstant.GAME_STATUS_FINAL_SUMMARY&&(this.gameData.finalSummaryData=e.finalSummaryData,cc.global.util.mySetTimeout(function(){t.doFinalSummary()},2e3))},doFinalSummary:function(){for(var e=cc.find("bg/gameover2",this.node),t=this.gameData.finalSummaryData,i=cc.find("bg/gameover2/con",this.node),n=0;n<i.children.length;n++)n<t.length?(cc.global.util.setHeadimg(i.children[n].getChildByName("head_mask").getChildByName("head"),t[n].headimg),i.children[n].getChildByName("con").getChildByName("winNum").getComponent(cc.Label).string=t[n].winNum,i.children[n].getChildByName("con").getChildByName("score").getComponent(cc.Label).string=t[n].score,i.children[n].getChildByName("name").getComponent(cc.Label).string=t[n].name,i.children[n].getChildByName("id").active=!1,i.children[n].getChildByName("fangzhu").active=!1,i.children[n].getChildByName("winner").active=!1,i.children[n].active=!0):i.children[n].active=!1;e.active=!0},onMusicAndSoundClick:function(e,t){cc.global.util.playSound_buttonClick(),"music"==t&&(cc.global.util.setting.musicOn=0==cc.global.util.setting.musicOn?1:0),"sound"==t&&(cc.global.util.setting.soundOn=0==cc.global.util.setting.soundOn?1:0),this.initMusicAndSound()},onChangeSliderClick:function(e,t){e.node.children[0].width=400*e.progress,"music"==t&&(cc.global.util.setting.music=e.progress),"sound"==t&&(cc.global.util.setting.sound=e.progress),this.initMusicAndSound()},onChangeMsgTabClick:function(){cc.global.util.playSound_buttonClick();for(var e=-1,t=cc.find("bg/CommonWordsAndExpressions/bg/con/bg/tab",this.node),i=0;i<t.childrenCount;i++)if(t.children[i].getComponent(cc.Toggle).isChecked){e=cc.global.util.getNodeIndex(t.children[i].name,"toggle");break}cc.find("bg/CommonWordsAndExpressions/bg/con/bg/msgTab",this.node).active=1==e,cc.find("bg/CommonWordsAndExpressions/bg/con/bg/browTab",this.node).active=2==e},sendMsg:function(e){cc.global.util.playSound_buttonClick();var t=parseInt(e);cc.find("bg/CommonWordsAndExpressions",this.node).active=!1;var i=new Object;i.room_no=cc.global.room._roomData.roomNo,i.account=cc.global.util.userinfo.account,i.gid=21,t<100?(i.type=1,i.data=t):(i.type=2,i.data=t%100),cc.global.net.send("sendMsgEvent",i)},showMsg:function(e){var t=cc.find("bg/player"+this.getIndex(e.user),this.node),i=e.type,n=e.data;if(2==i){var o=t.getChildByName("brow");o.getComponent(cc.Sprite).spriteFrame=this.browAtlas.getSpriteFrame("QZMJ_chat_emoj_"+n),o.getComponent(cc.Animation).play()}else if(1==i){var a=t.getChildByName("chat"),c=cc.find("bg/CommonWordsAndExpressions/bg/con/bg/msgTab/scroll/view/content",this.node).children[n].getComponent(cc.Label).string;a.getChildByName("label").getComponent(cc.Label).string=c,a.getComponent(cc.Animation).play(),this.playSound("Sounds/msgVoice/voice_w_"+n)}},onPersonInfoClick:function(e,t){cc.global.util.playSound_buttonClick();var i=cc.global.util.circleUserinfo,n=!1;i&&(n="1"==i.is_admin||"1"==i.user_role),this.onShowNodeClick(null,"personal_info"+t);for(var o=cc.global.room._roomData.users,a=0;a<o.length;a++){if(this.getIndex(o[a].index)==t){cc.global.util.setHeadimg(cc.find("bg/personal_info"+t+"/bg/head/sp",this.node),o[a].headimg),cc.find("bg/personal_info"+t+"/bg/name",this.node).getComponent(cc.Label).string=o[a].name,cc.find("bg/personal_info"+t+"/bg/id/bg",this.node).getComponent(cc.Label).string=n?o[a].account:cc.global.util.processId(o[a].account);break}}},onAgainBtnClick:function(){if(cc.global.util.playSound_buttonClick(),8==cc.global.room._roomData.roomType||9==cc.global.room._roomData.roomType){if(!cc.global.util.circleUserinfo)return void cc.global.util.tipMsg("\u52a0\u5165\u5931\u8d25\uff0c\u8bf7\u8fd4\u56de\u5927\u5385\u540e\u91cd\u8bd5");cc.global.util.showAlert("\u6b63\u5728\u5feb\u901f\u52a0\u5165\u6e38\u620f"),cc.global.net.send("joinRoom",{room_no:cc.global.room._roomData.room_no||cc.global.room._roomData.roomNo,uuid:cc.global.util.userinfo.uuid,account:cc.global.util.userinfo.account,location:cc.global.util.LongitudeAndLatitude})}else if(10==cc.global.room._roomData.roomType){if(cc.global.game.backHall(),!cc.global.util.teaUserinfo)return void cc.global.util.tipMsg("\u52a0\u5165\u5931\u8d25\uff0c\u8bf7\u8fd4\u56de\u5927\u5385\u540e\u91cd\u8bd5");cc.global.net.send("tea_quickJoinEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,uuid:cc.global.util.userinfo.uuid,platform:cc.global.util.gameinfo.platform,teaInfoCode:cc.global.util.teaUserinfo.teaInfoCode,account:cc.global.util.userinfo.account,gid:21})}},teaQuickJoinEventPush:function(e){cc.global.util.tipMsg(e.msg),cc.global.util.closeAlert()},shwoRoomInfo:function(e){cc.global.util.playSound_buttonClick(),cc.find("roomInfoTip/bg/info",this.node).getComponent(cc.Label).string=cc.global.room._roomData.roomInfo?cc.global.room._roomData.roomInfo:"",cc.find("roomInfoTip",this.node).active=!0},hideRoomInfo:function(e){cc.global.util.playSound_buttonClick(),cc.find("roomInfoTip",this.node).active=!1},quickEntryRoomCircleEventPush:function(e){cc.global.util.closeAlert(),cc.global.util.tipMsg(e.msg)},initMusicAndSound:function(){cc.find("bg/config/tanchuang_bg1/shezhi_bg/music",this.node).getComponent(cc.Sprite).spriteFrame=this.MusicSprite[cc.global.util.setting.musicOn],cc.find("bg/config/tanchuang_bg1/shezhi_bg/sound",this.node).getComponent(cc.Sprite).spriteFrame=this.MusicSprite[cc.global.util.setting.soundOn],cc.find("bg/config/tanchuang_bg1/shezhi_bg/yinliang_music",this.node).getComponent(cc.Slider).progress=cc.global.util.setting.music,cc.find("bg/config/tanchuang_bg1/shezhi_bg/yinliang_music/yinliang_press",this.node).width=400*cc.global.util.setting.music,cc.find("bg/config/tanchuang_bg1/shezhi_bg/yinliang_sound",this.node).getComponent(cc.Slider).progress=cc.global.util.setting.sound,cc.find("bg/config/tanchuang_bg1/shezhi_bg/yinliang_sound/yinliang_press",this.node).width=400*cc.global.util.setting.sound,this.node.getChildByName("music").getComponent(cc.AudioSource).volume=cc.global.util.setting.music,this.node.getChildByName("music").getComponent(cc.AudioSource).mute=0==cc.global.util.setting.musicOn},playMusic:function(){var e=this.node.getChildByName("music").getComponent(cc.AudioSource);e.volume=cc.global.util.setting.music,e.mute=0==cc.global.util.setting.musicOn,e.loop=!0,e.play()},getIndex:function(e){if(e<0)return e;var t=3;return cc.global.room._roomData.playerCount&&(t=cc.global.room._roomData.playerCount),(e-this.gameData.myIndex+t)%t},playSound:function(e){cc.loader.loadRes(e,function(e,t){e||1==cc.global.util.setting.soundOn&&cc.global.util.setting.sound>0&&cc.audioEngine.play(t,!1,cc.global.util.setting.sound)})},showRefreshTip:function(e){e&&cc.global.util.playSound_buttonClick(),cc.find("refreshTip",this.node).active=!0},hideRefreshTip:function(e){e&&cc.global.util.playSound_buttonClick(),cc.find("refreshTip",this.node).active=!1},showOptionNode:function(){cc.global.util.playSound_buttonClick();var e=this.node.getChildByName("option_node");e.x=this.optionNodeX+300,e.opacity=0,e.active=!0,cc.tween(e).by(.2,{x:-300,opacity:255}).start()},hideOptionNode:function(e){var t=this;e&&cc.global.util.playSound_buttonClick();var i=this.node.getChildByName("option_node"),n=this.optionNodeX+300;cc.tween(i).to(.2,{x:n,opacity:0}).call(function(){i.x=t.optionNodeX,i.opacity=255,i.active=!1}).start()},showWanfa:function(){this.hideOptionNode(null),cc.global.pop_mgr.showFrm({name:"frm_wanfa",customData:{gid:15}})},showNormalTip:function(e){cc.find("normalTip/bg/label",this.node).getComponent(cc.Label).string=e,cc.find("normalTip",this.node).active=!0},onNormalTipClick:function(){cc.global.util.playSound_buttonClick(),cc.find("normalTip",this.node).active=!1},showExitTip:function(e){cc.find("exitTip/bg/label",this.node).getComponent(cc.Label).string=e,cc.find("exitTip",this.node).active=!0},onExitTipClick:function(){cc.global.util.playSound_buttonClick(),cc.global.game.backHall()},getCardAtlasByName:function(e,t){var i=e.split("-"),n="";return 1==i[0]?n+=4:2==i[0]?n+=3:3==i[0]?n+=2:4==i[0]&&(n+=1),n+="-",14==i[1]?n+=1:15==i[1]?n+=2:n+=i[1],t.getSpriteFrame(n)},btnShareClick0:function(){cc.find("bg/menuButton/btn_more",this.node).getComponent("MenuList").hideMoreMenu(),cc.global.http.sendRequest("/zagame/global/wxShare.json",{gid:15,type:1,room_no:cc.global.room._roomData.room_no,visitCode:"",platform:cc.global.util.gameinfo.platform},function(e){if(console.log(e),e){if(1==e.code&&null!=e.data){var t={title:e.data.title,text:e.data.text,url:e.data.url,mediaType:"2",shareTo:"0",imageUrl:e.data.imagePath,thumbImage:"Icon-50.png",thumbSize:"64"};cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org.cocos2dx.javascript.AppActivity","showShare","(Ljava/lang/String;)V",JSON.stringify(t)):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("JsUseOcTool","showShare:",JSON.stringify(t))}else cc.global.util.tipMsg(e.msg);cc.sys.os!=cc.sys.OS_ANDROID&&cc.sys.os!=cc.sys.OS_IOS&&cc.global.util.tipMsg("\u6682\u4e0d\u652f\u6301\u8be5\u5e73\u53f0")}else cc.global.util.tipMsg(cc.global.util.httpErr)})},screenShot:function(){cc.find("bg/gameover2/screenShot_bg",this.node).active=!0;var e=new cc.Node;e.parent=cc.director.getScene().getChildByName("Canvas");var t=e.addComponent(cc.Camera);t.cullingMask=4294967295;var i=new cc.RenderTexture,n=cc.game._renderContext;i.initWithSize(cc.visibleRect.width,cc.visibleRect.height,n.STENCIL_INDEX8),i.setFlipY(!0),t.targetTexture=i,t.render();for(var o=i.readPixels(),a=i.width,c=i.height,s=new Uint8Array(a*c*4),l=4*a,r=0;r<c;r++)for(var g=(c-1-r)*a*4,h=r*a*4,d=0;d<l;d++)s[h+d]=o[g+d];cc.global.util.tipMsg("\u8be5\u5e73\u53f0\u4e0d\u652f\u6301\u622a\u5c4f\u5206\u4eab!"),cc.find("bg/gameover2/screenShot_bg",this.node).active=!1},onShareResult:function(e,t){},update:function(e){var t=cc.global.util.getCurrentTime();this.currentTime!=t&&(cc.find("bg/top/current_time",this.node).getComponent(cc.Label).string=t)},onDestroy:function(){null!=this.gameTimer&&clearInterval(this.gameTimer),null!=this.summaryTimer&&clearInterval(this.summaryTimer),cc.global.game._dispatchEventHandel=null,this.removeObserver()},showNode:function(e,t){if("on"==t&&(this.node.getChildByName("New Node").active=!0),"off"==t&&(this.node.getChildByName("New Node").active=!1),"clear"==t){cc.global.room._roomData.cPai=[];for(var i=this.node.getChildByName("New Node"),n=i.getChildByName("mask").getChildByName("New Layout"),o=0;o<n.children.length;o++)n.children[o].opacity=255,n.children[o].getComponent(cc.Button).interactable=!0;var a=i.getChildByName("mask").getChildByName("holds");for(o=0;o<a.children.length;o++)a.children[o].getComponent(cc.Sprite).spriteFrame=this.bigCardAtlas.getSpriteFrame("0-0");this.node.getChildByName("New Node").active=!1}},changeSprite:function(e,t){if(this.addArray(t)){var i=e.target;i.opacity=100,i.getComponent(cc.Button).interactable=!1}},addArray:function(e){cc.global.room._roomData.cPai||(cc.global.room._roomData.cPai=[]);var t=cc.global.room._roomData.cPai.length;if(16==t)return!1;switch(cc.global.room._roomData.cPai.push(e),cc.log("==================================="),cc.log(cc.global.room._roomData.cPai),e){case"1-14":e="1-1";break;case"2-14":e="2-1";break;case"3-14":e="3-1";break;case"1-15":e="1-2"}return this.node.getChildByName("New Node").getChildByName("mask").getChildByName("holds").children[t].getComponent(cc.Sprite).spriteFrame=this.bigCardAtlas.getSpriteFrame(e),!0}}),cc._RF.pop()},{"./global/NotificationNames":"NotificationNames","./global/PdkConstant":"PdkConstant"}],paixingdefine:[function(e,t,i){"use strict";cc._RF.push(t,"814a89WCAlFWr33ZoLjCi4c","paixingdefine"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},px:function(e){var t=this.changeTocard(e);t=this.getOrder(t);for(var i=new Array,n=0;n<t.length;n++)i.push(this.getValue(t[n]));var o=this.getListByNum(i),a=this.getids(t,o[1]),c=this.getids(t,o[2]),s=this.getidshunzi(t),l=this.getidtonghua(t),r=this.getidtonghuashun(t),g=this.getids(t,o[3]),h=this.getids(t,o[4]),d=[];d=this.getids32(a,c,d),d=this.getids32(c,c,d),d=this.getids32(a,g,d),d=this.getids32(c,g,d),d=this.getids32(g,g,d),d=this.getids32(a,h,d),d=this.getids32(c,h,d),d=this.getids32(g,h,d),d=this.getids32(h,h,d),a=this.ngetids4(2,a,c),c=this.ngetids4(3,c,g),a=this.ngetids4(2,a,g),g=this.ngetids4(4,g,h),c=this.ngetids4(3,c,h),a=this.ngetids4(2,a,h);var u=[];u=this.ngetids4(5,u,h);var m=this.getc22(a),p=new Object;return p.c2=this.exchangeCard(this.changeToname(a)),p.c22=this.exchangeCard(this.changeToname(m)),p.c3=this.exchangeCard(this.changeToname(c)),p.c12345=this.exchangeCard(this.changeToname(s)),p.c11111=this.exchangeCard(this.changeToname(l)),p.c32=this.changeToname(d),p.c4=this.exchangeCard(this.changeToname(g)),p.c5=this.exchangeCard(this.changeToname(r)),p.c6=this.exchangeCard(this.changeToname(u)),p},exchangeCard:function(e){var t=new Array;if(e.length>0)for(var i=e.length-1;i>=0;i--)t.push(e[i]);return t},changeTocard:function(e){for(var t=new Array,i=0;i<e.length;i++)t.push(this.name_To_card(e[i]));return t},changeToname:function(e){for(var t=new Array,i=0;i<e.length;i++){for(var n=e[i],o=new Array,a=0;a<n.length;a++)o.push(this.card_To_name(n[a]));t.push(o)}return t},getids:function(e,t){for(var i=new Array,n=0;n<t.length;n++){for(var o=new Array,a=0;a<e.length;a++){(1==t[n]?14:t[n])==this.getValue(e[a])&&o.push(e[a])}i.push(o)}return i},ngetids4:function(e,t,i){for(var n=t,o=i,a=o.length-1;a>=0;a--){for(var c=o[a],s=new Array,l=0;l<e;l++)s.push(c[l]);n.unshift(s)}return n},getids32:function(e,t,i){var n=i,o=e,a=t;if(o.length>0&&a.length>0)for(var c=a.length-1;c>=0;c--)for(var s=0;s<o.length;s++){var l=a[c],r=o[s],g=new Array;this.getValue(l[0])!=this.getValue(r[0])&&(g.push(l[0]),g.push(l[1]),g.push(l[2]),g.push(r[0]),g.push(r[1]),n.push(g))}return n},getc22:function(e){var t=e.length,i=new Array;if(t>1)for(var n=0;n<t-1;n++){for(var o=e[n],a=e[n+1],c=o.slice(0),s=0;s<a.length;s++)c.push(a[s]);i.push(c)}return i},getidhulu:function(e,t,i){var n=new Array;if(e.length>=5&&t.length>0&&i.length>0)for(var o=0;o<t.length;o++){for(var a=new Array,c=0;c<e.length;c++)t[o]==this.getValue(e[c])&&a.push(e[c]),i[0]==this.getValue(e[c])&&a.push(e[c]);n.push(a)}return n},getidtonghua:function(e){var t=new Array;if(e.length>=5){for(var i=new Array,n=new Array,o=new Array,a=new Array,c=new Array,s=0;s<e.length;s++)1==this.getColor(e[s])&&n.push(e[s]),2==this.getColor(e[s])&&o.push(e[s]),3==this.getColor(e[s])&&a.push(e[s]),4==this.getColor(e[s])&&c.push(e[s]);i.push(n),i.push(o),i.push(a),i.push(c);for(var l=0;l<i.length;l++){var r=i[l];if(r.length>=5){if(5>r.length||r.length<=0)return;var g=new Array;this.combine(0,5,r,t,g)}}}return t.reverse()},combine:function(e,t,i,n,o){if(1==t)for(var a=e;a<i.length;a++){o.push(i[a]);var c=(o+"").split(",");n.push(c),o.splice(o.length-1,1)}else{if(!(t>1))return;for(a=e;a<=i.length-t;a++)o.push(i[a]),this.combine(a+1,t-1,i,n,o),o.splice(o.length-1,1)}},getidshunzi:function(e){var t=new Array;if(e.length>=5){for(var i=new Array,n=0;n<e.length;n++){for(var o=0,a=0;a<i.length;a++)if(this.getValue(e[n])==this.getValue(i[a])){o++;break}0==o&&i.push(e[n])}if(i.length>=5)for(var c=i.length,s=0;s<=c-5;s++){var l=new Array,r=0;for(n=s;n<c;n++)r<5&&l.push(i[n]),r++;var g=this.getValue(l[0]);if(g-this.getValue(l[4])==4&&t.push(l),14==g&&14==this.getValue(i[0])&&2==this.getValue(i[c-1])&&5==this.getValue(i[c-4])){var h=new Array;h.push(i[0]),h.push(i[c-4]),h.push(i[c-3]),h.push(i[c-2]),h.push(i[c-1]),t.push(h)}}}for(var d=new Array,u=t.length-1;u>=0;u--)d.push(t[u]);return d},getidtonghuashun:function(e){var t=new Array;if(e.length>=5)for(var i=this.getidtonghua(e),n=0;n<i.length;n++)for(var o=this.getidshunzi(i[n]),a=0;a<o.length;a++)t.push(o[a]);return t},getValue:function(e){var t=parseInt(e.substring(2,e.length));return 1==t&&(t=14),t},getColor:function(e){return parseInt(e.substring(0,1))},getOrder:function(e){for(var t=e.length,i=0;i<t-1;i++)for(var n=0;n<t-i-1;n++){var o;if(this.getValue(e[n])<this.getValue(e[n+1]))o=e[n],e[n]=e[n+1],e[n+1]=o}return e},getListByNum:function(e){for(var t=new Array,i=new Array,n=new Array,o=new Array,a=new Array,c=new Array,s=2;s<15;s++){for(var l=0,r=0;r<e.length;r++)e[r]==s&&l++;1==l&&i.push(s),2==l&&n.push(s),3==l&&o.push(s),4==l&&a.push(s),l>=5&&c.push(s)}return t.push(i),t.push(n),t.push(o),t.push(a),t.push(c),t},card_To_name:function(e){var t=this.getColor(e),i=14==this.getValue(e)?1:this.getValue(e),n="";if(1==t)n=i;else if(2==t){n=i+20}else if(3==t){n=i+40}else if(4==t){n=i+60}else if(5==t){n=i+80}return n},name_To_card:function(e){var t=this.getName(e),i="";if(t<20)i="1-"+t;else if(t>20&&t<40){i="2-"+(t-20)}else if(t>40&&t<60){i="3-"+(t-40)}else if(t>60&&t<80){i="4-"+(t-60)}else if(t>80){i="5-"+(t-80)}return i},getName:function(e){return e}}),cc._RF.pop()},{}],pop_base:[function(e,t,i){"use strict";cc._RF.push(t,"06b48y8AZ5AoZ0c5rp9rmgJ","pop_base"),Object.defineProperty(i,"__esModule",{value:!0}),i.pop_base=void 0;var n=e("../../global/NotificationNames");i.pop_base=cc.Class({extends:cc.Component,properties:{},pop_onShow:function(){Notification.emit(n.NotificationNames.ON_POP_SHOW,{name:this.ops.name}),this.on_show()},pop_onHide:function(){Notification.emit(n.NotificationNames.ON_POP_HIDE,{name:this.ops.name}),this.on_hide()},hide:function(){cc.global.pop_mgr.closeFrm(this.ops)},onCloseClick:function(){this.ops&&this.ops.closeSound&&cc.global.util.playSound("Sounds/sound_hall_close"),this.hide()},showFrm:function(e,t){console.log("\u6253\u5f00\u5f39\u7a97:"+t),cc.global.pop_mgr.showFrm({name:t})},on_show:function(){},on_hide:function(){},onDestroy:function(){this.on_hide(!0)}});cc._RF.pop()},{"../../global/NotificationNames":"NotificationNames"}],pop_mgr:[function(e,t,i){"use strict";cc._RF.push(t,"db7b6iNukBLir2RPMVAQDUI","pop_mgr"),cc.Class({extends:cc.Component,properties:{frm_cache:{default:{}},frm_pool:{default:{}},max_pool_size:2},showFrm:function(e){var t=this;if(e&&e.name){var i={name:null,parentNode:cc.find("Canvas"),prefix:cc.global.util.PREFAB_DATING_FRM_URL,showAnim:!0,showSound:!0,closeAnim:!0,closeSound:!0,zIndex:cc.global.util.DATING_ZINDEX_FRM};for(var n in e)i[n]=e[n];e=i,this.loadFrmNode(e,function(i,n){if(i)if(n)i.active=!0;else{e.parentNode.addChild(i),i.zIndex=e.zIndex;var o=i.getChildByName("bg");e.showAnim?o&&(void 0===o.m_opacity&&(o.m_opacity=o.opacity),void 0===o.m_y&&(o.m_y=o.y),o.opacity=0,i.getComponent("pop_base").scheduleOnce(function(){o.y=o.m_y-500,o.runAction(cc.spawn(cc.fadeIn(.2),cc.moveTo(.1,o.x,o.m_y)))})):(void 0!==o.m_opacity&&(o.opacity=o.m_opacity),void 0!==o.m_y&&(o.y=o.m_y)),e.showSound&&cc.global.util.playSound_buttonClick(),t.frm_cache[e.name]||(t.frm_cache[e.name]=[]),t.frm_cache[e.name].push(i),i.getComponent("pop_base").ops=e,i.getComponent("pop_base").pop_onShow()}else console.log("\u627e\u4e0d\u5230\u5f39\u7a97\u8282\u70b9:"+e.name)})}else console.log("err: showFrm\u5931\u8d25,\u53c2\u6570\u5f02\u5e38")},loadFrmNode:function(e,t){var i=cc.find(e.name,e.parentNode);if(!i)return this.frm_pool[e.name]&&this.frm_pool[e.name].length>0?(i=this.frm_pool[e.name].pop(),void(t&&t(i))):void cc.global.util.loadPrefabObj(e.prefix+e.name,t);t&&t(i,!0)},closeFrm:function(e){var t=this;if(e&&e.name)if(this.frm_cache[e.name]&&this.frm_cache[e.name].length>0){var i=this.frm_cache[e.name].pop();this.showCloseAnim(i,function(){for(i.removeFromParent(!1),i.getComponent("pop_base").pop_onHide(),t.frm_pool[e.name]||(t.frm_pool[e.name]=[]);t.frm_pool[e.name].length>=t.max_pool_size&&t.frm_pool[e.name].length>0;){t.frm_pool.shift().destroy}t.frm_pool[e.name].push(i)},e.closeAnim)}else console.log("err: closeFrm\u5931\u8d25,\u7f13\u5b58\u4e2d\u627e\u4e0d\u5230\u8be5\u5f39\u7a97\u8282\u70b9");else console.log("err: closeFrm\u5931\u8d25,\u53c2\u6570\u5f02\u5e38")},showCloseAnim:function(e,t,i){if(i&&e&&e.active&&e.parent){var n=e.getChildByName("bg");if(n)return void 0===n.m_opacity&&(n.m_opacity=n.opacity),void 0===n.m_y&&(n.m_y=n.y),void n.runAction(cc.sequence(cc.spawn(cc.fadeOut(.05),cc.moveBy(.05,0,-500)),cc.callFunc(t,this)));t&&t()}else t&&t()}}),cc._RF.pop()},{}],preloadDating:[function(e,t,i){"use strict";cc._RF.push(t,"02d91OzKxpCHY9GBmmaLnvL","preloadDating"),cc.Class({extends:cc.Component,properties:{progress:cc.ProgressBar,progressLabel:cc.Label},onLoad:function(){this.progress.progress=0,cc.game.addPersistRootNode(this.node)},start:function(){var e=this;cc.director.preloadScene("dating");var t=this.progress.getComponent(cc.Animation);t.play(),t.on("stop",function(){e.node.active=!1})},update:function(e){this.progress.totalLength=this.progress.node.width,this.progress.node.children[0].x=this.progress.totalLength/-2}}),cc._RF.pop()},{}],room:[function(e,t,i){"use strict";cc._RF.push(t,"fd4b1bC6K1D54PL/N1m1D/n","room"),cc.Class({extends:cc.Component,properties:{_roomData:null,_isnext:!1},createConnect:function(e,t){var i=this;cc.global.net.connect(function(e){console.log("onConnectOK,"+e),t&&(4==cc.global.game.gid?cc.global.net.send("reconnectGame_SSS",{room_no:cc.global.room._roomData.room_no,account:cc.global.util.userinfo.account,uuid:cc.global.util.userinfo.uuid}):3==cc.global.game.gid?cc.global.net.send("reconnectGame",{room_no:cc.global.room._roomData.room_no,account:cc.global.util.userinfo.account,uuid:cc.global.util.userinfo.uuid}):15==cc.global.game.gid?cc.global.net.send("reconnectGame_PDK",{room_no:cc.global.room._roomData.room_no,account:cc.global.util.userinfo.account,uuid:cc.global.util.userinfo.uuid}):(cc.global.util.closeAlert(),cc.global.net.send("checkUser",{uid:cc.global.util.userinfo.id,account:cc.global.util.userinfo.account,uuid:cc.global.util.userinfo.uuid,gid:-1,location:cc.global.util.LongitudeAndLatitude})))},function(){console.log("\u94fe\u63a5\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5")},function(){console.log("\u6b63\u5728\u91cd\u65b0\u8fde\u63a5"),i.createConnect(e,!0)})},enterRoom:function(e,t,i){if(1==e.code)console.log("\u5efa\u7acb\u623f\u95f4,\u63a5\u6536\u53c2\u6570\u4e3a:"+JSON.stringify(e)),this.doEnter(e,t);else{console.log("msg:"+e.msg);var n=cc.Canvas.instance.node;n.getComponent("dating")||n.getComponent("circle")?(cc.global.util.tipMsg(e.msg),cc.global.util.closeAlert()):cc.director.loadScene("dating")}},doEnter:function(e,t){this._roomData=e.data,cc.global.game._dispatchEventHandel=null,cc.global.game._stopRepeate=!1,cc.global.util.loadTimer=Date.now();var i=cc.find("Canvas/gameNodes");if(i){cc.global.util.closeAlert(),i.zIndex=cc.global.util.DATING_ZINDEX_GAMENODE,i.active=!0;var n=i.getChildByName(t);n&&(n.active=!0)}cc.director.preloadScene(t,function(){cc.log("=================================================="+t),cc.director.loadScene(t)})},initHandle:function(){var e=this;cc.global.net.addHandler("enterRoomPush_NN",function(t){e.enterRoom(t,"main_hall_douniu",1)}),cc.global.net.addHandler("enterRoomPush",function(t){e.enterRoom(t,"hall_mj",3)}),cc.global.net.addHandler("enterRoomPush_SSS",function(t){e.enterRoom(t,"hall_shisanshui",4)}),cc.global.net.addHandler("pdk_enterRoom_push",function(t){e.enterRoom(t,"new_hall_pdk",21)}),cc.global.net.addHandler("checkUserPush",function(e){cc.global.util.closeAlert()})}}),cc._RF.pop()},{}],"socket-io":[function(e,t,i){(function(n){"use strict";cc._RF.push(t,"135f9APUZJELY2wmiZZfHuw","socket-io");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};cc.sys.isNative||function(e){if("object"===(void 0===i?"undefined":o(i))&&void 0!==t)t.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:this).io=e()}}(function(){return function t(i,n,o){function a(s,l){if(!n[s]){if(!i[s]){var r="function"==typeof e&&e;if(!l&&r)return r(s,!0);if(c)return c(s,!0);var g=new Error("Cannot find module '"+s+"'");throw g.code="MODULE_NOT_FOUND",g}var h=n[s]={exports:{}};i[s][0].call(h.exports,function(e){var t=i[s][1][e];return a(t||e)},h,h.exports,t,i,n,o)}return n[s].exports}for(var c="function"==typeof e&&e,s=0;s<o.length;s++)a(o[s]);return a}({1:[function(e,t,i){t.exports=e("./lib/")},{"./lib/":2}],2:[function(e,t,i){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":3,"engine.io-parser":19}],3:[function(e,t,i){(function(i){var n=e("./transports"),a=e("component-emitter"),c=e("debug")("engine.io-client:socket"),s=e("indexof"),l=e("engine.io-parser"),r=e("parseuri"),g=e("parsejson"),h=e("parseqs");function d(e,t){if(!(this instanceof d))return new d(e,t);t=t||{},e&&"object"==(void 0===e?"undefined":o(e))&&(t=e,e=null),e?(e=r(e),t.hostname=e.host,t.secure="https"==e.protocol||"wss"==e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=r(t.host).host),this.secure=null!=t.secure?t.secure:i.location&&"https:"==location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||(i.location?location.hostname:"localhost"),this.port=t.port||(i.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=h.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized;var n="object"==(void 0===i?"undefined":o(i))&&i;n.global===n&&t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),this.open()}function u(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}t.exports=d,d.priorWebsocketSuccess=!1,a(d.prototype),d.protocol=l.protocol,d.Socket=d,d.Transport=e("./transport"),d.transports=e("./transports"),d.parser=e("engine.io-parser"),d.prototype.createTransport=function(e){c('creating transport "%s"',e);var t=u(this.query);return t.EIO=l.protocol,t.transport=e,this.id&&(t.sid=this.id),new n[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders})},d.prototype.open=function(){var e;if(this.rememberUpgrade&&d.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},d.prototype.setTransport=function(e){c("setting transport %s",e.name);var t=this;this.transport&&(c("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},d.prototype.probe=function(e){c('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),i=!1,n=this;function o(){if(n.onlyBinaryUpgrades){var o=!this.supportsBinary&&n.transport.supportsBinary;i=i||o}i||(c('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",function(o){if(!i)if("pong"==o.type&&"probe"==o.data){if(c('probe transport "%s" pong',e),n.upgrading=!0,n.emit("upgrading",t),!t)return;d.priorWebsocketSuccess="websocket"==t.name,c('pausing current transport "%s"',n.transport.name),n.transport.pause(function(){i||"closed"!=n.readyState&&(c("changing transport and sending upgrade packet"),h(),n.setTransport(t),t.send([{type:"upgrade"}]),n.emit("upgrade",t),t=null,n.upgrading=!1,n.flush())})}else{c('probe transport "%s" failed',e);var a=new Error("probe error");a.transport=t.name,n.emit("upgradeError",a)}}))}function a(){i||(i=!0,h(),t.close(),t=null)}function s(i){var o=new Error("probe error: "+i);o.transport=t.name,a(),c('probe transport "%s" failed because of error: %s',e,i),n.emit("upgradeError",o)}function l(){s("transport closed")}function r(){s("socket closed")}function g(e){t&&e.name!=t.name&&(c('"%s" works - aborting "%s"',e.name,t.name),a())}function h(){t.removeListener("open",o),t.removeListener("error",s),t.removeListener("close",l),n.removeListener("close",r),n.removeListener("upgrading",g)}d.priorWebsocketSuccess=!1,t.once("open",o),t.once("error",s),t.once("close",l),this.once("close",r),this.once("upgrading",g),t.open()},d.prototype.onOpen=function(){if(c("socket open"),this.readyState="open",d.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){c("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},d.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(c('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(g(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else c('packet received with socket readyState "%s"',this.readyState)},d.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},d.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},d.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){c("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},d.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},d.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},d.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(c("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},d.prototype.write=d.prototype.send=function(e,t,i){return this.sendPacket("message",e,t,i),this},d.prototype.sendPacket=function(e,t,i,n){if("function"==typeof t&&(n=t,t=void 0),"function"==typeof i&&(n=i,i=null),"closing"!=this.readyState&&"closed"!=this.readyState){(i=i||{}).compress=!1!==i.compress;var o={type:e,data:t,options:i};this.emit("packetCreate",o),this.writeBuffer.push(o),n&&this.once("flush",n),this.flush()}},d.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():t()}):this.upgrading?n():t()}function t(){e.onClose("forced close"),c("socket closing - telling transport to close"),e.transport.close()}function i(){e.removeListener("upgrade",i),e.removeListener("upgradeError",i),t()}function n(){e.once("upgrade",i),e.once("upgradeError",i)}return this},d.prototype.onError=function(e){c("socket error %j",e),d.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},d.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){c('socket close with reason: "%s"',e);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0}},d.prototype.filterUpgrades=function(e){for(var t=[],i=0,n=e.length;i<n;i++)~s(this.transports,e[i])&&t.push(e[i]);return t}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{})},{"./transport":4,"./transports":5,"component-emitter":15,debug:17,"engine.io-parser":19,indexof:23,parsejson:26,parseqs:27,parseuri:28}],4:[function(e,t,i){var n=e("engine.io-parser"),o=e("component-emitter");function a(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders}t.exports=a,o(a.prototype),a.prototype.onError=function(e,t){var i=new Error(e);return i.type="TransportError",i.description=t,this.emit("error",i),this},a.prototype.open=function(){return"closed"!=this.readyState&&""!=this.readyState||(this.readyState="opening",this.doOpen()),this},a.prototype.close=function(){return"opening"!=this.readyState&&"open"!=this.readyState||(this.doClose(),this.onClose()),this},a.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},a.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},a.prototype.onData=function(e){var t=n.decodePacket(e,this.socket.binaryType);this.onPacket(t)},a.prototype.onPacket=function(e){this.emit("packet",e)},a.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":15,"engine.io-parser":19}],5:[function(e,t,i){(function(t){var n=e("xmlhttprequest-ssl"),o=e("./polling-xhr"),a=e("./polling-jsonp"),c=e("./websocket");i.polling=function(e){var i=!1,c=!1,s=!1!==e.jsonp;if(t.location){var l="https:"==location.protocol,r=location.port;r||(r=l?443:80),i=e.hostname!=location.hostname||r!=e.port,c=e.secure!=l}if(e.xdomain=i,e.xscheme=c,"open"in new n(e)&&!e.forceJSONP)return new o(e);if(!s)throw new Error("JSONP disabled");return new a(e)},i.websocket=c}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{})},{"./polling-jsonp":6,"./polling-xhr":7,"./websocket":9,"xmlhttprequest-ssl":10}],6:[function(e,t,i){(function(i){var n=e("./polling"),o=e("component-inherit");t.exports=r;var a,c=/\n/g,s=/\\n/g;function l(){}function r(e){n.call(this,e),this.query=this.query||{},a||(i.___eio||(i.___eio=[]),a=i.___eio),this.index=a.length;var t=this;a.push(function(e){t.onData(e)}),this.query.j=this.index,i.document&&i.addEventListener&&i.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=l)},!1)}o(r,n),r.prototype.supportsBinary=!1,r.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),n.prototype.doClose.call(this)},r.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var i=document.getElementsByTagName("script")[0];i?i.parentNode.insertBefore(t,i):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},r.prototype.doWrite=function(e,t){var i=this;if(!this.form){var n,o=document.createElement("form"),a=document.createElement("textarea"),l=this.iframeId="eio_iframe_"+this.index;o.className="socketio",o.style.position="absolute",o.style.top="-1000px",o.style.left="-1000px",o.target=l,o.method="POST",o.setAttribute("accept-charset","utf-8"),a.name="d",o.appendChild(a),document.body.appendChild(o),this.form=o,this.area=a}function r(){g(),t()}function g(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(e){i.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+i.iframeId+'">';n=document.createElement(e)}catch(e){(n=document.createElement("iframe")).name=i.iframeId,n.src="javascript:0"}n.id=i.iframeId,i.form.appendChild(n),i.iframe=n}this.form.action=this.uri(),g(),e=e.replace(s,"\\\n"),this.area.value=e.replace(c,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==i.iframe.readyState&&r()}:this.iframe.onload=r}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{})},{"./polling":8,"component-inherit":16}],7:[function(e,t,i){(function(i){var n=e("xmlhttprequest-ssl"),o=e("./polling"),a=e("component-emitter"),c=e("component-inherit"),s=e("debug")("engine.io-client:polling-xhr");function l(){}function r(e){if(o.call(this,e),i.location){var t="https:"==location.protocol,n=location.port;n||(n=t?443:80),this.xd=e.hostname!=i.location.hostname||n!=e.port,this.xs=e.secure!=t}else this.extraHeaders=e.extraHeaders}function g(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!=e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function h(){for(var e in g.requests)g.requests.hasOwnProperty(e)&&g.requests[e].abort()}t.exports=r,t.exports.Request=g,c(r,o),r.prototype.supportsBinary=!0,r.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.extraHeaders=this.extraHeaders,new g(e)},r.prototype.doWrite=function(e,t){var i="string"!=typeof e&&void 0!==e,n=this.request({method:"POST",data:e,isBinary:i}),o=this;n.on("success",t),n.on("error",function(e){o.onError("xhr post error",e)}),this.sendXhr=n},r.prototype.doPoll=function(){s("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},a(g.prototype),g.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new n(e),o=this;try{s("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var a in t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(a)&&t.setRequestHeader(a,this.extraHeaders[a])}catch(e){}if(this.supportsBinary&&(t.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}"withCredentials"in t&&(t.withCredentials=!0),this.hasXDR()?(t.onload=function(){o.onLoad()},t.onerror=function(){o.onError(t.responseText)}):t.onreadystatechange=function(){4==t.readyState&&(200==t.status||1223==t.status?o.onLoad():setTimeout(function(){o.onError(t.status)},0))},s("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout(function(){o.onError(e)},0)}i.document&&(this.index=g.requestsCount++,g.requests[this.index]=this)},g.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},g.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},g.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},g.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=l:this.xhr.onreadystatechange=l,e)try{this.xhr.abort()}catch(e){}i.document&&delete g.requests[this.index],this.xhr=null}},g.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}if("application/octet-stream"===t)e=this.xhr.response;else if(this.supportsBinary)try{e=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(t){for(var i=new Uint8Array(this.xhr.response),n=[],o=0,a=i.length;o<a;o++)n.push(i[o]);e=String.fromCharCode.apply(null,n)}else e=this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},g.prototype.hasXDR=function(){return void 0!==i.XDomainRequest&&!this.xs&&this.enablesXDR},g.prototype.abort=function(){this.cleanup()},i.document&&(g.requestsCount=0,g.requests={},i.attachEvent?i.attachEvent("onunload",h):i.addEventListener&&i.addEventListener("beforeunload",h,!1))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{})},{"./polling":8,"component-emitter":15,"component-inherit":16,debug:17,"xmlhttprequest-ssl":10}],8:[function(e,t,i){var n=e("../transport"),o=e("parseqs"),a=e("engine.io-parser"),c=e("component-inherit"),s=e("yeast"),l=e("debug")("engine.io-client:polling");t.exports=g;var r=null!=new(e("xmlhttprequest-ssl"))({xdomain:!1}).responseType;function g(e){var t=e&&e.forceBase64;r&&!t||(this.supportsBinary=!1),n.call(this,e)}c(g,n),g.prototype.name="polling",g.prototype.doOpen=function(){this.poll()},g.prototype.pause=function(e){var t=this;function i(){l("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(l("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){l("pre-pause polling complete"),--n||i()})),this.writable||(l("we are currently writing - waiting to pause"),n++,this.once("drain",function(){l("pre-pause writing complete"),--n||i()}))}else i()},g.prototype.poll=function(){l("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},g.prototype.onData=function(e){var t=this;l("polling got data %s",e);a.decodePayload(e,this.socket.binaryType,function(e,i,n){if("opening"==t.readyState&&t.onOpen(),"close"==e.type)return t.onClose(),!1;t.onPacket(e)}),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():l('ignoring poll - transport state "%s"',this.readyState))},g.prototype.doClose=function(){var e=this;function t(){l("writing close packet"),e.write([{type:"close"}])}"open"==this.readyState?(l("transport open - closing"),t()):(l("transport not open - deferring close"),this.once("open",t))},g.prototype.write=function(e){var t=this;this.writable=!1;var i=function(){t.writable=!0,t.emit("drain")};t=this;a.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,i)})},g.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",i="";return!1!==this.timestampRequests&&(e[this.timestampParam]=s()),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"==t&&443!=this.port||"http"==t&&80!=this.port)&&(i=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+i+this.path+e}},{"../transport":4,"component-inherit":16,debug:17,"engine.io-parser":19,parseqs:27,"xmlhttprequest-ssl":10,yeast:30}],9:[function(e,t,i){(function(i){var n=e("../transport"),o=e("engine.io-parser"),a=e("parseqs"),c=e("component-inherit"),s=e("yeast"),l=e("debug")("engine.io-client:websocket"),r=i.WebSocket||i.MozWebSocket,g=r;if(!g&&"undefined"==typeof window)try{g=e("ws")}catch(e){}function h(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,n.call(this,e)}t.exports=h,c(h,n),h.prototype.name="websocket",h.prototype.supportsBinary=!0,h.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t={agent:this.agent,perMessageDeflate:this.perMessageDeflate};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(t.headers=this.extraHeaders),this.ws=r?new g(e):new g(e,void 0,t),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="buffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},h.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(h.prototype.onData=function(e){var t=this;setTimeout(function(){n.prototype.onData.call(t,e)},0)}),h.prototype.write=function(e){var t=this;this.writable=!1;for(var n=e.length,a=0,c=n;a<c;a++)(function(e){o.encodePacket(e,t.supportsBinary,function(o){if(!r){var a={};if(e.options&&(a.compress=e.options.compress),t.perMessageDeflate)("string"==typeof o?i.Buffer.byteLength(o):o.length)<t.perMessageDeflate.threshold&&(a.compress=!1)}try{r?t.ws.send(o):t.ws.send(o,a)}catch(e){l("websocket closed before onclose event")}--n||s()})})(e[a]);function s(){t.emit("flush"),setTimeout(function(){t.writable=!0,t.emit("drain")},0)}},h.prototype.onClose=function(){n.prototype.onClose.call(this)},h.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},h.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",i="";return this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(i=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=s()),this.supportsBinary||(e.b64=1),(e=a.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+i+this.path+e},h.prototype.check=function(){return!(!g||"__initialize"in g&&this.name===h.prototype.name)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{})},{"../transport":4,"component-inherit":16,debug:17,"engine.io-parser":19,parseqs:27,ws:void 0,yeast:30}],10:[function(e,t,i){var n=e("has-cors");t.exports=function(e){var t=e.xdomain,i=e.xscheme,o=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||n))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!i&&o)return new XDomainRequest}catch(e){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}},{"has-cors":22}],11:[function(e,t,i){function n(){}t.exports=function(e,t,i){var o=!1;return i=i||n,a.count=e,0===e?t():a;function a(e,n){if(a.count<=0)throw new Error("after called too many times");--a.count,e?(o=!0,t(e),t=i):0!==a.count||o||t(null,n)}}},{}],12:[function(e,t,i){t.exports=function(e,t,i){var n=e.byteLength;if(t=t||0,i=i||n,e.slice)return e.slice(t,i);if(t<0&&(t+=n),i<0&&(i+=n),i>n&&(i=n),t>=n||t>=i||0===n)return new ArrayBuffer(0);for(var o=new Uint8Array(e),a=new Uint8Array(i-t),c=t,s=0;c<i;c++,s++)a[s]=o[c];return a.buffer}},{}],13:[function(e,t,i){(function(e){i.encode=function(t){var i,n=new Uint8Array(t),o=n.length,a="";for(i=0;i<o;i+=3)a+=e[n[i]>>2],a+=e[(3&n[i])<<4|n[i+1]>>4],a+=e[(15&n[i+1])<<2|n[i+2]>>6],a+=e[63&n[i+2]];return o%3==2?a=a.substring(0,a.length-1)+"=":o%3==1&&(a=a.substring(0,a.length-2)+"=="),a},i.decode=function(t){var i,n,o,a,c,s=.75*t.length,l=t.length,r=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var g=new ArrayBuffer(s),h=new Uint8Array(g);for(i=0;i<l;i+=4)n=e.indexOf(t[i]),o=e.indexOf(t[i+1]),a=e.indexOf(t[i+2]),c=e.indexOf(t[i+3]),h[r++]=n<<2|o>>4,h[r++]=(15&o)<<4|a>>2,h[r++]=(3&a)<<6|63&c;return g}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],14:[function(e,t,i){(function(e){var i=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,n=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),o=n&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),a=i&&i.prototype.append&&i.prototype.getBlob;function c(e){for(var t=0;t<e.length;t++){var i=e[t];if(i.buffer instanceof ArrayBuffer){var n=i.buffer;if(i.byteLength!==n.byteLength){var o=new Uint8Array(i.byteLength);o.set(new Uint8Array(n,i.byteOffset,i.byteLength)),n=o.buffer}e[t]=n}}}function s(e,t){t=t||{};var n=new i;c(e);for(var o=0;o<e.length;o++)n.append(e[o]);return t.type?n.getBlob(t.type):n.getBlob()}function l(e,t){return c(e),new Blob(e,t||{})}t.exports=n?o?e.Blob:l:a?s:void 0}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{})},{}],15:[function(e,t,i){function n(e){if(e)return o(e)}function o(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},n.prototype.once=function(e,t){var i=this;function n(){i.off(e,n),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i,n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var o=0;o<n.length;o++)if((i=n[o])===t||i.fn===t){n.splice(o,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),i=this._callbacks[e];if(i)for(var n=0,o=(i=i.slice(0)).length;n<o;++n)i[n].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],16:[function(e,t,i){t.exports=function(e,t){var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}},{}],17:[function(e,t,i){function n(){var e;try{e=i.storage.debug}catch(e){}return e}(i=t.exports=e("./debug")).log=function(){return"object"===("undefined"==typeof console?"undefined":o(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},i.formatArgs=function(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+i.humanize(this.diff),!t)return e;var n="color: "+this.color,o=0,a=0;return(e=[e[0],n,"color: inherit"].concat(Array.prototype.slice.call(e,1)))[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&"%c"===e&&(a=++o)}),e.splice(a,0,n),e},i.save=function(e){try{null==e?i.storage.removeItem("debug"):i.storage.debug=e}catch(e){}},i.load=n,i.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31},i.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),i.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],i.formatters.j=function(e){return JSON.stringify(e)},i.enable(n())},{"./debug":18}],18:[function(e,t,i){(i=t.exports=function(e){function t(){}function a(){var e=a,t=+new Date,c=t-(n||t);e.diff=c,e.prev=n,e.curr=t,n=t,null==e.useColors&&(e.useColors=i.useColors()),null==e.color&&e.useColors&&(e.color=i.colors[o++%i.colors.length]);var s=Array.prototype.slice.call(arguments);s[0]=i.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var l=0;s[0]=s[0].replace(/%([a-z%])/g,function(t,n){if("%%"===t)return t;l++;var o=i.formatters[n];if("function"==typeof o){var a=s[l];t=o.call(e,a),s.splice(l,1),l--}return t}),"function"==typeof i.formatArgs&&(s=i.formatArgs.apply(e,s));var r=a.log||i.log||console.log.bind(console);r.apply(e,s)}t.enabled=!1,a.enabled=!0;var c=i.enabled(e)?a:t;return c.namespace=e,c}).coerce=function(e){return e instanceof Error?e.stack||e.message:e},i.disable=function(){i.enable("")},i.enable=function(e){i.save(e);for(var t=(e||"").split(/[\s,]+/),n=t.length,o=0;o<n;o++)t[o]&&("-"===(e=t[o].replace(/\*/g,".*?"))[0]?i.skips.push(new RegExp("^"+e.substr(1)+"$")):i.names.push(new RegExp("^"+e+"$")))},i.enabled=function(e){var t,n;for(t=0,n=i.skips.length;t<n;t++)if(i.skips[t].test(e))return!1;for(t=0,n=i.names.length;t<n;t++)if(i.names[t].test(e))return!0;return!1},i.humanize=e("ms"),i.names=[],i.skips=[],i.formatters={};var n,o=0},{ms:25}],19:[function(e,t,i){(function(t){var n=e("./keys"),o=e("has-binary"),a=e("arraybuffer.slice"),c=e("base64-arraybuffer"),s=e("after"),l=e("utf8"),r=navigator.userAgent.match(/Android/i),g=/PhantomJS/i.test(navigator.userAgent),h=r||g;i.protocol=3;var d=i.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},u=n(d),m={type:"error",data:"parser error"},p=e("blob");function f(e,t){return t("b"+i.packets[e.type]+e.data.data)}function b(e,t,n){if(!t)return i.encodeBase64Packet(e,n);var o=e.data,a=new Uint8Array(o),c=new Uint8Array(1+o.byteLength);c[0]=d[e.type];for(var s=0;s<a.length;s++)c[s+1]=a[s];return n(c.buffer)}function _(e,t,n){if(!t)return i.encodeBase64Packet(e,n);var o=new FileReader;return o.onload=function(){e.data=o.result,i.encodePacket(e,t,!0,n)},o.readAsArrayBuffer(e.data)}function y(e,t,n){if(!t)return i.encodeBase64Packet(e,n);if(h)return _(e,t,n);var o=new Uint8Array(1);return o[0]=d[e.type],n(new p([o.buffer,e.data]))}function v(e,t,i){for(var n=new Array(e.length),o=s(e.length,i),a=function(e,i,o){t(i,function(t,i){n[e]=i,o(t,n)})},c=0;c<e.length;c++)a(c,e[c],o)}i.encodePacket=function(e,i,n,o){"function"==typeof i&&(o=i,i=!1),"function"==typeof n&&(o=n,n=null);var a=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&a instanceof ArrayBuffer)return b(e,i,o);if(p&&a instanceof t.Blob)return y(e,i,o);if(a&&a.base64)return f(e,o);var c=d[e.type];return void 0!==e.data&&(c+=n?l.encode(String(e.data)):String(e.data)),o(""+c)},i.encodeBase64Packet=function(e,n){var o,a="b"+i.packets[e.type];if(p&&e.data instanceof t.Blob){var c=new FileReader;return c.onload=function(){var e=c.result.split(",")[1];n(a+e)},c.readAsDataURL(e.data)}try{o=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var s=new Uint8Array(e.data),l=new Array(s.length),r=0;r<s.length;r++)l[r]=s[r];o=String.fromCharCode.apply(null,l)}return a+=t.btoa(o),n(a)},i.decodePacket=function(e,t,n){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return i.decodeBase64Packet(e.substr(1),t);if(n)try{e=l.decode(e)}catch(e){return m}var o=e.charAt(0);return Number(o)==o&&u[o]?e.length>1?{type:u[o],data:e.substring(1)}:{type:u[o]}:m}o=new Uint8Array(e)[0];var c=a(e,1);return p&&"blob"===t&&(c=new p([c])),{type:u[o],data:c}},i.decodeBase64Packet=function(e,i){var n=u[e.charAt(0)];if(!t.ArrayBuffer)return{type:n,data:{base64:!0,data:e.substr(1)}};var o=c.decode(e.substr(1));return"blob"===i&&p&&(o=new p([o])),{type:n,data:o}},i.encodePayload=function(e,t,n){"function"==typeof t&&(n=t,t=null);var a=o(e);if(t&&a)return p&&!h?i.encodePayloadAsBlob(e,n):i.encodePayloadAsArrayBuffer(e,n);if(!e.length)return n("0:");function c(e){return e.length+":"+e}v(e,function(e,n){i.encodePacket(e,!!a&&t,!0,function(e){n(null,c(e))})},function(e,t){return n(t.join(""))})},i.decodePayload=function(e,t,n){if("string"!=typeof e)return i.decodePayloadAsBinary(e,t,n);var o;if("function"==typeof t&&(n=t,t=null),""==e)return n(m,0,1);for(var a,c,s="",l=0,r=e.length;l<r;l++){var g=e.charAt(l);if(":"!=g)s+=g;else{if(""==s||s!=(a=Number(s)))return n(m,0,1);if(s!=(c=e.substr(l+1,a)).length)return n(m,0,1);if(c.length){if(o=i.decodePacket(c,t,!0),m.type==o.type&&m.data==o.data)return n(m,0,1);if(!1===n(o,l+a,r))return}l+=a,s=""}}return""!=s?n(m,0,1):void 0},i.encodePayloadAsArrayBuffer=function(e,t){if(!e.length)return t(new ArrayBuffer(0));v(e,function(e,t){i.encodePacket(e,!0,!0,function(e){return t(null,e)})},function(e,i){var n=i.reduce(function(e,t){var i;return e+(i="string"==typeof t?t.length:t.byteLength).toString().length+i+2},0),o=new Uint8Array(n),a=0;return i.forEach(function(e){var t="string"==typeof e,i=e;if(t){for(var n=new Uint8Array(e.length),c=0;c<e.length;c++)n[c]=e.charCodeAt(c);i=n.buffer}o[a++]=t?0:1;var s=i.byteLength.toString();for(c=0;c<s.length;c++)o[a++]=parseInt(s[c]);o[a++]=255;for(n=new Uint8Array(i),c=0;c<n.length;c++)o[a++]=n[c]}),t(o.buffer)})},i.encodePayloadAsBlob=function(e,t){v(e,function(e,t){i.encodePacket(e,!0,!0,function(e){var i=new Uint8Array(1);if(i[0]=1,"string"==typeof e){for(var n=new Uint8Array(e.length),o=0;o<e.length;o++)n[o]=e.charCodeAt(o);e=n.buffer,i[0]=0}var a=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),c=new Uint8Array(a.length+1);for(o=0;o<a.length;o++)c[o]=parseInt(a[o]);if(c[a.length]=255,p){var s=new p([i.buffer,c.buffer,e]);t(null,s)}})},function(e,i){return t(new p(i))})},i.decodePayloadAsBinary=function(e,t,n){"function"==typeof t&&(n=t,t=null);for(var o=e,c=[],s=!1;o.byteLength>0;){for(var l=new Uint8Array(o),r=0===l[0],g="",h=1;255!=l[h];h++){if(g.length>310){s=!0;break}g+=l[h]}if(s)return n(m,0,1);o=a(o,2+g.length),g=parseInt(g);var d=a(o,0,g);if(r)try{d=String.fromCharCode.apply(null,new Uint8Array(d))}catch(e){var u=new Uint8Array(d);d="";for(h=0;h<u.length;h++)d+=String.fromCharCode(u[h])}c.push(d),o=a(o,g)}var p=c.length;c.forEach(function(e,o){n(i.decodePacket(e,t,!0),o,p)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{})},{"./keys":20,after:11,"arraybuffer.slice":12,"base64-arraybuffer":13,blob:14,"has-binary":21,utf8:29}],20:[function(e,t,i){t.exports=Object.keys||function(e){var t=[],i=Object.prototype.hasOwnProperty;for(var n in e)i.call(e,n)&&t.push(n);return t}},{}],21:[function(e,t,i){(function(i){var n=e("isarray");t.exports=function(e){return function e(t){if(!t)return!1;if(i.Buffer&&i.Buffer.isBuffer(t)||i.ArrayBuffer&&t instanceof ArrayBuffer||i.Blob&&t instanceof Blob||i.File&&t instanceof File)return!0;if(n(t)){for(var a=0;a<t.length;a++)if(e(t[a]))return!0}else if(t&&"object"==(void 0===t?"undefined":o(t)))for(var c in t.toJSON&&(t=t.toJSON()),t)if(Object.prototype.hasOwnProperty.call(t,c)&&e(t[c]))return!0;return!1}(e)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{})},{isarray:24}],22:[function(e,t,i){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},{}],23:[function(e,t,i){var n=[].indexOf;t.exports=function(e,t){if(n)return e.indexOf(t);for(var i=0;i<e.length;++i)if(e[i]===t)return i;return-1}},{}],24:[function(e,t,i){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],25:[function(e,t,i){var n=1e3,o=60*n,a=60*o,c=24*a,s=365.25*c;function l(e){if(!((e=""+e).length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var i=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return i*s;case"days":case"day":case"d":return i*c;case"hours":case"hour":case"hrs":case"hr":case"h":return i*a;case"minutes":case"minute":case"mins":case"min":case"m":return i*o;case"seconds":case"second":case"secs":case"sec":case"s":return i*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i}}}}function r(e){return e>=c?Math.round(e/c)+"d":e>=a?Math.round(e/a)+"h":e>=o?Math.round(e/o)+"m":e>=n?Math.round(e/n)+"s":e+"ms"}function g(e){return h(e,c,"day")||h(e,a,"hour")||h(e,o,"minute")||h(e,n,"second")||e+" ms"}function h(e,t,i){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+i:Math.ceil(e/t)+" "+i+"s"}t.exports=function(e,t){return t=t||{},"string"==typeof e?l(e):t.long?g(e):r(e)}},{}],26:[function(e,t,i){(function(e){var i=/^[\],:{}\s]*$/,n=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,o=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,a=/(?:^|:|,)(?:\s*\[)+/g,c=/^\s+/,s=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(c,"").replace(s,""),e.JSON&&JSON.parse?JSON.parse(t):i.test(t.replace(n,"@").replace(o,"]").replace(a,""))?new Function("return "+t)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{})},{}],27:[function(e,t,i){i.encode=function(e){var t="";for(var i in e)e.hasOwnProperty(i)&&(t.length&&(t+="&"),t+=encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t},i.decode=function(e){for(var t={},i=e.split("&"),n=0,o=i.length;n<o;n++){var a=i[n].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}},{}],28:[function(e,t,i){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,o=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t=e,i=e.indexOf("["),a=e.indexOf("]");-1!=i&&-1!=a&&(e=e.substring(0,i)+e.substring(i,a).replace(/:/g,";")+e.substring(a,e.length));for(var c=n.exec(e||""),s={},l=14;l--;)s[o[l]]=c[l]||"";return-1!=i&&-1!=a&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s}},{}],29:[function(e,t,i){(function(e){(function(n){var a="object"==(void 0===i?"undefined":o(i))&&i,c="object"==(void 0===t?"undefined":o(t))&&t&&t.exports==a&&t,s="object"==(void 0===e?"undefined":o(e))&&e;s.global!==s&&s.window!==s||(n=s);var l,r,g,h=String.fromCharCode;function d(e){for(var t,i,n=[],o=0,a=e.length;o<a;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<a?56320==(64512&(i=e.charCodeAt(o++)))?n.push(((1023&t)<<10)+(1023&i)+65536):(n.push(t),o--):n.push(t);return n}function u(e){for(var t,i=e.length,n=-1,o="";++n<i;)(t=e[n])>65535&&(o+=h((t-=65536)>>>10&1023|55296),t=56320|1023&t),o+=h(t);return o}function m(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function p(e,t){return h(e>>t&63|128)}function f(e){if(0==(4294967168&e))return h(e);var t="";return 0==(4294965248&e)?t=h(e>>6&31|192):0==(4294901760&e)?(m(e),t=h(e>>12&15|224),t+=p(e,6)):0==(4292870144&e)&&(t=h(e>>18&7|240),t+=p(e,12),t+=p(e,6)),t+=h(63&e|128)}function b(){if(g>=r)throw Error("Invalid byte index");var e=255&l[g];if(g++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function _(){var e,t;if(g>r)throw Error("Invalid byte index");if(g==r)return!1;if(e=255&l[g],g++,0==(128&e))return e;if(192==(224&e)){if((t=(31&e)<<6|b())>=128)return t;throw Error("Invalid continuation byte")}if(224==(240&e)){if((t=(15&e)<<12|b()<<6|b())>=2048)return m(t),t;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=(15&e)<<18|b()<<12|b()<<6|b())>=65536&&t<=1114111)return t;throw Error("Invalid UTF-8 detected")}var y={version:"2.0.0",encode:function(e){for(var t=d(e),i=t.length,n=-1,o="";++n<i;)o+=f(t[n]);return o},decode:function(e){l=d(e),r=l.length,g=0;for(var t,i=[];!1!==(t=_());)i.push(t);return u(i)}};if(a&&!a.nodeType)if(c)c.exports=y;else{var v={}.hasOwnProperty;for(var C in y)v.call(y,C)&&(a[C]=y[C])}else n.utf8=y})(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{})},{}],30:[function(e,t,i){var n,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),a=64,c={},s=0,l=0;function r(e){var t="";do{t=o[e%a]+t,e=Math.floor(e/a)}while(e>0);return t}function g(){var e=r(+new Date);return e!==n?(s=0,n=e):e+"."+r(s++)}for(;l<a;l++)c[o[l]]=l;g.encode=r,g.decode=function(e){var t=0;for(l=0;l<e.length;l++)t=t*a+c[e.charAt(l)];return t},t.exports=g},{}],31:[function(e,t,i){var n=e("./url"),a=e("socket.io-parser"),c=e("./manager"),s=e("debug")("socket.io-client");t.exports=i=r;var l=i.managers={};function r(e,t){"object"==(void 0===e?"undefined":o(e))&&(t=e,e=void 0),t=t||{};var i,a=n(e),r=a.source,g=a.id,h=a.path,d=l[g]&&h in l[g].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||d?(s("ignoring socket cache for %s",r),i=c(r,t)):(l[g]||(s("new io instance for %s",r),l[g]=c(r,t)),i=l[g]),i.socket(a.path)}i.protocol=a.protocol,i.connect=r,i.Manager=e("./manager"),i.Socket=e("./socket")},{"./manager":32,"./socket":34,"./url":35,debug:39,"socket.io-parser":47}],32:[function(e,t,i){var n=e("engine.io-client"),a=e("./socket"),c=e("component-emitter"),s=e("socket.io-parser"),l=e("./on"),r=e("component-bind"),g=e("debug")("socket.io-client:manager"),h=e("indexof"),d=e("backo2"),u=Object.prototype.hasOwnProperty;function m(e,t){if(!(this instanceof m))return new m(e,t);e&&"object"==(void 0===e?"undefined":o(e))&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new d({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new s.Encoder,this.decoder=new s.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}t.exports=m,m.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)u.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},m.prototype.updateSocketIds=function(){for(var e in this.nsps)u.call(this.nsps,e)&&(this.nsps[e].id=this.engine.id)},c(m.prototype),m.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},m.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},m.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},m.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},m.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},m.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},m.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},m.prototype.open=m.prototype.connect=function(e){if(g("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;g("opening %s",this.uri),this.engine=n(this.uri,this.opts);var t=this.engine,i=this;this.readyState="opening",this.skipReconnect=!1;var o=l(t,"open",function(){i.onopen(),e&&e()}),a=l(t,"error",function(t){if(g("connect_error"),i.cleanup(),i.readyState="closed",i.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else i.maybeReconnectOnOpen()});if(!1!==this._timeout){var c=this._timeout;g("connect attempt will timeout after %d",c);var s=setTimeout(function(){g("connect attempt timed out after %d",c),o.destroy(),t.close(),t.emit("error","timeout"),i.emitAll("connect_timeout",c)},c);this.subs.push({destroy:function(){clearTimeout(s)}})}return this.subs.push(o),this.subs.push(a),this},m.prototype.onopen=function(){g("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(l(e,"data",r(this,"ondata"))),this.subs.push(l(e,"ping",r(this,"onping"))),this.subs.push(l(e,"pong",r(this,"onpong"))),this.subs.push(l(e,"error",r(this,"onerror"))),this.subs.push(l(e,"close",r(this,"onclose"))),this.subs.push(l(this.decoder,"decoded",r(this,"ondecoded")))},m.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},m.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},m.prototype.ondata=function(e){this.decoder.add(e)},m.prototype.ondecoded=function(e){this.emit("packet",e)},m.prototype.onerror=function(e){g("error",e),this.emitAll("error",e)},m.prototype.socket=function(e){var t=this.nsps[e];if(!t){t=new a(this,e),this.nsps[e]=t;var i=this;t.on("connecting",n),t.on("connect",function(){t.id=i.engine.id}),this.autoConnect&&n()}function n(){~h(i.connecting,t)||i.connecting.push(t)}return t},m.prototype.destroy=function(e){var t=h(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},m.prototype.packet=function(e){g("writing packet %j",e);var t=this;t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(i){for(var n=0;n<i.length;n++)t.engine.write(i[n],e.options);t.encoding=!1,t.processPacketQueue()}))},m.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},m.prototype.cleanup=function(){var e;for(g("cleanup");e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},m.prototype.close=m.prototype.disconnect=function(){g("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"==this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},m.prototype.onclose=function(e){g("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},m.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)g("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();g("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var i=setTimeout(function(){e.skipReconnect||(g("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(g("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(g("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(i)}})}},m.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},{"./on":33,"./socket":34,backo2:36,"component-bind":37,"component-emitter":38,debug:39,"engine.io-client":1,indexof:42,"socket.io-parser":47}],33:[function(e,t,i){t.exports=function(e,t,i){return e.on(t,i),{destroy:function(){e.removeListener(t,i)}}}},{}],34:[function(e,t,i){var n=e("socket.io-parser"),o=e("component-emitter"),a=e("to-array"),c=e("./on"),s=e("component-bind"),l=e("debug")("socket.io-client:socket"),r=e("has-binary");t.exports=d;var g={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},h=o.prototype.emit;function d(e,t){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.io.autoConnect&&this.open()}o(d.prototype),d.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[c(e,"open",s(this,"onopen")),c(e,"packet",s(this,"onpacket")),c(e,"close",s(this,"onclose"))]}},d.prototype.open=d.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this.emit("connecting"),this)},d.prototype.send=function(){var e=a(arguments);return e.unshift("message"),this.emit.apply(this,e),this},d.prototype.emit=function(e){if(g.hasOwnProperty(e))return h.apply(this,arguments),this;var t=a(arguments),i=n.EVENT;r(t)&&(i=n.BINARY_EVENT);var o={type:i,data:t,options:{}};return o.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(l("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),o.id=this.ids++),this.connected?this.packet(o):this.sendBuffer.push(o),delete this.flags,this},d.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},d.prototype.onopen=function(){l("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:n.CONNECT})},d.prototype.onclose=function(e){l("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},d.prototype.onpacket=function(e){if(e.nsp==this.nsp)switch(e.type){case n.CONNECT:this.onconnect();break;case n.EVENT:case n.BINARY_EVENT:this.onevent(e);break;case n.ACK:case n.BINARY_ACK:this.onack(e);break;case n.DISCONNECT:this.ondisconnect();break;case n.ERROR:this.emit("error",e.data)}},d.prototype.onevent=function(e){var t=e.data||[];l("emitting event %j",t),null!=e.id&&(l("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?h.apply(this,t):this.receiveBuffer.push(t)},d.prototype.ack=function(e){var t=this,i=!1;return function(){if(!i){i=!0;var o=a(arguments);l("sending ack %j",o);var c=r(o)?n.BINARY_ACK:n.ACK;t.packet({type:c,id:e,data:o})}}},d.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(l("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):l("bad ack %s",e.id)},d.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},d.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)h.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},d.prototype.ondisconnect=function(){l("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},d.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},d.prototype.close=d.prototype.disconnect=function(){return this.connected&&(l("performing disconnect (%s)",this.nsp),this.packet({type:n.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},d.prototype.compress=function(e){return this.flags=this.flags||{},this.flags.compress=e,this}},{"./on":33,"component-bind":37,"component-emitter":38,debug:39,"has-binary":41,"socket.io-parser":47,"to-array":51}],35:[function(e,t,i){(function(i){var n=e("parseuri"),o=e("debug")("socket.io-client:url");t.exports=function(e,t){var a=e,t=t||i.location;null==e&&(e=t.protocol+"//"+t.host);"string"==typeof e&&("/"==e.charAt(0)&&(e="/"==e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),o("parse %s",e),a=n(e));a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443"));a.path=a.path||"/";var c=-1!==a.host.indexOf(":")?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+c+":"+a.port,a.href=a.protocol+"://"+c+(t&&t.port==a.port?"":":"+a.port),a}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{})},{debug:39,parseuri:45}],36:[function(e,t,i){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}t.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),i=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-i:e+i}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}},{}],37:[function(e,t,i){var n=[].slice;t.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var i=n.call(arguments,2);return function(){return t.apply(e,i.concat(n.call(arguments)))}}},{}],38:[function(e,t,i){function n(e){if(e)return o(e)}function o(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function i(){this.off(e,i),t.apply(this,arguments)}return i.fn=t,this.on(e,i),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<n.length;o++)if((i=n[o])===t||i.fn===t){n.splice(o,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),i=this._callbacks["$"+e];if(i)for(var n=0,o=(i=i.slice(0)).length;n<o;++n)i[n].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],39:[function(e,t,i){arguments[4][17][0].apply(i,arguments)},{"./debug":40,dup:17}],40:[function(e,t,i){arguments[4][18][0].apply(i,arguments)},{dup:18,ms:44}],41:[function(e,t,i){(function(i){var n=e("isarray");t.exports=function(e){return function e(t){if(!t)return!1;if(i.Buffer&&i.Buffer.isBuffer&&i.Buffer.isBuffer(t)||i.ArrayBuffer&&t instanceof ArrayBuffer||i.Blob&&t instanceof Blob||i.File&&t instanceof File)return!0;if(n(t)){for(var a=0;a<t.length;a++)if(e(t[a]))return!0}else if(t&&"object"==(void 0===t?"undefined":o(t)))for(var c in t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),t)if(Object.prototype.hasOwnProperty.call(t,c)&&e(t[c]))return!0;return!1}(e)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{})},{isarray:43}],42:[function(e,t,i){arguments[4][23][0].apply(i,arguments)},{dup:23}],43:[function(e,t,i){arguments[4][24][0].apply(i,arguments)},{dup:24}],44:[function(e,t,i){arguments[4][25][0].apply(i,arguments)},{dup:25}],45:[function(e,t,i){arguments[4][28][0].apply(i,arguments)},{dup:28}],46:[function(e,t,i){(function(t){var n=e("isarray"),a=e("./is-buffer");i.deconstructPacket=function(e){var t=[],i=e.data;var c=e;return c.data=function e(i){if(!i)return i;if(a(i)){var c={_placeholder:!0,num:t.length};return t.push(i),c}if(n(i)){for(var s=new Array(i.length),l=0;l<i.length;l++)s[l]=e(i[l]);return s}if("object"==(void 0===i?"undefined":o(i))&&!(i instanceof Date)){for(var r in s={},i)s[r]=e(i[r]);return s}return i}(i),c.attachments=t.length,{packet:c,buffers:t}},i.reconstructPacket=function(e,t){return e.data=function e(i){if(i&&i._placeholder)return t[i.num];if(n(i)){for(var a=0;a<i.length;a++)i[a]=e(i[a]);return i}if(i&&"object"==(void 0===i?"undefined":o(i))){for(var c in i)i[c]=e(i[c]);return i}return i}(e.data),e.attachments=void 0,e},i.removeBlobs=function(e,i){var c=0,s=e;(function e(l,r,g){if(!l)return l;if(t.Blob&&l instanceof Blob||t.File&&l instanceof File){c++;var h=new FileReader;h.onload=function(){g?g[r]=this.result:s=this.result,--c||i(s)},h.readAsArrayBuffer(l)}else if(n(l))for(var d=0;d<l.length;d++)e(l[d],d,l);else if(l&&"object"==(void 0===l?"undefined":o(l))&&!a(l))for(var u in l)e(l[u],u,l)})(s),c||i(s)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{})},{"./is-buffer":48,isarray:43}],47:[function(e,t,i){var n=e("debug")("socket.io-parser"),o=e("json3"),a=(e("isarray"),e("component-emitter")),c=e("./binary"),s=e("./is-buffer");function l(){}function r(e){var t="",a=!1;return t+=e.type,i.BINARY_EVENT!=e.type&&i.BINARY_ACK!=e.type||(t+=e.attachments,t+="-"),e.nsp&&"/"!=e.nsp&&(a=!0,t+=e.nsp),null!=e.id&&(a&&(t+=",",a=!1),t+=e.id),null!=e.data&&(a&&(t+=","),t+=o.stringify(e.data)),n("encoded %j as %s",e,t),t}function g(e,t){c.removeBlobs(e,function(e){var i=c.deconstructPacket(e),n=r(i.packet),o=i.buffers;o.unshift(n),t(o)})}function h(){this.reconstructor=null}function d(e){var t={},a=0;if(t.type=Number(e.charAt(0)),null==i.types[t.type])return m();if(i.BINARY_EVENT==t.type||i.BINARY_ACK==t.type){for(var c="";"-"!=e.charAt(++a)&&(c+=e.charAt(a),a!=e.length););if(c!=Number(c)||"-"!=e.charAt(a))throw new Error("Illegal attachments");t.attachments=Number(c)}if("/"==e.charAt(a+1))for(t.nsp="";++a;){if(","==(l=e.charAt(a)))break;if(t.nsp+=l,a==e.length)break}else t.nsp="/";var s=e.charAt(a+1);if(""!==s&&Number(s)==s){for(t.id="";++a;){var l;if(null==(l=e.charAt(a))||Number(l)!=l){--a;break}if(t.id+=e.charAt(a),a==e.length)break}t.id=Number(t.id)}if(e.charAt(++a))try{t.data=o.parse(e.substr(a))}catch(e){return m()}return n("decoded %s as %j",e,t),t}function u(e){this.reconPack=e,this.buffers=[]}function m(e){return{type:i.ERROR,data:"parser error"}}i.protocol=4,i.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],i.CONNECT=0,i.DISCONNECT=1,i.EVENT=2,i.ACK=3,i.ERROR=4,i.BINARY_EVENT=5,i.BINARY_ACK=6,i.Encoder=l,i.Decoder=h,l.prototype.encode=function(e,t){(n("encoding packet %j",e),i.BINARY_EVENT==e.type||i.BINARY_ACK==e.type)?g(e,t):t([r(e)])},a(h.prototype),h.prototype.add=function(e){var t;if("string"==typeof e)t=d(e),i.BINARY_EVENT==t.type||i.BINARY_ACK==t.type?(this.reconstructor=new u(t),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!s(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",t))}},h.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},u.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=c.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},u.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":46,"./is-buffer":48,"component-emitter":49,debug:39,isarray:43,json3:50}],48:[function(e,t,i){(function(e){t.exports=function(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{})},{}],49:[function(e,t,i){arguments[4][15][0].apply(i,arguments)},{dup:15}],50:[function(e,t,i){(function(e){(function(){var n={function:!0,object:!0},a=n[void 0===i?"undefined":o(i)]&&i&&!i.nodeType&&i,c=n["undefined"==typeof window?"undefined":o(window)]&&window||this,s=a&&n[void 0===t?"undefined":o(t)]&&t&&!t.nodeType&&"object"==(void 0===e?"undefined":o(e))&&e;function l(e,t){e||(e=c.Object()),t||(t=c.Object());var i=e.Number||c.Number,a=e.String||c.String,s=e.Object||c.Object,r=e.Date||c.Date,g=e.SyntaxError||c.SyntaxError,h=e.TypeError||c.TypeError,d=e.Math||c.Math,u=e.JSON||c.JSON;"object"==(void 0===u?"undefined":o(u))&&u&&(t.stringify=u.stringify,t.parse=u.parse);var m,p,f,b=s.prototype,_=b.toString,y=new r(-0xc782b5b800cec);try{y=-109252==y.getUTCFullYear()&&0===y.getUTCMonth()&&1===y.getUTCDate()&&10==y.getUTCHours()&&37==y.getUTCMinutes()&&6==y.getUTCSeconds()&&708==y.getUTCMilliseconds()}catch(e){}function v(e){if(v[e]!==f)return v[e];var n;if("bug-string-char-index"==e)n="a"!="a"[0];else if("json"==e)n=v("json-stringify")&&v("json-parse");else{var o,c='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var s=t.stringify,l="function"==typeof s&&y;if(l){(o=function(){return 1}).toJSON=o;try{l="0"===s(0)&&"0"===s(new i)&&'""'==s(new a)&&s(_)===f&&s(f)===f&&s()===f&&"1"===s(o)&&"[1]"==s([o])&&"[null]"==s([f])&&"null"==s(null)&&"[null,null,null]"==s([f,_,null])&&s({a:[o,!0,!1,null,"\0\b\n\f\r\t"]})==c&&"1"===s(null,o)&&"[\n 1,\n 2\n]"==s([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==s(new r(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==s(new r(864e13))&&'"-000001-01-01T00:00:00.000Z"'==s(new r(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==s(new r(-1))}catch(e){l=!1}}n=l}if("json-parse"==e){var g=t.parse;if("function"==typeof g)try{if(0===g("0")&&!g(!1)){var h=5==(o=g(c)).a.length&&1===o.a[0];if(h){try{h=!g('"\t"')}catch(e){}if(h)try{h=1!==g("01")}catch(e){}if(h)try{h=1!==g("1.")}catch(e){}}}}catch(e){h=!1}n=h}}return v[e]=!!n}if(!v("json")){var C=v("bug-string-char-index");if(!y)var N=d.floor,S=[0,31,59,90,120,151,181,212,243,273,304,334],B=function(e,t){return S[t]+365*(e-1970)+N((e-1969+(t=+(t>1)))/4)-N((e-1901+t)/100)+N((e-1601+t)/400)};if((m=b.hasOwnProperty)||(m=function(e){var t,i={};return(i.__proto__=null,i.__proto__={toString:1},i).toString!=_?m=function(e){var t=this.__proto__,i=e in(this.__proto__=null,this);return this.__proto__=t,i}:(t=i.constructor,m=function(e){var i=(this.constructor||t).prototype;return e in this&&!(e in i&&this[e]===i[e])}),i=null,m.call(this,e)}),p=function(e,t){var i,a,c,s=0;for(c in(i=function(){this.valueOf=0}).prototype.valueOf=0,a=new i)m.call(a,c)&&s++;return i=a=null,s?p=2==s?function(e,t){var i,n={},o="[object Function]"==_.call(e);for(i in e)o&&"prototype"==i||m.call(n,i)||!(n[i]=1)||!m.call(e,i)||t(i)}:function(e,t){var i,n,o="[object Function]"==_.call(e);for(i in e)o&&"prototype"==i||!m.call(e,i)||(n="constructor"===i)||t(i);(n||m.call(e,i="constructor"))&&t(i)}:(a=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],p=function(e,t){var i,c,s="[object Function]"==_.call(e),l=!s&&"function"!=typeof e.constructor&&n[o(e.hasOwnProperty)]&&e.hasOwnProperty||m;for(i in e)s&&"prototype"==i||!l.call(e,i)||t(i);for(c=a.length;i=a[--c];l.call(e,i)&&t(i));}),p(e,t)},!v("json-stringify")){var E={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},T=function(e,t){return("000000"+(t||0)).slice(-e)},x=function(e){for(var t='"',i=0,n=e.length,o=!C||n>10,a=o&&(C?e.split(""):e);i<n;i++){var c=e.charCodeAt(i);switch(c){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=E[c];break;default:if(c<32){t+="\\u00"+T(2,c.toString(16));break}t+=o?a[i]:e.charAt(i)}}return t+'"'},I=function e(t,i,n,a,c,s,l){var r,g,d,u,b,y,v,C,S,E,I,k,w,D,P,A;try{r=i[t]}catch(e){}if("object"==(void 0===r?"undefined":o(r))&&r)if("[object Date]"!=(g=_.call(r))||m.call(r,"toJSON"))"function"==typeof r.toJSON&&("[object Number]"!=g&&"[object String]"!=g&&"[object Array]"!=g||m.call(r,"toJSON"))&&(r=r.toJSON(t));else if(r>-1/0&&r<1/0){if(B){for(b=N(r/864e5),d=N(b/365.2425)+1970-1;B(d+1,0)<=b;d++);for(u=N((b-B(d,0))/30.42);B(d,u+1)<=b;u++);b=1+b-B(d,u),v=N((y=(r%864e5+864e5)%864e5)/36e5)%24,C=N(y/6e4)%60,S=N(y/1e3)%60,E=y%1e3}else d=r.getUTCFullYear(),u=r.getUTCMonth(),b=r.getUTCDate(),v=r.getUTCHours(),C=r.getUTCMinutes(),S=r.getUTCSeconds(),E=r.getUTCMilliseconds();r=(d<=0||d>=1e4?(d<0?"-":"+")+T(6,d<0?-d:d):T(4,d))+"-"+T(2,u+1)+"-"+T(2,b)+"T"+T(2,v)+":"+T(2,C)+":"+T(2,S)+"."+T(3,E)+"Z"}else r=null;if(n&&(r=n.call(i,t,r)),null===r)return"null";if("[object Boolean]"==(g=_.call(r)))return""+r;if("[object Number]"==g)return r>-1/0&&r<1/0?""+r:"null";if("[object String]"==g)return x(""+r);if("object"==(void 0===r?"undefined":o(r))){for(D=l.length;D--;)if(l[D]===r)throw h();if(l.push(r),I=[],P=s,s+=c,"[object Array]"==g){for(w=0,D=r.length;w<D;w++)k=e(w,r,n,a,c,s,l),I.push(k===f?"null":k);A=I.length?c?"[\n"+s+I.join(",\n"+s)+"\n"+P+"]":"["+I.join(",")+"]":"[]"}else p(a||r,function(t){var i=e(t,r,n,a,c,s,l);i!==f&&I.push(x(t)+":"+(c?" ":"")+i)}),A=I.length?c?"{\n"+s+I.join(",\n"+s)+"\n"+P+"}":"{"+I.join(",")+"}":"{}";return l.pop(),A}};t.stringify=function(e,t,i){var a,c,s,l;if(n[void 0===t?"undefined":o(t)]&&t)if("[object Function]"==(l=_.call(t)))c=t;else if("[object Array]"==l){s={};for(var r,g=0,h=t.length;g<h;r=t[g++],("[object String]"==(l=_.call(r))||"[object Number]"==l)&&(s[r]=1));}if(i)if("[object Number]"==(l=_.call(i))){if((i-=i%1)>0)for(a="",i>10&&(i=10);a.length<i;a+=" ");}else"[object String]"==l&&(a=i.length<=10?i:i.slice(0,10));return I("",((r={})[""]=e,r),c,s,a,"",[])}}if(!v("json-parse")){var k,w,D=a.fromCharCode,P={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},A=function(){throw k=w=null,g()},L=function(){for(var e,t,i,n,o,a=w,c=a.length;k<c;)switch(o=a.charCodeAt(k)){case 9:case 10:case 13:case 32:k++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=C?a.charAt(k):a[k],k++,e;case 34:for(e="@",k++;k<c;)if((o=a.charCodeAt(k))<32)A();else if(92==o)switch(o=a.charCodeAt(++k)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=P[o],k++;break;case 117:for(t=++k,i=k+4;k<i;k++)(o=a.charCodeAt(k))>=48&&o<=57||o>=97&&o<=102||o>=65&&o<=70||A();e+=D("0x"+a.slice(t,k));break;default:A()}else{if(34==o)break;for(o=a.charCodeAt(k),t=k;o>=32&&92!=o&&34!=o;)o=a.charCodeAt(++k);e+=a.slice(t,k)}if(34==a.charCodeAt(k))return k++,e;A();default:if(t=k,45==o&&(n=!0,o=a.charCodeAt(++k)),o>=48&&o<=57){for(48==o&&((o=a.charCodeAt(k+1))>=48&&o<=57)&&A(),n=!1;k<c&&((o=a.charCodeAt(k))>=48&&o<=57);k++);if(46==a.charCodeAt(k)){for(i=++k;i<c&&((o=a.charCodeAt(i))>=48&&o<=57);i++);i==k&&A(),k=i}if(101==(o=a.charCodeAt(k))||69==o){for(43!=(o=a.charCodeAt(++k))&&45!=o||k++,i=k;i<c&&((o=a.charCodeAt(i))>=48&&o<=57);i++);i==k&&A(),k=i}return+a.slice(t,k)}if(n&&A(),"true"==a.slice(k,k+4))return k+=4,!0;if("false"==a.slice(k,k+5))return k+=5,!1;if("null"==a.slice(k,k+4))return k+=4,null;A()}return"$"},R=function e(t){var i,n;if("$"==t&&A(),"string"==typeof t){if("@"==(C?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(i=[];"]"!=(t=L());n||(n=!0))n&&(","==t?"]"==(t=L())&&A():A()),","==t&&A(),i.push(e(t));return i}if("{"==t){for(i={};"}"!=(t=L());n||(n=!0))n&&(","==t?"}"==(t=L())&&A():A()),","!=t&&"string"==typeof t&&"@"==(C?t.charAt(0):t[0])&&":"==L()||A(),i[t.slice(1)]=e(L());return i}A()}return t},O=function(e,t,i){var n=F(e,t,i);n===f?delete e[t]:e[t]=n},F=function(e,t,i){var n,a=e[t];if("object"==(void 0===a?"undefined":o(a))&&a)if("[object Array]"==_.call(a))for(n=a.length;n--;)O(a,n,i);else p(a,function(e){O(a,e,i)});return i.call(e,t,a)};t.parse=function(e,t){var i,n;return k=0,w=""+e,i=R(L()),"$"!=L()&&A(),k=w=null,t&&"[object Function]"==_.call(t)?F(((n={})[""]=i,n),"",t):i}}}return t.runInContext=l,t}if(!s||s.global!==s&&s.window!==s&&s.self!==s||(c=s),a)l(c,a);else{var r=c.JSON,g=c.JSON3,h=!1,d=l(c,c.JSON3={noConflict:function(){return h||(h=!0,c.JSON=r,c.JSON3=g,r=g=null),d}});c.JSON={parse:d.parse,stringify:d.stringify}}}).call(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{})},{}],51:[function(e,t,i){t.exports=function(e,t){for(var i=[],n=(t=t||0)||0;n<e.length;n++)i[n-t]=e[n];return i}},{}]},{},[31])(31)}),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],spineChange:[function(e,t,i){"use strict";cc._RF.push(t,"23e96WkkM1IBIphnRzahtL+","spineChange"),cc.Class({extends:cc.Component,properties:{changeNode:cc.Node,changeTarget:cc.Node},onSpineClick:function(){var e=this;255==this.changeNode.opacity&&(this.changeNode.opacity=0,this.changeTarget.opacity=255,this.changeTarget.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),this.changeTarget.getComponent(sp.Skeleton).setCompleteListener(function(){e.changeTarget.opacity=0,e.changeNode.opacity=255}))}}),cc._RF.pop()},{}],sssPxUtil:[function(e,t,i){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}cc._RF.push(t,"70502sbrjZGmaStGo9UsuJf","sssPxUtil"),cc.Class({extends:cc.Component,properties:{orderSetting:{get:function(){return this._orderSetting||["c0","c2","c22","c3","c12345","c11111","c32","c4","c5","c6"]},set:function(e){this._orderSetting=e}}},px:function(e,t){var i=this;this.paiArray=e.concat(),this.jokerArr=[],this.combineObj=this.initCombineObj(),this.paiArray.sort(function(e,t){return i.getValue(t)-i.getValue(e)}),console.log(this.paiArray),this.getJokerArr(),this.combinePoint(),this.combineJoker(),this.combineApart(),this.combineGourd(),this.combinePairs(),this.combineShunzi(),this.combineTonghua(),this.combineTonghuashun(),this.combineAllJoker(),this.combine4Joker(),this.combine3Joker(),this.autoFilling();var n=["_joker1","_joker2","_joker3","_joker4","_joker5"],o={};return t&&this.combineResultObj.apply(this,[o,"c0",""].concat(n,["_apart"])),this.combineResultObj.apply(this,[o,"c2",""].concat(n,["_apart"])),this.combineResultObj(o,"c22",""),this.combineResultObj.apply(this,[o,"c3",""].concat(n,["_apart"])),this.combineResultObj.apply(this,[o,"c12345",""].concat(n)),this.combineResultObj.apply(this,[o,"c11111",""].concat(n)),this.combineResultObj(o,"c32",""),this.combineResultObj.apply(this,[o,"c4",""].concat(n,["_apart"])),this.combineResultObj.apply(this,[o,"c5",""].concat(n)),this.combineResultObj.apply(this,[o,"c6",""].concat(n)),console.log(JSON.stringify(o)),o},pxtype:function(e,t,i){var n=void 0,o=void 0,a=void 0;return 3==e.length&&(n=e.concat()),5==t.length&&(o=t.concat()),5==i.length&&(a=i.concat()),this.compareType(n,o)?this.compareType(o,a)?this.compareType(n,a)?{code:1}:{code:0,type:"error3"}:{code:0,type:"error2"}:{code:0,type:"error1"}},initCombineObj:function(){for(var e={c0:[],c2:[],c22:[],c3:[],c12345:[],c11111:[],c32:[],c4:[],c5:[],c6:[],c0_apart:[],c2_apart:[],c3_apart:[],c4_apart:[]},t=0;t<=5;t++)e["c0_joker"+t]=[],e["c2_joker"+t]=[],e["c3_joker"+t]=[],e["c12345_joker"+t]=[],e["c11111_joker"+t]=[],e["c4_joker"+t]=[],e["c5_joker"+t]=[],e["c6_joker"+t]=[];return e},getJokerArr:function(e,t){e||(e=this.paiArray),t||(t=this.jokerArr);for(var i=0;i<e.length;i++)0==this.getValue(e[i])&&t.push(e[i])},combinePoint:function(e,t){e||(e=this.paiArray),t||(t=this.combineObj);for(var i=-1,n=[],o=0;o<e.length;o++){var a=e[o],c=this.getValue(a);c>0&&(c==i&&n.length<5&&n.push(a),c!=i&&(n.length>0&&t[this.getCombineName(n.length)].push(n.concat()),n.splice(0,n.length,a),i=c))}n.length>0&&t[this.getCombineName(n.length)].push(n.concat())},combineJoker:function(e,t){if(e||(e=this.jokerArr),t||(t=this.combineObj),0!=e.length)for(var i=void 0,n=4;n>0;n--)for(var o=t[this.getCombineName(n)],a=0;a<o.length;a++){i=o[a].concat();for(var c=0;c<e.length&&!(n+c+1>5);c++)i.push(e[c]),t[this.getCombineName(n+c+1)+"_joker"+(c+1)].push(i.concat())}},combineApart:function(e){e||(e=this.combineObj);for(var t=void 0,i=5;i>1;i--)for(var n=e[this.getCombineName(i)],o=0;o<n.length;o++){t=n[o].concat();for(var a=i-1;a>0;a--)t.pop(),e[this.getCombineName(a)+"_apart"].push(t.concat())}},combineGourd:function(e){e||(e=this.combineObj);for(var t=e.c3.concat(e.c3_joker1,e.c3_apart),i=e.c2_apart.concat(e.c2),n=0;n<t.length;n++){for(var o=0,a=-1,c=0;c<t[n].length;c++)0==this.getValue(t[n][c])?o++:a=this.getValue(t[n][0]);if(!(o>1))for(var s=i.length-1;s>=0;s--){var l=this.getValue(i[s][0]);a!=l&&(o>0&&a<l||e.c32.push(t[n].concat(i[s])))}}},combinePairs:function(e){e||(e=this.combineObj);for(var t=e.c2.concat(e.c2_apart),i=0;i<t.length-1;i++){for(var n=e.c2.length-1;n>=0;n--)this.getValue(t[i][0])!=this.getValue(e.c2[n][0])&&e.c22.push(t[i].concat(e.c2[n]));for(var o=e.c2_apart.length-1;o>=0;o--)this.getValue(t[i][0])!=this.getValue(e.c2_apart[o][0])&&e.c22.push(t[i].concat(e.c2_apart[o]))}},combineShunzi:function(e,t,i){if(e||(e=this.paiArray),t||(t=this.jokerArr),i||(i=this.combineObj),!(e.length<5)){for(var n=[],o=[],a=-1,c=0;c<e.length;c++){var s=e[c];if(a!=this.getValue(s)&&0!=(a=this.getValue(s))){a=this.getValue(s);for(var l=0;l<n.length;l++){var r=n[l];r.length<5&&this.getValue(r[0])-a<5&&r.push(s)}a>5&&n.push([s]),(14==a||a>=2&&a<=5)&&o.push(s)}}for(var g=0;g<n.length;g++){var h=n[g];if(5==h.length){if(i.c12345.push(h.concat()),14==this.getValue(h[0]))continue}else if(h.length+t.length<5)continue;for(var d=0;d<t.length&&!(d>=4);d++)this.switchJoker(h,t[d]),5==h.length&&i["c12345_joker"+(d+1)].push(h.concat())}for(var u=0;u<=t.length&&!(u>=4);u++)if(o.length+u==5){if(14==this.getValue(o[o.length-1]))break;var m="";u>0&&(m="_joker"+u);var p=i["c12345"+m],f=0;for(f=0;f<p.length&&14==this.getValue(p[f][0]);f++);i["c12345"+m].splice(f,0,o.concat(t.slice(0,u)))}else if(o.length+u>5)break}},combineTonghua:function(e,t,i){if(e||(e=this.paiArray),t||(t=this.jokerArr),i||(i=this.combineObj),!(e.length<5)){for(var n={color_1:[],color_2:[],color_3:[],color_4:[]},o=0;o<e.length;o++){var a=this.getColor(e[o]);a>0&&n["color_"+a].push(e[o])}for(var c=1;c<=4;c++)this.combine(0,5,"c11111",n["color_"+c].concat(t),[],0,i)}},combineTonghuashun:function(e){e||(e=this.combineObj);for(var t=0;t<5;t++){var i="";t>0&&(i="_joker"+t);for(var n=0;n<e["c11111"+i].length;n++){for(var o=e["c11111"+i][n],a=-1,c=99,s=-1,l=!0,r=0;r<o.length;r++){if(s==this.getValue(o[r])&&s>0){c=-99,l=!1;break}0!=(s=this.getValue(o[r]))&&(s>a&&(a=s),s<c&&(c=s),14!=s&&s>=6&&(l=!1))}(a-c<=4||l)&&e["c5"+i].push(o.concat())}}},combineAllJoker:function(e,t,i){e||(e=this.paiArray),t||(t=this.jokerArr),i||(i=this.combineObj),t.length>=5?i[this.orderSetting[this.orderSetting.length-1]+"_joker5"].push(t.slice(0,5)):3==e.length&&3==t.length&&i.c3.push(t.concat())},combine4Joker:function(e){e||(e=this.combineObj),this.compareOrderSetting("c5","c6")?(e.c11111_joker4.slice(0,e.c11111_joker4.length),e.c12345_joker4.slice(0,e.c12345_joker4.length),e.c5_joker4.slice(0,e.c5_joker4.length)):e.c6.slice(0,e.c6.length)},combine3Joker:function(e){e||(e=this.combineObj),this.compareOrderSetting("c11111","c4")&&e.c11111_joker3.slice(0,e.c11111_joker3.length),this.compareOrderSetting("c12345","c4")&&e.c12345_joker3.slice(0,e.c12345_joker3.length),this.compareOrderSetting("c5","c4")&&e.c5_joker3.slice(0,e.c5_joker3.length)},compareOrderSetting:function(e,t){for(var i=0;i<this.orderSetting.length;i++){if(this.orderSetting[i]==e)return!0;if(this.orderSetting[i]==t)return!1}},combineResultObj:function(e,t){e[t]||(e[t]=[]);for(var i=arguments.length,o=Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];for(var c=0;c<o.length;c++){var s;(s=e[t]).push.apply(s,n(this.combineObj[t+o[c]]))}},combine:function(e,t,i,n,o,a,c){for(var s=-1,l=e;l<n.length;l++)if(s!=n[l]){if(o.push(n[l]),0==this.getValue(n[l])&&a++,t<=1){var r="";a>0&&(r="_joker"+a),c[i+r].push(o.concat())}else this.combine(l+1,t-1,i,n,o,a,c);0==this.getValue(n[l])&&a--,s=o.pop()}},compareType:function(e,t){var i=this;if(!e||!t)return!0;e.sort(function(e,t){return i.getValue(t)-i.getValue(e)}),t.sort(function(e,t){return i.getValue(t)-i.getValue(e)});var n=this.getBestType(e),o=this.getBestType(t);if(console.log(JSON.stringify(n)),console.log(JSON.stringify(o)),n.maxType==o.maxType){switch(n.maxType){case"c0":for(var a=0;a<t.length;a++){if(a>=e.length)return!0;var c=this.getValue(e[a]),s=this.getValue(t[a]);if(c!=s)return!(c>s)}return!0;case"c12345":case"c5":var l=this.getShunziArea(e),r=this.getShunziArea(t);if(l.max!=r.max)return!(l.max>r.max);if(l.min!=r.min)return!(l.min>r.min);break;case"c11111":e.sort(function(e,t){var n=0==i.getValue(e)?14:i.getValue(e);return(0==i.getValue(t)?14:i.getValue(t))-n}),t.sort(function(e,t){var n=0==i.getValue(e)?14:i.getValue(e);return(0==i.getValue(t)?14:i.getValue(t))-n});for(var g=0;g<t.length;g++){if(g>=e.length)return!0;var h=this.getValue(e[g]),d=this.getValue(t[g]);if(0==h&&(h=14),0==d&&(d=14),h!=d)return!(h>d)}return!0;case"c2":case"c22":case"c3":case"c32":case"c4":case"c6":var u,m;u=this.initCombineObj(),m=this.initCombineObj(),this.combinePointGroup(e,u),this.combinePointGroup(t,m);for(var p=void 0,f=void 0,b=!1,_=this.orderSetting.length-1;_>=0;_--){if(b="c0"==this.orderSetting[_],p=u[this.orderSetting[_]],f=m[this.orderSetting[_]],!b&&p.length>f.length)return!1;if(!b&&p.length<f.length)return!0;if(0!=p.length)for(var y=0;y<p.length;y++)for(var v=14,C=14,N=void 0,S=void 0,B=0;B<p[y].length;B++){if(N=this.getValue(p[y][B]),S=this.getValue(f[y][B]),0!=N&&(v=N),0!=S&&(C=S),v>C)return!1;if(v<C)return!0;if(N>S)return!1;if(N<S)return!0}}return!0}var E=[],T=[];return this.getJokerArr(e,E),this.getJokerArr(t,T),!(E.length<T.length)}return this.compareOrderSetting(n.maxType,o.maxType)},switchJoker:function(e,t){5==e.length&&e.pop(),e.unshift(t)},getCombineName:function(e){return 1==e?"c0":2==e?"c2":3==e?"c3":4==e?"c4":e>=5?"c6":void 0},getValue:function(e){if(e>=80)return 0;var t=e%20;return 1==t?14:t},getColor:function(e){return e>=80?0:parseInt(e/20)+1},getBestType:function(e){for(var t=this.px(e,!0),i=this.orderSetting.length-1;i>=0;i--)if(t[this.orderSetting[i]].length>0)return t.maxType=this.orderSetting[i],t;return console.log("\u5f02\u5e38:\u627e\u4e0d\u5230\u4efb\u4f55\u7ec4\u5408"),t.maxType="c0",t},getShunziArea:function(e){if(e||(e=this.paiArray),5!=e.length)return!1;for(var t=99,i=-1,n=0;n<e.length;n++){var o=this.getValue(e[n]);o>0&&(o>i&&(i=o),o<t&&(t=o))}return-1==i&&(t=10),t>10&&(t=10),t<6&&(i<6||14==i)?(t=2,i=14):i=t+4,{max:i,min:t}},combinePointGroup:function(e,t){e||(e=this.paiArray);for(var i=e.concat(),n=[],o=e.length-1;o>=0&&0==this.getValue(e[o]);o--)n.push(i.pop());if(0!=i.length){for(var a=-1,c=[],s=0;s<i.length;s++){var l=i[s],r=this.getValue(l);r>0&&(r==a?c.length<5&&c.push(l):(c.length>0&&t[this.getCombineName(c.length)].push(c.concat()),c.splice(0,c.length,l),a=r))}c.length>0&&t[this.getCombineName(c.length)].push(c.concat());var g=n.length;if(g>0)for(var h=this.orderSetting.length-1;h>=0;h--)if(t[this.orderSetting[h]].length>0){for(var d=t[this.orderSetting[h]][0],u=0;u<g;u++)d.push(n.shift());t[this.getCombineName(d.length)].push(d),t[this.orderSetting[h]].shift();break}}else t[this.getCombineName(n.length)].push(n)},autoFilling:function(){var e=this.combineObj;e.c2.length>0&&this.filling(e.c2),e.c2_apart.length>0&&this.filling(e.c2_apart),e.c22.length>0&&this.filling(e.c22),e.c3.length>0&&this.filling(e.c3),e.c3_apart.length>0&&this.filling(e.c3_apart),e.c4.length>0&&this.filling(e.c4),e.c4_apart.length>0&&this.filling(e.c4_apart);for(var t=0;t<=5;t++)e["c2_joker"+t].length>0&&this.filling(e["c2_joker"+t]),e["c3_joker"+t].length>0&&this.filling(e["c3_joker"+t]),e["c4_joker"+t].length>0&&this.filling(e["c4_joker"+t])},filling:function(e){for(var t=this.getAllFillingC0(),i=0;i<e.length;i++)for(var n=0;n<t.length&&(this.checkContains(e[i],t[n])||(e[i].push(t[n]),!(e[i].length>=5)));n++);},checkContains:function(e,t){for(var i=0;i<e.length;i++)if(this.getValue(e[i])==this.getValue(t))return!0;return!1},getAllFillingC0:function(){var e=this,t=this.combineObj,i=[],n=t.c0;n.sort(function(t,i){return e.getValue(t)-e.getValue(i)});for(var o=0;o<n.length;o++)i.push(n[o]);var a=t.c0_apart;a.sort(function(t,i){return e.getValue(t)-e.getValue(i)});for(var c=0;c<a.length;c++)i.push(a[c]);return i}}),cc._RF.pop()},{}],sssReplay:[function(e,t,i){"use strict";cc._RF.push(t,"6d574RrIAhH+7pehxO7OsHr","sssReplay"),Array.prototype.remove=function(e){if(console.log("\u5220\u9664\u6570\u7ec4\u8282\u70b9,dx="+e),isNaN(e)||e>this.length)return!1;this.splice(e,1)},Array.prototype.removeVal=function(e){for(var t=0;t<this.length;t++)if(this[t]==e){this.splice(t,1);break}},Array.prototype.hasVal=function(e){var t=!1;"number"==typeof e&&(e=e.toString());for(var i=0;i<this.length;i++)if(this[i].toString()==e){t=!0;break}return t},cc.Class({extends:cc.Component,properties:{card_small_atlas:{default:null,type:cc.SpriteAtlas},card_mp_small_atlas:{default:null,type:cc.SpriteAtlas}},onLoad:function(){cc.global.util.resize(),this.initView(),this.node.getChildByName("mapai").active=!1,this.node.getChildByName("headLeft").getChildByName("roominfo").getChildByName("info").active=!1,this.node.getChildByName("headLeft").getChildByName("roominfo").getChildByName("info2").active=!1,this.node.getChildByName("headLeft").getChildByName("roominfo").getChildByName("num").getComponent(cc.Label).string="\u623f\u53f7\uff1a"+cc.global.util.room_no,this.node.getChildByName("headLeft").getChildByName("roominfo").getChildByName("jushu").getComponent(cc.Label).string="\u7b2c"+cc.global.util.sssReplayData.game_index+"\u5c40",cc.global.util.sssReplayData.createTime?(this.node.getChildByName("headLeft").getChildByName("roominfo").getChildByName("time").getComponent(cc.Label).string="\u6e38\u620f\u65f6\u95f4\uff1a"+cc.global.util.sssReplayData.createTime,this.node.getChildByName("headLeft").getChildByName("roominfo").getChildByName("time").active=!0):this.node.getChildByName("headLeft").getChildByName("roominfo").getChildByName("time").active=!1;var e=cc.global.util.sssReplayData.result,t=-1,i=cc.global.util.sssReplayData.maPai;if(i){var n=i.split("-");t=parseInt(20*(n[0]-1))+parseInt(n[1])}for(var o=0;o<e.length;o++){var a=this.node.getChildByName("game").getChildByName("player"+e[o].myIndex);a.getChildByName("touxiang").getChildByName("name").getComponent(cc.Label).string=e[o].name,a.getChildByName("touxiang").getChildByName("score").getComponent(cc.Label).string=e[o].score,""!=e[o].headimg&&function(t){console.log("\u5f53\u524d\u7528\u6237\u4fe1\u606f"+e[o].name+"\uff0c\u7528\u6237\u5934\u50cf\uff1a"+cc.global.http.url+"/zagame"+e[o].headimg),cc.loader.load(cc.global.http.url+"/zagame"+e[o].headimg,function(e,i){var n=new cc.SpriteFrame(i,cc.Rect(0,0,i.width,i.height));t.getChildByName("touxiang").getChildByName("sss_img_touxiang").getComponent(cc.Sprite).spriteFrame=n})}(a),a.getChildByName("pai").active=!0;for(var c=a.getChildByName("pai").getChildByName("up").getComponentsInChildren(cc.Sprite),s=0;s<c.length;s++)cc.global.util.sssReplayData.maPaiIndex==e[o].myIndex&&-1!=t&&t==e[o].myPai[s]?(console.log("\u5934\u9053\u4f7f\u7528\u9a6c\u724c\u56fe\u96c6"),this.setSpriteFrameByNum(e[o].myPai[s],c[s],this.card_mp_small_atlas,!0)):this.setSpriteFrameByNum(e[o].myPai[s],c[s],this.card_small_atlas,!0);var l=a.getChildByName("pai").getChildByName("cen").getComponentsInChildren(cc.Sprite);for(s=0;s<l.length;s++)cc.global.util.sssReplayData.maPaiIndex==e[o].myIndex&&-1!=t&&t==e[o].myPai[3+s]?(console.log("\u4e2d\u9053\u4f7f\u7528\u9a6c\u724c\u56fe\u96c6"),this.setSpriteFrameByNum(e[o].myPai[3+s],l[s],this.card_mp_small_atlas,!0)):this.setSpriteFrameByNum(e[o].myPai[3+s],l[s],this.card_small_atlas,!0);var r=a.getChildByName("pai").getChildByName("down").getComponentsInChildren(cc.Sprite);for(s=0;s<r.length;s++)cc.global.util.sssReplayData.maPaiIndex==e[o].myIndex&&-1!=t&&t==e[o].myPai[8+s]?(console.log("\u5c3e\u9053\u4f7f\u7528\u9a6c\u724c\u56fe\u96c6"),this.setSpriteFrameByNum(e[o].myPai[8+s],r[s],this.card_mp_small_atlas,!0)):this.setSpriteFrameByNum(e[o].myPai[8+s],r[s],this.card_small_atlas,!0);a.active=!0}},goBackHall:function(){cc.global.game.backHall()},initView:function(){for(var e=this.node.getChildByName("game").children,t=0;t<e.length;t++)if(-1!=e[t].name.indexOf("player")){e[t].getChildByName("pai").active=!1,e[t].getChildByName("zongfen").active=!1,e[t].getChildByName("ready_ok").active=!1,e[t].getChildByName("done_ok").active=!1,e[t].getChildByName("bijiao").active=!1,e[t].getChildByName("touxiang").getChildByName("zhuang").active=!1,e[t].getChildByName("t_teshupaixing").active=!1,e[t].getChildByName("xiazhu").active=!1;for(var i=e[t].getChildByName("pai").children,n=0;n<i.length;n++){console.log("\u6e05\u7a7a\u624b\u724c");for(var o=i[n].getComponentsInChildren(cc.Sprite),a=0;a<o.length;a++)this.setSpriteFrameByNum(0,o[a],this.card_small_atlas,!0)}e[t].getChildByName("bifen").active=!1,e[t].getChildByName("bifen").children[0].active=e[t].getChildByName("bifen").children[1].active=e[t].getChildByName("bifen").children[2].active=!1,e[t].getChildByName("t_teshupaixing").active=!1,e[t].getChildByName("sss_img_lipaiz").active=!1,e[t].active=!1}},setSpriteFrameByNum:function(e,t,i,n){if(t.spriteFrame=this.getSpriteFrameByNum(e,i),t.node.mTag=parseInt(e),n)return!1;for(var o=t.node.parent,a="",c=0;;){if(e=e.toString()+a,!o.getChildByName(e)){t.node.name=e,console.log("set num is "+e);break}a="_"+c,c++}},getSpriteFrameByNum:function(e,t){return t.getSpriteFrame("card_"+e)}}),cc._RF.pop()},{}],startHotUpdate:[function(e,t,i){"use strict";cc._RF.push(t,"bbaa3FV3c9IjKB25xfuPFVK","startHotUpdate"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},startUpdate:function(){this.node.getChildByName("hotUpdate").active=!0,this.node.getComponent("HotUpdate-game").startHotUpdate(this.progressFun,this.msgFun)},msgFun:function(e,t){var i=this,n=this.node.getChildByName("hotUpdate").getChildByName("tip");if(console.log("m:"+e+"; code:"+t),n.getComponent(cc.Label).string=e,2!=t){n=this.node.getChildByName("hotUpdate").getChildByName("tip");if(e&&(n.getComponent(cc.Label).string=e),this.node.getChildByName("hotUpdate").active=!0,2==t){var o=cc.instantiate(cc.global.util.frm_tip);o.getComponent("frm_tip").initView({name:"frm_hotUpdateTip",msg:"\u68c0\u6d4b\u5230\u65b0\u7248\u672c\uff0c\u8bf7\u7acb\u5373\u66f4\u65b0",btns:[{name:"\u7acb\u5373\u66f4\u65b0",onClick:function(){i.node.getComponent("HotUpdate").hotUpdate(),o.getComponent("frm_tip").onCloseClick()}}]}),this.node.addChild(o)}else if(-1==t){n.getComponent(cc.Label).string="\u66f4\u65b0\u5931\u8d25!";var a=cc.instantiate(cc.global.util.frm_tip);a.getComponent("frm_tip").initView({msg:"\u66f4\u65b0\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5",btns:[{name:"\u786e\u5b9a",onClick:function(){cc.game.restart()}}]}),this.node.addChild(a)}else if(1==t){n.getComponent(cc.Label).string="\u5df2\u66f4\u65b0\u81f3\u6700\u65b0\u7248\u672c";var c=this.node.getComponent("HotUpdate-game").getVersion();cc.global.util.gameVersion[cc.global.util.childGame.gid]=c,cc.sys.localStorage.setItem("gameVersion",JSON.stringify(cc.global.util.gameVersion)),this.node.getChildByName("hotUpdate").active=!1,this.node.getComponent("dating").onGameClick(null,cc.global.util.childGame.gid),cc.global.util.tipMsg("\u66f4\u65b0\u6210\u529f")}}},progressFun:function(e){this.node.getChildByName("hotUpdate").getChildByName("tip");if(console.log("p:"+JSON.stringify(e)),e.filePercent>=0){var t=this.node.getChildByName("hotUpdate").getChildByName("progress");t.active=!0,t.getComponent(cc.ProgressBar).progress=e.filePercent,this.node.getChildByName("hotUpdate").getChildByName("value").getComponent(cc.Label).string=Math.floor(100*parseFloat(e.filePercent).toFixed(2))+"%("+e.fileMsg+")"}}}),cc._RF.pop()},{}],tea:[function(e,t,i){"use strict";cc._RF.push(t,"0f5e4nWP+xFcpoU/K495DH7","tea");var n=e("./global/NotificationNames"),o=e("./global/item_generator");function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function n(o,a){try{var c=t[o](a),s=c.value}catch(e){return void i(e)}if(!c.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}cc.Class({extends:cc.Component,properties:{list:{type:cc.Node,default:null,tooltip:"\u5217\u8868\u5bb9\u5668"},tea_list_item_prefab:{type:cc.Prefab,default:null,tooltip:"\u8336\u697c\u5217\u8868prefab"},roomPrefab:{type:cc.Prefab,default:null,tooltip:"\u8336\u697c\u623f\u95f4\u5217\u8868prefab"},roomList:{type:cc.Node,default:null,tooltip:"\u8336\u697c\u623f\u95f4\u5217\u8868\u5bb9\u5668"},teaJar:{type:cc.Node,default:null,tooltip:"\u8336\u7f50\u6309\u94ae"}},onLoad:function(){var e=this;cc.global.game._dispatchEventHandel=this.node,this.node.on("getUserInfoPush",function(t){e.getUserInfoPush(t)}),this.eventList={},this.eventList[n.NotificationNames.TEA_LISTEVENT_PUSH]=this.teaListEventPush,this.eventList[n.NotificationNames.TEA_JOINEVENT_PUSH]=this.teaJoinEventPush,this.eventList[n.NotificationNames.TEA_INFOEVENT_PUSH]=this.teaInfoEventPush,this.eventList[n.NotificationNames.TEA_ROOMLISTEVENTEVENT_PUSH]=this.teaRoomListEventEventPush,this.eventList[n.NotificationNames.TEA_QUICKJOINEVENT_PUSH]=this.teaQuickJoinEventPush,this.eventList[n.NotificationNames.TEA_GETMEMBERINFOEVENT_PUSH]=this.teaGetMemberInfoEventPush,this.eventList.tea_refresh_room_list=this.sendTeaRoomListEvent,this.eventList.tea_refresh_scence=this.teaRefreshScence,this.playMusic(),this.registerObserver(),this.wdclIsRight=!1,this.wdclLeftX=this.node.getChildByName("sidebar").getChildByName("tea_tab_wdcl").x-this.node.getChildByName("sidebar").getChildByName("scrollview").width,this.wdclRightX=this.node.getChildByName("sidebar").getChildByName("tea_tab_wdcl").x,cc.global.util.tea={},cc.global.util.resize(),this.initView(),this.sendTeaRoomListEvent(),this.sendTeaGetMemberInfoEvent(),this.schedule(this.sendTeaInfoEvent,3),this.schedule(this.sendTeaRoomListEvent,3),this.schedule(this.sendGetUserInfo,3),this.schedule(this.sendTeaGetMemberInfoEvent,3),cc.global.util.replayCustomData&&cc.global.util.showReplayCustomData&&cc.global.pop_mgr.showFrm({name:"frm_teaZhanji",customData:{type:"tea"}})},onDestroy:function(){this.removeObserver()},playMusic:function(){var e=cc.find("Canvas/music").getComponent(cc.AudioSource);e.volume=cc.global.util.setting.music,0==cc.global.util.setting.musicOn?e.mute=!0:e.mute=!1,e.play()},initView:function(){cc.global.util.setHeadimg(cc.find("userinfo/head/mask/sp",this.node),cc.global.util.userinfo.headimg),cc.find("userinfo/namebar/name",this.node).getComponent(cc.Label).string=cc.global.util.userinfo.name,cc.find("userinfo/status/fk",this.node).getComponent(cc.Label).string=cc.global.util.userinfo.roomcard,cc.find("userinfo/tea",this.node).active=!0,cc.global.util.teaUserinfo&&cc.global.util.teaUserinfo.memberPowern&&0==cc.global.util.teaUserinfo.memberPowern?cc.find("userinfo/namebar/roleTag",this.node).active=!0:cc.find("userinfo/namebar/roleTag",this.node).active=!1,cc.global.util.teaUserinfo?(this.node.getChildByName("header").getChildByName("cl_info").getChildByName("name").getComponent(cc.Label).string=cc.global.util.teaUserinfo.teaName,this.node.getChildByName("header").getChildByName("cl_info").getChildByName("cl_yqm").getChildByName("label").getComponent(cc.Label).string=cc.global.util.teaUserinfo.teaInfoCode,this.node.getChildByName("header").getChildByName("cl_info").getChildByName("cl_id").getComponent(cc.Label).string=cc.global.util.teaUserinfo.teaInfoCode,this.node.getChildByName("header").getChildByName("cl_info").active=!0,this.teaJar.active=0==cc.global.util.teaUserinfo.memberPowern||1==cc.global.util.teaUserinfo.memberPowern):(this.node.getChildByName("header").getChildByName("cl_info").active=!1,this.teaJar.active=!1),this.node.getChildByName("sidebar").getChildByName("scrollview").active=this.wdclIsRight,this.node.getChildByName("sidebar").getChildByName("tea_tab_wdcl").x=this.wdclIsRight?this.wdclRightX:this.wdclLeftX},registerObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.on(e,this.eventList[e],this)},removeObserver:function(){if(this.eventList)for(var e in this.eventList)Notification.off(e,this.eventList[e],this)},onMyTeaClick:function(){cc.global.util.playSound_buttonClick();var e=this.node.getChildByName("sidebar").getChildByName("tea_tab_wdcl");e.x==this.wdclLeftX?this.showOrHideMyTea(!0):e.x==this.wdclRightX&&this.showOrHideMyTea(!1)},showOrHideMyTea:function(e){var t=this.node.getChildByName("sidebar").getChildByName("scrollview"),i=this.node.getChildByName("sidebar").getChildByName("tea_tab_wdcl");this.wdclIsRight=e,i.x=e?this.wdclRightX:this.wdclLeftX,t.active=e,this.node.getChildByName("hide").active=e,e&&(cc.global.util.showAlert("\u6b63\u5728\u83b7\u53d6\u8336\u697c\u5217\u8868",!0),cc.global.net.send("tea_listEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform}))},teaListEventPush:function(e){if(1!=e.code)return cc.global.util.closeAlert(),void cc.global.util.tipMsg(e.msg);var t=e.data||[];this.showTeaList(this.list,t,this.tea_list_item_prefab)},showTeaList:function(){var e=a(regeneratorRuntime.mark(function e(t,i,n){var a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.item_generator.getInstance().executePreFrame(o.item_generator.getInstance()._getItemGenerator(t,i,n,function(e,t){cc.find("Background",e).getChildByName("tea_name").getComponent(cc.Label).string=i[t].teaName,cc.find("Background",e).getChildByName("tea_yqm").getComponent(cc.Label).string=i[t].teaInfoCode,cc.find("Background",e).getChildByName("checkmark").active=!1,cc.global.util.teaUserinfo&&cc.global.util.teaUserinfo.teaInfoCode==i[t].teaInfoCode&&(cc.find("Background",e).getChildByName("checkmark").active=!0);var n=cc.find("avatar",e).getChildByName("pic"),o=i[t].teaHeadimg;n.m_headimg&&n.m_headimg==o||(n.getComponent(cc.Sprite).spriteFrame=null,cc.global.util.setHeadimg(n,o,!1,function(){n.m_headimg=o})),e.m_teaInfoCode=i[t].teaInfoCode,e.on("click",a.onTeaListItemClick,a)}),4,this);case 2:cc.global.util.closeAlert();case 3:case"end":return e.stop()}},e,this)}));return function(t,i,n){return e.apply(this,arguments)}}(),onTeaListItemClick:function(e){cc.global.util.playSound_buttonClick();for(var t=e.target,i=this.node.getChildByName("sidebar").getChildByName("scrollview").getChildByName("view").getChildByName("content").children,n=0;n<i.length;n++)i[n].getChildByName("Background").getChildByName("checkmark").active=t.m_teaInfoCode==i[n].m_teaInfoCode;this.isGoTea=!0,cc.global.util.showAlert("\u6b63\u5728\u52a0\u8f7d",!0),cc.global.net.send("tea_infoEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,teaInfoCode:t.m_teaInfoCode}),cc.global.net.send("tea_roomListEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,teaInfoCode:t.m_teaInfoCode,account:cc.global.util.userinfo.account}),cc.global.net.send("tea_getMemberInfoEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,teaInfoCode:t.m_teaInfoCode})},teaInfoEventPush:function(e){this.isGoTea&&(cc.global.util.closeAlert(),this.isGoTea=!1,1==e.code?(cc.sys.localStorage.setItem("teaInfoCode",e.data.teaInfoCode),cc.global.util.teaUserinfo=e.data,this.initView(),this.sendTeaRoomListEvent()):e.teaName&&e.teaCode?(cc.global.util.teaUserinfo={teaName:e.teaName,teaInfoCode:e.teaCode},cc.sys.localStorage.setItem("teaInfoCode",e.teaCode),this.initView(),this.sendTeaRoomListEvent()):cc.global.util.teaUserinfo=null)},goDating:function(){cc.global.util.playSound_buttonClick(),cc.global.util.teaUserinfo=null,cc.global.util.datingType="dating",cc.director.loadScene("dating")},showFrm:function(e,t){if("frm_createTea"==t||"joinTea"==t||"frm_personal"==t||cc.global.util.teaUserinfo)if("frm_teaSetting"!=t||cc.global.util.teaUserinfo&&3!=cc.global.util.teaUserinfo.memberPowern){var i=null;switch(t){case"frm_createTea":i={};break;case"joinTea":t="frm_input",i={type:"str",maxLength:5,defNum:"",placeholder:"\u8bf7\u8f93\u51655\u4f4d\u8336\u697c\u7801",inputOver:this.inputOver_joinTea,label:null,target:this,title:"joinTea",showHead:!1,isAutoOver:!0,isShowOk:!1,closeWhenInputOver:!0};break;case"frm_teaSetting":case"frm_teaMember":case"frm_teaZhanji":i={}}console.log("\u6253\u5f00\u5f39\u7a97:"+t),cc.global.pop_mgr.showFrm({name:t,customData:i})}else cc.global.util.tipMsg("\u60a8\u6ca1\u6709\u67e5\u770b\u6743\u9650");else cc.global.util.tipMsg("\u8bf7\u5148\u9009\u62e9\u62e9\u8336\u697c")},inputOver_joinTea:function(e,t,i){cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u8bf7\u6c42",!0),cc.global.net.send("tea_joinEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,teaInfoCode:t})},teaJoinEventPush:function(e){cc.global.util.tipMsg(e.msg),cc.global.util.closeAlert()},sendTeaRoomListEvent:function(){if(cc.global.util.teaUserinfo){var e={uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,platform:cc.global.util.gameinfo.platform,teaInfoCode:cc.global.util.teaUserinfo.teaInfoCode,account:cc.global.util.userinfo.account};cc.global.net.send("tea_roomListEvent",e,!0)}},sendGetUserInfo:function(){cc.global.net.send("getUserInfo",{account:cc.global.util.userinfo.account})},sendTeaInfoEvent:function(){cc.global.util.teaUserinfo&&(this.isGoTea=!0,cc.global.net.send("tea_infoEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,teaInfoCode:cc.global.util.teaUserinfo.teaInfoCode}))},sendTeaGetMemberInfoEvent:function(){cc.global.util.teaUserinfo&&cc.global.net.send("tea_getMemberInfoEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,teaInfoCode:cc.global.util.teaUserinfo.teaInfoCode})},teaGetMemberInfoEventPush:function(e){e&&(cc.find("footer/audit_tip",this.node).active=!1,1==e.code?(e.data&&e.data.teaMoney?(cc.find("userinfo/tea",this.node).active=!0,cc.find("userinfo/tea/tea",this.node).getComponent(cc.Label).string=e.data.teaMoney):cc.find("userinfo/tea",this.node).active=!1,cc.global.util.teaUserinfo&&(0!=cc.global.util.teaUserinfo.memberPowern&&1!=cc.global.util.teaUserinfo.memberPowern||(e.data.auditMemberCount>0||e.data.quitMemberMsgCount>0)&&(cc.find("footer/audit_tip",this.node).active=!0),cc.global.util.teaUserinfo.id=e.data.id)):cc.find("userinfo/tea",this.node).active=!1)},getUserInfoPush:function(e){e&&1==e.code&&(cc.global.util.userinfo.roomcard=e.user.roomcard,cc.find("userinfo/status/fk",this.node).getComponent(cc.Label).string=cc.global.util.userinfo.roomcard)},teaRoomListEventEventPush:function(e){if(1==e.code){var t=e.data||[];cc.find("tips/icon_noroom",this.node).active=0==t.length,cc.find("rooms",this.node).active=!0,this.showTeaRoomList(this.roomList,t,this.roomPrefab)}else cc.global.util.tipMsg(e.msg)},showTeaRoomList:function(){var e=a(regeneratorRuntime.mark(function e(t,i,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.item_generator.getInstance().executePreFrame(o.item_generator.getInstance()._getItemGenerator(t,i,n,function(e,t){i[t].room_num_info=t+1,e.getComponent("CircleRoom").init(i[t])}),2,this);case 2:case"end":return e.stop()}},e,this)}));return function(t,i,n){return e.apply(this,arguments)}}(),teaQuickJoinEvent:function(){cc.global.util.playSound_buttonClick(),cc.global.util.teaUserinfo?(console.log("\u53d1\u9001\u5feb\u901f\u5f00\u59cb\u8bf7\u6c42"),cc.global.util.showAlert("\u6b63\u5728\u63d0\u4ea4\u8bf7\u6c42",!0),cc.global.net.send("tea_quickJoinEvent",{uid:cc.global.util.userinfo.uid,token:cc.global.util.userinfo.token,uuid:cc.global.util.userinfo.uuid,platform:cc.global.util.gameinfo.platform,teaInfoCode:cc.global.util.teaUserinfo.teaInfoCode,account:cc.global.util.userinfo.account})):console.log("\u8336\u697c\u4fe1\u606f\u9519\u8bef")},teaQuickJoinEventPush:function(e){cc.global.util.tipMsg(e.msg),cc.global.util.closeAlert()},onTeaRefreshClick:function(){cc.global.util.playSound_buttonClick(),this.sendTeaGetMemberInfoEvent(),this.sendTeaInfoEvent(),this.sendTeaRoomListEvent(),this.sendGetUserInfo()},teaRefreshScence:function(e){console.log(JSON.stringify(e)),this.initView(),"exit"!=e.type&&"dissolve"!=e.type||(cc.find("rooms",this.node).active=!1),this.showOrHideMyTea(!0)}}),cc._RF.pop()},{"./global/NotificationNames":"NotificationNames","./global/item_generator":"item_generator"}],util:[function(e,t,i){"use strict";cc._RF.push(t,"b90b7nRRttJm61sf8gPxRkK","util");var n=e("./NotificationNames");cc.Class({extends:cc.Component,properties:{loading:{default:null,type:cc.Prefab},msg_hint:{default:null,type:cc.Prefab},frm_tip:{default:null,type:cc.Prefab}},initProperties:function(){window.Global={},this.initNotification(),cc.sys.isNative?this.gameinfo={platform:"HYQP",version:"hyqp_2.0.2",login_tel:!1,login_wx:!0,isChildMode:!1}:this.gameinfo={platform:"HYQP",version:"hyqp_2.0.2",login_tel:!0,login_wx:!1,isChildMode:!1},cc.sys.isNative&&jsb.Device.setKeepScreenOn(!0),this.PREFAB_DATING_FRM_URL="Prefabs/dating/",this.PREFAB_DATING_ITEM_URL="Prefabs/dating/item/",this.DATING_ZINDEX_BG_PARTICLE=100,this.DATING_ZINDEX_FRM=200,this.DATING_ZINDEX_LOADING=300,this.DATING_ZINDEX_GAMENODE=400,this.DATING_ZINDEX_UPDATE=500,this.DATING_ZINDEX_MSG_HINT=1e3,this.DATING_ZINDEX_RESTART_LOGIN=9999,this.setting=JSON.parse(cc.sys.localStorage.getItem("volumeSetting")),this.setting||(this.setting={music:1,musicOn:1,sound:1,soundOn:1,dialect:1,screenIndent:0}),this.pokerBgSet=JSON.parse(cc.sys.localStorage.getItem("pokerBgSet")),this.gameBgSet=JSON.parse(cc.sys.localStorage.getItem("gameBgSet"))||{},this.MAX_WIDTH_CHANGE=50,this.gameNameArr={3:"\u6cc9\u5dde\u9ebb\u5c06",4:"\u5341\u4e09\u6c34"},this.moneyTypeArr={roomcard:{name:"\u94bb\u77f3",value:1},coins:{name:"\u91d1\u5e01",value:2},score:{name:"\u79ef\u5206",value:3},yuanbao:{name:"\u725b\u8c46",value:4}},this.gameVersion={}},resize:function(){var e=cc.find("Canvas").getComponent(cc.Canvas);this.curDR||(this.curDR=e.designResolution);var t=this.curDR,i=cc.view.getFrameSize(),n=i.width,o=i.height,a=n,c=o;n/o>t.width/t.height?a=(c=t.height)*n/o:c=o/n*(a=t.width),e.designResolution=cc.size(a,c),e.node.width=a,e.node.height=c,e.node.emit("resize")},changeScreenIndent:function(e){for(var t=cc.find("Canvas"),i=0;i<t.childrenCount;i++){var n=t.children[i].getComponent(cc.Widget);n&&this.resetWidget(n,e)}},resetWidget:function(e,t){var i=!1;if(e.isAlignLeft&&(void 0==e.node.m_widgetLeft&&(e.node.m_widgetLeft=e.left),e.left=e.node.m_widgetLeft+t*this.MAX_WIDTH_CHANGE,i=!0),e.isAlignRight&&(void 0==e.node.m_widgetRight&&(e.node.m_widgetRight=e.right),e.right=e.node.m_widgetRight+t*this.MAX_WIDTH_CHANGE,i=!0),i)for(var n=e.node.getComponentsInChildren(cc.Widget),o=0;o<n.length;o++)n[o].node&&n[o].updateAlignment()},initNotification:function(){window.Notification={_eventMap:[],on:function(e,t,i){void 0===this._eventMap[e]&&(this._eventMap[e]=[]),this._eventMap[e].push({callback:t,target:i})},emit:function(e,t){var i=this._eventMap[e];if(void 0!==i)for(var n=0;n<i.length;n++){var o=i[n];o&&o.callback.call(o.target,t)}},off:function(e,t){var i=this._eventMap[e];if(void 0!==i)for(var n=0;n<i.length;n++){var o=i[n];if(o&&o.callback===t){i[n]=void 0;break}}},offType:function(e){this._eventMap[e]=void 0}}},mySetTimeout:function(e,t){var i=setTimeout(e,t);return this.timeoutArr||(this.timeoutArr=[]),this.timeoutArr.push(i),i},clearAllTimeout:function(){if(this.timeoutArr){for(var e=0;e<this.timeoutArr.length;e++)clearTimeout(this.timeoutArr[e]);this.timeoutArr=[]}},mySetInterval:function(e,t){var i=setInterval(e,t);return this.intervalArr||(this.intervalArr=[]),this.intervalArr.push(i),i},clearAllInterval:function(){if(this.intervalArr){for(var e=0;e<this.intervalArr.length;e++)clearInterval(this.intervalArr[e]);this.intervalArr=[]}},clearAllTimer:function(){this.clearAllTimeout(),this.clearAllInterval()},mySchedule:function(e,t,i,n,o){cc.director.getScheduler().schedule(e,t,i,n,o,!1)},destroyAllMySchedule:function(){var e=cc.director.getScheduler();e.unscheduleAllWithMinPriority(e.PRIORITY_NON_SYSTEM_MIN)},loadPrefab:function(e,t){var i=cc.loader.getRes(e,cc.Prefab);i?t&&t(i):cc.loader.loadRes(e,cc.Prefab,function(e,i){e?t&&t(null):t&&t(i)})},loadPrefabObj:function(e,t){var i=cc.loader.getRes(e,cc.Prefab);if(i){var n=cc.instantiate(i);t&&t(n)}else cc.loader.loadRes(e,cc.Prefab,function(e,i){if(e)t&&t(null);else{var n=cc.instantiate(i);t&&t(n)}})},playMusic:function(e){var t=this;cc.loader.loadRes(e,cc.AudioClip,function(e,i){cc.audioEngine.playMusic(i,!0),t.changeMusicVolume()})},changeMusicVolume:function(){this.setting.musicOn?cc.audioEngine.setMusicVolume(this.setting.music):cc.audioEngine.setMusicVolume(0)},playSound_buttonClick:function(){this.playSound("Sounds/sound_hall_normal")},playSound:function(e){var t=this;cc.loader.loadRes(e,cc.AudioClip,function(i,n){console.log("\u64ad\u653e\u97f3\u9891:url="+e),i||1==t.setting.soundOn&&t.setting.sound>0&&cc.audioEngine.playEffect(n,!1)})},findValFromArray:function(e,t){var i=!1;"number"==typeof t&&(t=t.toString());for(var n=0;n<e.length;n++)if(e[n].toString()==t){i=!0;break}return i},showFrm:function(e,t){if(e.active=!0,t){var i=e.getChildByName("bg");i&&(i.scale=.2,i.runAction(cc.scaleTo(.1,1)))}},closeFrm:function(e){e.active=!1},getFrmTipNode:function(){return cc.instantiate(this.frm_tip)},hideFrmTip:function(e){e.active=!1,e.destroy()},initListNode:function(e,t,i,n){for(var o=0;o<t.length;o++){var a=null;o<e.children.length?a=e.children[o]:(a=cc.instantiate(i),e.addChild(a)),n&&n(a,o),a.active=!0}for(var c=t.length;c<e.children.length;c++)e.children[c].active=!1},convertPos:function(e,t,i){return t.convertToNodeSpace(e.convertToWorldSpace(i))},setHeadimg:function(e,t,i,n){var o=this;if(""!=t){if(i&&this.cacheHeadimg&&this.cacheHeadimg[t])return e.getComponent(cc.Sprite).spriteFrame=this.cacheHeadimg[t],void(n&&n());cc.loader.load(t,function(a,c){if(!a)try{var s=new cc.SpriteFrame(c,cc.Rect(0,0,c.width,c.height));e.getComponent(cc.Sprite).spriteFrame=s,i&&(o.cacheHeadimg||(o.cacheHeadimg={}),o.cacheHeadimg[t]=s),n&&n()}catch(e){}})}},getNodeIndex:function(e,t){return e.substring(t.length)},copy:function(e){this.playSound_buttonClick();var t=e.getComponent(cc.Label).string;console.log("\u590d\u5236---"+t),cc.sys.isNative?(jsb.copyTextToClipboard(t),cc.global.util.tipMsg("\u590d\u5236\u6210\u529f")):cc.global.util.tipMsg("\u6682\u4e0d\u652f\u6301\u590d\u5236")},callTelphone:function(e){this.playSound_buttonClick();var t=e.getComponent(cc.Label).string;console.log("\u62e8\u6253\u7535\u8bdd---"+t),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org.cocos2dx.javascript.AppActivity","callPhone","(Ljava/lang/String;)V",t):cc.sys.os==cc.sys.OS_IOS?jsb.reflection.callStaticMethod("JsUseOcTool","callPhone:",t):cc.global.util.tipMsg("\u6682\u4e0d\u652f\u6301\u62e8\u6253")},tipMsg_notOpen:function(){this.tipMsg("\u6682\u672a\u5f00\u653e,\u656c\u8bf7\u671f\u5f85")},tipMsg_connectErr:function(){this.tipMsg("\u7f51\u7edc\u5f02\u5e38,\u8bf7\u91cd\u8bd5")},tipMsg:function(e){if(void 0!==e&&null!=e&&""!=e){var t=cc.instantiate(this.msg_hint);t.getComponentInChildren(cc.Label).string=e,cc.find("Canvas").addChild(t),t.zIndex=this.DATING_ZINDEX_MSG_HINT,t.getComponent(cc.Animation).play()}},showAlert:function(e,t){if(cc.find("Canvas/loading"))t=!1;else{var i=cc.instantiate(this.loading);cc.find("Canvas").addChild(i),i.zIndex=this.DATING_ZINDEX_LOADING}t?cc.find("Canvas/loading").getComponent("loading").hideLoading():cc.find("Canvas/loading").getComponent("loading").showLoading(),void 0!==e&&null==e&&""!=e||(e="\u6b63\u5728\u52a0\u8f7d"),cc.find("Canvas/loading/layout/label").getComponent(cc.Label).string=e},closeAlert:function(){cc.find("Canvas/loading")&&cc.find("Canvas/loading").destroy()},restartLogin:function(e){this._isRestartLoginTip||(this._isRestartLoginTip=!0,e||(e="\u6570\u636e\u5f02\u5e38,\u8bf7\u91cd\u65b0\u767b\u9646"),console.log("--\u6253\u5f00\u63d0\u793a\u5f39\u7a97--"),cc.global.pop_mgr.showFrm({name:"frm_tip_new",showAnim:!1,closeAnim:!1,showSound:!1,closeSound:!1,zIndex:this.DATING_ZINDEX_RESTART_LOGIN,customData:{msg:e,maskClose:!1,hasClose:!1,btns:[{name:"\u786e\u5b9a",onClick:function(){cc.global.util.playSound_buttonClick(),cc.director.loadScene("login")}}]}}))},onUserLogin:function(e){console.log("------\u63a5\u6536\u5230\u767b\u5f55\u56de\u8c03!!---------"),console.log(e),cc.find("Canvas").getComponent("login").onUserLogin(e)},onShareResult:function(e){Notification.emit(n.NotificationNames.ON_SHARE_RESULT,e)},createConnect:function(e,t){var i=this;cc.global.net.connect(function(){console.log("connectOK"),e?cc.global.net.send("checkUser"):t&&t()},function(){console.log("connectError")},function(){console.log("\u6b63\u5728\u91cd\u8fde..."),i.createConnect(!0)})},getSceneNameFromGid:function(e){var t="dating";switch(e){case 0:t="dating";break;case 3:t="game_mj";break;case 4:t="game_sss"}return t},enterRoomPush:function(e){if(1==e.code){console.log("\u5efa\u7acb\u623f\u95f4,\u63a5\u6536\u53c2\u6570\u4e3a:"+JSON.stringify(e));var t=cc.global.util.getSceneNameFromGid(e.gid);this._roomData=e.data,cc.global.net._dispatchEventHandel=null,cc.director.loadScene(t)}else console.log("msg:"+e.msg),null!=cc.find("Canvas").getComponent("dating")?(cc.global.util.tipMsg(e.msg),cc.global.util.closeAlert()):this.backHall()},processId:function(e){if(e){for(var t=e.split(""),i="",n=0;n<t.length-2;n++)i+="*";t.splice(1,t.length-2,i);return t.join("")}},backHall:function(){console.log("\u8fd4\u56de\u5927\u5385"),cc.global.net._dispatchEventHandel=null,this.eventList=[],this._roomData=null,cc.director.loadScene("dating")},getCurrentTime:function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())+" "+(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())}}),cc._RF.pop()},{"./NotificationNames":"NotificationNames"}]},{},["animController","circle","circlelist","CircleJoinRoomUserItem","CircleRoleBtn","CircleRoleTag","CircleRoom","CircleRoomType","CircleUserLabel","MenuList","RoomTypeBtn","ScrollViewPlus","ScrollViewPlusItem","TelStatusController","ThoundsAbbr","UserLabel","circleMemberController","gameMoneyIcon","moneyController","spineChange","dating","pop_base","frm_auth","frm_bindTel","frm_circleBackHpRec","frm_circleConfig","frm_circleFund","frm_circleFundRec","frm_circleHpHistory","frm_circleJoinRoom","frm_circleMember","frm_circleMemberDetail","frm_circleMsg","frm_circleNameChange","frm_circlePartner","frm_circleSetNotice","frm_create","frm_createCircle","frm_createTea","frm_fenxiang","frm_input","frm_join","frm_kefu","frm_mall","frm_notice","frm_pay","frm_personal","frm_shezhi","frm_sssReplay","frm_teaDaoru","frm_teaJar","frm_teaMember","frm_teaPersonZhanji","frm_teaSetting","frm_teaZhanji","frm_tip_new","frm_wanfa","frm_xiaoxi","frm_zhanji","frm_zhanjiDetail","frm_tip","Http","Net","NotificationNames","PdkConstant","game","item_generator","pop_mgr","room","socket-io","util","hall_shisanshui","HotUpdate-game","HotUpdate","initSetting","loading","login","main_hall_douniu","anim_kaijin","mjGameUtil","mjReplay","mjreplay_kaijin","mjgame","new_hall_pdk","preloadDating","canOut","paixingdefine","sssPxUtil","sssReplay","startHotUpdate","tea"]);